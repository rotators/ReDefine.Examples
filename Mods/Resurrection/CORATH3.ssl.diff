diff --git a/Mods/Resurrection/Original/CORATH3.ssl b/Mods/Resurrection/ReDefine/CORATH3.ssl
index 5dffc8e..ebf6b08 100644
--- a/Mods/Resurrection/Original/CORATH3.ssl
+++ b/Mods/Resurrection/ReDefine/CORATH3.ssl
@@ -74,12 +74,12 @@ begin
             return 1;
         end
     end
-    if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+    if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
         if (tile_distance_objs(self_obj, party_member_obj(16777779)) <= 5) then begin
             return 1;
         end
     end
-    if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+    if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
         if (tile_distance_objs(self_obj, party_member_obj(16777811)) <= 5) then begin
             return 1;
         end
@@ -94,7 +94,7 @@ begin
             return 1;
         end
     end
-    if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+    if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
         if (tile_distance_objs(self_obj, party_member_obj(16777814)) <= 5) then begin
             return 1;
         end
@@ -228,21 +228,21 @@ begin
             end
         end
     end
-    if ((global_var(841) == 3) and (map_var(3) == 0)) then begin
+    if ((global_var(GVAR_C_STRIKE_IN_MINE) == 3) and (map_var(3) == 0)) then begin
         call Generate_Rebelion();
         game_ui_disable;
         add_timer_event(self_obj, 0, 1);
     end
-    if (global_var(849) == 5) then begin
+    if (global_var(GVAR_C_RING_POINTER) == 5) then begin
         game_ui_disable;
         add_timer_event(self_obj, 0, 50);
     end
-    if ((global_var(848) == 1) and not((map_var(0) bwand 64) != 0)) then begin
-        strclovek := create_object_sid(16777898, 9090, 0, 1573);
+    if ((global_var(GVAR_NESTOR_LEAVED_CORATH) == 1) and not((map_var(0) bwand 64) != 0)) then begin
+        strclovek := create_object_sid(16777898, 9090, 0, SCRIPT_CSTRYZOL);
         anim(strclovek, 1000, 2);
-        restock_obj := create_object_sid(242, 0, 0, -1);
+        restock_obj := create_object(242, 0, 0);
         add_mult_objs_to_inven(strclovek, restock_obj, 1);
-        restock_obj := create_object_sid(95, 0, 0, -1);
+        restock_obj := create_object(95, 0, 0);
         add_mult_objs_to_inven(strclovek, restock_obj, 1);
         wield_obj_critter(strclovek, obj_carrying_pid_obj(strclovek, 242));
         set_map_var(0, map_var(0) bwor 64);
@@ -343,13 +343,13 @@ begin
             if (sequence == 1) then begin
                 set_obj_visibility(dude_obj, 1);
                 move_to(dude_obj, 8892, 0);
-                metarule3(108, 10293, 0, 0);
-                set_global_var(632, global_var(632) bwor 64);
+                tile_set_center(10293);
+                set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwor 64);
                 if (party_member_obj(16777729) != 0) then begin
                     if (party_member_obj(16777729)) then begin
-                        if (has_trait(1, party_member_obj(16777729), 666)) then begin
+                        if (obj_is_visible_flag(party_member_obj(16777729))) then begin
                             debug_msg("set party member hidden: " + obj_name(party_member_obj(16777729)));
-                            set_global_var(632, global_var(632) bwor 1);
+                            set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwor 1);
                             set_obj_visibility(party_member_obj(16777729), 1);
                         end
                         else begin
@@ -357,11 +357,11 @@ begin
                         end
                     end
                 end
-                if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+                if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                     if (party_member_obj(16777779)) then begin
-                        if (has_trait(1, party_member_obj(16777779), 666)) then begin
+                        if (obj_is_visible_flag(party_member_obj(16777779))) then begin
                             debug_msg("set party member hidden: " + obj_name(party_member_obj(16777779)));
-                            set_global_var(632, global_var(632) bwor 2);
+                            set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwor 2);
                             set_obj_visibility(party_member_obj(16777779), 1);
                         end
                         else begin
@@ -369,11 +369,11 @@ begin
                         end
                     end
                 end
-                if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+                if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                     if (party_member_obj(16777811)) then begin
-                        if (has_trait(1, party_member_obj(16777811), 666)) then begin
+                        if (obj_is_visible_flag(party_member_obj(16777811))) then begin
                             debug_msg("set party member hidden: " + obj_name(party_member_obj(16777811)));
-                            set_global_var(632, global_var(632) bwor 4);
+                            set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwor 4);
                             set_obj_visibility(party_member_obj(16777811), 1);
                         end
                         else begin
@@ -383,9 +383,9 @@ begin
                 end
                 if (party_member_obj(16777812) != 0) then begin
                     if (party_member_obj(16777812)) then begin
-                        if (has_trait(1, party_member_obj(16777812), 666)) then begin
+                        if (obj_is_visible_flag(party_member_obj(16777812))) then begin
                             debug_msg("set party member hidden: " + obj_name(party_member_obj(16777812)));
-                            set_global_var(632, global_var(632) bwor 8);
+                            set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwor 8);
                             set_obj_visibility(party_member_obj(16777812), 1);
                         end
                         else begin
@@ -395,9 +395,9 @@ begin
                 end
                 if (party_member_obj(16777813) != 0) then begin
                     if (party_member_obj(16777813)) then begin
-                        if (has_trait(1, party_member_obj(16777813), 666)) then begin
+                        if (obj_is_visible_flag(party_member_obj(16777813))) then begin
                             debug_msg("set party member hidden: " + obj_name(party_member_obj(16777813)));
-                            set_global_var(632, global_var(632) bwor 16);
+                            set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwor 16);
                             set_obj_visibility(party_member_obj(16777813), 1);
                         end
                         else begin
@@ -405,11 +405,11 @@ begin
                         end
                     end
                 end
-                if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+                if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                     if (party_member_obj(16777814)) then begin
-                        if (has_trait(1, party_member_obj(16777814), 666)) then begin
+                        if (obj_is_visible_flag(party_member_obj(16777814))) then begin
                             debug_msg("set party member hidden: " + obj_name(party_member_obj(16777814)));
-                            set_global_var(632, global_var(632) bwor 32);
+                            set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwor 32);
                             set_obj_visibility(party_member_obj(16777814), 1);
                         end
                         else begin
@@ -420,7 +420,7 @@ begin
                 add_timer_event(self_obj, game_ticks(1), 1);
             end
             if (sequence == 2) then begin
-                metarule3(108, 10293, 0, 0);
+                tile_set_center(10293);
                 anim(dude_obj, 1000, 2);
                 animate_move_obj_to_tile(miner1, 10692, 0);
                 reg_anim_func(2, police4);
@@ -526,7 +526,7 @@ begin
                 add_timer_event(self_obj, game_ticks(3), 1);
             end
             if (sequence == 6) then begin
-                float_msg(police5, message_str(1532, 500), 2);
+                float_msg(police5, mstr(500), FLOAT_MSG_RED);
                 kill_critter(miner1, 34);
                 kill_critter(miner2, 24);
                 kill_critter(miner3, 34);
@@ -543,13 +543,13 @@ begin
                 add_timer_event(self_obj, game_ticks(1), 1);
             end
             if (sequence == 8) then begin
-                set_global_var(632, global_var(632) bwand (-1 - 64));
+                set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 64));
                 if (party_member_obj(16777729) != 0) then begin
                     if (party_member_obj(16777729)) then begin
-                        if (has_trait(1, party_member_obj(16777729), 666) == 0) then begin
-                            if ((global_var(632) bwand 1) != 0) then begin
+                        if (obj_is_visible_flag(party_member_obj(16777729)) == 0) then begin
+                            if ((global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand 1) != 0) then begin
                                 debug_msg("unhiding party member " + obj_name(party_member_obj(16777729)));
-                                set_global_var(632, global_var(632) bwand (-1 - 1));
+                                set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 1));
                                 set_obj_visibility(party_member_obj(16777729), 0);
                             end
                             else begin
@@ -558,18 +558,18 @@ begin
                         end
                         else begin
                             debug_msg("unhiding party member " + obj_name(party_member_obj(16777729)));
-                            set_global_var(632, global_var(632) bwand (-1 - 1));
+                            set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 1));
                             set_obj_visibility(party_member_obj(16777729), 0);
                             debug_msg("PARTY.H:::: party member wasn't hidden.. clearing my state");
                         end
                     end
                 end
-                if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+                if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                     if (party_member_obj(16777779)) then begin
-                        if (has_trait(1, party_member_obj(16777779), 666) == 0) then begin
-                            if ((global_var(632) bwand 2) != 0) then begin
+                        if (obj_is_visible_flag(party_member_obj(16777779)) == 0) then begin
+                            if ((global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand 2) != 0) then begin
                                 debug_msg("unhiding party member " + obj_name(party_member_obj(16777779)));
-                                set_global_var(632, global_var(632) bwand (-1 - 2));
+                                set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 2));
                                 set_obj_visibility(party_member_obj(16777779), 0);
                             end
                             else begin
@@ -578,18 +578,18 @@ begin
                         end
                         else begin
                             debug_msg("unhiding party member " + obj_name(party_member_obj(16777779)));
-                            set_global_var(632, global_var(632) bwand (-1 - 2));
+                            set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 2));
                             set_obj_visibility(party_member_obj(16777779), 0);
                             debug_msg("PARTY.H:::: party member wasn't hidden.. clearing my state");
                         end
                     end
                 end
-                if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+                if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                     if (party_member_obj(16777811)) then begin
-                        if (has_trait(1, party_member_obj(16777811), 666) == 0) then begin
-                            if ((global_var(632) bwand 4) != 0) then begin
+                        if (obj_is_visible_flag(party_member_obj(16777811)) == 0) then begin
+                            if ((global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand 4) != 0) then begin
                                 debug_msg("unhiding party member " + obj_name(party_member_obj(16777811)));
-                                set_global_var(632, global_var(632) bwand (-1 - 4));
+                                set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 4));
                                 set_obj_visibility(party_member_obj(16777811), 0);
                             end
                             else begin
@@ -598,7 +598,7 @@ begin
                         end
                         else begin
                             debug_msg("unhiding party member " + obj_name(party_member_obj(16777811)));
-                            set_global_var(632, global_var(632) bwand (-1 - 4));
+                            set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 4));
                             set_obj_visibility(party_member_obj(16777811), 0);
                             debug_msg("PARTY.H:::: party member wasn't hidden.. clearing my state");
                         end
@@ -606,10 +606,10 @@ begin
                 end
                 if (party_member_obj(16777812) != 0) then begin
                     if (party_member_obj(16777812)) then begin
-                        if (has_trait(1, party_member_obj(16777812), 666) == 0) then begin
-                            if ((global_var(632) bwand 8) != 0) then begin
+                        if (obj_is_visible_flag(party_member_obj(16777812)) == 0) then begin
+                            if ((global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand 8) != 0) then begin
                                 debug_msg("unhiding party member " + obj_name(party_member_obj(16777812)));
-                                set_global_var(632, global_var(632) bwand (-1 - 8));
+                                set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 8));
                                 set_obj_visibility(party_member_obj(16777812), 0);
                             end
                             else begin
@@ -618,7 +618,7 @@ begin
                         end
                         else begin
                             debug_msg("unhiding party member " + obj_name(party_member_obj(16777812)));
-                            set_global_var(632, global_var(632) bwand (-1 - 8));
+                            set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 8));
                             set_obj_visibility(party_member_obj(16777812), 0);
                             debug_msg("PARTY.H:::: party member wasn't hidden.. clearing my state");
                         end
@@ -626,10 +626,10 @@ begin
                 end
                 if (party_member_obj(16777813) != 0) then begin
                     if (party_member_obj(16777813)) then begin
-                        if (has_trait(1, party_member_obj(16777813), 666) == 0) then begin
-                            if ((global_var(632) bwand 16) != 0) then begin
+                        if (obj_is_visible_flag(party_member_obj(16777813)) == 0) then begin
+                            if ((global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand 16) != 0) then begin
                                 debug_msg("unhiding party member " + obj_name(party_member_obj(16777813)));
-                                set_global_var(632, global_var(632) bwand (-1 - 16));
+                                set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 16));
                                 set_obj_visibility(party_member_obj(16777813), 0);
                             end
                             else begin
@@ -638,18 +638,18 @@ begin
                         end
                         else begin
                             debug_msg("unhiding party member " + obj_name(party_member_obj(16777813)));
-                            set_global_var(632, global_var(632) bwand (-1 - 16));
+                            set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 16));
                             set_obj_visibility(party_member_obj(16777813), 0);
                             debug_msg("PARTY.H:::: party member wasn't hidden.. clearing my state");
                         end
                     end
                 end
-                if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+                if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                     if (party_member_obj(16777814)) then begin
-                        if (has_trait(1, party_member_obj(16777814), 666) == 0) then begin
-                            if ((global_var(632) bwand 32) != 0) then begin
+                        if (obj_is_visible_flag(party_member_obj(16777814)) == 0) then begin
+                            if ((global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand 32) != 0) then begin
                                 debug_msg("unhiding party member " + obj_name(party_member_obj(16777814)));
-                                set_global_var(632, global_var(632) bwand (-1 - 32));
+                                set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 32));
                                 set_obj_visibility(party_member_obj(16777814), 0);
                             end
                             else begin
@@ -658,7 +658,7 @@ begin
                         end
                         else begin
                             debug_msg("unhiding party member " + obj_name(party_member_obj(16777814)));
-                            set_global_var(632, global_var(632) bwand (-1 - 32));
+                            set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 32));
                             set_obj_visibility(party_member_obj(16777814), 0);
                             debug_msg("PARTY.H:::: party member wasn't hidden.. clearing my state");
                         end
@@ -666,98 +666,98 @@ begin
                 end
                 if (party_member_obj(16777729) != 0) then begin
                     if (party_member_obj(16777729) != 0) then begin
-                        if (has_trait(1, party_member_obj(16777729), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16777729))) then begin
+                            critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
-                if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+                if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                     if (party_member_obj(16777779) != 0) then begin
-                        if (has_trait(1, party_member_obj(16777779), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16777779))) then begin
+                            critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
-                if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+                if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                     if (party_member_obj(16777811) != 0) then begin
-                        if (has_trait(1, party_member_obj(16777811), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16777811))) then begin
+                            critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
                 if (party_member_obj(16777812) != 0) then begin
                     if (party_member_obj(16777812) != 0) then begin
-                        if (has_trait(1, party_member_obj(16777812), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16777812))) then begin
+                            critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
-                if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+                if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                     if (party_member_obj(16777814) != 0) then begin
-                        if (has_trait(1, party_member_obj(16777814), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16777814))) then begin
+                            critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
                 if (party_member_obj(16777748) != 0) then begin
                     if (party_member_obj(16777748) != 0) then begin
-                        if (has_trait(1, party_member_obj(16777748), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16777748))) then begin
+                            critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
                 if (party_member_obj(16778017) != 0) then begin
                     if (party_member_obj(16778017) != 0) then begin
-                        if (has_trait(1, party_member_obj(16778017), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16778017))) then begin
+                            critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
                 if (party_member_obj(16778016) != 0) then begin
                     if (party_member_obj(16778016) != 0) then begin
-                        if (has_trait(1, party_member_obj(16778016), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16778016))) then begin
+                            critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
                 if (party_member_obj(16778049) != 0) then begin
                     if (party_member_obj(16778049) != 0) then begin
-                        if (has_trait(1, party_member_obj(16778049), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16778049))) then begin
+                            critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
                 if (party_member_obj(16778050) != 0) then begin
                     if (party_member_obj(16778050) != 0) then begin
-                        if (has_trait(1, party_member_obj(16778050), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16778050))) then begin
+                            critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
                 if (party_member_obj(16778051) != 0) then begin
                     if (party_member_obj(16778051) != 0) then begin
-                        if (has_trait(1, party_member_obj(16778051), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16778051))) then begin
+                            critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
                 if (party_member_obj(16777294) != 0) then begin
                     if (party_member_obj(16777294) != 0) then begin
-                        if (has_trait(1, party_member_obj(16777294), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16777294))) then begin
+                            critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
                 if (party_member_obj(16777729) != 0) then begin
                     anim(party_member_obj(16777729), 1000, 2);
                 end
-                if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+                if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                     anim(party_member_obj(16777779), 1000, 2);
                 end
-                if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+                if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                     anim(party_member_obj(16777811), 1000, 2);
                 end
-                if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+                if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                     anim(party_member_obj(16777814), 1000, 2);
                 end
                 if (party_member_obj(16778017) != 0) then begin
@@ -830,141 +830,141 @@ begin
             end
         end
     end
-    if (global_var(849) == 5) then begin
+    if (global_var(GVAR_C_RING_POINTER) == 5) then begin
         if (fixed_param == 50) then begin
             sequence2 := sequence2 + 1;
         end
         if (sequence2 == 1) then begin
-            cedrick := create_object_sid(16777897, 14718, 0, -1);
+            cedrick := create_object(16777897, 14718, 0);
             anim(cedrick, 1000, 5);
             anim(Ademar_obj, 1000, 2);
             move_to(dude_obj, 15120, 0);
             anim(dude_obj, 1000, 5);
             if (party_member_obj(16777729) != 0) then begin
                 if (party_member_obj(16777729) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777729), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777729))) then begin
+                        critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+            if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                 if (party_member_obj(16777779) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777779), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777779))) then begin
+                        critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+            if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                 if (party_member_obj(16777811) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777811), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777811))) then begin
+                        critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777812) != 0) then begin
                 if (party_member_obj(16777812) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777812), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777812))) then begin
+                        critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+            if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                 if (party_member_obj(16777814) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777814), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777814))) then begin
+                        critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777748) != 0) then begin
                 if (party_member_obj(16777748) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777748), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777748))) then begin
+                        critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778017) != 0) then begin
                 if (party_member_obj(16778017) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778017), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778017))) then begin
+                        critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778016) != 0) then begin
                 if (party_member_obj(16778016) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778016), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778016))) then begin
+                        critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778049) != 0) then begin
                 if (party_member_obj(16778049) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778049), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778049))) then begin
+                        critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778050) != 0) then begin
                 if (party_member_obj(16778050) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778050), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778050))) then begin
+                        critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778051) != 0) then begin
                 if (party_member_obj(16778051) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778051), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778051))) then begin
+                        critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777294) != 0) then begin
                 if (party_member_obj(16777294) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777294), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777294))) then begin
+                        critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            metarule3(108, 14118, 0, 0);
+            tile_set_center(14118);
             add_timer_event(self_obj, game_ticks(2), 50);
         end
         if (sequence2 == 2) then begin
-            float_msg(Ademar_obj, message_str(1532, 1000), 2);
+            float_msg(Ademar_obj, mstr(1000), FLOAT_MSG_RED);
             add_timer_event(self_obj, game_ticks(6), 50);
         end
         if (sequence2 == 3) then begin
-            float_msg(cedrick, message_str(1532, 1100), 8);
+            float_msg(cedrick, mstr(1100), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(6), 50);
         end
         if (sequence2 == 4) then begin
-            float_msg(Ademar_obj, message_str(1532, 1200), 2);
+            float_msg(Ademar_obj, mstr(1200), FLOAT_MSG_RED);
             add_timer_event(self_obj, game_ticks(9), 50);
         end
         if (sequence2 == 5) then begin
-            float_msg(dude_obj, message_str(1532, 1300), 9);
+            float_msg(dude_obj, mstr(1300), FLOAT_MSG_WHITE);
             add_timer_event(self_obj, game_ticks(4), 50);
         end
         if (sequence2 == 6) then begin
-            float_msg(Ademar_obj, message_str(1532, 1400), 2);
+            float_msg(Ademar_obj, mstr(1400), FLOAT_MSG_RED);
             add_timer_event(self_obj, game_ticks(6), 50);
         end
         if (sequence2 == 7) then begin
-            float_msg(cedrick, message_str(1532, 1500), 8);
+            float_msg(cedrick, mstr(1500), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(8), 50);
         end
         if (sequence2 == 8) then begin
-            float_msg(Ademar_obj, message_str(1532, 1600), 2);
+            float_msg(Ademar_obj, mstr(1600), FLOAT_MSG_RED);
             add_timer_event(self_obj, game_ticks(5), 50);
         end
         if (sequence2 == 9) then begin
-            float_msg(cedrick, message_str(1532, 1700), 8);
+            float_msg(cedrick, mstr(1700), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(5), 50);
         end
         if (sequence2 == 10) then begin
-            float_msg(Ademar_obj, message_str(1532, 1800), 2);
+            float_msg(Ademar_obj, mstr(1800), FLOAT_MSG_RED);
             add_timer_event(self_obj, game_ticks(7), 50);
         end
         if (sequence2 == 11) then begin
-            float_msg(cedrick, message_str(1532, 1900), 8);
+            float_msg(cedrick, mstr(1900), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(7), 50);
         end
         if (sequence2 == 12) then begin
@@ -980,57 +980,57 @@ end
 procedure Generate_Rebelion
 begin
     play_sfx("whd1fxx1");
-    miner1 := create_object_sid(16777880, 9092, 0, 1570);
+    miner1 := create_object_sid(16777880, 9092, 0, SCRIPT_CHORNIK2);
     anim(miner1, 1000, 2);
-    restock_obj := create_object_sid(6, 0, 0, -1);
+    restock_obj := create_object(6, 0, 0);
     add_mult_objs_to_inven(miner1, restock_obj, 1);
-    miner2 := create_object_sid(16777878, 10093, 0, 1570);
+    miner2 := create_object_sid(16777878, 10093, 0, SCRIPT_CHORNIK2);
     anim(miner2, 1000, 2);
-    restock_obj := create_object_sid(6, 0, 0, -1);
+    restock_obj := create_object(6, 0, 0);
     add_mult_objs_to_inven(miner2, restock_obj, 1);
-    miner3 := create_object_sid(16777879, 11693, 0, 1570);
+    miner3 := create_object_sid(16777879, 11693, 0, SCRIPT_CHORNIK2);
     anim(miner3, 1000, 5);
-    restock_obj := create_object_sid(6, 0, 0, -1);
+    restock_obj := create_object(6, 0, 0);
     add_mult_objs_to_inven(miner3, restock_obj, 1);
-    restock_obj := create_object_sid(22, 0, 0, -1);
+    restock_obj := create_object(22, 0, 0);
     add_mult_objs_to_inven(miner3, restock_obj, 1);
-    miner4 := create_object_sid(16777879, 9897, 0, 1570);
+    miner4 := create_object_sid(16777879, 9897, 0, SCRIPT_CHORNIK2);
     anim(miner4, 1000, 2);
-    restock_obj := create_object_sid(6, 0, 0, -1);
+    restock_obj := create_object(6, 0, 0);
     add_mult_objs_to_inven(miner4, restock_obj, 1);
-    restock_obj := create_object_sid(23, 0, 0, -1);
+    restock_obj := create_object(23, 0, 0);
     add_mult_objs_to_inven(miner4, restock_obj, 1);
-    miner5 := create_object_sid(16777878, 9699, 0, 1570);
+    miner5 := create_object_sid(16777878, 9699, 0, SCRIPT_CHORNIK2);
     anim(miner5, 1000, 0);
-    restock_obj := create_object_sid(6, 0, 0, -1);
+    restock_obj := create_object(6, 0, 0);
     add_mult_objs_to_inven(miner5, restock_obj, 1);
-    miner6 := create_object_sid(16777881, 10693, 0, 1570);
+    miner6 := create_object_sid(16777881, 10693, 0, SCRIPT_CHORNIK2);
     anim(miner6, 1000, 3);
-    miner7 := create_object_sid(16777879, 9690, 0, 1570);
+    miner7 := create_object_sid(16777879, 9690, 0, SCRIPT_CHORNIK2);
     anim(miner7, 1000, 3);
-    restock_obj := create_object_sid(6, 0, 0, -1);
+    restock_obj := create_object(6, 0, 0);
     add_mult_objs_to_inven(miner7, restock_obj, 1);
-    miner8 := create_object_sid(16777881, 9487, 0, 1570);
+    miner8 := create_object_sid(16777881, 9487, 0, SCRIPT_CHORNIK2);
     anim(miner8, 1000, 0);
-    police1 := create_object_sid(16777895, 9286, 0, 1571);
+    police1 := create_object_sid(16777895, 9286, 0, SCRIPT_CPOLICE);
     anim(police1, 1000, 3);
-    police2 := create_object_sid(16777895, 10691, 0, 1571);
+    police2 := create_object_sid(16777895, 10691, 0, SCRIPT_CPOLICE);
     anim(police2, 1000, 5);
-    police3 := create_object_sid(16777894, 9699, 0, 1571);
+    police3 := create_object_sid(16777894, 9699, 0, SCRIPT_CPOLICE);
     anim(police3, 1000, 1);
-    police4 := create_object_sid(16777894, 10695, 0, 1571);
+    police4 := create_object_sid(16777894, 10695, 0, SCRIPT_CPOLICE);
     anim(police4, 1000, 5);
-    police5 := create_object_sid(16777894, 11293, 0, 526);
+    police5 := create_object_sid(16777894, 11293, 0, SCRIPT_CPOLICE4);
     anim(police5, 1000, 5);
-    restock_obj := create_object_sid(18, 0, 0, -1);
+    restock_obj := create_object(18, 0, 0);
     add_mult_objs_to_inven(police1, restock_obj, 1);
-    restock_obj := create_object_sid(23, 0, 0, -1);
+    restock_obj := create_object(23, 0, 0);
     add_mult_objs_to_inven(police2, restock_obj, 1);
-    restock_obj := create_object_sid(18, 0, 0, -1);
+    restock_obj := create_object(18, 0, 0);
     add_mult_objs_to_inven(police3, restock_obj, 1);
-    restock_obj := create_object_sid(23, 0, 0, -1);
+    restock_obj := create_object(23, 0, 0);
     add_mult_objs_to_inven(police4, restock_obj, 1);
-    restock_obj := create_object_sid(23, 0, 0, -1);
+    restock_obj := create_object(23, 0, 0);
     add_mult_objs_to_inven(police5, restock_obj, 1);
     wield_obj_critter(police1, obj_carrying_pid_obj(police1, 18));
     wield_obj_critter(police2, obj_carrying_pid_obj(police2, 23));
@@ -1058,8 +1058,7 @@ begin
     reg_anim_func(1, 1);
     reg_anim_animate(miner7, 35, -1);
     reg_anim_func(3, 0);
-    float_msg(miner1, message_str(1532, 409), 2);
-    float_msg(miner2, message_str(1532, 410), 2);
-    float_msg(miner8, message_str(1532, 411), 2);
+    float_msg(miner1, mstr(409), FLOAT_MSG_RED);
+    float_msg(miner2, mstr(410), FLOAT_MSG_RED);
+    float_msg(miner8, mstr(411), FLOAT_MSG_RED);
 end
-
