diff --git a/Mods/Resurrection/Original/GHOUL0.ssl b/Mods/Resurrection/ReDefine/GHOUL0.ssl
index cbce63f..f1cf6b8 100644
--- a/Mods/Resurrection/Original/GHOUL0.ssl
+++ b/Mods/Resurrection/ReDefine/GHOUL0.ssl
@@ -55,12 +55,12 @@ begin
             return 1;
         end
     end
-    if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+    if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
         if (tile_distance_objs(self_obj, party_member_obj(16777779)) <= 5) then begin
             return 1;
         end
     end
-    if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+    if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
         if (tile_distance_objs(self_obj, party_member_obj(16777811)) <= 5) then begin
             return 1;
         end
@@ -75,7 +75,7 @@ begin
             return 1;
         end
     end
-    if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+    if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
         if (tile_distance_objs(self_obj, party_member_obj(16777814)) <= 5) then begin
             return 1;
         end
@@ -132,7 +132,7 @@ end
 
 procedure map_exit_p_proc
 begin
-    if ((global_var(954) != 0) and (global_var(929) == 0)) then begin
+    if ((global_var(GVAR_G_BASE_TIME_OF_DESTRUCTION) != 0) and (global_var(GVAR_G_ELEVATOR) == 0)) then begin
         script_overrides;
         gfade_out(600);
         call Set_ending_globals();
@@ -144,10 +144,10 @@ end
 
 procedure map_enter_p_proc
 begin
-    if (metarule(14, 0)) then begin
-        display_msg(message_str(386, 100 + (get_critter_stat(dude_obj, 34) == 1)));
+    if (map_first_run) then begin
+        display_mstr(100 + (dude_gender == 1));
         give_exp_points(10000);
-        display_msg(message_str(14, 100) + 10000 + message_str(14, 101));
+        display_msg(g_mstr(100) + 10000 + g_mstr(101));
         add_timer_event(self_obj, 5, 3);
     end
     if ((get_month >= 3) and (get_month < 5)) then begin
@@ -226,29 +226,29 @@ begin
             end
         end
     end
-    if (global_var(929) == 1) then begin
+    if (global_var(GVAR_G_ELEVATOR) == 1) then begin
         add_timer_event(self_obj, 1, 1);
     end
     else begin
         anim(dude_obj, 1000, 2);
     end
-    if (global_var(954) != 0) then begin
-        metarule3(100, self_obj, 9, 0);
+    if (global_var(GVAR_G_BASE_TIME_OF_DESTRUCTION) != 0) then begin
+        rm_fixed_timer_event(self_obj, 9);
         add_timer_event(self_obj, game_ticks(1), 9);
         set_exit_grids(0, 101, 0, 0, 0);
     end
     if (map_var(1) == 0) then begin
-        if (global_var(909) > 0) then begin
+        if (global_var(GVAR_MH_MUTANT_HUNTERS_ATACK_STATUS) > 0) then begin
             set_map_var(1, 1);
             call Create_hunters();
         end
-        if (global_var(909) == 1) then begin
-            set_global_var(930, 5);
+        if (global_var(GVAR_MH_MUTANT_HUNTERS_ATACK_STATUS) == 1) then begin
+            set_global_var(GVAR_G_HUNTERS_COUNTER, 5);
             call Wield_hunters();
         end
-        if (global_var(909) == 2) then begin
+        if (global_var(GVAR_MH_MUTANT_HUNTERS_ATACK_STATUS) == 2) then begin
             game_ui_disable;
-            gfade_out(1);
+            fade_out;
             add_timer_event(self_obj, 1, 2);
         end
     end
@@ -340,157 +340,157 @@ begin
         move_to(dude_obj, 20299, 0);
         anim(dude_obj, 1000, 2);
         if (party_member_obj(16777729) != 0) then begin
-            anim(party_member_obj(16777729), 1000, has_trait(1, dude_obj, 10));
+            anim(party_member_obj(16777729), 1000, obj_get_rot(dude_obj));
         end
-        if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
-            anim(party_member_obj(16777779), 1000, has_trait(1, dude_obj, 10));
+        if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
+            anim(party_member_obj(16777779), 1000, obj_get_rot(dude_obj));
         end
-        if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
-            anim(party_member_obj(16777811), 1000, has_trait(1, dude_obj, 10));
+        if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
+            anim(party_member_obj(16777811), 1000, obj_get_rot(dude_obj));
         end
-        if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
-            anim(party_member_obj(16777814), 1000, has_trait(1, dude_obj, 10));
+        if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
+            anim(party_member_obj(16777814), 1000, obj_get_rot(dude_obj));
         end
         if (party_member_obj(16778017) != 0) then begin
-            anim(party_member_obj(16778017), 1000, has_trait(1, dude_obj, 10));
+            anim(party_member_obj(16778017), 1000, obj_get_rot(dude_obj));
         end
         if (party_member_obj(16778016) != 0) then begin
-            anim(party_member_obj(16778016), 1000, has_trait(1, dude_obj, 10));
+            anim(party_member_obj(16778016), 1000, obj_get_rot(dude_obj));
         end
         if (party_member_obj(16778049) != 0) then begin
-            anim(party_member_obj(16778049), 1000, has_trait(1, dude_obj, 10));
+            anim(party_member_obj(16778049), 1000, obj_get_rot(dude_obj));
         end
         if (party_member_obj(16778050) != 0) then begin
-            anim(party_member_obj(16778050), 1000, has_trait(1, dude_obj, 10));
+            anim(party_member_obj(16778050), 1000, obj_get_rot(dude_obj));
         end
         if (party_member_obj(16778051) != 0) then begin
-            anim(party_member_obj(16778051), 1000, has_trait(1, dude_obj, 10));
+            anim(party_member_obj(16778051), 1000, obj_get_rot(dude_obj));
         end
         if (party_member_obj(16777812) != 0) then begin
-            anim(party_member_obj(16777812), 1000, has_trait(1, dude_obj, 10));
+            anim(party_member_obj(16777812), 1000, obj_get_rot(dude_obj));
         end
         if (party_member_obj(16777729) != 0) then begin
             if (party_member_obj(16777729) != 0) then begin
-                if (has_trait(1, party_member_obj(16777729), 666)) then begin
-                    critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(tile_num(dude_obj), has_trait(1, dude_obj, 10), 2), elevation(dude_obj));
+                if (obj_is_visible_flag(party_member_obj(16777729))) then begin
+                    critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(dude_tile, obj_get_rot(dude_obj), 2), dude_elevation);
                 end
             end
         end
-        if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+        if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
             if (party_member_obj(16777779) != 0) then begin
-                if (has_trait(1, party_member_obj(16777779), 666)) then begin
-                    critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(tile_num(dude_obj), has_trait(1, dude_obj, 10), 2), elevation(dude_obj));
+                if (obj_is_visible_flag(party_member_obj(16777779))) then begin
+                    critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(dude_tile, obj_get_rot(dude_obj), 2), dude_elevation);
                 end
             end
         end
-        if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+        if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
             if (party_member_obj(16777811) != 0) then begin
-                if (has_trait(1, party_member_obj(16777811), 666)) then begin
-                    critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(tile_num(dude_obj), has_trait(1, dude_obj, 10), 2), elevation(dude_obj));
+                if (obj_is_visible_flag(party_member_obj(16777811))) then begin
+                    critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(dude_tile, obj_get_rot(dude_obj), 2), dude_elevation);
                 end
             end
         end
         if (party_member_obj(16777812) != 0) then begin
             if (party_member_obj(16777812) != 0) then begin
-                if (has_trait(1, party_member_obj(16777812), 666)) then begin
-                    critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(tile_num(dude_obj), has_trait(1, dude_obj, 10), 2), elevation(dude_obj));
+                if (obj_is_visible_flag(party_member_obj(16777812))) then begin
+                    critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(dude_tile, obj_get_rot(dude_obj), 2), dude_elevation);
                 end
             end
         end
-        if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+        if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
             if (party_member_obj(16777814) != 0) then begin
-                if (has_trait(1, party_member_obj(16777814), 666)) then begin
-                    critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(tile_num(dude_obj), has_trait(1, dude_obj, 10), 2), elevation(dude_obj));
+                if (obj_is_visible_flag(party_member_obj(16777814))) then begin
+                    critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(dude_tile, obj_get_rot(dude_obj), 2), dude_elevation);
                 end
             end
         end
         if (party_member_obj(16777748) != 0) then begin
             if (party_member_obj(16777748) != 0) then begin
-                if (has_trait(1, party_member_obj(16777748), 666)) then begin
-                    critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(tile_num(dude_obj), has_trait(1, dude_obj, 10), 2), elevation(dude_obj));
+                if (obj_is_visible_flag(party_member_obj(16777748))) then begin
+                    critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(dude_tile, obj_get_rot(dude_obj), 2), dude_elevation);
                 end
             end
         end
         if (party_member_obj(16778017) != 0) then begin
             if (party_member_obj(16778017) != 0) then begin
-                if (has_trait(1, party_member_obj(16778017), 666)) then begin
-                    critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(tile_num(dude_obj), has_trait(1, dude_obj, 10), 2), elevation(dude_obj));
+                if (obj_is_visible_flag(party_member_obj(16778017))) then begin
+                    critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(dude_tile, obj_get_rot(dude_obj), 2), dude_elevation);
                 end
             end
         end
         if (party_member_obj(16778016) != 0) then begin
             if (party_member_obj(16778016) != 0) then begin
-                if (has_trait(1, party_member_obj(16778016), 666)) then begin
-                    critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(tile_num(dude_obj), has_trait(1, dude_obj, 10), 2), elevation(dude_obj));
+                if (obj_is_visible_flag(party_member_obj(16778016))) then begin
+                    critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(dude_tile, obj_get_rot(dude_obj), 2), dude_elevation);
                 end
             end
         end
         if (party_member_obj(16778049) != 0) then begin
             if (party_member_obj(16778049) != 0) then begin
-                if (has_trait(1, party_member_obj(16778049), 666)) then begin
-                    critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(tile_num(dude_obj), has_trait(1, dude_obj, 10), 2), elevation(dude_obj));
+                if (obj_is_visible_flag(party_member_obj(16778049))) then begin
+                    critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(dude_tile, obj_get_rot(dude_obj), 2), dude_elevation);
                 end
             end
         end
         if (party_member_obj(16778050) != 0) then begin
             if (party_member_obj(16778050) != 0) then begin
-                if (has_trait(1, party_member_obj(16778050), 666)) then begin
-                    critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(tile_num(dude_obj), has_trait(1, dude_obj, 10), 2), elevation(dude_obj));
+                if (obj_is_visible_flag(party_member_obj(16778050))) then begin
+                    critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(dude_tile, obj_get_rot(dude_obj), 2), dude_elevation);
                 end
             end
         end
         if (party_member_obj(16778051) != 0) then begin
             if (party_member_obj(16778051) != 0) then begin
-                if (has_trait(1, party_member_obj(16778051), 666)) then begin
-                    critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(tile_num(dude_obj), has_trait(1, dude_obj, 10), 2), elevation(dude_obj));
+                if (obj_is_visible_flag(party_member_obj(16778051))) then begin
+                    critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(dude_tile, obj_get_rot(dude_obj), 2), dude_elevation);
                 end
             end
         end
         if (party_member_obj(16777294) != 0) then begin
             if (party_member_obj(16777294) != 0) then begin
-                if (has_trait(1, party_member_obj(16777294), 666)) then begin
-                    critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(tile_num(dude_obj), has_trait(1, dude_obj, 10), 2), elevation(dude_obj));
+                if (obj_is_visible_flag(party_member_obj(16777294))) then begin
+                    critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(dude_tile, obj_get_rot(dude_obj), 2), dude_elevation);
                 end
             end
         end
         set_map_var(0, 1);
         game_ui_enable;
-        gfade_in(1);
-        set_global_var(929, 0);
+        fade_in;
+        set_global_var(GVAR_G_ELEVATOR, 0);
     end
     if (fixed_param == 9) then begin
-        destruction_countdown := (global_var(954) - game_time) / 10;
+        destruction_countdown := (global_var(GVAR_G_BASE_TIME_OF_DESTRUCTION) - game_time) / 10;
         if ((destruction_countdown > 0) and (destruction_countdown <= (5 * 60 * 10 / 10))) then begin
-            display_msg(message_str(386, 401) + destruction_countdown + message_str(386, 402));
+            display_msg(mstr(401) + destruction_countdown + mstr(402));
             if (destruction_countdown <= 10) then begin
-                metarule3(100, self_obj, 9, 0);
+                rm_fixed_timer_event(self_obj, 9);
                 add_timer_event(self_obj, game_ticks(1), 9);
             end
             else begin
-                metarule3(100, self_obj, 9, 0);
+                rm_fixed_timer_event(self_obj, 9);
                 add_timer_event(self_obj, game_ticks(10), 9);
             end
         end
         else begin
-            display_msg(message_str(386, 401) + 0 + message_str(386, 402));
+            display_msg(mstr(401) + 0 + mstr(402));
             play_sfx("pluto");
             kill_critter(dude_obj, 0);
         end
     end
     if (fixed_param == 3) then begin
-        if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0) and (KeriComment == 0)) then begin
+        if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0) and (KeriComment == 0)) then begin
             KeriComment := 1;
             add_timer_event(party_member_obj(16777779), 0, 14);
             add_timer_event(self_obj, 5, 3);
         end
         else begin
-            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0) and (GabrielComment == 0)) then begin
+            if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0) and (GabrielComment == 0)) then begin
                 GabrielComment := 1;
                 add_timer_event(party_member_obj(16777811), 0, 26);
                 add_timer_event(self_obj, 5, 3);
             end
             else begin
-                if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0) and (LystraComment == 0)) then begin
+                if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0) and (LystraComment == 0)) then begin
                     LystraComment := 1;
                     add_timer_event(party_member_obj(16777814), 0, 29);
                 end
@@ -505,70 +505,70 @@ end
 
 procedure Create_hunters
 begin
-    hunter1 := create_object_sid(16778017, 11917, 0, 520);
+    hunter1 := create_object_sid(16778017, 11917, 0, SCRIPT_GLOVEC);
     anim(hunter1, 1000, 2);
-    hunter2 := create_object_sid(16778016, 11514, 0, 520);
+    hunter2 := create_object_sid(16778016, 11514, 0, SCRIPT_GLOVEC);
     anim(hunter2, 1000, 2);
-    hunter3 := create_object_sid(16778049, 11511, 0, 520);
+    hunter3 := create_object_sid(16778049, 11511, 0, SCRIPT_GLOVEC);
     anim(hunter3, 1000, 2);
-    hunter4 := create_object_sid(16778050, 11709, 0, 520);
+    hunter4 := create_object_sid(16778050, 11709, 0, SCRIPT_GLOVEC);
     anim(hunter4, 1000, 3);
-    hunter5 := create_object_sid(16778051, 12109, 0, 520);
+    hunter5 := create_object_sid(16778051, 12109, 0, SCRIPT_GLOVEC);
     anim(hunter5, 1000, 3);
 end
 
 procedure Wield_hunters
 begin
-    restock_obj := create_object_sid(603, 0, 0, -1);
+    restock_obj := create_object(603, 0, 0);
     add_mult_objs_to_inven(hunter1, restock_obj, 1);
-    restock_obj := create_object_sid(363, 0, 0, -1);
+    restock_obj := create_object(363, 0, 0);
     add_mult_objs_to_inven(hunter1, restock_obj, 5);
-    restock_obj := create_object_sid(144, 0, 0, -1);
+    restock_obj := create_object(144, 0, 0);
     add_mult_objs_to_inven(hunter1, restock_obj, 1);
     wield_obj_critter(hunter1, obj_carrying_pid_obj(hunter1, 603));
-    restock_obj := create_object_sid(118, 0, 0, -1);
+    restock_obj := create_object(118, 0, 0);
     add_mult_objs_to_inven(hunter2, restock_obj, 1);
-    restock_obj := create_object_sid(39, 0, 0, -1);
+    restock_obj := create_object(39, 0, 0);
     add_mult_objs_to_inven(hunter2, restock_obj, 1);
-    restock_obj := create_object_sid(144, 0, 0, -1);
+    restock_obj := create_object(144, 0, 0);
     add_mult_objs_to_inven(hunter2, restock_obj, 1);
     wield_obj_critter(hunter2, obj_carrying_pid_obj(hunter2, 118));
-    restock_obj := create_object_sid(400, 0, 0, -1);
+    restock_obj := create_object(400, 0, 0);
     add_mult_objs_to_inven(hunter3, restock_obj, 1);
-    restock_obj := create_object_sid(382, 0, 0, -1);
+    restock_obj := create_object(382, 0, 0);
     add_mult_objs_to_inven(hunter3, restock_obj, 5);
-    restock_obj := create_object_sid(144, 0, 0, -1);
+    restock_obj := create_object(144, 0, 0);
     add_mult_objs_to_inven(hunter3, restock_obj, 2);
     wield_obj_critter(hunter3, obj_carrying_pid_obj(hunter3, 400));
-    restock_obj := create_object_sid(115, 0, 0, -1);
+    restock_obj := create_object(115, 0, 0);
     add_mult_objs_to_inven(hunter4, restock_obj, 1);
-    restock_obj := create_object_sid(144, 0, 0, -1);
+    restock_obj := create_object(144, 0, 0);
     add_mult_objs_to_inven(hunter4, restock_obj, 2);
     wield_obj_critter(hunter4, obj_carrying_pid_obj(hunter4, 115));
-    restock_obj := create_object_sid(587, 0, 0, -1);
+    restock_obj := create_object(587, 0, 0);
     add_mult_objs_to_inven(hunter5, restock_obj, 1);
-    restock_obj := create_object_sid(363, 0, 0, -1);
+    restock_obj := create_object(363, 0, 0);
     add_mult_objs_to_inven(hunter5, restock_obj, 1);
-    restock_obj := create_object_sid(144, 0, 0, -1);
+    restock_obj := create_object(144, 0, 0);
     add_mult_objs_to_inven(hunter5, restock_obj, 2);
     wield_obj_critter(hunter5, obj_carrying_pid_obj(hunter5, 587));
 end
 
 procedure Kill_hunters
 begin
-    float_msg(hunter1, 0, 0);
+    float_msg_clear(hunter1);
     move_to(hunter1, 21527, 0);
     kill_critter(hunter1, 57);
-    float_msg(hunter2, 0, 0);
+    float_msg_clear(hunter2);
     move_to(hunter2, 20929, 0);
     kill_critter(hunter2, 51);
-    float_msg(hunter3, 0, 0);
+    float_msg_clear(hunter3);
     move_to(hunter3, 18719, 0);
     kill_critter(hunter3, 60);
-    float_msg(hunter4, 0, 0);
+    float_msg_clear(hunter4);
     move_to(hunter4, 17125, 0);
     kill_critter(hunter4, 61);
-    float_msg(hunter5, 0, 0);
+    float_msg_clear(hunter5);
     move_to(hunter5, 22721, 0);
     kill_critter(hunter5, 57);
 end
@@ -577,7 +577,7 @@ procedure Kill_Obroda_guards
 begin
     variable LVar0 := 0;
     variable LVar1 := 0;
-    LVar1 := create_object_sid(133, 0, 0, -1);
+    LVar1 := create_object(133, 0, 0);
     LVar0 := tile_contains_pid_obj(19910, 0, 16777830);
     move_to(LVar0, 20321, 0);
     move_obj_inven_to_obj(LVar0, LVar1);
@@ -591,7 +591,7 @@ begin
     move_obj_inven_to_obj(LVar0, LVar1);
     kill_critter(LVar0, 59);
     destroy_object(LVar1);
-    gfade_in(1);
+    fade_in;
     game_ui_enable;
 end
 
@@ -599,332 +599,331 @@ procedure Set_ending_globals
 begin
     variable LVar0 := 0;
     give_exp_points(20000);
-    display_msg(message_str(14, 100) + 20000 + message_str(14, 101));
-    if ((global_var(1053) == 1) and (global_var(1054) >= 5)) then begin
-        set_global_var(981, 5);
+    display_msg(g_mstr(100) + 20000 + g_mstr(101));
+    if ((global_var(GVAR_NH_DEATH_HELEN) == 1) and (global_var(GVAR_NH_DEATH_COUNTER) >= 5)) then begin
+        set_global_var(GVAR_END_NEWHOPE, 5);
     end
     else begin
-        if ((global_var(1053) == 0) and (global_var(707) == 3)) then begin
-            if ((global_var(797) == 1) and (global_var(798) == 1)) then begin
-                set_global_var(981, 2);
+        if ((global_var(GVAR_NH_DEATH_HELEN) == 0) and (global_var(GVAR_QUEST_S_NHCARAVANS) == 3)) then begin
+            if ((global_var(GVAR_RH_JULIAN_DEAD) == 1) and (global_var(GVAR_RH_ALEXA_DEAD) == 1)) then begin
+                set_global_var(GVAR_END_NEWHOPE, 2);
             end
             else begin
-                if ((global_var(797) == 0) and (global_var(798) == 0)) then begin
-                    set_global_var(981, 2);
+                if ((global_var(GVAR_RH_JULIAN_DEAD) == 0) and (global_var(GVAR_RH_ALEXA_DEAD) == 0)) then begin
+                    set_global_var(GVAR_END_NEWHOPE, 2);
                 end
                 else begin
-                    if (global_var(797) == 1) then begin
-                        set_global_var(981, 3);
+                    if (global_var(GVAR_RH_JULIAN_DEAD) == 1) then begin
+                        set_global_var(GVAR_END_NEWHOPE, 3);
                     end
-                    if (global_var(798) == 1) then begin
-                        set_global_var(981, 4);
+                    if (global_var(GVAR_RH_ALEXA_DEAD) == 1) then begin
+                        set_global_var(GVAR_END_NEWHOPE, 4);
                     end
                 end
             end
         end
         else begin
-            if (global_var(1053) == 0) then begin
-                set_global_var(981, 1);
+            if (global_var(GVAR_NH_DEATH_HELEN) == 0) then begin
+                set_global_var(GVAR_END_NEWHOPE, 1);
             end
         end
     end
-    if (global_var(965) == 0) then begin
-        if ((global_var(805) == 4) and (global_var(812) == 0)) then begin
-            set_global_var(980, 1);
+    if (global_var(GVAR_RH_GEORGE_DEAD) == 0) then begin
+        if ((global_var(GVAR_RH_Q_QUEST_MARIE) == 4) and (global_var(GVAR_RH_AlexaMayKilledMarie) == 0)) then begin
+            set_global_var(GVAR_END_RATHOLE_GEORGE, 1);
         end
-        if ((global_var(805) == 4) and (global_var(812) == 1)) then begin
-            set_global_var(980, 2);
+        if ((global_var(GVAR_RH_Q_QUEST_MARIE) == 4) and (global_var(GVAR_RH_AlexaMayKilledMarie) == 1)) then begin
+            set_global_var(GVAR_END_RATHOLE_GEORGE, 2);
         end
-        if (global_var(805) == 8) then begin
-            set_global_var(980, 3);
+        if (global_var(GVAR_RH_Q_QUEST_MARIE) == 8) then begin
+            set_global_var(GVAR_END_RATHOLE_GEORGE, 3);
         end
     end
-    if (metarule(17, 1)) then begin
-        if ((global_var(798) == 1) and (global_var(797) == 0)) then begin
-            set_global_var(979, 1);
+    if (town_known(1)) then begin
+        if ((global_var(GVAR_RH_ALEXA_DEAD) == 1) and (global_var(GVAR_RH_JULIAN_DEAD) == 0)) then begin
+            set_global_var(GVAR_END_RATHOLE, 1);
         end
-        if ((global_var(798) == 0) and (global_var(797) == 1)) then begin
-            set_global_var(979, 2);
+        if ((global_var(GVAR_RH_ALEXA_DEAD) == 0) and (global_var(GVAR_RH_JULIAN_DEAD) == 1)) then begin
+            set_global_var(GVAR_END_RATHOLE, 2);
         end
-        if ((global_var(798) == 0) and (global_var(797) == 0)) then begin
-            set_global_var(979, 3);
+        if ((global_var(GVAR_RH_ALEXA_DEAD) == 0) and (global_var(GVAR_RH_JULIAN_DEAD) == 0)) then begin
+            set_global_var(GVAR_END_RATHOLE, 3);
         end
-        if ((global_var(798) == 1) and (global_var(797) == 1)) then begin
-            set_global_var(979, 4);
+        if ((global_var(GVAR_RH_ALEXA_DEAD) == 1) and (global_var(GVAR_RH_JULIAN_DEAD) == 1)) then begin
+            set_global_var(GVAR_END_RATHOLE, 4);
         end
     end
-    if (global_var(792) == 2) then begin
-        if (global_var(969) == 1) then begin
-            set_global_var(970, 1);
+    if (global_var(GVAR_SEDIT_DEAD_GANGSTERS) == 2) then begin
+        if (global_var(GVAR_S_PATER_DEAD) == 1) then begin
+            set_global_var(GVAR_END_SEDIT_LOST, 1);
         end
         else begin
-            set_global_var(970, 2);
+            set_global_var(GVAR_END_SEDIT_LOST, 2);
         end
     end
-    if ((global_var(792) != 2) and (global_var(722) == 0) and (global_var(712) == 3)) then begin
-        set_global_var(970, 3);
+    if ((global_var(GVAR_SEDIT_DEAD_GANGSTERS) != 2) and (global_var(GVAR_SEDIT_TYLER_IS_SHERIFF) == 0) and (global_var(GVAR_QUEST_S_RODRIGUES_GHOULS) == 3)) then begin
+        set_global_var(GVAR_END_SEDIT_LOST, 3);
     end
-    if (global_var(912) == 0) then begin
-        if ((global_var(746) == 3) and (global_var(747) == 0)) then begin
-            set_global_var(971, 1);
+    if (global_var(GVAR_KARAVAN_FREDERYK_ELIMINATED) == 0) then begin
+        if ((global_var(GVAR_QUEST_S_FREDERYK_RAIDERS) == 3) and (global_var(GVAR_DEAL_WITH_RAIDERS) == 0)) then begin
+            set_global_var(GVAR_END_SEDIT_FREDERYK, 1);
             LVar0 := 1;
         end
-        if ((global_var(746) == 3) and (global_var(747) == 1)) then begin
-            set_global_var(971, 2);
+        if ((global_var(GVAR_QUEST_S_FREDERYK_RAIDERS) == 3) and (global_var(GVAR_DEAL_WITH_RAIDERS) == 1)) then begin
+            set_global_var(GVAR_END_SEDIT_FREDERYK, 2);
             LVar0 := 1;
         end
-        if ((global_var(732) == 3) and (global_var(737) < 2)) then begin
-            set_global_var(971, 3);
+        if ((global_var(GVAR_QUEST_S_KEVIN_MEETING) == 3) and (global_var(GVAR_QUEST_S_NICOL_BRAHMINS) < 2)) then begin
+            set_global_var(GVAR_END_SEDIT_FREDERYK, 3);
             LVar0 := 1;
         end
-        if ((global_var(732) == 3) and (global_var(737) >= 2)) then begin
-            set_global_var(971, 4);
+        if ((global_var(GVAR_QUEST_S_KEVIN_MEETING) == 3) and (global_var(GVAR_QUEST_S_NICOL_BRAHMINS) >= 2)) then begin
+            set_global_var(GVAR_END_SEDIT_FREDERYK, 4);
             LVar0 := 1;
         end
     end
-    if ((global_var(787) == 1) and (global_var(973) == 0) and (global_var(975) == 0)) then begin
-        set_global_var(972, 1);
-        set_global_var(974, 1);
+    if ((global_var(GVAR_DEMETRE_FEV) == 1) and (global_var(GVAR_S_DEMETRE_DEAD) == 0) and (global_var(GVAR_KERI_DEAD) == 0)) then begin
+        set_global_var(GVAR_END_SEDIT_CRIMSON, 1);
+        set_global_var(GVAR_END_KERI, 1);
         LVar0 := 1;
     end
-    if ((global_var(787) == 1) and (global_var(973) == 0) and (global_var(975) == 1)) then begin
-        set_global_var(972, 2);
+    if ((global_var(GVAR_DEMETRE_FEV) == 1) and (global_var(GVAR_S_DEMETRE_DEAD) == 0) and (global_var(GVAR_KERI_DEAD) == 1)) then begin
+        set_global_var(GVAR_END_SEDIT_CRIMSON, 2);
         LVar0 := 1;
     end
-    if ((global_var(787) == 0) and (global_var(973) == 0) and (global_var(975) == 1)) then begin
-        set_global_var(972, 3);
+    if ((global_var(GVAR_DEMETRE_FEV) == 0) and (global_var(GVAR_S_DEMETRE_DEAD) == 0) and (global_var(GVAR_KERI_DEAD) == 1)) then begin
+        set_global_var(GVAR_END_SEDIT_CRIMSON, 3);
         LVar0 := 1;
     end
-    if ((global_var(787) == 0) and (global_var(973) == 1) and (global_var(975) == 0)) then begin
-        set_global_var(972, 4);
+    if ((global_var(GVAR_DEMETRE_FEV) == 0) and (global_var(GVAR_S_DEMETRE_DEAD) == 1) and (global_var(GVAR_KERI_DEAD) == 0)) then begin
+        set_global_var(GVAR_END_SEDIT_CRIMSON, 4);
         LVar0 := 1;
     end
-    if ((global_var(787) == 0) and (global_var(973) == 0) and (global_var(975) == 0) and (global_var(784) == 5)) then begin
-        set_global_var(972, 5);
+    if ((global_var(GVAR_DEMETRE_FEV) == 0) and (global_var(GVAR_S_DEMETRE_DEAD) == 0) and (global_var(GVAR_KERI_DEAD) == 0) and (global_var(GVAR_QUEST_S_PETERS_FEED) == 5)) then begin
+        set_global_var(GVAR_END_SEDIT_CRIMSON, 5);
         LVar0 := 1;
     end
-    if ((global_var(722) == 1) and (global_var(976) == 0)) then begin
-        if ((global_var(972) == 1) or (global_var(972) == 4)) then begin
-            if (global_var(792) == 2) then begin
-                set_global_var(977, 4);
+    if ((global_var(GVAR_SEDIT_TYLER_IS_SHERIFF) == 1) and (global_var(GVAR_S_TYLER_DEAD) == 0)) then begin
+        if ((global_var(GVAR_END_SEDIT_CRIMSON) == 1) or (global_var(GVAR_END_SEDIT_CRIMSON) == 4)) then begin
+            if (global_var(GVAR_SEDIT_DEAD_GANGSTERS) == 2) then begin
+                set_global_var(GVAR_END_SEDIT_TYLER, 4);
                 LVar0 := 1;
             end
             else begin
-                set_global_var(977, 3);
+                set_global_var(GVAR_END_SEDIT_TYLER, 3);
                 LVar0 := 1;
             end
         end
         else begin
-            if (global_var(792) == 2) then begin
-                set_global_var(977, 1);
+            if (global_var(GVAR_SEDIT_DEAD_GANGSTERS) == 2) then begin
+                set_global_var(GVAR_END_SEDIT_TYLER, 1);
                 LVar0 := 1;
             end
             else begin
-                set_global_var(977, 2);
+                set_global_var(GVAR_END_SEDIT_TYLER, 2);
                 LVar0 := 1;
             end
         end
     end
-    if (metarule(17, 2) and (LVar0 == 0)) then begin
-        if ((global_var(912) > 0) and (global_var(973) == 1) and (global_var(975) == 1) and (global_var(976) == 1) and (global_var(913) >= 2)) then begin
-            set_global_var(977, 6);
+    if (town_known(2) and (LVar0 == 0)) then begin
+        if ((global_var(GVAR_KARAVAN_FREDERYK_ELIMINATED) > 0) and (global_var(GVAR_S_DEMETRE_DEAD) == 1) and (global_var(GVAR_KERI_DEAD) == 1) and (global_var(GVAR_S_TYLER_DEAD) == 1) and (global_var(GVAR_KARAVAN_SEDIT_ELIMINATED) >= 2)) then begin
+            set_global_var(GVAR_END_SEDIT_TYLER, 6);
         end
         else begin
-            set_global_var(977, 5);
+            set_global_var(GVAR_END_SEDIT_TYLER, 5);
         end
     end
-    if (((global_var(842) bwand 131072) == 0) and (global_var(833) >= 2)) then begin
-        set_global_var(978, 1);
+    if (((global_var(GVAR_C_CORATH_STATUS) bwand 131072) == 0) and (global_var(GVAR_C_QUEST_UNCLE_Q4) >= 2)) then begin
+        set_global_var(GVAR_END_CORATH, 1);
     end
-    if (((global_var(842) bwand 33554432) == 0) and (global_var(837) >= 2)) then begin
-        set_global_var(978, 2);
+    if (((global_var(GVAR_C_CORATH_STATUS) bwand 33554432) == 0) and (global_var(GVAR_C_QUEST_NESTOR_Q4) >= 2)) then begin
+        set_global_var(GVAR_END_CORATH, 2);
     end
-    if (((global_var(842) bwand 131072) == 0) and ((global_var(842) bwand 33554432) == 0) and (global_var(832) >= 2)) then begin
-        set_global_var(978, 3);
+    if (((global_var(GVAR_C_CORATH_STATUS) bwand 131072) == 0) and ((global_var(GVAR_C_CORATH_STATUS) bwand 33554432) == 0) and (global_var(GVAR_C_QUEST_UNCLE_Q3) >= 2)) then begin
+        set_global_var(GVAR_END_CORATH, 3);
     end
-    if (((global_var(842) bwand 33554432) != 0) and ((global_var(842) bwand 131072) != 0)) then begin
-        set_global_var(978, 4);
+    if (((global_var(GVAR_C_CORATH_STATUS) bwand 33554432) != 0) and ((global_var(GVAR_C_CORATH_STATUS) bwand 131072) != 0)) then begin
+        set_global_var(GVAR_END_CORATH, 4);
     end
-    if ((global_var(967) == 2) and (global_var(966) == 0) and not((global_var(867) bwand 1) != 0)) then begin
-        if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
-            set_global_var(985, 1);
+    if ((global_var(GVAR_AQ_EMPEROR_STATUS) == 2) and (global_var(GVAR_AQ_VAULT_16_STATUS) == 0) and not((global_var(GVAR_AQ_ALBUQ_DEATHS) bwand 1) != 0)) then begin
+        if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
+            set_global_var(GVAR_END_ALBU_LYSTRA, 1);
         end
         else begin
-            set_global_var(984, 1);
+            set_global_var(GVAR_END_ALBU_CITY, 1);
         end
     end
-    if ((global_var(967) == 2) and (global_var(966) == 1) and not((global_var(867) bwand 1) != 0)) then begin
-        if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
-            set_global_var(985, 2);
+    if ((global_var(GVAR_AQ_EMPEROR_STATUS) == 2) and (global_var(GVAR_AQ_VAULT_16_STATUS) == 1) and not((global_var(GVAR_AQ_ALBUQ_DEATHS) bwand 1) != 0)) then begin
+        if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
+            set_global_var(GVAR_END_ALBU_LYSTRA, 2);
         end
         else begin
-            set_global_var(984, 2);
+            set_global_var(GVAR_END_ALBU_CITY, 2);
         end
     end
-    if ((global_var(967) == 2) and ((global_var(867) bwand 1) != 0)) then begin
-        if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
-            set_global_var(985, 3);
+    if ((global_var(GVAR_AQ_EMPEROR_STATUS) == 2) and ((global_var(GVAR_AQ_ALBUQ_DEATHS) bwand 1) != 0)) then begin
+        if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
+            set_global_var(GVAR_END_ALBU_LYSTRA, 3);
         end
         else begin
-            set_global_var(984, 3);
+            set_global_var(GVAR_END_ALBU_CITY, 3);
         end
     end
-    if ((global_var(967) == 1) and (global_var(966) == 0) and not((global_var(867) bwand 1) != 0)) then begin
-        if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
-            set_global_var(985, 4);
+    if ((global_var(GVAR_AQ_EMPEROR_STATUS) == 1) and (global_var(GVAR_AQ_VAULT_16_STATUS) == 0) and not((global_var(GVAR_AQ_ALBUQ_DEATHS) bwand 1) != 0)) then begin
+        if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
+            set_global_var(GVAR_END_ALBU_LYSTRA, 4);
         end
         else begin
-            set_global_var(984, 4);
+            set_global_var(GVAR_END_ALBU_CITY, 4);
         end
     end
-    if ((global_var(967) == 1) and (global_var(966) == 1) and not((global_var(867) bwand 1) != 0)) then begin
-        if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
-            set_global_var(985, 5);
+    if ((global_var(GVAR_AQ_EMPEROR_STATUS) == 1) and (global_var(GVAR_AQ_VAULT_16_STATUS) == 1) and not((global_var(GVAR_AQ_ALBUQ_DEATHS) bwand 1) != 0)) then begin
+        if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
+            set_global_var(GVAR_END_ALBU_LYSTRA, 5);
         end
         else begin
-            set_global_var(984, 5);
+            set_global_var(GVAR_END_ALBU_CITY, 5);
         end
     end
-    if ((global_var(967) == 1) and ((global_var(867) bwand 1) != 0)) then begin
-        if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
-            set_global_var(985, 6);
+    if ((global_var(GVAR_AQ_EMPEROR_STATUS) == 1) and ((global_var(GVAR_AQ_ALBUQ_DEATHS) bwand 1) != 0)) then begin
+        if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
+            set_global_var(GVAR_END_ALBU_LYSTRA, 6);
         end
         else begin
-            set_global_var(984, 6);
+            set_global_var(GVAR_END_ALBU_CITY, 6);
         end
     end
-    if ((global_var(967) == 0) or (global_var(967) == 3)) then begin
-        if ((global_var(867) bwand 1) != 0) then begin
-            if ((global_var(967) == 3) or ((global_var(904) bwand 32) != 0)) then begin
-                if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
-                    set_global_var(985, 8);
+    if ((global_var(GVAR_AQ_EMPEROR_STATUS) == 0) or (global_var(GVAR_AQ_EMPEROR_STATUS) == 3)) then begin
+        if ((global_var(GVAR_AQ_ALBUQ_DEATHS) bwand 1) != 0) then begin
+            if ((global_var(GVAR_AQ_EMPEROR_STATUS) == 3) or ((global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS) bwand 32) != 0)) then begin
+                if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
+                    set_global_var(GVAR_END_ALBU_LYSTRA, 8);
                 end
                 else begin
-                    set_global_var(984, 8);
+                    set_global_var(GVAR_END_ALBU_CITY, 8);
                 end
             end
-            if ((global_var(967) == 0) and (global_var(1055) == 0)) then begin
-                if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
-                    set_global_var(985, 9);
+            if ((global_var(GVAR_AQ_EMPEROR_STATUS) == 0) and (global_var(GVAR_END_ARAN_DEAD) == 0)) then begin
+                if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
+                    set_global_var(GVAR_END_ALBU_LYSTRA, 9);
                 end
                 else begin
-                    set_global_var(984, 9);
+                    set_global_var(GVAR_END_ALBU_CITY, 9);
                 end
             end
-            if ((global_var(967) == 0) and (global_var(1055) == 1) and (global_var(1056) == 0)) then begin
-                if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
-                    set_global_var(985, 10);
+            if ((global_var(GVAR_AQ_EMPEROR_STATUS) == 0) and (global_var(GVAR_END_ARAN_DEAD) == 1) and (global_var(GVAR_END_ELISA_DEAD) == 0)) then begin
+                if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
+                    set_global_var(GVAR_END_ALBU_LYSTRA, 10);
                 end
                 else begin
-                    set_global_var(984, 10);
+                    set_global_var(GVAR_END_ALBU_CITY, 10);
                 end
             end
         end
         else begin
-            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
-                set_global_var(985, 7);
+            if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
+                set_global_var(GVAR_END_ALBU_LYSTRA, 7);
             end
             else begin
-                set_global_var(984, 7);
+                set_global_var(GVAR_END_ALBU_CITY, 7);
             end
         end
     end
-    if ((global_var(876) == 5) and not((global_var(867) bwand 2097152) != 0)) then begin
-        if ((global_var(984) == 4) or (global_var(984) == 6) or (global_var(984) == 10) or (global_var(985) == 4) or (global_var(985) == 6) or (global_var(985) == 10)) then begin
-            set_global_var(986, 1);
+    if ((global_var(GVAR_AQ_QUEST_TRIBE_HELP_REVEGE) == 5) and not((global_var(GVAR_AQ_ALBUQ_DEATHS) bwand 2097152) != 0)) then begin
+        if ((global_var(GVAR_END_ALBU_CITY) == 4) or (global_var(GVAR_END_ALBU_CITY) == 6) or (global_var(GVAR_END_ALBU_CITY) == 10) or (global_var(GVAR_END_ALBU_LYSTRA) == 4) or (global_var(GVAR_END_ALBU_LYSTRA) == 6) or (global_var(GVAR_END_ALBU_LYSTRA) == 10)) then begin
+            set_global_var(GVAR_END_ALBU_HOSPITAL, 1);
         end
         else begin
-            set_global_var(986, 2);
+            set_global_var(GVAR_END_ALBU_HOSPITAL, 2);
         end
     end
     else begin
-        if ((global_var(878) == 4) or ((global_var(865) bwand 8388608) != 0) or ((global_var(865) bwand 32768) != 0) and not((global_var(867) bwand 131072) != 0) and (global_var(891) < 6)) then begin
-            if ((global_var(984) == 4) or (global_var(984) == 6) or (global_var(984) == 10) or (global_var(985) == 4) or (global_var(985) == 6) or (global_var(985) == 10)) then begin
-                set_global_var(986, 3);
+        if ((global_var(GVAR_AQ_QUEST_HOSPITAL_TO_KILL_PRIMITIVES) == 4) or ((global_var(GVAR_AQ_ALBUQ_EVENTS) bwand 8388608) != 0) or ((global_var(GVAR_AQ_ALBUQ_EVENTS) bwand 32768) != 0) and not((global_var(GVAR_AQ_ALBUQ_DEATHS) bwand 131072) != 0) and (global_var(GVAR_AQ_DOCTORS_COUNTER) < 6)) then begin
+            if ((global_var(GVAR_END_ALBU_CITY) == 4) or (global_var(GVAR_END_ALBU_CITY) == 6) or (global_var(GVAR_END_ALBU_CITY) == 10) or (global_var(GVAR_END_ALBU_LYSTRA) == 4) or (global_var(GVAR_END_ALBU_LYSTRA) == 6) or (global_var(GVAR_END_ALBU_LYSTRA) == 10)) then begin
+                set_global_var(GVAR_END_ALBU_HOSPITAL, 3);
             end
             else begin
-                if ((global_var(984) == 7) or (global_var(985) == 7)) then begin
-                    set_global_var(986, 4);
+                if ((global_var(GVAR_END_ALBU_CITY) == 7) or (global_var(GVAR_END_ALBU_LYSTRA) == 7)) then begin
+                    set_global_var(GVAR_END_ALBU_HOSPITAL, 4);
                 end
                 else begin
-                    set_global_var(986, 5);
+                    set_global_var(GVAR_END_ALBU_HOSPITAL, 5);
                 end
             end
         end
         else begin
-            if ((global_var(888) > 0) and (global_var(891) >= 6) and not((global_var(867) bwand 2097152) != 0) and not((global_var(867) bwand 512) != 0)) then begin
-                if ((global_var(984) == 4) or (global_var(984) == 6) or (global_var(984) == 10) or (global_var(985) == 4) or (global_var(985) == 6) or (global_var(985) == 10)) then begin
-                    set_global_var(986, 1);
+            if ((global_var(GVAR_AQ_QUEST_TRIBE_HUNTINGS) > 0) and (global_var(GVAR_AQ_DOCTORS_COUNTER) >= 6) and not((global_var(GVAR_AQ_ALBUQ_DEATHS) bwand 2097152) != 0) and not((global_var(GVAR_AQ_ALBUQ_DEATHS) bwand 512) != 0)) then begin
+                if ((global_var(GVAR_END_ALBU_CITY) == 4) or (global_var(GVAR_END_ALBU_CITY) == 6) or (global_var(GVAR_END_ALBU_CITY) == 10) or (global_var(GVAR_END_ALBU_LYSTRA) == 4) or (global_var(GVAR_END_ALBU_LYSTRA) == 6) or (global_var(GVAR_END_ALBU_LYSTRA) == 10)) then begin
+                    set_global_var(GVAR_END_ALBU_HOSPITAL, 1);
                 end
                 else begin
-                    set_global_var(986, 2);
+                    set_global_var(GVAR_END_ALBU_HOSPITAL, 2);
                 end
             end
             else begin
-                if ((global_var(877) > 0) and not((global_var(867) bwand 131072) != 0) and (global_var(891) < 6)) then begin
-                    if ((global_var(984) == 4) or (global_var(984) == 6) or (global_var(984) == 10) or (global_var(985) == 4) or (global_var(985) == 6) or (global_var(985) == 10)) then begin
-                        set_global_var(986, 3);
+                if ((global_var(GVAR_AQ_QUEST_HOSPITAL_HUNTINGS) > 0) and not((global_var(GVAR_AQ_ALBUQ_DEATHS) bwand 131072) != 0) and (global_var(GVAR_AQ_DOCTORS_COUNTER) < 6)) then begin
+                    if ((global_var(GVAR_END_ALBU_CITY) == 4) or (global_var(GVAR_END_ALBU_CITY) == 6) or (global_var(GVAR_END_ALBU_CITY) == 10) or (global_var(GVAR_END_ALBU_LYSTRA) == 4) or (global_var(GVAR_END_ALBU_LYSTRA) == 6) or (global_var(GVAR_END_ALBU_LYSTRA) == 10)) then begin
+                        set_global_var(GVAR_END_ALBU_HOSPITAL, 3);
                     end
                     else begin
-                        if ((global_var(984) == 7) or (global_var(985) == 7)) then begin
-                            set_global_var(986, 4);
+                        if ((global_var(GVAR_END_ALBU_CITY) == 7) or (global_var(GVAR_END_ALBU_LYSTRA) == 7)) then begin
+                            set_global_var(GVAR_END_ALBU_HOSPITAL, 4);
                         end
                         else begin
-                            set_global_var(986, 5);
+                            set_global_var(GVAR_END_ALBU_HOSPITAL, 5);
                         end
                     end
                 end
             end
         end
     end
-    if ((global_var(871) == 3) and not((global_var(867) bwand 16) != 0)) then begin
-        if ((global_var(984) == 4) or (global_var(984) == 6) or (global_var(984) == 10) or (global_var(985) == 4) or (global_var(985) == 6) or (global_var(985) == 10)) then begin
-            set_global_var(987, 1);
+    if ((global_var(GVAR_AQ_QUEST_KILL_WILLIAM_WIFE) == 3) and not((global_var(GVAR_AQ_ALBUQ_DEATHS) bwand 16) != 0)) then begin
+        if ((global_var(GVAR_END_ALBU_CITY) == 4) or (global_var(GVAR_END_ALBU_CITY) == 6) or (global_var(GVAR_END_ALBU_CITY) == 10) or (global_var(GVAR_END_ALBU_LYSTRA) == 4) or (global_var(GVAR_END_ALBU_LYSTRA) == 6) or (global_var(GVAR_END_ALBU_LYSTRA) == 10)) then begin
+            set_global_var(GVAR_END_ALBU_WILLIAM, 1);
         end
         else begin
-            set_global_var(987, 2);
+            set_global_var(GVAR_END_ALBU_WILLIAM, 2);
         end
     end
-    if ((global_var(870) == 2) and not((global_var(867) bwand 2) != 0) and not((global_var(867) bwand 4) != 0) and not((global_var(867) bwand 8) != 0)) then begin
-        if ((global_var(984) == 4) or (global_var(984) == 6) or (global_var(984) == 10) or (global_var(985) == 4) or (global_var(985) == 6) or (global_var(985) == 10)) then begin
-            set_global_var(987, 3);
+    if ((global_var(GVAR_AQ_QUEST_BRING_VEX_HEAD) == 2) and not((global_var(GVAR_AQ_ALBUQ_DEATHS) bwand 2) != 0) and not((global_var(GVAR_AQ_ALBUQ_DEATHS) bwand 4) != 0) and not((global_var(GVAR_AQ_ALBUQ_DEATHS) bwand 8) != 0)) then begin
+        if ((global_var(GVAR_END_ALBU_CITY) == 4) or (global_var(GVAR_END_ALBU_CITY) == 6) or (global_var(GVAR_END_ALBU_CITY) == 10) or (global_var(GVAR_END_ALBU_LYSTRA) == 4) or (global_var(GVAR_END_ALBU_LYSTRA) == 6) or (global_var(GVAR_END_ALBU_LYSTRA) == 10)) then begin
+            set_global_var(GVAR_END_ALBU_WILLIAM, 3);
         end
         else begin
-            set_global_var(987, 4);
+            set_global_var(GVAR_END_ALBU_WILLIAM, 4);
         end
     end
-    if ((global_var(906) bwand 64) != 0) then begin
-        set_global_var(988, 1);
+    if ((global_var(GVAR_MC_MUTANT_CAMP_EVENTS) bwand 64) != 0) then begin
+        set_global_var(GVAR_END_MUTANTS, 1);
     end
     else begin
-        if ((global_var(907) >= 3) and ((global_var(906) bwand 2) == 0)) then begin
-            set_global_var(988, 2);
+        if ((global_var(GVAR_MC_QUEST_BRING_SEBASTIAN) >= 3) and ((global_var(GVAR_MC_MUTANT_CAMP_EVENTS) bwand 2) == 0)) then begin
+            set_global_var(GVAR_END_MUTANTS, 2);
         end
     end
-    if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
-        set_global_var(989, 1);
+    if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
+        set_global_var(GVAR_END_GABRIEL, 1);
     end
-    if (global_var(953) == 4) then begin
-        if ((global_var(951) == 2) or (global_var(952) == 2)) then begin
-            set_global_var(983, 1);
+    if (global_var(GVAR_G_BASE_DESTROYED) == 4) then begin
+        if ((global_var(GVAR_G_QUEST_FREE_PRISONERS_FIGHT) == 2) or (global_var(GVAR_G_QUEST_FREE_PRISONERS_SNEAK) == 2)) then begin
+            set_global_var(GVAR_END_OBRODA, 1);
         end
         else begin
-            set_global_var(983, 2);
+            set_global_var(GVAR_END_OBRODA, 2);
         end
     end
     else begin
-        if ((global_var(951) == 2) or (global_var(952) == 2)) then begin
-            set_global_var(983, 3);
+        if ((global_var(GVAR_G_QUEST_FREE_PRISONERS_FIGHT) == 2) or (global_var(GVAR_G_QUEST_FREE_PRISONERS_SNEAK) == 2)) then begin
+            set_global_var(GVAR_END_OBRODA, 3);
         end
         else begin
-            set_global_var(983, 4);
+            set_global_var(GVAR_END_OBRODA, 4);
         end
     end
-    if (get_critter_stat(dude_obj, 34) == 0) then begin
-        set_global_var(982, 1);
+    if (dude_gender == 0) then begin
+        set_global_var(GVAR_END_PLAYER, 1);
     end
     else begin
-        set_global_var(982, 2);
+        set_global_var(GVAR_END_PLAYER, 2);
     end
 end
-
