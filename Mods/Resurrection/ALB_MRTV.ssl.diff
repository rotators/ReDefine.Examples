diff --git a/Mods/Resurrection/Original/ALB_MRTV.ssl b/Mods/Resurrection/ReDefine/ALB_MRTV.ssl
index af78124..637d785 100644
--- a/Mods/Resurrection/Original/ALB_MRTV.ssl
+++ b/Mods/Resurrection/ReDefine/ALB_MRTV.ssl
@@ -139,12 +139,12 @@ begin
             return 1;
         end
     end
-    if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+    if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
         if (tile_distance_objs(self_obj, party_member_obj(16777779)) <= 5) then begin
             return 1;
         end
     end
-    if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+    if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
         if (tile_distance_objs(self_obj, party_member_obj(16777811)) <= 5) then begin
             return 1;
         end
@@ -159,7 +159,7 @@ begin
             return 1;
         end
     end
-    if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+    if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
         if (tile_distance_objs(self_obj, party_member_obj(16777814)) <= 5) then begin
             return 1;
         end
@@ -217,7 +217,7 @@ end
 
 procedure map_enter_p_proc
 begin
-    if (elevation(dude_obj) == 0) then begin
+    if (dude_elevation == 0) then begin
         if ((get_month >= 3) and (get_month < 5)) then begin
             if ((game_time_hour >= 600) and (game_time_hour < (600 + 100))) then begin
                 set_light_level(game_time_hour - 600 + 40);
@@ -299,9 +299,9 @@ begin
         set_light_level(50);
     end
     Projed_smycku := 0;
-    if (not(metarule(22, 0))) then begin
+    if (not(is_loading_game)) then begin
         special_event := 0;
-        if (((global_var(904) bwand 67108864) != 0) and ((game_time - global_var(1003)) > (24 * (60 * (60 * 10)) * 6)) and not((map_var(0) bwand 16384) != 0)) then begin
+        if (((global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS) bwand 67108864) != 0) and ((game_time - global_var(GVAR_AQE_MARIO_WAITING_TIME)) > (24 * (60 * (60 * 10)) * 6)) and not((map_var(0) bwand 16384) != 0)) then begin
             if ((map_var(0) bwand 262144) != 0) then begin
                 set_map_var(0, map_var(0) bwand (-1 - 262144));
             end
@@ -315,151 +315,151 @@ begin
                 set_map_var(0, map_var(0) bwand (-1 - 2097152));
             end
         end
-        if ((global_var(876) == 2) or (global_var(883) == 1)) then begin
+        if ((global_var(GVAR_AQ_QUEST_TRIBE_HELP_REVEGE) == 2) or (global_var(GVAR_AQ_QUEST_MTHUNT_DUTCH_QUEST) == 1)) then begin
         end
         else begin
-            if ((global_var(876) == 1) and (global_var(891) < 6) and ((game_time - global_var(1031)) > (24 * (60 * (60 * 10)) * 3))) then begin
-                set_global_var(893, 7);
-                set_global_var(865, global_var(865) bwor 32768);
-                set_global_var(876, 0);
-                set_global_var(1019, global_var(1019) bwand (-1 - 65536));
-                if ((global_var(1017) bwand 4) != 0) then begin
+            if ((global_var(GVAR_AQ_QUEST_TRIBE_HELP_REVEGE) == 1) and (global_var(GVAR_AQ_DOCTORS_COUNTER) < 6) and ((game_time - global_var(GVAR_AQ_PRIMITIVES_HELP_TIMER)) > (24 * (60 * (60 * 10)) * 3))) then begin
+                set_global_var(GVAR_AQ_PRIMATACKERS_COUNTER, 7);
+                set_global_var(GVAR_AQ_ALBUQ_EVENTS, global_var(GVAR_AQ_ALBUQ_EVENTS) bwor 32768);
+                set_global_var(GVAR_AQ_QUEST_TRIBE_HELP_REVEGE, 0);
+                set_global_var(GVAR_PTR_LYSTRA_REACTIONS_1, global_var(GVAR_PTR_LYSTRA_REACTIONS_1) bwand (-1 - 65536));
+                if ((global_var(GVAR_AQE_DIRECTIONS_SETUP) bwand 4) != 0) then begin
                     to_see_anim_emeror := 1;
                 end
-                if ((global_var(1017) bwand 2) != 0) then begin
+                if ((global_var(GVAR_AQE_DIRECTIONS_SETUP) bwand 2) != 0) then begin
                     to_see_anim_hunters := 1;
                 end
-                if ((global_var(1017) bwand 8) != 0) then begin
+                if ((global_var(GVAR_AQE_DIRECTIONS_SETUP) bwand 8) != 0) then begin
                     to_see_anim_shelter := 1;
                 end
                 special_event := 1;
             end
-            if ((global_var(1017) bwand 1) != 0) then begin
-                if (((global_var(904) bwand 1) != 0) or (((global_var(1017) bwand 2048) != 0) and ((global_var(904) bwand 8192) != 0) or (global_var(1029) == 2)) and not((map_var(0) bwand 32768) != 0)) then begin
+            if ((global_var(GVAR_AQE_DIRECTIONS_SETUP) bwand 1) != 0) then begin
+                if (((global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS) bwand 1) != 0) or (((global_var(GVAR_AQE_DIRECTIONS_SETUP) bwand 2048) != 0) and ((global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS) bwand 8192) != 0) or (global_var(GVAR_AQE_KICK_BENICIO_FROM_ALBUQUERQUE) == 2)) and not((map_var(0) bwand 32768) != 0)) then begin
                     set_map_var(0, map_var(0) bwor 32768);
-                    if ((map_var(4) == 0) and ((global_var(865) bwand 32768) != 0)) then begin
+                    if ((map_var(4) == 0) and ((global_var(GVAR_AQ_ALBUQ_EVENTS) bwand 32768) != 0)) then begin
                         set_map_var(4, 3);
-                        set_global_var(867, global_var(867) bwor 512);
+                        set_global_var(GVAR_AQ_ALBUQ_DEATHS, global_var(GVAR_AQ_ALBUQ_DEATHS) bwor 512);
                     end
                     special_event := 1;
                 end
-                if ((special_event == 0) and ((global_var(904) bwand 67108864) != 0) and ((game_time - global_var(1003)) > (24 * (60 * (60 * 10)) * 6)) and not((map_var(0) bwand 16384) != 0)) then begin
+                if ((special_event == 0) and ((global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS) bwand 67108864) != 0) and ((game_time - global_var(GVAR_AQE_MARIO_WAITING_TIME)) > (24 * (60 * (60 * 10)) * 6)) and not((map_var(0) bwand 16384) != 0)) then begin
                     set_map_var(0, map_var(0) bwor 262144);
                 end
-                set_global_var(1017, global_var(1017) bwand (-1 - 1));
+                set_global_var(GVAR_AQE_DIRECTIONS_SETUP, global_var(GVAR_AQE_DIRECTIONS_SETUP) bwand (-1 - 1));
             end
-            if ((global_var(1017) bwand 2) != 0) then begin
-                if (((global_var(904) bwand 1) != 0) or (((global_var(1017) bwand 2048) != 0) and ((global_var(904) bwand 8192) != 0) or (global_var(1029) == 2)) and not((map_var(0) bwand 65536) != 0)) then begin
+            if ((global_var(GVAR_AQE_DIRECTIONS_SETUP) bwand 2) != 0) then begin
+                if (((global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS) bwand 1) != 0) or (((global_var(GVAR_AQE_DIRECTIONS_SETUP) bwand 2048) != 0) and ((global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS) bwand 8192) != 0) or (global_var(GVAR_AQE_KICK_BENICIO_FROM_ALBUQUERQUE) == 2)) and not((map_var(0) bwand 65536) != 0)) then begin
                     set_map_var(0, map_var(0) bwor 65536);
-                    if ((map_var(4) == 0) and ((global_var(865) bwand 32768) != 0)) then begin
+                    if ((map_var(4) == 0) and ((global_var(GVAR_AQ_ALBUQ_EVENTS) bwand 32768) != 0)) then begin
                         set_map_var(4, 3);
-                        set_global_var(867, global_var(867) bwor 512);
+                        set_global_var(GVAR_AQ_ALBUQ_DEATHS, global_var(GVAR_AQ_ALBUQ_DEATHS) bwor 512);
                     end
                     special_event := 1;
                 end
-                if ((special_event == 0) and ((global_var(904) bwand 67108864) != 0) and ((game_time - global_var(1003)) > (24 * (60 * (60 * 10)) * 6)) and not((map_var(0) bwand 16384) != 0)) then begin
+                if ((special_event == 0) and ((global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS) bwand 67108864) != 0) and ((game_time - global_var(GVAR_AQE_MARIO_WAITING_TIME)) > (24 * (60 * (60 * 10)) * 6)) and not((map_var(0) bwand 16384) != 0)) then begin
                     set_map_var(0, map_var(0) bwor 524288);
                 end
-                set_global_var(1017, global_var(1017) bwand (-1 - 2));
+                set_global_var(GVAR_AQE_DIRECTIONS_SETUP, global_var(GVAR_AQE_DIRECTIONS_SETUP) bwand (-1 - 2));
             end
-            if ((global_var(1017) bwand 4) != 0) then begin
-                if (((global_var(904) bwand 1) != 0) or (((global_var(1017) bwand 2048) != 0) and ((global_var(904) bwand 8192) != 0) or (global_var(1029) == 2)) and not((map_var(0) bwand 131072) != 0)) then begin
+            if ((global_var(GVAR_AQE_DIRECTIONS_SETUP) bwand 4) != 0) then begin
+                if (((global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS) bwand 1) != 0) or (((global_var(GVAR_AQE_DIRECTIONS_SETUP) bwand 2048) != 0) and ((global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS) bwand 8192) != 0) or (global_var(GVAR_AQE_KICK_BENICIO_FROM_ALBUQUERQUE) == 2)) and not((map_var(0) bwand 131072) != 0)) then begin
                     move_to(dude_obj, 14703, 0);
                     anim(dude_obj, 1000, 2);
                     if (party_member_obj(16777729) != 0) then begin
                         if (party_member_obj(16777729) != 0) then begin
-                            if (has_trait(1, party_member_obj(16777729), 666)) then begin
-                                critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                            if (obj_is_visible_flag(party_member_obj(16777729))) then begin
+                                critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                             end
                         end
                     end
-                    if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+                    if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                         if (party_member_obj(16777779) != 0) then begin
-                            if (has_trait(1, party_member_obj(16777779), 666)) then begin
-                                critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                            if (obj_is_visible_flag(party_member_obj(16777779))) then begin
+                                critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                             end
                         end
                     end
-                    if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+                    if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                         if (party_member_obj(16777811) != 0) then begin
-                            if (has_trait(1, party_member_obj(16777811), 666)) then begin
-                                critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                            if (obj_is_visible_flag(party_member_obj(16777811))) then begin
+                                critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                             end
                         end
                     end
                     if (party_member_obj(16777812) != 0) then begin
                         if (party_member_obj(16777812) != 0) then begin
-                            if (has_trait(1, party_member_obj(16777812), 666)) then begin
-                                critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                            if (obj_is_visible_flag(party_member_obj(16777812))) then begin
+                                critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                             end
                         end
                     end
-                    if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+                    if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                         if (party_member_obj(16777814) != 0) then begin
-                            if (has_trait(1, party_member_obj(16777814), 666)) then begin
-                                critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                            if (obj_is_visible_flag(party_member_obj(16777814))) then begin
+                                critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                             end
                         end
                     end
                     if (party_member_obj(16777748) != 0) then begin
                         if (party_member_obj(16777748) != 0) then begin
-                            if (has_trait(1, party_member_obj(16777748), 666)) then begin
-                                critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                            if (obj_is_visible_flag(party_member_obj(16777748))) then begin
+                                critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                             end
                         end
                     end
                     if (party_member_obj(16778017) != 0) then begin
                         if (party_member_obj(16778017) != 0) then begin
-                            if (has_trait(1, party_member_obj(16778017), 666)) then begin
-                                critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                            if (obj_is_visible_flag(party_member_obj(16778017))) then begin
+                                critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                             end
                         end
                     end
                     if (party_member_obj(16778016) != 0) then begin
                         if (party_member_obj(16778016) != 0) then begin
-                            if (has_trait(1, party_member_obj(16778016), 666)) then begin
-                                critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                            if (obj_is_visible_flag(party_member_obj(16778016))) then begin
+                                critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                             end
                         end
                     end
                     if (party_member_obj(16778049) != 0) then begin
                         if (party_member_obj(16778049) != 0) then begin
-                            if (has_trait(1, party_member_obj(16778049), 666)) then begin
-                                critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                            if (obj_is_visible_flag(party_member_obj(16778049))) then begin
+                                critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                             end
                         end
                     end
                     if (party_member_obj(16778050) != 0) then begin
                         if (party_member_obj(16778050) != 0) then begin
-                            if (has_trait(1, party_member_obj(16778050), 666)) then begin
-                                critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                            if (obj_is_visible_flag(party_member_obj(16778050))) then begin
+                                critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                             end
                         end
                     end
                     if (party_member_obj(16778051) != 0) then begin
                         if (party_member_obj(16778051) != 0) then begin
-                            if (has_trait(1, party_member_obj(16778051), 666)) then begin
-                                critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                            if (obj_is_visible_flag(party_member_obj(16778051))) then begin
+                                critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                             end
                         end
                     end
                     if (party_member_obj(16777294) != 0) then begin
                         if (party_member_obj(16777294) != 0) then begin
-                            if (has_trait(1, party_member_obj(16777294), 666)) then begin
-                                critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                            if (obj_is_visible_flag(party_member_obj(16777294))) then begin
+                                critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                             end
                         end
                     end
                     if (party_member_obj(16777729) != 0) then begin
                         anim(party_member_obj(16777729), 1000, 2);
                     end
-                    if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+                    if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                         anim(party_member_obj(16777779), 1000, 2);
                     end
-                    if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+                    if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                         anim(party_member_obj(16777811), 1000, 2);
                     end
-                    if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+                    if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                         anim(party_member_obj(16777814), 1000, 2);
                     end
                     if (party_member_obj(16778017) != 0) then begin
@@ -482,122 +482,122 @@ begin
                     end
                     set_map_var(0, map_var(0) bwor 131072);
                     special_event := 1;
-                    if ((map_var(4) == 0) and ((global_var(865) bwand 32768) != 0)) then begin
+                    if ((map_var(4) == 0) and ((global_var(GVAR_AQ_ALBUQ_EVENTS) bwand 32768) != 0)) then begin
                         set_map_var(4, 3);
-                        set_global_var(867, global_var(867) bwor 512);
+                        set_global_var(GVAR_AQ_ALBUQ_DEATHS, global_var(GVAR_AQ_ALBUQ_DEATHS) bwor 512);
                     end
                     add_timer_event(self_obj, game_ticks(0), 30);
                 end
-                if ((special_event == 0) and ((global_var(904) bwand 67108864) != 0) and ((game_time - global_var(1003)) > (24 * (60 * (60 * 10)) * 6)) and not((map_var(0) bwand 16384) != 0)) then begin
+                if ((special_event == 0) and ((global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS) bwand 67108864) != 0) and ((game_time - global_var(GVAR_AQE_MARIO_WAITING_TIME)) > (24 * (60 * (60 * 10)) * 6)) and not((map_var(0) bwand 16384) != 0)) then begin
                     set_map_var(0, map_var(0) bwor 2097152);
                 end
-                set_global_var(1017, global_var(1017) bwand (-1 - 4));
+                set_global_var(GVAR_AQE_DIRECTIONS_SETUP, global_var(GVAR_AQE_DIRECTIONS_SETUP) bwand (-1 - 4));
             end
-            if ((global_var(1017) bwand 8) != 0) then begin
-                if ((special_event == 0) and ((global_var(904) bwand 67108864) != 0) and ((game_time - global_var(1003)) > (24 * (60 * (60 * 10)) * 6)) and not((map_var(0) bwand 16384) != 0)) then begin
+            if ((global_var(GVAR_AQE_DIRECTIONS_SETUP) bwand 8) != 0) then begin
+                if ((special_event == 0) and ((global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS) bwand 67108864) != 0) and ((game_time - global_var(GVAR_AQE_MARIO_WAITING_TIME)) > (24 * (60 * (60 * 10)) * 6)) and not((map_var(0) bwand 16384) != 0)) then begin
                     set_map_var(0, map_var(0) bwor 1048576);
                 end
-                set_global_var(1017, global_var(1017) bwand (-1 - 8));
+                set_global_var(GVAR_AQE_DIRECTIONS_SETUP, global_var(GVAR_AQE_DIRECTIONS_SETUP) bwand (-1 - 8));
             end
             special_event := 0;
         end
-        if ((global_var(992) == 2) and (Projed_smycku == 0)) then begin
+        if ((global_var(GVAR_AQE_QUEST_ELISA_3) == 2) and (Projed_smycku == 0)) then begin
             move_to(dude_obj, 14057, 2);
             anim(dude_obj, 1000, 3);
             if (party_member_obj(16777729) != 0) then begin
                 if (party_member_obj(16777729) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777729), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777729))) then begin
+                        critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+            if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                 if (party_member_obj(16777779) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777779), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777779))) then begin
+                        critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+            if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                 if (party_member_obj(16777811) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777811), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777811))) then begin
+                        critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777812) != 0) then begin
                 if (party_member_obj(16777812) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777812), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777812))) then begin
+                        critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+            if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                 if (party_member_obj(16777814) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777814), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777814))) then begin
+                        critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777748) != 0) then begin
                 if (party_member_obj(16777748) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777748), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777748))) then begin
+                        critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778017) != 0) then begin
                 if (party_member_obj(16778017) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778017), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778017))) then begin
+                        critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778016) != 0) then begin
                 if (party_member_obj(16778016) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778016), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778016))) then begin
+                        critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778049) != 0) then begin
                 if (party_member_obj(16778049) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778049), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778049))) then begin
+                        critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778050) != 0) then begin
                 if (party_member_obj(16778050) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778050), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778050))) then begin
+                        critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778051) != 0) then begin
                 if (party_member_obj(16778051) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778051), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778051))) then begin
+                        critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777294) != 0) then begin
                 if (party_member_obj(16777294) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777294), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777294))) then begin
+                        critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777729) != 0) then begin
                 anim(party_member_obj(16777729), 1000, 3);
             end
-            if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+            if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                 anim(party_member_obj(16777779), 1000, 3);
             end
-            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+            if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                 anim(party_member_obj(16777811), 1000, 3);
             end
-            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+            if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                 anim(party_member_obj(16777814), 1000, 3);
             end
             if (party_member_obj(16778017) != 0) then begin
@@ -620,125 +620,125 @@ begin
             end
             call Generate_Dude_Soldiers();
             Projed_smycku := 1;
-            if ((map_var(4) == 0) and ((global_var(865) bwand 32768) != 0)) then begin
+            if ((map_var(4) == 0) and ((global_var(GVAR_AQ_ALBUQ_EVENTS) bwand 32768) != 0)) then begin
                 set_map_var(4, 3);
-                set_global_var(867, global_var(867) bwor 512);
+                set_global_var(GVAR_AQ_ALBUQ_DEATHS, global_var(GVAR_AQ_ALBUQ_DEATHS) bwor 512);
             end
             add_timer_event(self_obj, game_ticks(0), 10);
         end
-        if ((global_var(998) != 1) and not((global_var(1000) bwand 32) != 0)) then begin
-            if ((global_var(574) == 1) and (global_var(992) == 0) and (global_var(1008) == 0) and not((global_var(1000) bwand 8) != 0)) then begin
-                set_global_var(1000, global_var(1000) bwor 32);
-                create_object_sid(16777804, 0, 0, 107);
+        if ((global_var(GVAR_AQE_ENEMY_EMPEROR) != 1) and not((global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS_NEXT) bwand 32) != 0)) then begin
+            if ((global_var(GVAR_HOLODISK_ENCLAVE_STATE) == 1) and (global_var(GVAR_AQE_QUEST_ELISA_3) == 0) and (global_var(GVAR_AQE_HELP_TO_ARAN) == 0) and not((global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS_NEXT) bwand 8) != 0)) then begin
+                set_global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS_NEXT, global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS_NEXT) bwor 32);
+                create_object_sid(16777804, 0, 0, SCRIPT_APIPMSG);
             end
-            if ((global_var(898) < 4) and ((global_var(882) != 4) and (global_var(881) != 2) and (global_var(883) != 2)) and (global_var(859) == 0) and ((global_var(1000) bwand 16) == 0) and not((global_var(867) bwand 33554432) != 0) and ((global_var(1017) bwand 131072) == 0)) then begin
-                if ((global_var(574) == 1) and ((global_var(1006) == 0) and ((global_var(904) bwand 2) != 0) and not((global_var(904) bwand 8192) != 0) or ((global_var(1007) == 0) and ((global_var(904) bwand 1) != 0)))) then begin
-                    set_global_var(1000, global_var(1000) bwor 32);
-                    create_object_sid(16777804, 0, 0, 107);
+            if ((global_var(GVAR_AQ_MUTANT_HUNTERS_CANDIDATE) < 4) and ((global_var(GVAR_AQ_QUEST_MTHUNT_HERMAN_QUEST) != 4) and (global_var(GVAR_AQ_QUEST_MTHUNT_TULSA_QUEST) != 2) and (global_var(GVAR_AQ_QUEST_MTHUNT_DUTCH_QUEST) != 2)) and (global_var(GVAR_AQ_MUTANT_HUNTER) == 0) and ((global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS_NEXT) bwand 16) == 0) and not((global_var(GVAR_AQ_ALBUQ_DEATHS) bwand 33554432) != 0) and ((global_var(GVAR_AQE_DIRECTIONS_SETUP) bwand 131072) == 0)) then begin
+                if ((global_var(GVAR_HOLODISK_ENCLAVE_STATE) == 1) and ((global_var(GVAR_AQE_MESAGE_FROM_ELISA) == 0) and ((global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS) bwand 2) != 0) and not((global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS) bwand 8192) != 0) or ((global_var(GVAR_AQE_MESAGE_FROM_ARAN) == 0) and ((global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS) bwand 1) != 0)))) then begin
+                    set_global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS_NEXT, global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS_NEXT) bwor 32);
+                    create_object_sid(16777804, 0, 0, SCRIPT_APIPMSG);
                 end
             end
-            if ((global_var(574) == 1) and ((global_var(1017) bwand 131072) == 0) and ((global_var(1017) bwand 65536) != 0) and (global_var(864) == 0) and ((global_var(1000) bwand 16) == 0) and ((global_var(882) == 4) or (global_var(881) == 2) or (global_var(883) == 2))) then begin
-                set_global_var(1000, global_var(1000) bwor 32);
-                create_object_sid(16777804, 0, 0, 107);
+            if ((global_var(GVAR_HOLODISK_ENCLAVE_STATE) == 1) and ((global_var(GVAR_AQE_DIRECTIONS_SETUP) bwand 131072) == 0) and ((global_var(GVAR_AQE_DIRECTIONS_SETUP) bwand 65536) != 0) and (global_var(GVAR_AQ_ENEMY_HUNTERS) == 0) and ((global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS_NEXT) bwand 16) == 0) and ((global_var(GVAR_AQ_QUEST_MTHUNT_HERMAN_QUEST) == 4) or (global_var(GVAR_AQ_QUEST_MTHUNT_TULSA_QUEST) == 2) or (global_var(GVAR_AQ_QUEST_MTHUNT_DUTCH_QUEST) == 2))) then begin
+                set_global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS_NEXT, global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS_NEXT) bwor 32);
+                create_object_sid(16777804, 0, 0, SCRIPT_APIPMSG);
             end
         end
-        if (((global_var(865) bwand 4) != 0) and (Projed_smycku == 0) and (global_var(869) != 2)) then begin
+        if (((global_var(GVAR_AQ_ALBUQ_EVENTS) bwand 4) != 0) and (Projed_smycku == 0) and (global_var(GVAR_AQ_QUEST_SOPHIE_MUTATION) != 2)) then begin
             move_to(dude_obj, 12503, 0);
             anim(dude_obj, 1000, 5);
             if (party_member_obj(16777729) != 0) then begin
                 if (party_member_obj(16777729) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777729), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777729))) then begin
+                        critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+            if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                 if (party_member_obj(16777779) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777779), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777779))) then begin
+                        critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+            if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                 if (party_member_obj(16777811) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777811), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777811))) then begin
+                        critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777812) != 0) then begin
                 if (party_member_obj(16777812) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777812), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777812))) then begin
+                        critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+            if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                 if (party_member_obj(16777814) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777814), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777814))) then begin
+                        critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777748) != 0) then begin
                 if (party_member_obj(16777748) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777748), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777748))) then begin
+                        critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778017) != 0) then begin
                 if (party_member_obj(16778017) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778017), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778017))) then begin
+                        critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778016) != 0) then begin
                 if (party_member_obj(16778016) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778016), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778016))) then begin
+                        critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778049) != 0) then begin
                 if (party_member_obj(16778049) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778049), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778049))) then begin
+                        critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778050) != 0) then begin
                 if (party_member_obj(16778050) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778050), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778050))) then begin
+                        critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778051) != 0) then begin
                 if (party_member_obj(16778051) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778051), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778051))) then begin
+                        critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777294) != 0) then begin
                 if (party_member_obj(16777294) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777294), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777294))) then begin
+                        critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777729) != 0) then begin
                 anim(party_member_obj(16777729), 1000, 5);
             end
-            if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+            if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                 anim(party_member_obj(16777779), 1000, 5);
             end
-            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+            if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                 anim(party_member_obj(16777811), 1000, 5);
             end
-            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+            if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                 anim(party_member_obj(16777814), 1000, 5);
             end
             if (party_member_obj(16778017) != 0) then begin
@@ -759,118 +759,118 @@ begin
             if (party_member_obj(16777812) != 0) then begin
                 anim(party_member_obj(16777812), 1000, 5);
             end
-            lorian := create_object_sid(16777975, 9899, 0, -1);
+            lorian := create_object(16777975, 9899, 0);
             anim(lorian, 1000, 2);
-            catherine := create_object_sid(16777938, 11700, 0, -1);
+            catherine := create_object(16777938, 11700, 0);
             anim(catherine, 1000, 5);
-            sophia := create_object_sid(16777939, 11100, 0, -1);
+            sophia := create_object(16777939, 11100, 0);
             anim(sophia, 1000, 5);
             add_timer_event(self_obj, game_ticks(0), 1);
-            if ((map_var(4) == 0) and ((global_var(865) bwand 32768) != 0)) then begin
+            if ((map_var(4) == 0) and ((global_var(GVAR_AQ_ALBUQ_EVENTS) bwand 32768) != 0)) then begin
                 set_map_var(4, 3);
-                set_global_var(867, global_var(867) bwor 512);
+                set_global_var(GVAR_AQ_ALBUQ_DEATHS, global_var(GVAR_AQ_ALBUQ_DEATHS) bwor 512);
             end
             Projed_smycku := 1;
         end
-        if ((global_var(883) == 1) and (Projed_smycku == 0) and not((map_var(0) bwand 16) != 0)) then begin
+        if ((global_var(GVAR_AQ_QUEST_MTHUNT_DUTCH_QUEST) == 1) and (Projed_smycku == 0) and not((map_var(0) bwand 16) != 0)) then begin
             call Generate_Ghouls();
             move_to(dude_obj, 23950, 0);
             anim(dude_obj, 1000, 5);
-            set_global_var(857, 0);
+            set_global_var(GVAR_FRIENDLY_FIRE, 0);
             if (party_member_obj(16777729) != 0) then begin
                 if (party_member_obj(16777729) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777729), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777729))) then begin
+                        critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+            if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                 if (party_member_obj(16777779) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777779), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777779))) then begin
+                        critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+            if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                 if (party_member_obj(16777811) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777811), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777811))) then begin
+                        critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777812) != 0) then begin
                 if (party_member_obj(16777812) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777812), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777812))) then begin
+                        critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+            if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                 if (party_member_obj(16777814) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777814), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777814))) then begin
+                        critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777748) != 0) then begin
                 if (party_member_obj(16777748) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777748), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777748))) then begin
+                        critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778017) != 0) then begin
                 if (party_member_obj(16778017) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778017), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778017))) then begin
+                        critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778016) != 0) then begin
                 if (party_member_obj(16778016) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778016), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778016))) then begin
+                        critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778049) != 0) then begin
                 if (party_member_obj(16778049) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778049), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778049))) then begin
+                        critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778050) != 0) then begin
                 if (party_member_obj(16778050) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778050), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778050))) then begin
+                        critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778051) != 0) then begin
                 if (party_member_obj(16778051) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778051), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778051))) then begin
+                        critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777294) != 0) then begin
                 if (party_member_obj(16777294) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777294), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777294))) then begin
+                        critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777729) != 0) then begin
                 anim(party_member_obj(16777729), 1000, 5);
             end
-            if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+            if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                 anim(party_member_obj(16777779), 1000, 5);
             end
-            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+            if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                 anim(party_member_obj(16777811), 1000, 5);
             end
-            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+            if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                 anim(party_member_obj(16777814), 1000, 5);
             end
             if (party_member_obj(16778017) != 0) then begin
@@ -892,120 +892,120 @@ begin
                 anim(party_member_obj(16777812), 1000, 5);
             end
             set_map_var(0, map_var(0) bwor 16);
-            if ((map_var(4) == 0) and ((global_var(865) bwand 32768) != 0)) then begin
+            if ((map_var(4) == 0) and ((global_var(GVAR_AQ_ALBUQ_EVENTS) bwand 32768) != 0)) then begin
                 set_map_var(4, 3);
-                set_global_var(867, global_var(867) bwor 512);
+                set_global_var(GVAR_AQ_ALBUQ_DEATHS, global_var(GVAR_AQ_ALBUQ_DEATHS) bwor 512);
             end
             add_timer_event(self_obj, game_ticks(0), 2);
             Projed_smycku := 1;
         end
-        if ((global_var(876) == 2) and (Projed_smycku == 0) and not((map_var(0) bwand 64) != 0) and not((global_var(867) bwand 512) != 0)) then begin
-            set_global_var(863, 0);
-            if (global_var(864) == 1) then begin
-                set_global_var(864, 0);
+        if ((global_var(GVAR_AQ_QUEST_TRIBE_HELP_REVEGE) == 2) and (Projed_smycku == 0) and not((map_var(0) bwand 64) != 0) and not((global_var(GVAR_AQ_ALBUQ_DEATHS) bwand 512) != 0)) then begin
+            set_global_var(GVAR_AQ_ENEMY_HOSPITAL, 0);
+            if (global_var(GVAR_AQ_ENEMY_HUNTERS) == 1) then begin
+                set_global_var(GVAR_AQ_ENEMY_HUNTERS, 0);
                 enemy_lovci := 1;
             end
             call Generate_Primitives();
-            if (((global_var(865) bwand 65536) != 0) and (global_var(998) == 0)) then begin
+            if (((global_var(GVAR_AQ_ALBUQ_EVENTS) bwand 65536) != 0) and (global_var(GVAR_AQE_ENEMY_EMPEROR) == 0)) then begin
                 call Generate_Imperial_Soldiers();
             end
             move_to(dude_obj, 28884, 0);
             anim(dude_obj, 1000, 5);
-            set_global_var(857, 0);
+            set_global_var(GVAR_FRIENDLY_FIRE, 0);
             if (party_member_obj(16777729) != 0) then begin
                 if (party_member_obj(16777729) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777729), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777729))) then begin
+                        critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+            if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                 if (party_member_obj(16777779) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777779), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777779))) then begin
+                        critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+            if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                 if (party_member_obj(16777811) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777811), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777811))) then begin
+                        critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777812) != 0) then begin
                 if (party_member_obj(16777812) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777812), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777812))) then begin
+                        critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+            if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                 if (party_member_obj(16777814) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777814), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777814))) then begin
+                        critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777748) != 0) then begin
                 if (party_member_obj(16777748) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777748), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777748))) then begin
+                        critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778017) != 0) then begin
                 if (party_member_obj(16778017) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778017), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778017))) then begin
+                        critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778016) != 0) then begin
                 if (party_member_obj(16778016) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778016), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778016))) then begin
+                        critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778049) != 0) then begin
                 if (party_member_obj(16778049) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778049), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778049))) then begin
+                        critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778050) != 0) then begin
                 if (party_member_obj(16778050) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778050), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778050))) then begin
+                        critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778051) != 0) then begin
                 if (party_member_obj(16778051) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778051), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778051))) then begin
+                        critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777294) != 0) then begin
                 if (party_member_obj(16777294) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777294), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777294))) then begin
+                        critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777729) != 0) then begin
                 anim(party_member_obj(16777729), 1000, 5);
             end
-            if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+            if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                 anim(party_member_obj(16777779), 1000, 5);
             end
-            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+            if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                 anim(party_member_obj(16777811), 1000, 5);
             end
-            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+            if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                 anim(party_member_obj(16777814), 1000, 5);
             end
             if (party_member_obj(16778017) != 0) then begin
@@ -1030,33 +1030,33 @@ begin
             add_timer_event(self_obj, game_ticks(1), 4);
             Projed_smycku := 1;
         end
-        if (((game_time - map_var(3)) > (24 * (60 * (60 * 10)) * 3)) and (global_var(891) >= 6) and not((map_var(0) bwand 512) != 0)) then begin
+        if (((game_time - map_var(3)) > (24 * (60 * (60 * 10)) * 3)) and (global_var(GVAR_AQ_DOCTORS_COUNTER) >= 6) and not((map_var(0) bwand 512) != 0)) then begin
             set_map_var(0, map_var(0) bwor 512);
-            create_object_sid(16777967, 24093, 0, 1684);
-            create_object_sid(16777968, 25898, 0, 1684);
-            create_object_sid(16777969, 25889, 0, 1684);
-            create_object_sid(16777970, 24271, 0, 1684);
-            create_object_sid(16777971, 23283, 0, 1684);
-            create_object_sid(16777972, 21898, 0, 1684);
-            create_object_sid(16777974, 26270, 0, 1684);
-            create_object_sid(16777804, 22070, 0, 1433);
-            create_object_sid(16777805, 21076, 0, 1433);
-            create_object_sid(16777807, 21083, 0, 1433);
-        end
-        if ((map_var(4) == 0) and ((global_var(865) bwand 32768) != 0)) then begin
+            create_object_sid(16777967, 24093, 0, SCRIPT_AUBOZAK1);
+            create_object_sid(16777968, 25898, 0, SCRIPT_AUBOZAK1);
+            create_object_sid(16777969, 25889, 0, SCRIPT_AUBOZAK1);
+            create_object_sid(16777970, 24271, 0, SCRIPT_AUBOZAK1);
+            create_object_sid(16777971, 23283, 0, SCRIPT_AUBOZAK1);
+            create_object_sid(16777972, 21898, 0, SCRIPT_AUBOZAK1);
+            create_object_sid(16777974, 26270, 0, SCRIPT_AUBOZAK1);
+            create_object_sid(16777804, 22070, 0, SCRIPT_FETAK1);
+            create_object_sid(16777805, 21076, 0, SCRIPT_FETAK1);
+            create_object_sid(16777807, 21083, 0, SCRIPT_FETAK1);
+        end
+        if ((map_var(4) == 0) and ((global_var(GVAR_AQ_ALBUQ_EVENTS) bwand 32768) != 0)) then begin
             game_ui_disable;
             call Generate_Primitives_Own_Attack();
-            if (((global_var(865) bwand 65536) != 0) and (global_var(998) == 0)) then begin
-                set_global_var(891, 6);
+            if (((global_var(GVAR_AQ_ALBUQ_EVENTS) bwand 65536) != 0) and (global_var(GVAR_AQE_ENEMY_EMPEROR) == 0)) then begin
+                set_global_var(GVAR_AQ_DOCTORS_COUNTER, 6);
                 call Generate_Primitives_Own_Attack_With_Imperial();
             end
             set_obj_visibility(dude_obj, 1);
-            set_global_var(632, global_var(632) bwor 64);
+            set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwor 64);
             if (party_member_obj(16777729) != 0) then begin
                 if (party_member_obj(16777729)) then begin
-                    if (has_trait(1, party_member_obj(16777729), 666)) then begin
+                    if (obj_is_visible_flag(party_member_obj(16777729))) then begin
                         debug_msg("set party member hidden: " + obj_name(party_member_obj(16777729)));
-                        set_global_var(632, global_var(632) bwor 1);
+                        set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwor 1);
                         set_obj_visibility(party_member_obj(16777729), 1);
                     end
                     else begin
@@ -1064,11 +1064,11 @@ begin
                     end
                 end
             end
-            if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+            if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                 if (party_member_obj(16777779)) then begin
-                    if (has_trait(1, party_member_obj(16777779), 666)) then begin
+                    if (obj_is_visible_flag(party_member_obj(16777779))) then begin
                         debug_msg("set party member hidden: " + obj_name(party_member_obj(16777779)));
-                        set_global_var(632, global_var(632) bwor 2);
+                        set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwor 2);
                         set_obj_visibility(party_member_obj(16777779), 1);
                     end
                     else begin
@@ -1076,11 +1076,11 @@ begin
                     end
                 end
             end
-            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+            if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                 if (party_member_obj(16777811)) then begin
-                    if (has_trait(1, party_member_obj(16777811), 666)) then begin
+                    if (obj_is_visible_flag(party_member_obj(16777811))) then begin
                         debug_msg("set party member hidden: " + obj_name(party_member_obj(16777811)));
-                        set_global_var(632, global_var(632) bwor 4);
+                        set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwor 4);
                         set_obj_visibility(party_member_obj(16777811), 1);
                     end
                     else begin
@@ -1090,9 +1090,9 @@ begin
             end
             if (party_member_obj(16777812) != 0) then begin
                 if (party_member_obj(16777812)) then begin
-                    if (has_trait(1, party_member_obj(16777812), 666)) then begin
+                    if (obj_is_visible_flag(party_member_obj(16777812))) then begin
                         debug_msg("set party member hidden: " + obj_name(party_member_obj(16777812)));
-                        set_global_var(632, global_var(632) bwor 8);
+                        set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwor 8);
                         set_obj_visibility(party_member_obj(16777812), 1);
                     end
                     else begin
@@ -1102,9 +1102,9 @@ begin
             end
             if (party_member_obj(16777813) != 0) then begin
                 if (party_member_obj(16777813)) then begin
-                    if (has_trait(1, party_member_obj(16777813), 666)) then begin
+                    if (obj_is_visible_flag(party_member_obj(16777813))) then begin
                         debug_msg("set party member hidden: " + obj_name(party_member_obj(16777813)));
-                        set_global_var(632, global_var(632) bwor 16);
+                        set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwor 16);
                         set_obj_visibility(party_member_obj(16777813), 1);
                     end
                     else begin
@@ -1112,11 +1112,11 @@ begin
                     end
                 end
             end
-            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+            if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                 if (party_member_obj(16777814)) then begin
-                    if (has_trait(1, party_member_obj(16777814), 666)) then begin
+                    if (obj_is_visible_flag(party_member_obj(16777814))) then begin
                         debug_msg("set party member hidden: " + obj_name(party_member_obj(16777814)));
-                        set_global_var(632, global_var(632) bwor 32);
+                        set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwor 32);
                         set_obj_visibility(party_member_obj(16777814), 1);
                     end
                     else begin
@@ -1124,33 +1124,33 @@ begin
                     end
                 end
             end
-            set_global_var(867, global_var(867) bwor 512);
+            set_global_var(GVAR_AQ_ALBUQ_DEATHS, global_var(GVAR_AQ_ALBUQ_DEATHS) bwor 512);
             set_map_var(4, 1);
-            if (global_var(864) == 1) then begin
-                set_global_var(864, 0);
+            if (global_var(GVAR_AQ_ENEMY_HUNTERS) == 1) then begin
+                set_global_var(GVAR_AQ_ENEMY_HUNTERS, 0);
                 enemy_lovci := 1;
             end
-            if (global_var(863) == 1) then begin
-                set_global_var(863, 0);
+            if (global_var(GVAR_AQ_ENEMY_HOSPITAL) == 1) then begin
+                set_global_var(GVAR_AQ_ENEMY_HOSPITAL, 0);
                 enemy_hospital := 1;
             end
             Projed_smycku := 1;
             add_timer_event(self_obj, 2, 5);
         end
-        if ((global_var(994) == 2) and not((map_var(0) bwand 2048) != 0)) then begin
+        if ((global_var(GVAR_AQE_QUEST_ANONYM_2_FIGHT) == 2) and not((map_var(0) bwand 2048) != 0)) then begin
             call Generate_Exploded_Soldiers();
             set_map_var(0, map_var(0) bwor 2048);
         end
-        if ((global_var(995) >= 3) and not((map_var(0) bwand 2048) != 0)) then begin
+        if ((global_var(GVAR_AQE_QUEST_ANONYM_2_SPEECH) >= 3) and not((map_var(0) bwand 2048) != 0)) then begin
             call Generate_Dead_Soldiers();
             set_map_var(0, map_var(0) bwor 2048);
         end
-        if (((global_var(904) bwand 67108864) != 0) and (Projed_smycku == 0) and ((game_time - global_var(1003)) > (24 * (60 * (60 * 10)) * 6)) and not((map_var(0) bwand 16384) != 0)) then begin
+        if (((global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS) bwand 67108864) != 0) and (Projed_smycku == 0) and ((game_time - global_var(GVAR_AQE_MARIO_WAITING_TIME)) > (24 * (60 * (60 * 10)) * 6)) and not((map_var(0) bwand 16384) != 0)) then begin
             if ((map_var(0) bwand 2097152) != 0) then begin
                 set_map_var(0, map_var(0) bwand (-1 - 2097152));
             end
             else begin
-                mario := create_object_sid(16777813, 0, 0, 109);
+                mario := create_object_sid(16777813, 0, 0, SCRIPT_AMARIO2);
                 if ((map_var(0) bwand 262144) != 0) then begin
                     critter_attempt_placement(mario, 29487, 0);
                 end
@@ -1170,27 +1170,27 @@ end
 
 procedure map_update_p_proc
 begin
-    if ((global_var(990) == 2) and (elevation(dude_obj) == 1)) then begin
+    if ((global_var(GVAR_AQE_QUEST_ELISA_1) == 2) and (dude_elevation == 1)) then begin
         call Generate_Dead_Soldiers();
-        set_global_var(990, 3);
-        set_global_var(1020, global_var(1020) bwand (-1 - 8));
-        if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
-            set_global_var(1020, global_var(1020) bwor 16);
+        set_global_var(GVAR_AQE_QUEST_ELISA_1, 3);
+        set_global_var(GVAR_PTR_LYSTRA_REACTIONS_2, global_var(GVAR_PTR_LYSTRA_REACTIONS_2) bwand (-1 - 8));
+        if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
+            set_global_var(GVAR_PTR_LYSTRA_REACTIONS_2, global_var(GVAR_PTR_LYSTRA_REACTIONS_2) bwor 16);
         end
-        display_msg(message_str(1635, 2300));
+        display_mstr(2300);
     end
-    if ((global_var(994) == 2) and (elevation(dude_obj) == 1) and ((map_var(0) bwand 33554432) == 0)) then begin
+    if ((global_var(GVAR_AQE_QUEST_ANONYM_2_FIGHT) == 2) and (dude_elevation == 1) and ((map_var(0) bwand 33554432) == 0)) then begin
         set_map_var(0, map_var(0) bwor 33554432);
-        display_msg(message_str(1635, 2202));
+        display_mstr(2202);
     end
-    if ((global_var(996) == 2) and ((map_var(0) bwand 4096) != 0) and (elevation(dude_obj) == 2) and (global_var(998) == 0)) then begin
+    if ((global_var(GVAR_AQE_QUEST_ANONYM_3) == 2) and ((map_var(0) bwand 4096) != 0) and (dude_elevation == 2) and (global_var(GVAR_AQE_ENEMY_EMPEROR) == 0)) then begin
         anim(dude_obj, 1000, 2);
         game_ui_disable;
         add_timer_event(self_obj, game_ticks(1), 8);
         sequence := 0;
         set_map_var(0, map_var(0) bwand (-1 - 4096));
     end
-    if (elevation(dude_obj) == 0) then begin
+    if (dude_elevation == 0) then begin
         if ((get_month >= 3) and (get_month < 5)) then begin
             if ((game_time_hour >= 600) and (game_time_hour < (600 + 100))) then begin
                 set_light_level(game_time_hour - 600 + 40);
@@ -1275,53 +1275,53 @@ end
 
 procedure map_exit_p_proc
 begin
-    if (tile_in_tile_rect(8703, 8695, 9703, 9695, tile_num(dude_obj))) then begin
-        set_global_var(1017, global_var(1017) bwor 32);
+    if (tile_in_tile_rect(8703, 8695, 9703, 9695, dude_tile)) then begin
+        set_global_var(GVAR_AQE_DIRECTIONS_SETUP, global_var(GVAR_AQE_DIRECTIONS_SETUP) bwor 32);
     end
-    set_global_var(857, 0);
-    if ((map_var(3) == 0) and (global_var(891) >= 6)) then begin
+    set_global_var(GVAR_FRIENDLY_FIRE, 0);
+    if ((map_var(3) == 0) and (global_var(GVAR_AQ_DOCTORS_COUNTER) >= 6)) then begin
         set_map_var(3, game_time);
     end
 end
 
 procedure timed_event_p_proc
 begin
-    if ((fixed_param == 1) and ((global_var(865) bwand 4) != 0) and (global_var(869) != 2)) then begin
+    if ((fixed_param == 1) and ((global_var(GVAR_AQ_ALBUQ_EVENTS) bwand 4) != 0) and (global_var(GVAR_AQ_QUEST_SOPHIE_MUTATION) != 2)) then begin
         if (fixed_param == 1) then begin
             sequence := sequence + 1;
         end
         if (sequence == 1) then begin
-            metarule3(108, 10299, 0, 0);
+            tile_set_center(10299);
             game_ui_disable;
             anim(sophia, 1000, 2);
             add_timer_event(self_obj, game_ticks(2), 1);
         end
         if (sequence == 2) then begin
-            float_msg(catherine, message_str(1635, 100), 8);
+            float_msg(catherine, mstr(100), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(6), 1);
         end
         if (sequence == 3) then begin
-            float_msg(sophia, message_str(1635, 101), 2);
+            float_msg(sophia, mstr(101), FLOAT_MSG_RED);
             add_timer_event(self_obj, game_ticks(5), 1);
         end
         if (sequence == 4) then begin
-            float_msg(catherine, message_str(1635, 102), 8);
+            float_msg(catherine, mstr(102), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(6), 1);
         end
         if (sequence == 5) then begin
-            float_msg(sophia, message_str(1635, 103), 2);
+            float_msg(sophia, mstr(103), FLOAT_MSG_RED);
             add_timer_event(self_obj, game_ticks(5), 1);
         end
         if (sequence == 6) then begin
-            float_msg(catherine, message_str(1635, 104), 8);
+            float_msg(catherine, mstr(104), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(5), 1);
         end
         if (sequence == 7) then begin
-            float_msg(sophia, message_str(1635, 105), 2);
+            float_msg(sophia, mstr(105), FLOAT_MSG_RED);
             add_timer_event(self_obj, game_ticks(5), 1);
         end
         if (sequence == 8) then begin
-            float_msg(catherine, message_str(1635, 106), 8);
+            float_msg(catherine, mstr(106), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(3), 1);
         end
         if (sequence == 9) then begin
@@ -1330,11 +1330,11 @@ begin
             add_timer_event(self_obj, 5, 1);
         end
         if (sequence == 10) then begin
-            float_msg(catherine, message_str(1635, 107), 8);
+            float_msg(catherine, mstr(107), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(5), 1);
         end
         if (sequence == 11) then begin
-            float_msg(lorian, message_str(1635, 108), 3);
+            float_msg(lorian, mstr(108), FLOAT_MSG_GREEN);
             reg_anim_func(2, sophia);
             anim(sophia, 1000, 2);
             add_timer_event(self_obj, game_ticks(4), 1);
@@ -1356,53 +1356,53 @@ begin
         if (sequence == 15) then begin
             game_ui_enable;
             sequence := 0;
-            set_global_var(869, 2);
+            set_global_var(GVAR_AQ_QUEST_SOPHIE_MUTATION, 2);
             give_exp_points(1000);
-            display_msg(message_str(14, 100) + 1000 + message_str(14, 101));
-            set_global_var(0, global_var(0) + 30);
+            display_msg(g_mstr(100) + 1000 + g_mstr(101));
+            set_global_var(GVAR_PLAYER_REPUTATION, global_var(GVAR_PLAYER_REPUTATION) + 30);
             debug_msg("Player gains " + 30 + " Karma Points.");
-            set_global_var(37, 0);
-            set_global_var(38, 0);
-            set_global_var(39, 0);
-            set_global_var(40, 0);
-            set_global_var(41, 0);
-            set_global_var(42, 0);
-            set_global_var(43, 0);
-            set_global_var(44, 0);
-            set_global_var(45, 0);
-            if (global_var(0) >= 1000) then begin
-                set_global_var(37, 1);
+            set_global_var(GVAR_KARMA_HOLY_WARRIOR, 0);
+            set_global_var(GVAR_KARMA_GUARDIAN_OF_THE_WASTES, 0);
+            set_global_var(GVAR_KARMA_SHIELD_OF_HOPE, 0);
+            set_global_var(GVAR_KARMA_DEFENDER, 0);
+            set_global_var(GVAR_KARMA_WANDERER, 0);
+            set_global_var(GVAR_KARMA_BETRAYER, 0);
+            set_global_var(GVAR_KARMA_SWORD_OF_DESPAIR, 0);
+            set_global_var(GVAR_KARMA_SCOURGE_OF_THE_WASTE, 0);
+            set_global_var(GVAR_KARMA_DEMON_SPAWN, 0);
+            if (global_var(GVAR_PLAYER_REPUTATION) >= 1000) then begin
+                set_global_var(GVAR_KARMA_HOLY_WARRIOR, 1);
             end
             else begin
-                if (global_var(0) >= 750) then begin
-                    set_global_var(38, 1);
+                if (global_var(GVAR_PLAYER_REPUTATION) >= 750) then begin
+                    set_global_var(GVAR_KARMA_GUARDIAN_OF_THE_WASTES, 1);
                 end
                 else begin
-                    if (global_var(0) >= 500) then begin
-                        set_global_var(39, 1);
+                    if (global_var(GVAR_PLAYER_REPUTATION) >= 500) then begin
+                        set_global_var(GVAR_KARMA_SHIELD_OF_HOPE, 1);
                     end
                     else begin
-                        if (global_var(0) >= 250) then begin
-                            set_global_var(40, 1);
+                        if (global_var(GVAR_PLAYER_REPUTATION) >= 250) then begin
+                            set_global_var(GVAR_KARMA_DEFENDER, 1);
                         end
                         else begin
-                            if (global_var(0) > -250) then begin
-                                set_global_var(41, 1);
+                            if (global_var(GVAR_PLAYER_REPUTATION) > -250) then begin
+                                set_global_var(GVAR_KARMA_WANDERER, 1);
                             end
                             else begin
-                                if (global_var(0) > -500) then begin
-                                    set_global_var(42, 1);
+                                if (global_var(GVAR_PLAYER_REPUTATION) > -500) then begin
+                                    set_global_var(GVAR_KARMA_BETRAYER, 1);
                                 end
                                 else begin
-                                    if (global_var(0) > -750) then begin
-                                        set_global_var(43, 1);
+                                    if (global_var(GVAR_PLAYER_REPUTATION) > -750) then begin
+                                        set_global_var(GVAR_KARMA_SWORD_OF_DESPAIR, 1);
                                     end
                                     else begin
-                                        if (global_var(0) > -1000) then begin
-                                            set_global_var(44, 1);
+                                        if (global_var(GVAR_PLAYER_REPUTATION) > -1000) then begin
+                                            set_global_var(GVAR_KARMA_SCOURGE_OF_THE_WASTE, 1);
                                         end
                                         else begin
-                                            set_global_var(45, 1);
+                                            set_global_var(GVAR_KARMA_DEMON_SPAWN, 1);
                                         end
                                     end
                                 end
@@ -1411,22 +1411,22 @@ begin
                     end
                 end
             end
-            set_global_var(51, global_var(51) + 3);
-            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
-                set_global_var(1019, global_var(1019) bwor 134217728);
+            set_global_var(GVAR_TOWN_REP_ALBUQUERQUE, global_var(GVAR_TOWN_REP_ALBUQUERQUE) + 3);
+            if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
+                set_global_var(GVAR_PTR_LYSTRA_REACTIONS_1, global_var(GVAR_PTR_LYSTRA_REACTIONS_1) bwor 134217728);
             end
         end
     end
-    if ((fixed_param == 2) and (global_var(883) == 1)) then begin
+    if ((fixed_param == 2) and (global_var(GVAR_AQ_QUEST_MTHUNT_DUTCH_QUEST) == 1)) then begin
         if (fixed_param == 2) then begin
             sequence2 := sequence2 + 1;
         end
         if (sequence2 == 1) then begin
-            metarule3(108, 21548, 0, 0);
+            tile_set_center(21548);
             game_ui_disable;
             animate_move_obj_to_tile(dude_obj, 20950, 0);
             animate_move_obj_to_tile(Dutch_obj, 21152, 0);
-            gfade_in(1);
+            fade_in;
             add_timer_event(self_obj, game_ticks(3), 2);
         end
         if (sequence2 == 2) then begin
@@ -1439,7 +1439,7 @@ begin
             add_timer_event(self_obj, game_ticks(2), 2);
         end
         if (sequence2 == 3) then begin
-            float_msg(Dutch_obj, message_str(1631, 404), 8);
+            float_msg(Dutch_obj, message_str(SCRIPT_ADUTCH, 404), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, 1, 2);
         end
         if (sequence2 == 4) then begin
@@ -1453,7 +1453,7 @@ begin
             sequence := sequence + 1;
         end
         if (sequence == 1) then begin
-            set_global_var(863, 0);
+            set_global_var(GVAR_AQ_ENEMY_HOSPITAL, 0);
             game_ui_disable;
             add_timer_event(self_obj, 2, 3);
         end
@@ -1471,19 +1471,19 @@ begin
         end
         if (sequence == 5) then begin
             game_ui_enable;
-            set_global_var(863, 1);
+            set_global_var(GVAR_AQ_ENEMY_HOSPITAL, 1);
         end
     end
     if (fixed_param == 4) then begin
         game_ui_enable;
-        float_msg(gurgan, message_str(1617, 410), 2);
-        set_global_var(863, 1);
-        set_global_var(876, 3);
+        float_msg(gurgan, message_str(SCRIPT_AGURGAN, 410), FLOAT_MSG_RED);
+        set_global_var(GVAR_AQ_ENEMY_HOSPITAL, 1);
+        set_global_var(GVAR_AQ_QUEST_TRIBE_HELP_REVEGE, 3);
         if (enemy_lovci == 1) then begin
-            set_global_var(864, 1);
+            set_global_var(GVAR_AQ_ENEMY_HUNTERS, 1);
         end
-        if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
-            set_global_var(1018, global_var(1018) bwor 2097152);
+        if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
+            set_global_var(GVAR_PTR_GABRIEL_REACTIONS, global_var(GVAR_PTR_GABRIEL_REACTIONS) bwor 2097152);
         end
     end
     if (fixed_param == 5) then begin
@@ -1494,85 +1494,85 @@ begin
             move_to(dude_obj, 27284, 0);
             if (party_member_obj(16777729) != 0) then begin
                 if (party_member_obj(16777729) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777729), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777729))) then begin
+                        critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+            if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                 if (party_member_obj(16777779) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777779), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777779))) then begin
+                        critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+            if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                 if (party_member_obj(16777811) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777811), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777811))) then begin
+                        critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777812) != 0) then begin
                 if (party_member_obj(16777812) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777812), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777812))) then begin
+                        critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+            if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                 if (party_member_obj(16777814) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777814), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777814))) then begin
+                        critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777748) != 0) then begin
                 if (party_member_obj(16777748) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777748), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777748))) then begin
+                        critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778017) != 0) then begin
                 if (party_member_obj(16778017) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778017), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778017))) then begin
+                        critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778016) != 0) then begin
                 if (party_member_obj(16778016) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778016), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778016))) then begin
+                        critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778049) != 0) then begin
                 if (party_member_obj(16778049) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778049), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778049))) then begin
+                        critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778050) != 0) then begin
                 if (party_member_obj(16778050) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778050), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778050))) then begin
+                        critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778051) != 0) then begin
                 if (party_member_obj(16778051) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778051), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778051))) then begin
+                        critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777294) != 0) then begin
                 if (party_member_obj(16777294) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777294), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777294))) then begin
+                        critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
@@ -1627,7 +1627,7 @@ begin
             add_timer_event(self_obj, game_ticks(1), 5);
         end
         if (sequence == 5) then begin
-            if (((global_var(865) bwand 65536) != 0) and (global_var(998) == 0)) then begin
+            if (((global_var(GVAR_AQ_ALBUQ_EVENTS) bwand 65536) != 0) and (global_var(GVAR_AQE_ENEMY_EMPEROR) == 0)) then begin
                 animate_move_obj_to_tile(is1, 28097, 1);
                 animate_move_obj_to_tile(is2, 28498, 1);
                 animate_move_obj_to_tile(is3, 27900, 1);
@@ -1751,14 +1751,14 @@ begin
             reg_anim_func(1, 1);
             reg_anim_animate(gurgan, 34, -1);
             reg_anim_func(3, 0);
-            if (((global_var(865) bwand 65536) != 0) and (global_var(998) == 0)) then begin
+            if (((global_var(GVAR_AQ_ALBUQ_EVENTS) bwand 65536) != 0) and (global_var(GVAR_AQE_ENEMY_EMPEROR) == 0)) then begin
                 add_timer_event(self_obj, game_ticks(2), 5);
             end
             else begin
                 add_timer_event(self_obj, game_ticks(3), 5);
             end
         end
-        if (((global_var(865) bwand 65536) != 0) and (global_var(998) == 0)) then begin
+        if (((global_var(GVAR_AQ_ALBUQ_EVENTS) bwand 65536) != 0) and (global_var(GVAR_AQE_ENEMY_EMPEROR) == 0)) then begin
             if (sequence == 11) then begin
                 anim(nm3, 1000, 3);
                 anim(nm4, 1000, 3);
@@ -1788,7 +1788,7 @@ begin
                 add_timer_event(self_obj, game_ticks(1), 5);
             end
         end
-        if (((global_var(865) bwand 65536) != 0) and (global_var(998) == 0)) then begin
+        if (((global_var(GVAR_AQ_ALBUQ_EVENTS) bwand 65536) != 0) and (global_var(GVAR_AQE_ENEMY_EMPEROR) == 0)) then begin
             if (sequence == 12) then begin
                 reg_anim_func(2, is3);
                 reg_anim_func(1, 1);
@@ -1810,18 +1810,18 @@ begin
             if (sequence == 12) then begin
                 if (to_see_anim_emeror == 1) then begin
                     move_to(dude_obj, 10299, elevation(self_obj));
-                    metarule3(108, 11499, 0, 0);
+                    tile_set_center(11499);
                     anim(dude_obj, 1000, 2);
                     if (party_member_obj(16777729) != 0) then begin
                         anim(party_member_obj(16777729), 1000, 2);
                     end
-                    if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+                    if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                         anim(party_member_obj(16777779), 1000, 2);
                     end
-                    if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+                    if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                         anim(party_member_obj(16777811), 1000, 2);
                     end
-                    if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+                    if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                         anim(party_member_obj(16777814), 1000, 2);
                     end
                     if (party_member_obj(16778017) != 0) then begin
@@ -1846,18 +1846,18 @@ begin
                 else begin
                     if (to_see_anim_hunters == 1) then begin
                         move_to(dude_obj, 18461, elevation(self_obj));
-                        metarule3(108, 18670, 0, 0);
+                        tile_set_center(18670);
                         anim(dude_obj, 1000, 3);
                         if (party_member_obj(16777729) != 0) then begin
                             anim(party_member_obj(16777729), 1000, 3);
                         end
-                        if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+                        if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                             anim(party_member_obj(16777779), 1000, 3);
                         end
-                        if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+                        if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                             anim(party_member_obj(16777811), 1000, 3);
                         end
-                        if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+                        if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                             anim(party_member_obj(16777814), 1000, 3);
                         end
                         if (party_member_obj(16778017) != 0) then begin
@@ -1882,18 +1882,18 @@ begin
                     else begin
                         if (to_see_anim_shelter == 1) then begin
                             move_to(dude_obj, 24315, elevation(self_obj));
-                            metarule3(108, 24315, 0, 0);
+                            tile_set_center(24315);
                             anim(dude_obj, 1000, 2);
                             if (party_member_obj(16777729) != 0) then begin
                                 anim(party_member_obj(16777729), 1000, 2);
                             end
-                            if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+                            if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                                 anim(party_member_obj(16777779), 1000, 2);
                             end
-                            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+                            if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                                 anim(party_member_obj(16777811), 1000, 2);
                             end
-                            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+                            if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                                 anim(party_member_obj(16777814), 1000, 2);
                             end
                             if (party_member_obj(16778017) != 0) then begin
@@ -1917,18 +1917,18 @@ begin
                         end
                         else begin
                             move_to(dude_obj, 31277, elevation(self_obj));
-                            metarule3(108, 29677, 0, 0);
+                            tile_set_center(29677);
                             anim(dude_obj, 1000, 5);
                             if (party_member_obj(16777729) != 0) then begin
                                 anim(party_member_obj(16777729), 1000, 5);
                             end
-                            if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+                            if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                                 anim(party_member_obj(16777779), 1000, 5);
                             end
-                            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+                            if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                                 anim(party_member_obj(16777811), 1000, 5);
                             end
-                            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+                            if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                                 anim(party_member_obj(16777814), 1000, 5);
                             end
                             if (party_member_obj(16778017) != 0) then begin
@@ -1953,13 +1953,13 @@ begin
                     end
                 end
                 set_obj_visibility(dude_obj, 0);
-                set_global_var(632, global_var(632) bwand (-1 - 64));
+                set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 64));
                 if (party_member_obj(16777729) != 0) then begin
                     if (party_member_obj(16777729)) then begin
-                        if (has_trait(1, party_member_obj(16777729), 666) == 0) then begin
-                            if ((global_var(632) bwand 1) != 0) then begin
+                        if (obj_is_visible_flag(party_member_obj(16777729)) == 0) then begin
+                            if ((global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand 1) != 0) then begin
                                 debug_msg("unhiding party member " + obj_name(party_member_obj(16777729)));
-                                set_global_var(632, global_var(632) bwand (-1 - 1));
+                                set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 1));
                                 set_obj_visibility(party_member_obj(16777729), 0);
                             end
                             else begin
@@ -1968,18 +1968,18 @@ begin
                         end
                         else begin
                             debug_msg("unhiding party member " + obj_name(party_member_obj(16777729)));
-                            set_global_var(632, global_var(632) bwand (-1 - 1));
+                            set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 1));
                             set_obj_visibility(party_member_obj(16777729), 0);
                             debug_msg("PARTY.H:::: party member wasn't hidden.. clearing my state");
                         end
                     end
                 end
-                if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+                if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                     if (party_member_obj(16777779)) then begin
-                        if (has_trait(1, party_member_obj(16777779), 666) == 0) then begin
-                            if ((global_var(632) bwand 2) != 0) then begin
+                        if (obj_is_visible_flag(party_member_obj(16777779)) == 0) then begin
+                            if ((global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand 2) != 0) then begin
                                 debug_msg("unhiding party member " + obj_name(party_member_obj(16777779)));
-                                set_global_var(632, global_var(632) bwand (-1 - 2));
+                                set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 2));
                                 set_obj_visibility(party_member_obj(16777779), 0);
                             end
                             else begin
@@ -1988,18 +1988,18 @@ begin
                         end
                         else begin
                             debug_msg("unhiding party member " + obj_name(party_member_obj(16777779)));
-                            set_global_var(632, global_var(632) bwand (-1 - 2));
+                            set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 2));
                             set_obj_visibility(party_member_obj(16777779), 0);
                             debug_msg("PARTY.H:::: party member wasn't hidden.. clearing my state");
                         end
                     end
                 end
-                if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+                if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                     if (party_member_obj(16777811)) then begin
-                        if (has_trait(1, party_member_obj(16777811), 666) == 0) then begin
-                            if ((global_var(632) bwand 4) != 0) then begin
+                        if (obj_is_visible_flag(party_member_obj(16777811)) == 0) then begin
+                            if ((global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand 4) != 0) then begin
                                 debug_msg("unhiding party member " + obj_name(party_member_obj(16777811)));
-                                set_global_var(632, global_var(632) bwand (-1 - 4));
+                                set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 4));
                                 set_obj_visibility(party_member_obj(16777811), 0);
                             end
                             else begin
@@ -2008,7 +2008,7 @@ begin
                         end
                         else begin
                             debug_msg("unhiding party member " + obj_name(party_member_obj(16777811)));
-                            set_global_var(632, global_var(632) bwand (-1 - 4));
+                            set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 4));
                             set_obj_visibility(party_member_obj(16777811), 0);
                             debug_msg("PARTY.H:::: party member wasn't hidden.. clearing my state");
                         end
@@ -2016,10 +2016,10 @@ begin
                 end
                 if (party_member_obj(16777812) != 0) then begin
                     if (party_member_obj(16777812)) then begin
-                        if (has_trait(1, party_member_obj(16777812), 666) == 0) then begin
-                            if ((global_var(632) bwand 8) != 0) then begin
+                        if (obj_is_visible_flag(party_member_obj(16777812)) == 0) then begin
+                            if ((global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand 8) != 0) then begin
                                 debug_msg("unhiding party member " + obj_name(party_member_obj(16777812)));
-                                set_global_var(632, global_var(632) bwand (-1 - 8));
+                                set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 8));
                                 set_obj_visibility(party_member_obj(16777812), 0);
                             end
                             else begin
@@ -2028,7 +2028,7 @@ begin
                         end
                         else begin
                             debug_msg("unhiding party member " + obj_name(party_member_obj(16777812)));
-                            set_global_var(632, global_var(632) bwand (-1 - 8));
+                            set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 8));
                             set_obj_visibility(party_member_obj(16777812), 0);
                             debug_msg("PARTY.H:::: party member wasn't hidden.. clearing my state");
                         end
@@ -2036,10 +2036,10 @@ begin
                 end
                 if (party_member_obj(16777813) != 0) then begin
                     if (party_member_obj(16777813)) then begin
-                        if (has_trait(1, party_member_obj(16777813), 666) == 0) then begin
-                            if ((global_var(632) bwand 16) != 0) then begin
+                        if (obj_is_visible_flag(party_member_obj(16777813)) == 0) then begin
+                            if ((global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand 16) != 0) then begin
                                 debug_msg("unhiding party member " + obj_name(party_member_obj(16777813)));
-                                set_global_var(632, global_var(632) bwand (-1 - 16));
+                                set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 16));
                                 set_obj_visibility(party_member_obj(16777813), 0);
                             end
                             else begin
@@ -2048,18 +2048,18 @@ begin
                         end
                         else begin
                             debug_msg("unhiding party member " + obj_name(party_member_obj(16777813)));
-                            set_global_var(632, global_var(632) bwand (-1 - 16));
+                            set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 16));
                             set_obj_visibility(party_member_obj(16777813), 0);
                             debug_msg("PARTY.H:::: party member wasn't hidden.. clearing my state");
                         end
                     end
                 end
-                if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+                if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                     if (party_member_obj(16777814)) then begin
-                        if (has_trait(1, party_member_obj(16777814), 666) == 0) then begin
-                            if ((global_var(632) bwand 32) != 0) then begin
+                        if (obj_is_visible_flag(party_member_obj(16777814)) == 0) then begin
+                            if ((global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand 32) != 0) then begin
                                 debug_msg("unhiding party member " + obj_name(party_member_obj(16777814)));
-                                set_global_var(632, global_var(632) bwand (-1 - 32));
+                                set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 32));
                                 set_obj_visibility(party_member_obj(16777814), 0);
                             end
                             else begin
@@ -2068,7 +2068,7 @@ begin
                         end
                         else begin
                             debug_msg("unhiding party member " + obj_name(party_member_obj(16777814)));
-                            set_global_var(632, global_var(632) bwand (-1 - 32));
+                            set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 32));
                             set_obj_visibility(party_member_obj(16777814), 0);
                             debug_msg("PARTY.H:::: party member wasn't hidden.. clearing my state");
                         end
@@ -2076,85 +2076,85 @@ begin
                 end
                 if (party_member_obj(16777729) != 0) then begin
                     if (party_member_obj(16777729) != 0) then begin
-                        if (has_trait(1, party_member_obj(16777729), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16777729))) then begin
+                            critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
-                if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+                if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                     if (party_member_obj(16777779) != 0) then begin
-                        if (has_trait(1, party_member_obj(16777779), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16777779))) then begin
+                            critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
-                if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+                if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                     if (party_member_obj(16777811) != 0) then begin
-                        if (has_trait(1, party_member_obj(16777811), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16777811))) then begin
+                            critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
                 if (party_member_obj(16777812) != 0) then begin
                     if (party_member_obj(16777812) != 0) then begin
-                        if (has_trait(1, party_member_obj(16777812), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16777812))) then begin
+                            critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
-                if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+                if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                     if (party_member_obj(16777814) != 0) then begin
-                        if (has_trait(1, party_member_obj(16777814), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16777814))) then begin
+                            critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
                 if (party_member_obj(16777748) != 0) then begin
                     if (party_member_obj(16777748) != 0) then begin
-                        if (has_trait(1, party_member_obj(16777748), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16777748))) then begin
+                            critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
                 if (party_member_obj(16778017) != 0) then begin
                     if (party_member_obj(16778017) != 0) then begin
-                        if (has_trait(1, party_member_obj(16778017), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16778017))) then begin
+                            critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
                 if (party_member_obj(16778016) != 0) then begin
                     if (party_member_obj(16778016) != 0) then begin
-                        if (has_trait(1, party_member_obj(16778016), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16778016))) then begin
+                            critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
                 if (party_member_obj(16778049) != 0) then begin
                     if (party_member_obj(16778049) != 0) then begin
-                        if (has_trait(1, party_member_obj(16778049), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16778049))) then begin
+                            critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
                 if (party_member_obj(16778050) != 0) then begin
                     if (party_member_obj(16778050) != 0) then begin
-                        if (has_trait(1, party_member_obj(16778050), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16778050))) then begin
+                            critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
                 if (party_member_obj(16778051) != 0) then begin
                     if (party_member_obj(16778051) != 0) then begin
-                        if (has_trait(1, party_member_obj(16778051), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16778051))) then begin
+                            critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
                 if (party_member_obj(16777294) != 0) then begin
                     if (party_member_obj(16777294) != 0) then begin
-                        if (has_trait(1, party_member_obj(16777294), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16777294))) then begin
+                            critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
@@ -2172,19 +2172,19 @@ begin
                 destroy_object(pr6);
                 destroy_object(pr7);
                 destroy_object(gurgan);
-                create_object_sid(33555756, 28295, 0, -1);
-                create_object_sid(33555758, 28888, 0, -1);
-                create_object_sid(33555755, 29282, 0, -1);
-                create_object_sid(33555757, 28479, 0, -1);
-                create_object_sid(33555758, 26885, 0, -1);
-                create_object_sid(33555756, 27886, 0, -1);
-                create_object_sid(33555757, 27878, 0, -1);
-                create_object_sid(33555757, 28284, 0, -1);
+                create_object(33555756, 28295, 0);
+                create_object(33555758, 28888, 0);
+                create_object(33555755, 29282, 0);
+                create_object(33555757, 28479, 0);
+                create_object(33555758, 26885, 0);
+                create_object(33555756, 27886, 0);
+                create_object(33555757, 27878, 0);
+                create_object(33555757, 28284, 0);
                 set_map_var(4, 2);
                 add_timer_event(self_obj, game_ticks(1), 5);
             end
         end
-        if (((global_var(865) bwand 65536) != 0) and (global_var(998) == 0)) then begin
+        if (((global_var(GVAR_AQ_ALBUQ_EVENTS) bwand 65536) != 0) and (global_var(GVAR_AQE_ENEMY_EMPEROR) == 0)) then begin
             if (sequence == 13) then begin
                 gfade_out(600);
                 play_sfx("WAC1XXX1");
@@ -2216,23 +2216,23 @@ begin
                 add_timer_event(self_obj, 5, 5);
             end
         end
-        if (((global_var(865) bwand 65536) != 0) and (global_var(998) == 0)) then begin
+        if (((global_var(GVAR_AQ_ALBUQ_EVENTS) bwand 65536) != 0) and (global_var(GVAR_AQE_ENEMY_EMPEROR) == 0)) then begin
             if (sequence == 14) then begin
                 play_sfx("WAC1XXX1");
                 if (to_see_anim_emeror == 1) then begin
                     move_to(dude_obj, 10299, elevation(self_obj));
-                    metarule3(108, 11499, 0, 0);
+                    tile_set_center(11499);
                     anim(dude_obj, 1000, 2);
                     if (party_member_obj(16777729) != 0) then begin
                         anim(party_member_obj(16777729), 1000, 2);
                     end
-                    if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+                    if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                         anim(party_member_obj(16777779), 1000, 2);
                     end
-                    if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+                    if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                         anim(party_member_obj(16777811), 1000, 2);
                     end
-                    if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+                    if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                         anim(party_member_obj(16777814), 1000, 2);
                     end
                     if (party_member_obj(16778017) != 0) then begin
@@ -2257,18 +2257,18 @@ begin
                 else begin
                     if (to_see_anim_hunters == 1) then begin
                         move_to(dude_obj, 18461, elevation(self_obj));
-                        metarule3(108, 18670, 0, 0);
+                        tile_set_center(18670);
                         anim(dude_obj, 1000, 3);
                         if (party_member_obj(16777729) != 0) then begin
                             anim(party_member_obj(16777729), 1000, 3);
                         end
-                        if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+                        if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                             anim(party_member_obj(16777779), 1000, 3);
                         end
-                        if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+                        if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                             anim(party_member_obj(16777811), 1000, 3);
                         end
-                        if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+                        if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                             anim(party_member_obj(16777814), 1000, 3);
                         end
                         if (party_member_obj(16778017) != 0) then begin
@@ -2293,18 +2293,18 @@ begin
                     else begin
                         if (to_see_anim_shelter == 1) then begin
                             move_to(dude_obj, 24315, elevation(self_obj));
-                            metarule3(108, 24315, 0, 0);
+                            tile_set_center(24315);
                             anim(dude_obj, 1000, 2);
                             if (party_member_obj(16777729) != 0) then begin
                                 anim(party_member_obj(16777729), 1000, 2);
                             end
-                            if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+                            if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                                 anim(party_member_obj(16777779), 1000, 2);
                             end
-                            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+                            if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                                 anim(party_member_obj(16777811), 1000, 2);
                             end
-                            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+                            if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                                 anim(party_member_obj(16777814), 1000, 2);
                             end
                             if (party_member_obj(16778017) != 0) then begin
@@ -2328,18 +2328,18 @@ begin
                         end
                         else begin
                             move_to(dude_obj, 31277, elevation(self_obj));
-                            metarule3(108, 29677, 0, 0);
+                            tile_set_center(29677);
                             anim(dude_obj, 1000, 5);
                             if (party_member_obj(16777729) != 0) then begin
                                 anim(party_member_obj(16777729), 1000, 5);
                             end
-                            if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+                            if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                                 anim(party_member_obj(16777779), 1000, 5);
                             end
-                            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+                            if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                                 anim(party_member_obj(16777811), 1000, 5);
                             end
-                            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+                            if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                                 anim(party_member_obj(16777814), 1000, 5);
                             end
                             if (party_member_obj(16778017) != 0) then begin
@@ -2364,13 +2364,13 @@ begin
                     end
                 end
                 set_obj_visibility(dude_obj, 0);
-                set_global_var(632, global_var(632) bwand (-1 - 64));
+                set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 64));
                 if (party_member_obj(16777729) != 0) then begin
                     if (party_member_obj(16777729)) then begin
-                        if (has_trait(1, party_member_obj(16777729), 666) == 0) then begin
-                            if ((global_var(632) bwand 1) != 0) then begin
+                        if (obj_is_visible_flag(party_member_obj(16777729)) == 0) then begin
+                            if ((global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand 1) != 0) then begin
                                 debug_msg("unhiding party member " + obj_name(party_member_obj(16777729)));
-                                set_global_var(632, global_var(632) bwand (-1 - 1));
+                                set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 1));
                                 set_obj_visibility(party_member_obj(16777729), 0);
                             end
                             else begin
@@ -2379,18 +2379,18 @@ begin
                         end
                         else begin
                             debug_msg("unhiding party member " + obj_name(party_member_obj(16777729)));
-                            set_global_var(632, global_var(632) bwand (-1 - 1));
+                            set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 1));
                             set_obj_visibility(party_member_obj(16777729), 0);
                             debug_msg("PARTY.H:::: party member wasn't hidden.. clearing my state");
                         end
                     end
                 end
-                if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+                if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                     if (party_member_obj(16777779)) then begin
-                        if (has_trait(1, party_member_obj(16777779), 666) == 0) then begin
-                            if ((global_var(632) bwand 2) != 0) then begin
+                        if (obj_is_visible_flag(party_member_obj(16777779)) == 0) then begin
+                            if ((global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand 2) != 0) then begin
                                 debug_msg("unhiding party member " + obj_name(party_member_obj(16777779)));
-                                set_global_var(632, global_var(632) bwand (-1 - 2));
+                                set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 2));
                                 set_obj_visibility(party_member_obj(16777779), 0);
                             end
                             else begin
@@ -2399,18 +2399,18 @@ begin
                         end
                         else begin
                             debug_msg("unhiding party member " + obj_name(party_member_obj(16777779)));
-                            set_global_var(632, global_var(632) bwand (-1 - 2));
+                            set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 2));
                             set_obj_visibility(party_member_obj(16777779), 0);
                             debug_msg("PARTY.H:::: party member wasn't hidden.. clearing my state");
                         end
                     end
                 end
-                if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+                if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                     if (party_member_obj(16777811)) then begin
-                        if (has_trait(1, party_member_obj(16777811), 666) == 0) then begin
-                            if ((global_var(632) bwand 4) != 0) then begin
+                        if (obj_is_visible_flag(party_member_obj(16777811)) == 0) then begin
+                            if ((global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand 4) != 0) then begin
                                 debug_msg("unhiding party member " + obj_name(party_member_obj(16777811)));
-                                set_global_var(632, global_var(632) bwand (-1 - 4));
+                                set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 4));
                                 set_obj_visibility(party_member_obj(16777811), 0);
                             end
                             else begin
@@ -2419,7 +2419,7 @@ begin
                         end
                         else begin
                             debug_msg("unhiding party member " + obj_name(party_member_obj(16777811)));
-                            set_global_var(632, global_var(632) bwand (-1 - 4));
+                            set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 4));
                             set_obj_visibility(party_member_obj(16777811), 0);
                             debug_msg("PARTY.H:::: party member wasn't hidden.. clearing my state");
                         end
@@ -2427,10 +2427,10 @@ begin
                 end
                 if (party_member_obj(16777812) != 0) then begin
                     if (party_member_obj(16777812)) then begin
-                        if (has_trait(1, party_member_obj(16777812), 666) == 0) then begin
-                            if ((global_var(632) bwand 8) != 0) then begin
+                        if (obj_is_visible_flag(party_member_obj(16777812)) == 0) then begin
+                            if ((global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand 8) != 0) then begin
                                 debug_msg("unhiding party member " + obj_name(party_member_obj(16777812)));
-                                set_global_var(632, global_var(632) bwand (-1 - 8));
+                                set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 8));
                                 set_obj_visibility(party_member_obj(16777812), 0);
                             end
                             else begin
@@ -2439,7 +2439,7 @@ begin
                         end
                         else begin
                             debug_msg("unhiding party member " + obj_name(party_member_obj(16777812)));
-                            set_global_var(632, global_var(632) bwand (-1 - 8));
+                            set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 8));
                             set_obj_visibility(party_member_obj(16777812), 0);
                             debug_msg("PARTY.H:::: party member wasn't hidden.. clearing my state");
                         end
@@ -2447,10 +2447,10 @@ begin
                 end
                 if (party_member_obj(16777813) != 0) then begin
                     if (party_member_obj(16777813)) then begin
-                        if (has_trait(1, party_member_obj(16777813), 666) == 0) then begin
-                            if ((global_var(632) bwand 16) != 0) then begin
+                        if (obj_is_visible_flag(party_member_obj(16777813)) == 0) then begin
+                            if ((global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand 16) != 0) then begin
                                 debug_msg("unhiding party member " + obj_name(party_member_obj(16777813)));
-                                set_global_var(632, global_var(632) bwand (-1 - 16));
+                                set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 16));
                                 set_obj_visibility(party_member_obj(16777813), 0);
                             end
                             else begin
@@ -2459,18 +2459,18 @@ begin
                         end
                         else begin
                             debug_msg("unhiding party member " + obj_name(party_member_obj(16777813)));
-                            set_global_var(632, global_var(632) bwand (-1 - 16));
+                            set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 16));
                             set_obj_visibility(party_member_obj(16777813), 0);
                             debug_msg("PARTY.H:::: party member wasn't hidden.. clearing my state");
                         end
                     end
                 end
-                if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+                if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                     if (party_member_obj(16777814)) then begin
-                        if (has_trait(1, party_member_obj(16777814), 666) == 0) then begin
-                            if ((global_var(632) bwand 32) != 0) then begin
+                        if (obj_is_visible_flag(party_member_obj(16777814)) == 0) then begin
+                            if ((global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand 32) != 0) then begin
                                 debug_msg("unhiding party member " + obj_name(party_member_obj(16777814)));
-                                set_global_var(632, global_var(632) bwand (-1 - 32));
+                                set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 32));
                                 set_obj_visibility(party_member_obj(16777814), 0);
                             end
                             else begin
@@ -2479,7 +2479,7 @@ begin
                         end
                         else begin
                             debug_msg("unhiding party member " + obj_name(party_member_obj(16777814)));
-                            set_global_var(632, global_var(632) bwand (-1 - 32));
+                            set_global_var(GVAR_PARTY_MEMBERS_HIDDEN, global_var(GVAR_PARTY_MEMBERS_HIDDEN) bwand (-1 - 32));
                             set_obj_visibility(party_member_obj(16777814), 0);
                             debug_msg("PARTY.H:::: party member wasn't hidden.. clearing my state");
                         end
@@ -2487,85 +2487,85 @@ begin
                 end
                 if (party_member_obj(16777729) != 0) then begin
                     if (party_member_obj(16777729) != 0) then begin
-                        if (has_trait(1, party_member_obj(16777729), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16777729))) then begin
+                            critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
-                if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+                if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                     if (party_member_obj(16777779) != 0) then begin
-                        if (has_trait(1, party_member_obj(16777779), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16777779))) then begin
+                            critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
-                if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+                if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                     if (party_member_obj(16777811) != 0) then begin
-                        if (has_trait(1, party_member_obj(16777811), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16777811))) then begin
+                            critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
                 if (party_member_obj(16777812) != 0) then begin
                     if (party_member_obj(16777812) != 0) then begin
-                        if (has_trait(1, party_member_obj(16777812), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16777812))) then begin
+                            critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
-                if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+                if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                     if (party_member_obj(16777814) != 0) then begin
-                        if (has_trait(1, party_member_obj(16777814), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16777814))) then begin
+                            critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
                 if (party_member_obj(16777748) != 0) then begin
                     if (party_member_obj(16777748) != 0) then begin
-                        if (has_trait(1, party_member_obj(16777748), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16777748))) then begin
+                            critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
                 if (party_member_obj(16778017) != 0) then begin
                     if (party_member_obj(16778017) != 0) then begin
-                        if (has_trait(1, party_member_obj(16778017), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16778017))) then begin
+                            critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
                 if (party_member_obj(16778016) != 0) then begin
                     if (party_member_obj(16778016) != 0) then begin
-                        if (has_trait(1, party_member_obj(16778016), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16778016))) then begin
+                            critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
                 if (party_member_obj(16778049) != 0) then begin
                     if (party_member_obj(16778049) != 0) then begin
-                        if (has_trait(1, party_member_obj(16778049), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16778049))) then begin
+                            critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
                 if (party_member_obj(16778050) != 0) then begin
                     if (party_member_obj(16778050) != 0) then begin
-                        if (has_trait(1, party_member_obj(16778050), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16778050))) then begin
+                            critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
                 if (party_member_obj(16778051) != 0) then begin
                     if (party_member_obj(16778051) != 0) then begin
-                        if (has_trait(1, party_member_obj(16778051), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16778051))) then begin
+                            critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
                 if (party_member_obj(16777294) != 0) then begin
                     if (party_member_obj(16777294) != 0) then begin
-                        if (has_trait(1, party_member_obj(16777294), 666)) then begin
-                            critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                        if (obj_is_visible_flag(party_member_obj(16777294))) then begin
+                            critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                         end
                     end
                 end
@@ -2587,15 +2587,15 @@ begin
                 destroy_object(pr6);
                 destroy_object(pr7);
                 destroy_object(gurgan);
-                create_object_sid(33555756, 28295, 0, -1);
-                create_object_sid(33555758, 28888, 0, -1);
-                create_object_sid(33555755, 29282, 0, -1);
-                create_object_sid(33555757, 28479, 0, -1);
-                create_object_sid(33555758, 26885, 0, -1);
-                create_object_sid(33555756, 27886, 0, -1);
-                create_object_sid(33555757, 27878, 0, -1);
+                create_object(33555756, 28295, 0);
+                create_object(33555758, 28888, 0);
+                create_object(33555755, 29282, 0);
+                create_object(33555757, 28479, 0);
+                create_object(33555758, 26885, 0);
+                create_object(33555756, 27886, 0);
+                create_object(33555757, 27878, 0);
                 set_map_var(4, 2);
-                metarule3(108, 29677, 0, 0);
+                tile_set_center(29677);
                 add_timer_event(self_obj, game_ticks(1), 5);
             end
         end
@@ -2605,7 +2605,7 @@ begin
                 add_timer_event(self_obj, game_ticks(1), 5);
             end
         end
-        if (((global_var(865) bwand 65536) != 0) and (global_var(998) == 0)) then begin
+        if (((global_var(GVAR_AQ_ALBUQ_EVENTS) bwand 65536) != 0) and (global_var(GVAR_AQE_ENEMY_EMPEROR) == 0)) then begin
             if (sequence == 15) then begin
                 reg_anim_func(2, dude_obj);
                 if (to_see_anim_emeror == 1) then begin
@@ -2635,31 +2635,31 @@ begin
                 set_map_var(4, 3);
                 sequence := 0;
                 if (enemy_lovci == 1) then begin
-                    set_global_var(864, 1);
+                    set_global_var(GVAR_AQ_ENEMY_HUNTERS, 1);
                 end
                 if (enemy_hospital == 1) then begin
-                    set_global_var(863, 1);
+                    set_global_var(GVAR_AQ_ENEMY_HOSPITAL, 1);
                 end
             end
         end
-        if (((global_var(865) bwand 65536) != 0) and (global_var(998) == 0)) then begin
+        if (((global_var(GVAR_AQ_ALBUQ_EVENTS) bwand 65536) != 0) and (global_var(GVAR_AQE_ENEMY_EMPEROR) == 0)) then begin
             if (sequence == 16) then begin
                 gfade_in(600);
-                metarule3(108, tile_num(dude_obj), 0, 0);
+                tile_set_center(dude_tile);
                 add_timer_event(self_obj, game_ticks(1), 5);
             end
         end
-        if (((global_var(865) bwand 65536) != 0) and (global_var(998) == 0)) then begin
+        if (((global_var(GVAR_AQ_ALBUQ_EVENTS) bwand 65536) != 0) and (global_var(GVAR_AQE_ENEMY_EMPEROR) == 0)) then begin
             if (sequence == 17) then begin
                 game_ui_enable;
                 set_map_var(4, 3);
                 sequence := 0;
-                set_global_var(891, 6);
+                set_global_var(GVAR_AQ_DOCTORS_COUNTER, 6);
                 if (enemy_lovci == 1) then begin
-                    set_global_var(864, 1);
+                    set_global_var(GVAR_AQ_ENEMY_HUNTERS, 1);
                 end
                 if (enemy_hospital == 1) then begin
-                    set_global_var(863, 1);
+                    set_global_var(GVAR_AQ_ENEMY_HOSPITAL, 1);
                 end
             end
         end
@@ -2669,7 +2669,7 @@ begin
         kill_critter(is2, 54);
         kill_critter(is3, 53);
         kill_critter(is4, 53);
-        if ((global_var(990) == 2) or (global_var(990) == 3) or (global_var(995) >= 3)) then begin
+        if ((global_var(GVAR_AQE_QUEST_ELISA_1) == 2) or (global_var(GVAR_AQE_QUEST_ELISA_1) == 3) or (global_var(GVAR_AQE_QUEST_ANONYM_2_SPEECH) >= 3)) then begin
             kill_critter(is5, 54);
         end
         kill_critter(is6, 61);
@@ -2679,11 +2679,11 @@ begin
         kill_critter(is10, 53);
     end
     if (fixed_param == 7) then begin
-        if (get_critter_stat(dude_obj, 34) == 0) then begin
-            display_msg(message_str(1635, 2200));
+        if (dude_gender == 0) then begin
+            display_mstr(2200);
         end
         else begin
-            display_msg(message_str(1635, 2201));
+            display_mstr(2201);
         end
     end
     if (fixed_param == 8) then begin
@@ -2699,98 +2699,98 @@ begin
             anim(dude_obj, 1000, 3);
             if (party_member_obj(16777729) != 0) then begin
                 if (party_member_obj(16777729) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777729), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777729))) then begin
+                        critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+            if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                 if (party_member_obj(16777779) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777779), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777779))) then begin
+                        critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+            if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                 if (party_member_obj(16777811) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777811), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777811))) then begin
+                        critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777812) != 0) then begin
                 if (party_member_obj(16777812) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777812), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777812))) then begin
+                        critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+            if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                 if (party_member_obj(16777814) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777814), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777814))) then begin
+                        critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777748) != 0) then begin
                 if (party_member_obj(16777748) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777748), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777748))) then begin
+                        critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778017) != 0) then begin
                 if (party_member_obj(16778017) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778017), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778017))) then begin
+                        critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778016) != 0) then begin
                 if (party_member_obj(16778016) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778016), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778016))) then begin
+                        critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778049) != 0) then begin
                 if (party_member_obj(16778049) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778049), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778049))) then begin
+                        critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778050) != 0) then begin
                 if (party_member_obj(16778050) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778050), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778050))) then begin
+                        critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778051) != 0) then begin
                 if (party_member_obj(16778051) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778051), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778051))) then begin
+                        critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777294) != 0) then begin
                 if (party_member_obj(16777294) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777294), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777294))) then begin
+                        critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777729) != 0) then begin
                 anim(party_member_obj(16777729), 1000, 3);
             end
-            if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+            if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                 anim(party_member_obj(16777779), 1000, 3);
             end
-            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+            if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                 anim(party_member_obj(16777811), 1000, 3);
             end
-            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+            if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                 anim(party_member_obj(16777814), 1000, 3);
             end
             if (party_member_obj(16778017) != 0) then begin
@@ -2816,11 +2816,11 @@ begin
         end
         if (sequence == 3) then begin
             gfade_in(600);
-            display_msg(message_str(1635, 2000));
+            display_mstr(2000);
             add_timer_event(self_obj, game_ticks(1), 8);
         end
         if (sequence == 4) then begin
-            float_msg(Anozol1_obj, message_str(1635, 2001), 8);
+            float_msg(Anozol1_obj, mstr(2001), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(1), 8);
         end
         if (sequence == 5) then begin
@@ -2829,7 +2829,7 @@ begin
         end
         if (sequence == 6) then begin
             animate_move_obj_to_tile(Elisa_obj, 14461, 0);
-            float_msg(Anozol2_obj, message_str(1635, 2002), 8);
+            float_msg(Anozol2_obj, mstr(2002), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(10), 8);
         end
         if (sequence == 7) then begin
@@ -2860,57 +2860,57 @@ begin
         end
         if (sequence2 == 3) then begin
             gfade_in(600);
-            display_msg(message_str(1635, 2100));
-            float_msg(Anozol3_obj, message_str(1635, 2101), 8);
+            display_mstr(2100);
+            float_msg(Anozol3_obj, mstr(2101), FLOAT_MSG_YELLOW);
             set_map_var(0, map_var(0) bwand (-1 - 8192));
             add_timer_event(self_obj, game_ticks(2), 9);
         end
         if (sequence2 == 4) then begin
-            float_msg(Anozol1_obj, message_str(1635, 2102), 8);
+            float_msg(Anozol1_obj, mstr(2102), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(5), 9);
         end
         if (sequence2 == 5) then begin
-            float_msg(Anozol2_obj, message_str(1635, 2103), 8);
+            float_msg(Anozol2_obj, mstr(2103), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(3), 9);
         end
         if (sequence2 == 6) then begin
-            float_msg(Anozol4_obj, message_str(1635, 2104), 8);
+            float_msg(Anozol4_obj, mstr(2104), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(3), 9);
         end
         if (sequence2 == 7) then begin
-            float_msg(aran, message_str(1635, 2105), 2);
+            float_msg(aran, mstr(2105), FLOAT_MSG_RED);
             add_timer_event(self_obj, game_ticks(6), 9);
         end
         if (sequence2 == 8) then begin
-            float_msg(Anozol2_obj, message_str(1635, 2106), 8);
+            float_msg(Anozol2_obj, mstr(2106), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(6), 9);
         end
         if (sequence2 == 9) then begin
-            float_msg(aran, message_str(1635, 2107), 2);
+            float_msg(aran, mstr(2107), FLOAT_MSG_RED);
             add_timer_event(self_obj, game_ticks(6), 9);
         end
         if (sequence2 == 10) then begin
-            float_msg(Anozol2_obj, message_str(1635, 2108), 8);
+            float_msg(Anozol2_obj, mstr(2108), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(6), 9);
         end
         if (sequence2 == 11) then begin
-            float_msg(Anozol1_obj, message_str(1635, 2109), 8);
+            float_msg(Anozol1_obj, mstr(2109), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(5), 9);
         end
         if (sequence2 == 12) then begin
-            float_msg(aran, message_str(1635, 2110), 2);
+            float_msg(aran, mstr(2110), FLOAT_MSG_RED);
             add_timer_event(self_obj, game_ticks(4), 9);
         end
         if (sequence2 == 13) then begin
-            float_msg(aran, message_str(1635, 2111), 2);
+            float_msg(aran, mstr(2111), FLOAT_MSG_RED);
             add_timer_event(self_obj, game_ticks(2), 9);
         end
         if (sequence2 == 14) then begin
-            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+            if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                 add_timer_event(party_member_obj(16777814), 0, 28);
             end
             game_ui_enable;
-            set_global_var(996, 3);
+            set_global_var(GVAR_AQE_QUEST_ANONYM_3, 3);
             attack_setup(is1, Anozol1_obj);
         end
     end
@@ -2923,11 +2923,11 @@ begin
             add_timer_event(self_obj, game_ticks(2), 10);
         end
         if (sequence2 == 2) then begin
-            float_msg(is7, message_str(1635, 1500), 8);
+            float_msg(is7, mstr(1500), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(6), 10);
         end
         if (sequence2 == 3) then begin
-            float_msg(is8, message_str(1635, 1501), 8);
+            float_msg(is8, mstr(1501), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(4), 10);
         end
         if (sequence2 == 4) then begin
@@ -2935,7 +2935,7 @@ begin
             add_timer_event(self_obj, game_ticks(1), 10);
         end
         if (sequence2 == 5) then begin
-            float_msg(dude_obj, message_str(1635, 1502), 4);
+            float_msg(dude_obj, mstr(1502), FLOAT_MSG_BLUE);
             add_timer_event(self_obj, game_ticks(10), 10);
         end
         if (sequence2 == 6) then begin
@@ -2944,7 +2944,7 @@ begin
         end
     end
     if (fixed_param == 11) then begin
-        float_msg(is8, message_str(1635, 1600), 2);
+        float_msg(is8, mstr(1600), FLOAT_MSG_RED);
         attack_setup(is8, is2);
     end
     if (fixed_param == 12) then begin
@@ -2956,21 +2956,21 @@ begin
             add_timer_event(self_obj, game_ticks(1), 12);
         end
         if (sequence == 2) then begin
-            float_msg(aran, message_str(1635, 1700), 2);
+            float_msg(aran, mstr(1700), FLOAT_MSG_RED);
             add_timer_event(self_obj, game_ticks(5), 12);
         end
         if (sequence == 3) then begin
-            float_msg(is8, message_str(1635, 1701), 8);
+            float_msg(is8, mstr(1701), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(7), 12);
         end
         if (sequence == 4) then begin
-            float_msg(is8, message_str(1635, 1702), 8);
+            float_msg(is8, mstr(1702), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(6), 12);
         end
         if (sequence == 5) then begin
-            float_msg(aran, message_str(1635, 1703), 2);
+            float_msg(aran, mstr(1703), FLOAT_MSG_RED);
             add_timer_event(self_obj, game_ticks(6), 12);
-            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0) and (global_var(1008) != 2)) then begin
+            if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0) and (global_var(GVAR_AQE_HELP_TO_ARAN) != 2)) then begin
                 add_timer_event(party_member_obj(16777814), game_ticks(1), 40);
             end
         end
@@ -2994,37 +2994,37 @@ begin
         end
         if (sequence == 8) then begin
             game_ui_enable;
-            if (global_var(1008) != 2) then begin
+            if (global_var(GVAR_AQE_HELP_TO_ARAN) != 2) then begin
                 gfade_in(600);
-                set_global_var(998, 1);
+                set_global_var(GVAR_AQE_ENEMY_EMPEROR, 1);
             end
             else begin
                 game_time_advance(7 * (60 * (60 * 10)));
-                if (get_critter_stat(dude_obj, 35) < get_critter_stat(dude_obj, 7)) then begin
-                    critter_heal(dude_obj, get_critter_stat(dude_obj, 7) - get_critter_stat(dude_obj, 35));
+                if (get_critter_stat(dude_obj, STAT_current_hp) < get_critter_stat(dude_obj, STAT_max_hp)) then begin
+                    critter_heal(dude_obj, get_critter_stat(dude_obj, STAT_max_hp) - get_critter_stat(dude_obj, STAT_current_hp));
                 end
-                if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0) and (get_critter_stat(party_member_obj(16777779), 35) < get_critter_stat(party_member_obj(16777779), 7))) then begin
-                    critter_heal(party_member_obj(16777779), get_critter_stat(party_member_obj(16777779), 7) - get_critter_stat(party_member_obj(16777779), 35));
+                if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0) and (get_critter_stat(party_member_obj(16777779), STAT_current_hp) < get_critter_stat(party_member_obj(16777779), STAT_max_hp))) then begin
+                    critter_heal(party_member_obj(16777779), get_critter_stat(party_member_obj(16777779), STAT_max_hp) - get_critter_stat(party_member_obj(16777779), STAT_current_hp));
                 end
-                if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0) and (get_critter_stat(party_member_obj(16777811), 35) < get_critter_stat(party_member_obj(16777811), 7))) then begin
-                    critter_heal(party_member_obj(16777811), get_critter_stat(party_member_obj(16777811), 7) - get_critter_stat(party_member_obj(16777811), 35));
+                if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0) and (get_critter_stat(party_member_obj(16777811), STAT_current_hp) < get_critter_stat(party_member_obj(16777811), STAT_max_hp))) then begin
+                    critter_heal(party_member_obj(16777811), get_critter_stat(party_member_obj(16777811), STAT_max_hp) - get_critter_stat(party_member_obj(16777811), STAT_current_hp));
                 end
-                if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0) and (get_critter_stat(party_member_obj(16777814), 35) < get_critter_stat(party_member_obj(16777814), 7))) then begin
-                    critter_heal(party_member_obj(16777814), get_critter_stat(party_member_obj(16777814), 7) - get_critter_stat(party_member_obj(16777814), 35));
+                if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0) and (get_critter_stat(party_member_obj(16777814), STAT_current_hp) < get_critter_stat(party_member_obj(16777814), STAT_max_hp))) then begin
+                    critter_heal(party_member_obj(16777814), get_critter_stat(party_member_obj(16777814), STAT_max_hp) - get_critter_stat(party_member_obj(16777814), STAT_current_hp));
                 end
-                if ((party_member_obj(16777729) != 0) and (get_critter_stat(party_member_obj(16777729), 35) < get_critter_stat(party_member_obj(16777729), 7))) then begin
-                    critter_heal(party_member_obj(16777729), get_critter_stat(party_member_obj(16777729), 7) - get_critter_stat(party_member_obj(16777729), 35));
+                if ((party_member_obj(16777729) != 0) and (get_critter_stat(party_member_obj(16777729), STAT_current_hp) < get_critter_stat(party_member_obj(16777729), STAT_max_hp))) then begin
+                    critter_heal(party_member_obj(16777729), get_critter_stat(party_member_obj(16777729), STAT_max_hp) - get_critter_stat(party_member_obj(16777729), STAT_current_hp));
                 end
                 load_map(23, 0);
             end
         end
     end
     if (fixed_param == 20) then begin
-        if (get_critter_stat(dude_obj, 4) > 5) then begin
-            display_msg(message_str(1635, 2301));
+        if (dude_iq > 5) then begin
+            display_mstr(2301);
         end
         else begin
-            display_msg(message_str(1635, 2302));
+            display_mstr(2302);
         end
     end
     if (fixed_param == 30) then begin
@@ -3032,98 +3032,98 @@ begin
         anim(dude_obj, 1000, 2);
         if (party_member_obj(16777729) != 0) then begin
             if (party_member_obj(16777729) != 0) then begin
-                if (has_trait(1, party_member_obj(16777729), 666)) then begin
-                    critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                if (obj_is_visible_flag(party_member_obj(16777729))) then begin
+                    critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                 end
             end
         end
-        if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+        if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
             if (party_member_obj(16777779) != 0) then begin
-                if (has_trait(1, party_member_obj(16777779), 666)) then begin
-                    critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                if (obj_is_visible_flag(party_member_obj(16777779))) then begin
+                    critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                 end
             end
         end
-        if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+        if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
             if (party_member_obj(16777811) != 0) then begin
-                if (has_trait(1, party_member_obj(16777811), 666)) then begin
-                    critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                if (obj_is_visible_flag(party_member_obj(16777811))) then begin
+                    critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                 end
             end
         end
         if (party_member_obj(16777812) != 0) then begin
             if (party_member_obj(16777812) != 0) then begin
-                if (has_trait(1, party_member_obj(16777812), 666)) then begin
-                    critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                if (obj_is_visible_flag(party_member_obj(16777812))) then begin
+                    critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                 end
             end
         end
-        if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+        if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
             if (party_member_obj(16777814) != 0) then begin
-                if (has_trait(1, party_member_obj(16777814), 666)) then begin
-                    critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                if (obj_is_visible_flag(party_member_obj(16777814))) then begin
+                    critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                 end
             end
         end
         if (party_member_obj(16777748) != 0) then begin
             if (party_member_obj(16777748) != 0) then begin
-                if (has_trait(1, party_member_obj(16777748), 666)) then begin
-                    critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                if (obj_is_visible_flag(party_member_obj(16777748))) then begin
+                    critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                 end
             end
         end
         if (party_member_obj(16778017) != 0) then begin
             if (party_member_obj(16778017) != 0) then begin
-                if (has_trait(1, party_member_obj(16778017), 666)) then begin
-                    critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                if (obj_is_visible_flag(party_member_obj(16778017))) then begin
+                    critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                 end
             end
         end
         if (party_member_obj(16778016) != 0) then begin
             if (party_member_obj(16778016) != 0) then begin
-                if (has_trait(1, party_member_obj(16778016), 666)) then begin
-                    critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                if (obj_is_visible_flag(party_member_obj(16778016))) then begin
+                    critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                 end
             end
         end
         if (party_member_obj(16778049) != 0) then begin
             if (party_member_obj(16778049) != 0) then begin
-                if (has_trait(1, party_member_obj(16778049), 666)) then begin
-                    critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                if (obj_is_visible_flag(party_member_obj(16778049))) then begin
+                    critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                 end
             end
         end
         if (party_member_obj(16778050) != 0) then begin
             if (party_member_obj(16778050) != 0) then begin
-                if (has_trait(1, party_member_obj(16778050), 666)) then begin
-                    critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                if (obj_is_visible_flag(party_member_obj(16778050))) then begin
+                    critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                 end
             end
         end
         if (party_member_obj(16778051) != 0) then begin
             if (party_member_obj(16778051) != 0) then begin
-                if (has_trait(1, party_member_obj(16778051), 666)) then begin
-                    critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                if (obj_is_visible_flag(party_member_obj(16778051))) then begin
+                    critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                 end
             end
         end
         if (party_member_obj(16777294) != 0) then begin
             if (party_member_obj(16777294) != 0) then begin
-                if (has_trait(1, party_member_obj(16777294), 666)) then begin
-                    critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                if (obj_is_visible_flag(party_member_obj(16777294))) then begin
+                    critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                 end
             end
         end
         if (party_member_obj(16777729) != 0) then begin
             anim(party_member_obj(16777729), 1000, 2);
         end
-        if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+        if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
             anim(party_member_obj(16777779), 1000, 2);
         end
-        if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+        if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
             anim(party_member_obj(16777811), 1000, 2);
         end
-        if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+        if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
             anim(party_member_obj(16777814), 1000, 2);
         end
         if (party_member_obj(16778017) != 0) then begin
@@ -3147,31 +3147,31 @@ begin
     end
     if (fixed_param == 40) then begin
         game_ui_enable;
-        gfade_in(1);
-        set_global_var(998, 1);
-        set_global_var(904, global_var(904) bwor 1024);
+        fade_in;
+        set_global_var(GVAR_AQE_ENEMY_EMPEROR, 1);
+        set_global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS, global_var(GVAR_AQE_ALBUQ_EMPEROR_EVENTS) bwor 1024);
     end
 end
 
 procedure Generate_Ghouls
 begin
-    gh1 := create_object_sid(16778019, 17151, 0, 1719);
-    gh2 := create_object_sid(16777821, 18149, 0, 1719);
-    gh3 := create_object_sid(16778019, 17156, 0, 1719);
-    gh4 := create_object_sid(16777821, 17953, 0, 1719);
-    gh5 := create_object_sid(16778019, 16356, 0, 1719);
-    gh6 := create_object_sid(16777821, 19155, 0, 1719);
-    restock_obj := create_object_sid(116, 0, 0, -1);
+    gh1 := create_object_sid(16778019, 17151, 0, SCRIPT_AAGHOULS);
+    gh2 := create_object_sid(16777821, 18149, 0, SCRIPT_AAGHOULS);
+    gh3 := create_object_sid(16778019, 17156, 0, SCRIPT_AAGHOULS);
+    gh4 := create_object_sid(16777821, 17953, 0, SCRIPT_AAGHOULS);
+    gh5 := create_object_sid(16778019, 16356, 0, SCRIPT_AAGHOULS);
+    gh6 := create_object_sid(16777821, 19155, 0, SCRIPT_AAGHOULS);
+    restock_obj := create_object(116, 0, 0);
     add_mult_objs_to_inven(gh1, restock_obj, 1);
-    restock_obj := create_object_sid(143, 0, 0, -1);
+    restock_obj := create_object(143, 0, 0);
     add_mult_objs_to_inven(gh2, restock_obj, 1);
-    restock_obj := create_object_sid(118, 0, 0, -1);
+    restock_obj := create_object(118, 0, 0);
     add_mult_objs_to_inven(gh3, restock_obj, 1);
-    restock_obj := create_object_sid(143, 0, 0, -1);
+    restock_obj := create_object(143, 0, 0);
     add_mult_objs_to_inven(gh4, restock_obj, 1);
-    restock_obj := create_object_sid(118, 0, 0, -1);
+    restock_obj := create_object(118, 0, 0);
     add_mult_objs_to_inven(gh5, restock_obj, 1);
-    restock_obj := create_object_sid(94, 0, 0, -1);
+    restock_obj := create_object(94, 0, 0);
     add_mult_objs_to_inven(gh6, restock_obj, 1);
     wield_obj_critter(gh1, obj_carrying_pid_obj(gh1, 116));
     wield_obj_critter(gh2, obj_carrying_pid_obj(gh2, 143));
@@ -3179,30 +3179,30 @@ begin
     wield_obj_critter(gh4, obj_carrying_pid_obj(gh4, 143));
     wield_obj_critter(gh5, obj_carrying_pid_obj(gh5, 118));
     wield_obj_critter(gh6, obj_carrying_pid_obj(gh6, 94));
-    restock_obj := create_object_sid(309, 0, 0, -1);
+    restock_obj := create_object(309, 0, 0);
     add_mult_objs_to_inven(gh1, restock_obj, 1);
-    restock_obj := create_object_sid(309, 0, 0, -1);
+    restock_obj := create_object(309, 0, 0);
     add_mult_objs_to_inven(gh2, restock_obj, 1);
-    restock_obj := create_object_sid(309, 0, 0, -1);
+    restock_obj := create_object(309, 0, 0);
     add_mult_objs_to_inven(gh3, restock_obj, 1);
-    restock_obj := create_object_sid(309, 0, 0, -1);
+    restock_obj := create_object(309, 0, 0);
     add_mult_objs_to_inven(gh4, restock_obj, 1);
-    restock_obj := create_object_sid(309, 0, 0, -1);
+    restock_obj := create_object(309, 0, 0);
     add_mult_objs_to_inven(gh5, restock_obj, 1);
-    restock_obj := create_object_sid(309, 0, 0, -1);
+    restock_obj := create_object(309, 0, 0);
     add_mult_objs_to_inven(gh6, restock_obj, 1);
 end
 
 procedure Generate_Primitives
 begin
-    gurgan := create_object_sid(16777913, 28887, 0, 1742);
-    pr1 := create_object_sid(16777917, 29491, 0, 1742);
-    pr2 := create_object_sid(16777917, 30092, 0, 1742);
-    pr3 := create_object_sid(16777917, 30077, 0, 1742);
-    pr4 := create_object_sid(16777917, 30886, 0, 1742);
-    pr5 := create_object_sid(16777917, 29885, 0, 1742);
-    pr6 := create_object_sid(16777917, 30483, 0, 1742);
-    pr7 := create_object_sid(16777917, 29280, 0, 1742);
+    gurgan := create_object_sid(16777913, 28887, 0, SCRIPT_ADIVUTOK);
+    pr1 := create_object_sid(16777917, 29491, 0, SCRIPT_ADIVUTOK);
+    pr2 := create_object_sid(16777917, 30092, 0, SCRIPT_ADIVUTOK);
+    pr3 := create_object_sid(16777917, 30077, 0, SCRIPT_ADIVUTOK);
+    pr4 := create_object_sid(16777917, 30886, 0, SCRIPT_ADIVUTOK);
+    pr5 := create_object_sid(16777917, 29885, 0, SCRIPT_ADIVUTOK);
+    pr6 := create_object_sid(16777917, 30483, 0, SCRIPT_ADIVUTOK);
+    pr7 := create_object_sid(16777917, 29280, 0, SCRIPT_ADIVUTOK);
     anim(gurgan, 1000, 5);
     anim(pr1, 1000, 5);
     anim(pr2, 1000, 5);
@@ -3211,21 +3211,21 @@ begin
     anim(pr5, 1000, 5);
     anim(pr6, 1000, 5);
     anim(pr7, 1000, 5);
-    restock_obj := create_object_sid(280, 0, 0, -1);
+    restock_obj := create_object(280, 0, 0);
     add_mult_objs_to_inven(gurgan, restock_obj, 1);
-    restock_obj := create_object_sid(280, 0, 0, -1);
+    restock_obj := create_object(280, 0, 0);
     add_mult_objs_to_inven(pr1, restock_obj, 1);
-    restock_obj := create_object_sid(280, 0, 0, -1);
+    restock_obj := create_object(280, 0, 0);
     add_mult_objs_to_inven(pr2, restock_obj, 1);
-    restock_obj := create_object_sid(280, 0, 0, -1);
+    restock_obj := create_object(280, 0, 0);
     add_mult_objs_to_inven(pr3, restock_obj, 1);
-    restock_obj := create_object_sid(280, 0, 0, -1);
+    restock_obj := create_object(280, 0, 0);
     add_mult_objs_to_inven(pr4, restock_obj, 1);
-    restock_obj := create_object_sid(280, 0, 0, -1);
+    restock_obj := create_object(280, 0, 0);
     add_mult_objs_to_inven(pr5, restock_obj, 1);
-    restock_obj := create_object_sid(280, 0, 0, -1);
+    restock_obj := create_object(280, 0, 0);
     add_mult_objs_to_inven(pr6, restock_obj, 1);
-    restock_obj := create_object_sid(280, 0, 0, -1);
+    restock_obj := create_object(280, 0, 0);
     add_mult_objs_to_inven(pr7, restock_obj, 1);
     wield_obj_critter(gurgan, obj_carrying_pid_obj(gurgan, 280));
     wield_obj_critter(pr1, obj_carrying_pid_obj(pr1, 280));
@@ -3239,46 +3239,46 @@ end
 
 procedure Generate_Primitives_Own_Attack
 begin
-    gurgan := create_object_sid(16777913, 28090, 0, 1742);
-    pr1 := create_object_sid(16777917, 28481, 0, 1742);
-    pr2 := create_object_sid(16777917, 29284, 0, 1742);
+    gurgan := create_object_sid(16777913, 28090, 0, SCRIPT_ADIVUTOK);
+    pr1 := create_object_sid(16777917, 28481, 0, SCRIPT_ADIVUTOK);
+    pr2 := create_object_sid(16777917, 29284, 0, SCRIPT_ADIVUTOK);
     anim(gurgan, 1000, 4);
     anim(pr1, 1000, 0);
     anim(pr2, 1000, 5);
-    restock_obj := create_object_sid(280, 0, 0, -1);
+    restock_obj := create_object(280, 0, 0);
     add_mult_objs_to_inven(gurgan, restock_obj, 1);
-    restock_obj := create_object_sid(280, 0, 0, -1);
+    restock_obj := create_object(280, 0, 0);
     add_mult_objs_to_inven(pr1, restock_obj, 1);
-    restock_obj := create_object_sid(280, 0, 0, -1);
+    restock_obj := create_object(280, 0, 0);
     add_mult_objs_to_inven(pr2, restock_obj, 1);
     wield_obj_critter(gurgan, obj_carrying_pid_obj(gurgan, 280));
     wield_obj_critter(pr1, obj_carrying_pid_obj(pr1, 280));
     wield_obj_critter(pr2, obj_carrying_pid_obj(pr2, 280));
-    nm2 := create_object_sid(16777929, 27700, 0, -1);
-    nm1 := create_object_sid(16777928, 28091, 0, -1);
-    nm3 := create_object_sid(16777928, 28280, 0, -1);
-    nm4 := create_object_sid(16777929, 27084, 0, -1);
+    nm2 := create_object(16777929, 27700, 0);
+    nm1 := create_object(16777928, 28091, 0);
+    nm3 := create_object(16777928, 28280, 0);
+    nm4 := create_object(16777929, 27084, 0);
     anim(nm1, 1000, 1);
     anim(nm2, 1000, 2);
     anim(nm3, 1000, 3);
     anim(nm4, 1000, 2);
-    restock_obj := create_object_sid(601, 0, 0, -1);
+    restock_obj := create_object(601, 0, 0);
     add_mult_objs_to_inven(nm1, restock_obj, 1);
-    restock_obj := create_object_sid(9, 0, 0, -1);
+    restock_obj := create_object(9, 0, 0);
     add_mult_objs_to_inven(nm2, restock_obj, 1);
-    restock_obj := create_object_sid(601, 0, 0, -1);
+    restock_obj := create_object(601, 0, 0);
     add_mult_objs_to_inven(nm3, restock_obj, 1);
-    restock_obj := create_object_sid(18, 0, 0, -1);
+    restock_obj := create_object(18, 0, 0);
     add_mult_objs_to_inven(nm4, restock_obj, 1);
     wield_obj_critter(nm1, obj_carrying_pid_obj(nm1, 601));
     wield_obj_critter(nm2, obj_carrying_pid_obj(nm2, 9));
     wield_obj_critter(nm3, obj_carrying_pid_obj(nm3, 601));
     wield_obj_critter(nm4, obj_carrying_pid_obj(nm4, 18));
-    pr3 := create_object_sid(16777917, 28295, 0, 1742);
-    pr4 := create_object_sid(16777917, 28888, 0, 1742);
-    pr5 := create_object_sid(16777917, 29282, 0, 1742);
-    pr6 := create_object_sid(16777917, 28479, 0, 1742);
-    pr7 := create_object_sid(16777917, 26885, 0, 1742);
+    pr3 := create_object_sid(16777917, 28295, 0, SCRIPT_ADIVUTOK);
+    pr4 := create_object_sid(16777917, 28888, 0, SCRIPT_ADIVUTOK);
+    pr5 := create_object_sid(16777917, 29282, 0, SCRIPT_ADIVUTOK);
+    pr6 := create_object_sid(16777917, 28479, 0, SCRIPT_ADIVUTOK);
+    pr7 := create_object_sid(16777917, 26885, 0, SCRIPT_ADIVUTOK);
     anim(pr3, 1000, 1);
     anim(pr4, 1000, 5);
     anim(pr5, 1000, 2);
@@ -3294,8 +3294,8 @@ begin
     anim(pr6, 62, 0);
     reg_anim_func(2, pr7);
     anim(pr7, 62, 0);
-    nm5 := create_object_sid(16777928, 27878, 0, -1);
-    nm6 := create_object_sid(16777929, 27886, 0, -1);
+    nm5 := create_object(16777928, 27878, 0);
+    nm6 := create_object(16777929, 27886, 0);
     anim(nm5, 1000, 1);
     anim(nm6, 1000, 2);
     reg_anim_func(2, nm6);
@@ -3306,21 +3306,21 @@ end
 
 procedure Generate_Primitives_Own_Attack_With_Imperial
 begin
-    is1 := create_object_sid(16778031, 20308, 0, 141);
-    is2 := create_object_sid(16778032, 20106, 0, 141);
-    is3 := create_object_sid(16778031, 19708, 0, 141);
-    is4 := create_object_sid(16778031, 19705, 0, 141);
+    is1 := create_object_sid(16778031, 20308, 0, SCRIPT_ACISVOJ7);
+    is2 := create_object_sid(16778032, 20106, 0, SCRIPT_ACISVOJ7);
+    is3 := create_object_sid(16778031, 19708, 0, SCRIPT_ACISVOJ7);
+    is4 := create_object_sid(16778031, 19705, 0, SCRIPT_ACISVOJ7);
     anim(is1, 1000, 3);
     anim(is2, 1000, 3);
     anim(is3, 1000, 3);
     anim(is4, 1000, 3);
-    restock_obj := create_object_sid(24, 0, 0, -1);
+    restock_obj := create_object(24, 0, 0);
     add_mult_objs_to_inven(is1, restock_obj, 1);
-    restock_obj := create_object_sid(24, 0, 0, -1);
+    restock_obj := create_object(24, 0, 0);
     add_mult_objs_to_inven(is2, restock_obj, 1);
-    restock_obj := create_object_sid(24, 0, 0, -1);
+    restock_obj := create_object(24, 0, 0);
     add_mult_objs_to_inven(is3, restock_obj, 1);
-    restock_obj := create_object_sid(16, 0, 0, -1);
+    restock_obj := create_object(16, 0, 0);
     add_mult_objs_to_inven(is4, restock_obj, 1);
     wield_obj_critter(is1, obj_carrying_pid_obj(is1, 24));
     wield_obj_critter(is2, obj_carrying_pid_obj(is2, 24));
@@ -3330,45 +3330,45 @@ end
 
 procedure Generate_Imperial_Soldiers
 begin
-    is1 := create_object_sid(16778031, 29098, 0, 141);
-    is2 := create_object_sid(16778032, 29701, 0, 141);
-    is3 := create_object_sid(16778045, 29102, 0, 141);
-    is4 := create_object_sid(16778032, 29904, 0, 141);
-    is5 := create_object_sid(16778031, 30100, 0, 141);
+    is1 := create_object_sid(16778031, 29098, 0, SCRIPT_ACISVOJ7);
+    is2 := create_object_sid(16778032, 29701, 0, SCRIPT_ACISVOJ7);
+    is3 := create_object_sid(16778045, 29102, 0, SCRIPT_ACISVOJ7);
+    is4 := create_object_sid(16778032, 29904, 0, SCRIPT_ACISVOJ7);
+    is5 := create_object_sid(16778031, 30100, 0, SCRIPT_ACISVOJ7);
     anim(is1, 1000, 0);
     anim(is2, 1000, 0);
     anim(is3, 1000, 0);
     anim(is4, 1000, 0);
     anim(is5, 1000, 0);
-    restock_obj := create_object_sid(599, 0, 0, -1);
+    restock_obj := create_object(599, 0, 0);
     add_mult_objs_to_inven(is1, restock_obj, 1);
-    restock_obj := create_object_sid(24, 0, 0, -1);
+    restock_obj := create_object(24, 0, 0);
     add_mult_objs_to_inven(is2, restock_obj, 1);
-    restock_obj := create_object_sid(24, 0, 0, -1);
+    restock_obj := create_object(24, 0, 0);
     add_mult_objs_to_inven(is3, restock_obj, 1);
-    restock_obj := create_object_sid(599, 0, 0, -1);
+    restock_obj := create_object(599, 0, 0);
     add_mult_objs_to_inven(is4, restock_obj, 1);
-    restock_obj := create_object_sid(16, 0, 0, -1);
+    restock_obj := create_object(16, 0, 0);
     add_mult_objs_to_inven(is5, restock_obj, 1);
-    restock_obj := create_object_sid(38, 0, 0, -1);
+    restock_obj := create_object(38, 0, 0);
     add_mult_objs_to_inven(is1, restock_obj, 1);
-    restock_obj := create_object_sid(38, 0, 0, -1);
+    restock_obj := create_object(38, 0, 0);
     add_mult_objs_to_inven(is2, restock_obj, 1);
-    restock_obj := create_object_sid(38, 0, 0, -1);
+    restock_obj := create_object(38, 0, 0);
     add_mult_objs_to_inven(is3, restock_obj, 1);
-    restock_obj := create_object_sid(38, 0, 0, -1);
+    restock_obj := create_object(38, 0, 0);
     add_mult_objs_to_inven(is4, restock_obj, 1);
-    restock_obj := create_object_sid(38, 0, 0, -1);
+    restock_obj := create_object(38, 0, 0);
     add_mult_objs_to_inven(is5, restock_obj, 1);
-    restock_obj := create_object_sid(40, 0, 0, -1);
+    restock_obj := create_object(40, 0, 0);
     add_mult_objs_to_inven(is1, restock_obj, 2);
-    restock_obj := create_object_sid(40, 0, 0, -1);
+    restock_obj := create_object(40, 0, 0);
     add_mult_objs_to_inven(is2, restock_obj, 2);
-    restock_obj := create_object_sid(40, 0, 0, -1);
+    restock_obj := create_object(40, 0, 0);
     add_mult_objs_to_inven(is3, restock_obj, 2);
-    restock_obj := create_object_sid(40, 0, 0, -1);
+    restock_obj := create_object(40, 0, 0);
     add_mult_objs_to_inven(is4, restock_obj, 2);
-    restock_obj := create_object_sid(40, 0, 0, -1);
+    restock_obj := create_object(40, 0, 0);
     add_mult_objs_to_inven(is5, restock_obj, 2);
     wield_obj_critter(is1, obj_carrying_pid_obj(is1, 599));
     wield_obj_critter(is2, obj_carrying_pid_obj(is2, 24));
@@ -3379,16 +3379,16 @@ end
 
 procedure Generate_Dead_Soldiers
 begin
-    is1 := create_object_sid(16778031, 16911, 1, -1);
-    is2 := create_object_sid(16778032, 16917, 1, -1);
-    is3 := create_object_sid(16778031, 17114, 1, -1);
-    is4 := create_object_sid(16778032, 17510, 1, -1);
-    is5 := create_object_sid(16778045, 17316, 1, -1);
-    is6 := create_object_sid(16778031, 17712, 1, -1);
-    is7 := create_object_sid(16778032, 17110, 1, -1);
-    is8 := create_object_sid(16778045, 17319, 1, -1);
-    is9 := create_object_sid(16778032, 16515, 1, -1);
-    is10 := create_object_sid(16778031, 16519, 1, -1);
+    is1 := create_object(16778031, 16911, 1);
+    is2 := create_object(16778032, 16917, 1);
+    is3 := create_object(16778031, 17114, 1);
+    is4 := create_object(16778032, 17510, 1);
+    is5 := create_object(16778045, 17316, 1);
+    is6 := create_object(16778031, 17712, 1);
+    is7 := create_object(16778032, 17110, 1);
+    is8 := create_object(16778045, 17319, 1);
+    is9 := create_object(16778032, 16515, 1);
+    is10 := create_object(16778031, 16519, 1);
     anim(is1, 1000, 1);
     anim(is2, 1000, 0);
     anim(is3, 1000, 3);
@@ -3424,15 +3424,15 @@ end
 
 procedure Generate_Exploded_Soldiers
 begin
-    is1 := create_object_sid(16778031, 16911, 1, -1);
-    is2 := create_object_sid(16778032, 16917, 1, -1);
-    is3 := create_object_sid(16778045, 17114, 1, -1);
-    is4 := create_object_sid(16778032, 17517, 1, -1);
-    is6 := create_object_sid(16778031, 17712, 1, -1);
-    is7 := create_object_sid(16778032, 17110, 1, -1);
-    is8 := create_object_sid(16778045, 17319, 1, -1);
-    is9 := create_object_sid(16778032, 16515, 1, -1);
-    is10 := create_object_sid(16778031, 16519, 1, -1);
+    is1 := create_object(16778031, 16911, 1);
+    is2 := create_object(16778032, 16917, 1);
+    is3 := create_object(16778045, 17114, 1);
+    is4 := create_object(16778032, 17517, 1);
+    is6 := create_object(16778031, 17712, 1);
+    is7 := create_object(16778032, 17110, 1);
+    is8 := create_object(16778045, 17319, 1);
+    is9 := create_object(16778032, 16515, 1);
+    is10 := create_object(16778031, 16519, 1);
     anim(is1, 1000, 1);
     anim(is2, 1000, 0);
     anim(is3, 1000, 3);
@@ -3460,52 +3460,52 @@ begin
     anim(is9, 56, 0);
     reg_anim_func(2, is10);
     anim(is10, 53, 0);
-    restock_obj := create_object_sid(16, 0, 0, -1);
+    restock_obj := create_object(16, 0, 0);
     add_mult_objs_to_inven(is3, restock_obj, 1);
-    restock_obj := create_object_sid(24, 0, 0, -1);
+    restock_obj := create_object(24, 0, 0);
     add_mult_objs_to_inven(is9, restock_obj, 1);
     add_timer_event(self_obj, game_ticks(1), 6);
 end
 
 procedure Generate_Arans_Soldiers
 begin
-    is1 := create_object_sid(16778031, 11871, 2, 142);
-    is2 := create_object_sid(16778031, 12064, 2, 142);
-    is3 := create_object_sid(16778031, 11869, 2, 142);
-    is4 := create_object_sid(16778032, 12468, 2, 142);
-    is5 := create_object_sid(16778031, 12268, 2, 142);
-    aran := create_object_sid(16778022, 12668, 2, 94);
+    is1 := create_object_sid(16778031, 11871, 2, SCRIPT_ACISVOJ8);
+    is2 := create_object_sid(16778031, 12064, 2, SCRIPT_ACISVOJ8);
+    is3 := create_object_sid(16778031, 11869, 2, SCRIPT_ACISVOJ8);
+    is4 := create_object_sid(16778032, 12468, 2, SCRIPT_ACISVOJ8);
+    is5 := create_object_sid(16778031, 12268, 2, SCRIPT_ACISVOJ8);
+    aran := create_object_sid(16778022, 12668, 2, SCRIPT_AARAN);
     anim(is1, 1000, 2);
     anim(is2, 1000, 2);
     anim(is3, 1000, 2);
     anim(is4, 1000, 2);
     anim(is5, 1000, 2);
     anim(aran, 1000, 2);
-    restock_obj := create_object_sid(599, 0, 0, -1);
+    restock_obj := create_object(599, 0, 0);
     add_mult_objs_to_inven(is1, restock_obj, 1);
-    restock_obj := create_object_sid(118, 0, 0, -1);
+    restock_obj := create_object(118, 0, 0);
     add_mult_objs_to_inven(is2, restock_obj, 1);
-    restock_obj := create_object_sid(599, 0, 0, -1);
+    restock_obj := create_object(599, 0, 0);
     add_mult_objs_to_inven(is3, restock_obj, 1);
-    restock_obj := create_object_sid(402, 0, 0, -1);
+    restock_obj := create_object(402, 0, 0);
     add_mult_objs_to_inven(is4, restock_obj, 1);
-    restock_obj := create_object_sid(406, 0, 0, -1);
+    restock_obj := create_object(406, 0, 0);
     add_mult_objs_to_inven(is5, restock_obj, 1);
-    restock_obj := create_object_sid(406, 0, 0, -1);
+    restock_obj := create_object(406, 0, 0);
     add_mult_objs_to_inven(aran, restock_obj, 1);
-    restock_obj := create_object_sid(38, 0, 0, -1);
+    restock_obj := create_object(38, 0, 0);
     add_mult_objs_to_inven(aran, restock_obj, 1);
-    restock_obj := create_object_sid(40, 0, 0, -1);
+    restock_obj := create_object(40, 0, 0);
     add_mult_objs_to_inven(is1, restock_obj, 1);
-    restock_obj := create_object_sid(40, 0, 0, -1);
+    restock_obj := create_object(40, 0, 0);
     add_mult_objs_to_inven(is2, restock_obj, 1);
-    restock_obj := create_object_sid(40, 0, 0, -1);
+    restock_obj := create_object(40, 0, 0);
     add_mult_objs_to_inven(is3, restock_obj, 1);
-    restock_obj := create_object_sid(40, 0, 0, -1);
+    restock_obj := create_object(40, 0, 0);
     add_mult_objs_to_inven(is4, restock_obj, 2);
-    restock_obj := create_object_sid(40, 0, 0, -1);
+    restock_obj := create_object(40, 0, 0);
     add_mult_objs_to_inven(is5, restock_obj, 1);
-    restock_obj := create_object_sid(40, 0, 0, -1);
+    restock_obj := create_object(40, 0, 0);
     add_mult_objs_to_inven(aran, restock_obj, 2);
     wield_obj_critter(is1, obj_carrying_pid_obj(is1, 599));
     wield_obj_critter(is2, obj_carrying_pid_obj(is2, 118));
@@ -3513,46 +3513,46 @@ begin
     wield_obj_critter(is4, obj_carrying_pid_obj(is4, 402));
     wield_obj_critter(is5, obj_carrying_pid_obj(is5, 406));
     wield_obj_critter(aran, obj_carrying_pid_obj(aran, 406));
-    if ((global_var(1008) >= 2) and (global_var(1008) != 10)) then begin
-        critter_add_trait(aran, 1, 6, 0);
+    if ((global_var(GVAR_AQE_HELP_TO_ARAN) >= 2) and (global_var(GVAR_AQE_HELP_TO_ARAN) != 10)) then begin
+        critter_add_trait(aran, TRAIT_OBJECT, OBJECT_TEAM_NUM, 0);
     end
     else begin
-        critter_add_trait(aran, 1, 6, 282);
+        critter_add_trait(aran, TRAIT_OBJECT, OBJECT_TEAM_NUM, 282);
     end
-    critter_add_trait(aran, 1, 5, 29);
+    critter_add_trait(aran, TRAIT_OBJECT, OBJECT_AI_PACKET, AI_IMPERIAL_SOLDIER_NO_TALKING);
 end
 
 procedure Generate_Dude_Soldiers
 begin
-    is6 := create_object_sid(16778045, 15256, 2, 140);
-    is7 := create_object_sid(16778031, 14456, 2, 140);
-    is8 := create_object_sid(16778045, 13458, 2, 140);
-    is9 := create_object_sid(16778031, 12656, 2, 140);
-    is10 := create_object_sid(16778032, 13453, 2, 140);
+    is6 := create_object_sid(16778045, 15256, 2, SCRIPT_ACISVOJ9);
+    is7 := create_object_sid(16778031, 14456, 2, SCRIPT_ACISVOJ9);
+    is8 := create_object_sid(16778045, 13458, 2, SCRIPT_ACISVOJ9);
+    is9 := create_object_sid(16778031, 12656, 2, SCRIPT_ACISVOJ9);
+    is10 := create_object_sid(16778032, 13453, 2, SCRIPT_ACISVOJ9);
     anim(is6, 1000, 3);
     anim(is7, 1000, 3);
     anim(is8, 1000, 3);
     anim(is9, 1000, 3);
     anim(is10, 1000, 3);
-    restock_obj := create_object_sid(24, 0, 0, -1);
+    restock_obj := create_object(24, 0, 0);
     add_mult_objs_to_inven(is6, restock_obj, 1);
-    restock_obj := create_object_sid(599, 0, 0, -1);
+    restock_obj := create_object(599, 0, 0);
     add_mult_objs_to_inven(is7, restock_obj, 1);
-    restock_obj := create_object_sid(406, 0, 0, -1);
+    restock_obj := create_object(406, 0, 0);
     add_mult_objs_to_inven(is8, restock_obj, 1);
-    restock_obj := create_object_sid(599, 0, 0, -1);
+    restock_obj := create_object(599, 0, 0);
     add_mult_objs_to_inven(is9, restock_obj, 1);
-    restock_obj := create_object_sid(24, 0, 0, -1);
+    restock_obj := create_object(24, 0, 0);
     add_mult_objs_to_inven(is10, restock_obj, 1);
-    restock_obj := create_object_sid(40, 0, 0, -1);
+    restock_obj := create_object(40, 0, 0);
     add_mult_objs_to_inven(is6, restock_obj, 1);
-    restock_obj := create_object_sid(40, 0, 0, -1);
+    restock_obj := create_object(40, 0, 0);
     add_mult_objs_to_inven(is7, restock_obj, 1);
-    restock_obj := create_object_sid(40, 0, 0, -1);
+    restock_obj := create_object(40, 0, 0);
     add_mult_objs_to_inven(is8, restock_obj, 1);
-    restock_obj := create_object_sid(40, 0, 0, -1);
+    restock_obj := create_object(40, 0, 0);
     add_mult_objs_to_inven(is9, restock_obj, 1);
-    restock_obj := create_object_sid(40, 0, 0, -1);
+    restock_obj := create_object(40, 0, 0);
     add_mult_objs_to_inven(is10, restock_obj, 1);
     wield_obj_critter(is6, obj_carrying_pid_obj(is6, 24));
     wield_obj_critter(is7, obj_carrying_pid_obj(is7, 599));
@@ -3560,4 +3560,3 @@ begin
     wield_obj_critter(is9, obj_carrying_pid_obj(is9, 599));
     wield_obj_critter(is10, obj_carrying_pid_obj(is10, 24));
 end
-
