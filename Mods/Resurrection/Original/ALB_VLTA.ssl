variable ProtoOfItemGiven;
variable ValueOfRollCheck := 1;
variable Scenery_Creation;
variable Scenery_Creation_Hex;
variable Scenery_Creation_Count;
variable Temp_Scenery_Creation_Hex;
variable Scenery_Creation_Ptr;
variable lPartyWornArmor;
variable How_Many_Party_Members_Are_Injured;
variable How_Many_Party_Members_Armed;
variable PartyHealingItem;

procedure checkPartyMembersNearDoor;

variable global_temp;
variable dest_tile;
variable step_tile;
variable in_dialog;
variable forced_node;
variable restock_amt;
variable restock_obj;
variable restock_trash;
variable removed_qty;
variable toRemove_qty;

procedure div(variable arg0, variable arg1);
procedure start;
procedure map_enter_p_proc;
procedure map_update_p_proc;
procedure map_exit_p_proc;
procedure timed_event_p_proc;
procedure destroy_cave_wall;
procedure alarm_on;
procedure alarm_off;
procedure Generate_New_Soldiers2;

export variable Map_event;
export variable dumb_hunter1;
export variable dumb_hunter2;
export variable force_switcher;
export variable force_field1;
export variable force_field2;
export variable force_field3;
export variable vytah_sachta;
export variable vytah_sachta_lanova;
export variable alarm_computer;
export variable alarm_guard;
export variable hunter_scientist1;
export variable hunter_scientist2;
export variable hunter_scientist3;
export variable hunter_guard1;
export variable hunter_guard2;
export variable locker_guard1;
export variable locker_guard2;
export variable coridor_guard1;
export variable coridor_guard2;
export variable alien1_obj;
export variable alien2_obj;
export variable alien3_obj;
export variable alien4_obj;
export variable alien5_obj;
export variable alien6_obj;
export variable alien7_obj;
export variable Parlson_obj;
export variable Vault_elevator_door;
export variable Palace_door_guard1;
export variable Palace_door_guard2;

variable sequence;
variable sequence2;
variable sequence_floor_three;
variable removable_wall;
variable test_podminky;
variable removable_light;
variable is1;
variable is2;
variable is3;
variable is4;
variable is5;
variable is6;


procedure checkPartyMembersNearDoor
begin
    if (party_member_obj(16777729) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777729)) <= 5) then begin
            return 1;
        end
    end
    if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777779)) <= 5) then begin
            return 1;
        end
    end
    if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777811)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16777812) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777812)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16777813) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777813)) <= 5) then begin
            return 1;
        end
    end
    if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777814)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16777748) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777748)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16777294) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777294)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16778017) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16778017)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16778016) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16778016)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16778049) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16778049)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16778050) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16778050)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16778051) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16778051)) <= 5) then begin
            return 1;
        end
    end
    return 0;
end

procedure div(variable arg0, variable arg1)
begin
    if (0 > arg0) then begin
        return -(-arg0 / arg1);
    end
    return arg0 / arg1;
end

procedure start
begin
    Map_event := self_obj;
end

procedure map_enter_p_proc
begin
    if (elevation(dude_obj) == 1) then begin
        if ((global_var(1000) bwand 67108864) != 0) then begin
            set_light_level(100);
        end
        else begin
            set_light_level(50);
        end
    end
    else begin
        set_light_level(100);
    end
    if (not(metarule(22, 0))) then begin
        if ((global_var(1000) bwand 268435456) != 0) then begin
            move_to(dude_obj, 22076, 0);
            anim(dude_obj, 1000, 2);
            if (party_member_obj(16777729) != 0) then begin
                if (party_member_obj(16777729) != 0) then begin
                    if (has_trait(1, party_member_obj(16777729), 666)) then begin
                        critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 1), elevation(dude_obj));
                    end
                end
            end
            if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
                if (party_member_obj(16777779) != 0) then begin
                    if (has_trait(1, party_member_obj(16777779), 666)) then begin
                        critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 1), elevation(dude_obj));
                    end
                end
            end
            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
                if (party_member_obj(16777811) != 0) then begin
                    if (has_trait(1, party_member_obj(16777811), 666)) then begin
                        critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 1), elevation(dude_obj));
                    end
                end
            end
            if (party_member_obj(16777812) != 0) then begin
                if (party_member_obj(16777812) != 0) then begin
                    if (has_trait(1, party_member_obj(16777812), 666)) then begin
                        critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 1), elevation(dude_obj));
                    end
                end
            end
            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
                if (party_member_obj(16777814) != 0) then begin
                    if (has_trait(1, party_member_obj(16777814), 666)) then begin
                        critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 1), elevation(dude_obj));
                    end
                end
            end
            if (party_member_obj(16777748) != 0) then begin
                if (party_member_obj(16777748) != 0) then begin
                    if (has_trait(1, party_member_obj(16777748), 666)) then begin
                        critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 1), elevation(dude_obj));
                    end
                end
            end
            if (party_member_obj(16778017) != 0) then begin
                if (party_member_obj(16778017) != 0) then begin
                    if (has_trait(1, party_member_obj(16778017), 666)) then begin
                        critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 1), elevation(dude_obj));
                    end
                end
            end
            if (party_member_obj(16778016) != 0) then begin
                if (party_member_obj(16778016) != 0) then begin
                    if (has_trait(1, party_member_obj(16778016), 666)) then begin
                        critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 1), elevation(dude_obj));
                    end
                end
            end
            if (party_member_obj(16778049) != 0) then begin
                if (party_member_obj(16778049) != 0) then begin
                    if (has_trait(1, party_member_obj(16778049), 666)) then begin
                        critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 1), elevation(dude_obj));
                    end
                end
            end
            if (party_member_obj(16778050) != 0) then begin
                if (party_member_obj(16778050) != 0) then begin
                    if (has_trait(1, party_member_obj(16778050), 666)) then begin
                        critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 1), elevation(dude_obj));
                    end
                end
            end
            if (party_member_obj(16778051) != 0) then begin
                if (party_member_obj(16778051) != 0) then begin
                    if (has_trait(1, party_member_obj(16778051), 666)) then begin
                        critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 1), elevation(dude_obj));
                    end
                end
            end
            if (party_member_obj(16777294) != 0) then begin
                if (party_member_obj(16777294) != 0) then begin
                    if (has_trait(1, party_member_obj(16777294), 666)) then begin
                        critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 1), elevation(dude_obj));
                    end
                end
            end
            add_timer_event(Vault_elevator_door, game_ticks(0), 3);
        end
        if (((global_var(865) bwand 268435456) != 0) and not((map_var(0) bwand 4) != 0)) then begin
            call destroy_cave_wall();
            if (not((map_var(0) bwand 4) != 0)) then begin
                set_map_var(0, map_var(0) bwor 4);
            end
        end
        if ((global_var(903) == 4) or (global_var(903) == 5) and not((map_var(0) bwand 1048576) != 0)) then begin
            set_map_var(0, map_var(0) bwor 1048576);
            add_timer_event(self_obj, game_ticks(0), 60);
        end
    end
end

procedure map_update_p_proc
begin
    if (elevation(dude_obj) == 1) then begin
        if ((global_var(1000) bwand 67108864) != 0) then begin
            set_light_level(100);
        end
        else begin
            set_light_level(50);
        end
    end
    else begin
        set_light_level(100);
    end
end

procedure map_exit_p_proc
begin
    if ((global_var(903) < 4) and (((global_var(865) bwand 268435456) != 0) and not((map_var(0) bwand 8) != 0))) then begin
        if ((map_var(0) bwand 16) != 0) then begin
            set_global_var(864, 1);
        end
        if (not((global_var(865) bwand 67108864) != 0)) then begin
            set_global_var(864, 1);
        end
        if ((elevation(dude_obj) == 2) and not((global_var(865) bwand 536870912) != 0)) then begin
            set_global_var(865, global_var(865) bwor 536870912);
        end
    end
end

procedure timed_event_p_proc
begin
    if (fixed_param == 1) then begin
        if (fixed_param == 1) then begin
            sequence := sequence + 1;
        end
        if (sequence == 1) then begin
            set_global_var(865, global_var(865) bwor 268435456);
            if (global_var(864) == 1) then begin
                set_map_var(0, map_var(0) bwor 16);
            end
            set_global_var(864, 0);
            if (combat_is_initialized) then begin
                terminate_combat;
            end
            game_ui_disable;
            add_timer_event(self_obj, 1, 1);
        end
        if (sequence == 2) then begin
            explosion(28477, 2, 999);
            add_timer_event(self_obj, 3, 1);
        end
        if (sequence == 3) then begin
            explosion(29077, 2, 999);
            add_timer_event(self_obj, 3, 1);
        end
        if (sequence == 4) then begin
            explosion(29677, 2, 999);
            add_timer_event(self_obj, 3, 1);
        end
        if (sequence == 5) then begin
            explosion(28076, 2, 999);
            add_timer_event(self_obj, 3, 1);
        end
        if (sequence == 6) then begin
            explosion(28278, 2, 999);
            add_timer_event(self_obj, 3, 1);
        end
        if (sequence == 7) then begin
            explosion(28878, 2, 999);
            add_timer_event(self_obj, 3, 1);
        end
        if (sequence == 8) then begin
            explosion(29076, 2, 999);
            add_timer_event(self_obj, 3, 1);
        end
        if (sequence == 9) then begin
            explosion(29478, 2, 999);
            add_timer_event(self_obj, 3, 1);
        end
        if (sequence == 10) then begin
            explosion(29676, 2, 999);
            add_timer_event(self_obj, 3, 1);
        end
        if (sequence == 11) then begin
            explosion(30078, 2, 999);
            add_timer_event(self_obj, 3, 1);
        end
        if (sequence == 12) then begin
            explosion(30276, 2, 999);
            add_timer_event(self_obj, 3, 1);
        end
        if (sequence == 13) then begin
            explosion(30878, 2, 999);
            add_timer_event(self_obj, 3, 1);
        end
        if (sequence == 14) then begin
            explosion(31076, 2, 999);
            add_timer_event(self_obj, 3, 1);
        end
        if (sequence == 15) then begin
            explosion(31678, 2, 999);
            add_timer_event(self_obj, 1, 1);
        end
        if (sequence == 16) then begin
            call destroy_cave_wall();
            add_timer_event(self_obj, 4, 1);
        end
        if (sequence == 17) then begin
            game_ui_enable;
            if (tile_in_tile_rect(27481, 27473, 32281, 32273, tile_num(dude_obj)) and (elevation(dude_obj) == 2)) then begin
                critter_heal(dude_obj, get_critter_stat(dude_obj, 7) * 2);
            end
            if (((map_var(0) bwand 16) != 0) or (global_var(859) == 1)) then begin
                set_global_var(864, 1);
            end
            if (not((global_var(865) bwand 67108864) != 0)) then begin
                set_global_var(864, 1);
            end
            set_map_var(0, map_var(0) bwor 8);
            sequence := 0;
            if (global_var(903) >= 1) then begin
                add_timer_event(self_obj, game_ticks(0), 22);
            end
        end
    end
    if (fixed_param == 2) then begin
        if ((obj_pid(critter_inven_obj(dude_obj, 0)) == 3) or (obj_pid(critter_inven_obj(dude_obj, 0)) == 348) or (obj_pid(critter_inven_obj(dude_obj, 0)) == 349) or (obj_pid(critter_inven_obj(dude_obj, 0)) == 232)) then begin
            display_msg(message_str(1638, 100) + message_str(1638, 102));
        end
        else begin
            display_msg(message_str(1638, 100) + message_str(1638, 101));
        end
    end
    if (fixed_param == 3) then begin
        display_msg(message_str(1638, 103));
    end
    if (fixed_param == 4) then begin
        display_msg(message_str(1638, 104));
    end
    if (fixed_param == 5) then begin
        if (fixed_param == 5) then begin
            sequence_floor_three := sequence_floor_three + 1;
        end
        if (sequence_floor_three == 1) then begin
            game_ui_disable;
            add_timer_event(self_obj, 3, 5);
        end
        if (sequence_floor_three == 2) then begin
            explosion(16912, 2, 1);
            add_timer_event(self_obj, 3, 5);
        end
        if (sequence_floor_three == 3) then begin
            explosion(17113, 2, 1);
            add_timer_event(self_obj, 3, 5);
        end
        if (sequence_floor_three == 4) then begin
            explosion(17111, 2, 999);
            if (get_critter_stat(dude_obj, 34) == 0) then begin
                display_msg(message_str(1638, 105));
            end
            else begin
                display_msg(message_str(1638, 106));
            end
            add_timer_event(self_obj, game_ticks(0), 5);
        end
        if (sequence_floor_three == 5) then begin
            game_ui_enable;
            if (get_critter_stat(dude_obj, 35) > 0) then begin
                critter_heal(dude_obj, -get_critter_stat(dude_obj, 35));
            end
        end
    end
    if (fixed_param == 20) then begin
        display_msg(message_str(1638, 108));
    end
    if (fixed_param == 21) then begin
        display_msg(message_str(1638, 109));
    end
    if (fixed_param == 22) then begin
        if (((global_var(865) bwand 134217728) != 0) and not((global_var(865) bwand 4194304) != 0)) then begin
            display_msg(message_str(1638, 110));
            add_timer_event(self_obj, game_ticks(1), 25);
        end
        else begin
            if ((test_podminky == 0) and (((global_var(865) bwand 4194304) != 0) and (global_var(1012) < 18) or ((global_var(1014) < (20 + (2 * map_var(1)))) and not((global_var(865) bwand 134217728) != 0)))) then begin
                display_msg(message_str(1638, 110) + message_str(1638, 111));
                set_map_var(0, map_var(0) bwor 16384);
                add_timer_event(self_obj, game_ticks(0), 40);
                test_podminky := 1;
            end
            if ((test_podminky == 0) and ((global_var(865) bwand 4194304) != 0) and (global_var(1012) >= 18)) then begin
                display_msg(message_str(1638, 110));
                test_podminky := 1;
                add_timer_event(self_obj, game_ticks(1), 25);
            end
            if ((test_podminky == 0) and (global_var(1014) >= (20 + (2 * map_var(1)))) and not((global_var(865) bwand 134217728) != 0)) then begin
                display_msg(message_str(1638, 110));
                test_podminky := 1;
                add_timer_event(self_obj, game_ticks(1), 25);
            end
            if (test_podminky == 0) then begin
                test_podminky := 1;
                set_map_var(0, map_var(0) bwor 16384);
                add_timer_event(self_obj, game_ticks(0), 40);
                display_msg(message_str(1638, 110) + message_str(1638, 111));
            end
            test_podminky := 0;
        end
    end
    if (fixed_param == 25) then begin
        if (get_critter_stat(dude_obj, 34) == 0) then begin
            display_msg(message_str(1638, 112));
        end
        else begin
            display_msg(message_str(1638, 113));
        end
        set_global_var(903, 4);
        if ((map_var(0) bwand 16384) != 0) then begin
            set_map_var(0, map_var(0) bwand (-1 - 16384));
        end
    end
    if (fixed_param == 30) then begin
        if (fixed_param == 30) then begin
            sequence2 := sequence2 + 1;
        end
        if (sequence2 == 1) then begin
            set_map_var(0, map_var(0) bwor 65536);
            set_global_var(632, global_var(632) bwor 64);
            if (party_member_obj(16777729) != 0) then begin
                if (party_member_obj(16777729)) then begin
                    if (has_trait(1, party_member_obj(16777729), 666)) then begin
                        debug_msg("set party member hidden: " + obj_name(party_member_obj(16777729)));
                        set_global_var(632, global_var(632) bwor 1);
                        set_obj_visibility(party_member_obj(16777729), 1);
                    end
                    else begin
                        debug_msg("PARTY.H:::: no party member hidden because they already are invisible");
                    end
                end
            end
            if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
                if (party_member_obj(16777779)) then begin
                    if (has_trait(1, party_member_obj(16777779), 666)) then begin
                        debug_msg("set party member hidden: " + obj_name(party_member_obj(16777779)));
                        set_global_var(632, global_var(632) bwor 2);
                        set_obj_visibility(party_member_obj(16777779), 1);
                    end
                    else begin
                        debug_msg("PARTY.H:::: no party member hidden because they already are invisible");
                    end
                end
            end
            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
                if (party_member_obj(16777811)) then begin
                    if (has_trait(1, party_member_obj(16777811), 666)) then begin
                        debug_msg("set party member hidden: " + obj_name(party_member_obj(16777811)));
                        set_global_var(632, global_var(632) bwor 4);
                        set_obj_visibility(party_member_obj(16777811), 1);
                    end
                    else begin
                        debug_msg("PARTY.H:::: no party member hidden because they already are invisible");
                    end
                end
            end
            if (party_member_obj(16777812) != 0) then begin
                if (party_member_obj(16777812)) then begin
                    if (has_trait(1, party_member_obj(16777812), 666)) then begin
                        debug_msg("set party member hidden: " + obj_name(party_member_obj(16777812)));
                        set_global_var(632, global_var(632) bwor 8);
                        set_obj_visibility(party_member_obj(16777812), 1);
                    end
                    else begin
                        debug_msg("PARTY.H:::: no party member hidden because they already are invisible");
                    end
                end
            end
            if (party_member_obj(16777813) != 0) then begin
                if (party_member_obj(16777813)) then begin
                    if (has_trait(1, party_member_obj(16777813), 666)) then begin
                        debug_msg("set party member hidden: " + obj_name(party_member_obj(16777813)));
                        set_global_var(632, global_var(632) bwor 16);
                        set_obj_visibility(party_member_obj(16777813), 1);
                    end
                    else begin
                        debug_msg("PARTY.H:::: no party member hidden because they already are invisible");
                    end
                end
            end
            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
                if (party_member_obj(16777814)) then begin
                    if (has_trait(1, party_member_obj(16777814), 666)) then begin
                        debug_msg("set party member hidden: " + obj_name(party_member_obj(16777814)));
                        set_global_var(632, global_var(632) bwor 32);
                        set_obj_visibility(party_member_obj(16777814), 1);
                    end
                    else begin
                        debug_msg("PARTY.H:::: no party member hidden because they already are invisible");
                    end
                end
            end
            move_to(dude_obj, 17112, 2);
            anim(dude_obj, 1000, 2);
            is1 := create_object_sid(16778031, 17311, 2, 128);
            is2 := create_object_sid(16778031, 17313, 2, 128);
            anim(is1, 1000, 2);
            anim(is2, 1000, 2);
            restock_obj := create_object_sid(40, 0, 0, -1);
            add_mult_objs_to_inven(is1, restock_obj, 2);
            restock_obj := create_object_sid(40, 0, 0, -1);
            add_mult_objs_to_inven(is2, restock_obj, 2);
            restock_obj := create_object_sid(396, 0, 0, -1);
            add_mult_objs_to_inven(is1, restock_obj, 1);
            restock_obj := create_object_sid(396, 0, 0, -1);
            add_mult_objs_to_inven(is2, restock_obj, 1);
            restock_obj := create_object_sid(38, 0, 0, -1);
            add_mult_objs_to_inven(is1, restock_obj, 1);
            restock_obj := create_object_sid(38, 0, 0, -1);
            add_mult_objs_to_inven(is2, restock_obj, 1);
            game_ui_disable;
            add_timer_event(self_obj, 1, 30);
        end
        if (sequence2 == 2) then begin
            reg_anim_func(2, is1);
            reg_anim_func(1, 1);
            reg_anim_animate(is1, 10, -1);
            reg_anim_func(3, 0);
            reg_anim_func(2, is2);
            reg_anim_func(1, 1);
            reg_anim_animate(is2, 10, -1);
            reg_anim_func(3, 0);
            add_timer_event(self_obj, game_ticks(1), 30);
        end
        if (sequence2 == 3) then begin
            reg_anim_func(2, is1);
            reg_anim_func(2, is2);
            anim(is1, 1000, 1);
            anim(is2, 1000, 3);
            add_timer_event(self_obj, game_ticks(1), 30);
        end
        if (sequence2 == 4) then begin
            reg_anim_func(2, is1);
            reg_anim_func(1, 1);
            reg_anim_animate(is1, 10, -1);
            reg_anim_func(3, 0);
            reg_anim_func(2, is2);
            reg_anim_func(1, 1);
            reg_anim_animate(is2, 10, -1);
            reg_anim_func(3, 0);
            add_timer_event(self_obj, game_ticks(1), 30);
        end
        if (sequence2 == 5) then begin
            reg_anim_func(2, is1);
            reg_anim_func(2, is2);
            animate_move_obj_to_tile(is1, 17511, 2);
            animate_move_obj_to_tile(is2, 17314, 2);
            add_timer_event(self_obj, game_ticks(1), 30);
        end
        if (sequence2 == 6) then begin
            reg_anim_func(2, is1);
            reg_anim_func(1, 1);
            reg_anim_animate(is1, 10, -1);
            reg_anim_func(3, 0);
            reg_anim_func(2, is2);
            reg_anim_func(1, 1);
            reg_anim_animate(is2, 10, -1);
            reg_anim_func(3, 0);
            add_timer_event(self_obj, game_ticks(1), 30);
        end
        if (sequence2 == 7) then begin
            reg_anim_func(2, is1);
            reg_anim_func(2, is2);
            anim(is1, 1000, 0);
            anim(is2, 1000, 4);
            add_timer_event(self_obj, game_ticks(1), 30);
        end
        if (sequence2 == 8) then begin
            reg_anim_func(2, is1);
            reg_anim_func(1, 1);
            reg_anim_animate(is1, 10, -1);
            reg_anim_func(3, 0);
            reg_anim_func(2, is2);
            reg_anim_func(1, 1);
            reg_anim_animate(is2, 10, -1);
            reg_anim_func(3, 0);
            display_msg(message_str(1638, 107));
            add_timer_event(self_obj, game_ticks(1), 30);
        end
        if (sequence2 == 9) then begin
            reg_anim_func(2, is1);
            reg_anim_func(2, is2);
            animate_move_obj_to_tile(is2, 17915, 2);
            animate_move_obj_to_tile(is1, 18109, 2);
            add_timer_event(self_obj, 6, 30);
        end
        if (sequence2 == 10) then begin
            reg_anim_func(2, is1);
            reg_anim_func(2, is2);
            anim(is1, 1000, 3);
            anim(is2, 1000, 1);
            add_timer_event(self_obj, 2, 30);
        end
        if (sequence2 == 11) then begin
            reg_anim_func(2, is1);
            reg_anim_func(2, is2);
            wield_obj_critter(is1, obj_carrying_pid_obj(is1, 396));
            wield_obj_critter(is2, obj_carrying_pid_obj(is1, 396));
            add_timer_event(self_obj, game_ticks(1), 30);
        end
        if (sequence2 == 12) then begin
            float_msg(is1, message_str(1638, 380), 8);
            add_timer_event(self_obj, game_ticks(1), 30);
        end
        if (sequence2 == 13) then begin
            float_msg(is2, message_str(1638, 381), 8);
            animate_move_obj_to_tile(dude_obj, 17911, 0);
            add_timer_event(self_obj, game_ticks(1), 30);
        end
        if (sequence2 == 14) then begin
            set_global_var(632, global_var(632) bwand (-1 - 64));
            if (party_member_obj(16777729) != 0) then begin
                if (party_member_obj(16777729)) then begin
                    if (has_trait(1, party_member_obj(16777729), 666) == 0) then begin
                        if ((global_var(632) bwand 1) != 0) then begin
                            debug_msg("unhiding party member " + obj_name(party_member_obj(16777729)));
                            set_global_var(632, global_var(632) bwand (-1 - 1));
                            set_obj_visibility(party_member_obj(16777729), 0);
                        end
                        else begin
                            debug_msg("PARTY.H:::: party member wasn't hidden by my macro");
                        end
                    end
                    else begin
                        debug_msg("unhiding party member " + obj_name(party_member_obj(16777729)));
                        set_global_var(632, global_var(632) bwand (-1 - 1));
                        set_obj_visibility(party_member_obj(16777729), 0);
                        debug_msg("PARTY.H:::: party member wasn't hidden.. clearing my state");
                    end
                end
            end
            if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
                if (party_member_obj(16777779)) then begin
                    if (has_trait(1, party_member_obj(16777779), 666) == 0) then begin
                        if ((global_var(632) bwand 2) != 0) then begin
                            debug_msg("unhiding party member " + obj_name(party_member_obj(16777779)));
                            set_global_var(632, global_var(632) bwand (-1 - 2));
                            set_obj_visibility(party_member_obj(16777779), 0);
                        end
                        else begin
                            debug_msg("PARTY.H:::: party member wasn't hidden by my macro");
                        end
                    end
                    else begin
                        debug_msg("unhiding party member " + obj_name(party_member_obj(16777779)));
                        set_global_var(632, global_var(632) bwand (-1 - 2));
                        set_obj_visibility(party_member_obj(16777779), 0);
                        debug_msg("PARTY.H:::: party member wasn't hidden.. clearing my state");
                    end
                end
            end
            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
                if (party_member_obj(16777811)) then begin
                    if (has_trait(1, party_member_obj(16777811), 666) == 0) then begin
                        if ((global_var(632) bwand 4) != 0) then begin
                            debug_msg("unhiding party member " + obj_name(party_member_obj(16777811)));
                            set_global_var(632, global_var(632) bwand (-1 - 4));
                            set_obj_visibility(party_member_obj(16777811), 0);
                        end
                        else begin
                            debug_msg("PARTY.H:::: party member wasn't hidden by my macro");
                        end
                    end
                    else begin
                        debug_msg("unhiding party member " + obj_name(party_member_obj(16777811)));
                        set_global_var(632, global_var(632) bwand (-1 - 4));
                        set_obj_visibility(party_member_obj(16777811), 0);
                        debug_msg("PARTY.H:::: party member wasn't hidden.. clearing my state");
                    end
                end
            end
            if (party_member_obj(16777812) != 0) then begin
                if (party_member_obj(16777812)) then begin
                    if (has_trait(1, party_member_obj(16777812), 666) == 0) then begin
                        if ((global_var(632) bwand 8) != 0) then begin
                            debug_msg("unhiding party member " + obj_name(party_member_obj(16777812)));
                            set_global_var(632, global_var(632) bwand (-1 - 8));
                            set_obj_visibility(party_member_obj(16777812), 0);
                        end
                        else begin
                            debug_msg("PARTY.H:::: party member wasn't hidden by my macro");
                        end
                    end
                    else begin
                        debug_msg("unhiding party member " + obj_name(party_member_obj(16777812)));
                        set_global_var(632, global_var(632) bwand (-1 - 8));
                        set_obj_visibility(party_member_obj(16777812), 0);
                        debug_msg("PARTY.H:::: party member wasn't hidden.. clearing my state");
                    end
                end
            end
            if (party_member_obj(16777813) != 0) then begin
                if (party_member_obj(16777813)) then begin
                    if (has_trait(1, party_member_obj(16777813), 666) == 0) then begin
                        if ((global_var(632) bwand 16) != 0) then begin
                            debug_msg("unhiding party member " + obj_name(party_member_obj(16777813)));
                            set_global_var(632, global_var(632) bwand (-1 - 16));
                            set_obj_visibility(party_member_obj(16777813), 0);
                        end
                        else begin
                            debug_msg("PARTY.H:::: party member wasn't hidden by my macro");
                        end
                    end
                    else begin
                        debug_msg("unhiding party member " + obj_name(party_member_obj(16777813)));
                        set_global_var(632, global_var(632) bwand (-1 - 16));
                        set_obj_visibility(party_member_obj(16777813), 0);
                        debug_msg("PARTY.H:::: party member wasn't hidden.. clearing my state");
                    end
                end
            end
            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
                if (party_member_obj(16777814)) then begin
                    if (has_trait(1, party_member_obj(16777814), 666) == 0) then begin
                        if ((global_var(632) bwand 32) != 0) then begin
                            debug_msg("unhiding party member " + obj_name(party_member_obj(16777814)));
                            set_global_var(632, global_var(632) bwand (-1 - 32));
                            set_obj_visibility(party_member_obj(16777814), 0);
                        end
                        else begin
                            debug_msg("PARTY.H:::: party member wasn't hidden by my macro");
                        end
                    end
                    else begin
                        debug_msg("unhiding party member " + obj_name(party_member_obj(16777814)));
                        set_global_var(632, global_var(632) bwand (-1 - 32));
                        set_obj_visibility(party_member_obj(16777814), 0);
                        debug_msg("PARTY.H:::: party member wasn't hidden.. clearing my state");
                    end
                end
            end
            if (party_member_obj(16777729) != 0) then begin
                if (party_member_obj(16777729) != 0) then begin
                    if (has_trait(1, party_member_obj(16777729), 666)) then begin
                        critter_attempt_placement(party_member_obj(16777729), 17112, elevation(dude_obj));
                    end
                end
            end
            if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
                if (party_member_obj(16777779) != 0) then begin
                    if (has_trait(1, party_member_obj(16777779), 666)) then begin
                        critter_attempt_placement(party_member_obj(16777779), 17112, elevation(dude_obj));
                    end
                end
            end
            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
                if (party_member_obj(16777811) != 0) then begin
                    if (has_trait(1, party_member_obj(16777811), 666)) then begin
                        critter_attempt_placement(party_member_obj(16777811), 17112, elevation(dude_obj));
                    end
                end
            end
            if (party_member_obj(16777812) != 0) then begin
                if (party_member_obj(16777812) != 0) then begin
                    if (has_trait(1, party_member_obj(16777812), 666)) then begin
                        critter_attempt_placement(party_member_obj(16777812), 17112, elevation(dude_obj));
                    end
                end
            end
            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
                if (party_member_obj(16777814) != 0) then begin
                    if (has_trait(1, party_member_obj(16777814), 666)) then begin
                        critter_attempt_placement(party_member_obj(16777814), 17112, elevation(dude_obj));
                    end
                end
            end
            if (party_member_obj(16777748) != 0) then begin
                if (party_member_obj(16777748) != 0) then begin
                    if (has_trait(1, party_member_obj(16777748), 666)) then begin
                        critter_attempt_placement(party_member_obj(16777748), 17112, elevation(dude_obj));
                    end
                end
            end
            if (party_member_obj(16778017) != 0) then begin
                if (party_member_obj(16778017) != 0) then begin
                    if (has_trait(1, party_member_obj(16778017), 666)) then begin
                        critter_attempt_placement(party_member_obj(16778017), 17112, elevation(dude_obj));
                    end
                end
            end
            if (party_member_obj(16778016) != 0) then begin
                if (party_member_obj(16778016) != 0) then begin
                    if (has_trait(1, party_member_obj(16778016), 666)) then begin
                        critter_attempt_placement(party_member_obj(16778016), 17112, elevation(dude_obj));
                    end
                end
            end
            if (party_member_obj(16778049) != 0) then begin
                if (party_member_obj(16778049) != 0) then begin
                    if (has_trait(1, party_member_obj(16778049), 666)) then begin
                        critter_attempt_placement(party_member_obj(16778049), 17112, elevation(dude_obj));
                    end
                end
            end
            if (party_member_obj(16778050) != 0) then begin
                if (party_member_obj(16778050) != 0) then begin
                    if (has_trait(1, party_member_obj(16778050), 666)) then begin
                        critter_attempt_placement(party_member_obj(16778050), 17112, elevation(dude_obj));
                    end
                end
            end
            if (party_member_obj(16778051) != 0) then begin
                if (party_member_obj(16778051) != 0) then begin
                    if (has_trait(1, party_member_obj(16778051), 666)) then begin
                        critter_attempt_placement(party_member_obj(16778051), 17112, elevation(dude_obj));
                    end
                end
            end
            if (party_member_obj(16777294) != 0) then begin
                if (party_member_obj(16777294) != 0) then begin
                    if (has_trait(1, party_member_obj(16777294), 666)) then begin
                        critter_attempt_placement(party_member_obj(16777294), 17112, elevation(dude_obj));
                    end
                end
            end
            if (party_member_obj(16777729) != 0) then begin
                anim(party_member_obj(16777729), 1000, 2);
            end
            if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
                anim(party_member_obj(16777779), 1000, 2);
            end
            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
                anim(party_member_obj(16777811), 1000, 2);
            end
            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
                anim(party_member_obj(16777814), 1000, 2);
            end
            if (party_member_obj(16778017) != 0) then begin
                anim(party_member_obj(16778017), 1000, 2);
            end
            if (party_member_obj(16778016) != 0) then begin
                anim(party_member_obj(16778016), 1000, 2);
            end
            if (party_member_obj(16778049) != 0) then begin
                anim(party_member_obj(16778049), 1000, 2);
            end
            if (party_member_obj(16778050) != 0) then begin
                anim(party_member_obj(16778050), 1000, 2);
            end
            if (party_member_obj(16778051) != 0) then begin
                anim(party_member_obj(16778051), 1000, 2);
            end
            if (party_member_obj(16777812) != 0) then begin
                anim(party_member_obj(16777812), 1000, 2);
            end
            game_ui_enable;
        end
    end
    if (fixed_param == 40) then begin
        is3 := create_object_sid(16778031, 17311, 2, 128);
        is4 := create_object_sid(16778031, 17312, 2, 128);
        is5 := create_object_sid(16778032, 17313, 2, 128);
        anim(is3, 1000, 2);
        anim(is4, 1000, 2);
        anim(is5, 1000, 2);
        restock_obj := create_object_sid(40, 0, 0, -1);
        add_mult_objs_to_inven(is3, restock_obj, 2);
        restock_obj := create_object_sid(40, 0, 0, -1);
        add_mult_objs_to_inven(is4, restock_obj, 2);
        restock_obj := create_object_sid(40, 0, 0, -1);
        add_mult_objs_to_inven(is5, restock_obj, 2);
        restock_obj := create_object_sid(599, 0, 0, -1);
        add_mult_objs_to_inven(is3, restock_obj, 1);
        restock_obj := create_object_sid(599, 0, 0, -1);
        add_mult_objs_to_inven(is4, restock_obj, 1);
        restock_obj := create_object_sid(118, 0, 0, -1);
        add_mult_objs_to_inven(is5, restock_obj, 1);
        restock_obj := create_object_sid(38, 0, 0, -1);
        add_mult_objs_to_inven(is3, restock_obj, 1);
        restock_obj := create_object_sid(38, 0, 0, -1);
        add_mult_objs_to_inven(is4, restock_obj, 1);
        restock_obj := create_object_sid(39, 0, 0, -1);
        add_mult_objs_to_inven(is5, restock_obj, 1);
        wield_obj_critter(is3, obj_carrying_pid_obj(is3, 599));
        wield_obj_critter(is4, obj_carrying_pid_obj(is4, 599));
        wield_obj_critter(is5, obj_carrying_pid_obj(is5, 118));
    end
    if (fixed_param == 50) then begin
        call alarm_on();
    end
    if (fixed_param == 51) then begin
        call alarm_off();
    end
    if (fixed_param == 60) then begin
        if ((global_var(903) == 4) or (global_var(903) == 5)) then begin
            call Generate_New_Soldiers2();
            if ((map_var(0) bwand 262144) != 0) then begin
                add_timer_event(self_obj, game_ticks(0), 51);
            end
        end
    end
end

procedure destroy_cave_wall
begin
    removable_wall := tile_contains_pid_obj(30480, 2, 50331880);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(30280, 2, 50331879);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(30080, 2, 50331881);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(29880, 2, 50331879);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(29680, 2, 50331878);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(29480, 2, 50331881);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(29280, 2, 50331880);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(29080, 2, 50331879);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(28880, 2, 50331878);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(28881, 2, 50331869);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(28875, 2, 50331855);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(29075, 2, 50331845);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(29275, 2, 50331841);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(29475, 2, 50331842);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(29675, 2, 50331843);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(29875, 2, 50331837);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(30075, 2, 50331838);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(30275, 2, 50331839);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(30875, 2, 50331855);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(30675, 2, 50332270);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(30474, 2, 50331882);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(30473, 2, 50332270);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(30272, 2, 50332270);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(30072, 2, 50332270);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(29872, 2, 50332270);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(29672, 2, 50332270);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(29472, 2, 50331867);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(29473, 2, 50331858);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(29274, 2, 50331857);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(29275, 2, 50331856);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(29874, 2, 33554505);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(31079, 2, 83886102);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(31077, 2, 83886102);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(31075, 2, 83886102);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(31078, 2, 83886102);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(31076, 2, 83886102);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(31879, 2, 83886102);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(31877, 2, 83886102);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(31875, 2, 83886102);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(32679, 2, 83886102);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(32677, 2, 83886102);
    destroy_object(removable_wall);
    removable_wall := tile_contains_pid_obj(32675, 2, 83886102);
    destroy_object(removable_wall);
    create_object_sid(67108980, 28875, 2, -1);
    create_object_sid(67108979, 28877, 2, -1);
    create_object_sid(67108980, 28879, 2, -1);
    create_object_sid(67108979, 28881, 2, -1);
    create_object_sid(67108980, 29275, 2, -1);
    create_object_sid(67108979, 29277, 2, -1);
    create_object_sid(67108980, 29279, 2, -1);
    create_object_sid(67108979, 29281, 2, -1);
    create_object_sid(67108980, 29675, 2, -1);
    create_object_sid(67108979, 29677, 2, -1);
    create_object_sid(67108980, 29679, 2, -1);
    create_object_sid(67108979, 29681, 2, -1);
    create_object_sid(67108980, 30075, 2, -1);
    create_object_sid(67108979, 30077, 2, -1);
    create_object_sid(67108980, 30079, 2, -1);
    create_object_sid(67108979, 30081, 2, -1);
    create_object_sid(67108979, 30481, 2, -1);
    create_object_sid(50331867, 30275, 2, -1);
    create_object_sid(50331866, 30076, 2, -1);
    create_object_sid(50331865, 30277, 2, -1);
    create_object_sid(50331864, 30077, 2, -1);
    create_object_sid(50331883, 30279, 2, -1);
    create_object_sid(50331875, 28474, 2, -1);
    create_object_sid(50331874, 28675, 2, -1);
    create_object_sid(50331873, 28476, 2, -1);
    create_object_sid(50331872, 28677, 2, -1);
    create_object_sid(50331873, 28478, 2, -1);
    create_object_sid(50331872, 28679, 2, -1);
    create_object_sid(50331875, 28480, 2, -1);
    create_object_sid(50331872, 28681, 2, -1);
    create_object_sid(50331841, 30875, 2, -1);
    create_object_sid(50331867, 30475, 2, -1);
    create_object_sid(50331866, 30276, 2, -1);
    create_object_sid(33556237, 28078, 2, -1);
    create_object_sid(33556235, 27478, 2, -1);
    create_object_sid(33554512, 31276, 2, -1);
    create_object_sid(33554511, 31077, 2, -1);
    create_object_sid(33554513, 30277, 2, -1);
    create_object_sid(33554510, 30278, 2, -1);
    create_object_sid(33554511, 30476, 2, -1);
    create_object_sid(33554499, 27875, 2, -1);
    create_object_sid(33554499, 27876, 2, -1);
    create_object_sid(33554499, 28077, 2, -1);
    create_object_sid(33554499, 28078, 2, -1);
    create_object_sid(33554499, 28279, 2, -1);
    create_object_sid(33554499, 28079, 2, -1);
    create_object_sid(33554499, 27478, 2, -1);
    create_object_sid(33554499, 27679, 2, -1);
    create_object_sid(33554499, 27877, 2, -1);
    set_map_var(0, map_var(0) bwor 4);
end

procedure alarm_on
begin
    removable_light := tile_contains_pid_obj(20710, 2, 33555260);
    destroy_object(removable_light);
    removable_light := tile_contains_pid_obj(22121, 2, 33555259);
    destroy_object(removable_light);
    removable_light := tile_contains_pid_obj(17321, 2, 33555259);
    destroy_object(removable_light);
    removable_light := tile_contains_pid_obj(23898, 2, 33555260);
    destroy_object(removable_light);
    removable_light := tile_contains_pid_obj(27482, 2, 33555260);
    destroy_object(removable_light);
    create_object_sid(33555340, 20710, 2, -1);
    create_object_sid(33555339, 22121, 2, -1);
    create_object_sid(33555339, 17321, 2, -1);
    create_object_sid(33555340, 23898, 2, -1);
    create_object_sid(33555340, 27482, 2, -1);
    set_map_var(0, map_var(0) bwor 262144);
end

procedure alarm_off
begin
    removable_light := tile_contains_pid_obj(20710, 2, 33555340);
    destroy_object(removable_light);
    removable_light := tile_contains_pid_obj(22121, 2, 33555339);
    destroy_object(removable_light);
    removable_light := tile_contains_pid_obj(17321, 2, 33555339);
    destroy_object(removable_light);
    removable_light := tile_contains_pid_obj(23898, 2, 33555340);
    destroy_object(removable_light);
    removable_light := tile_contains_pid_obj(27482, 2, 33555340);
    destroy_object(removable_light);
    create_object_sid(33555260, 20710, 2, -1);
    create_object_sid(33555259, 22121, 2, -1);
    create_object_sid(33555259, 17321, 2, -1);
    create_object_sid(33555260, 23898, 2, -1);
    create_object_sid(33555260, 27482, 2, -1);
end

procedure Generate_New_Soldiers2
begin
    is1 := create_object_sid(16778031, 18109, 2, 128);
    is2 := create_object_sid(16778045, 22122, 2, 128);
    is3 := create_object_sid(16778031, 22699, 2, 128);
    is4 := create_object_sid(16778032, 21711, 2, 128);
    is5 := create_object_sid(16778045, 22463, 2, 128);
    is6 := create_object_sid(16778031, 20327, 2, 128);
    anim(is1, 1000, 3);
    anim(is2, 1000, 2);
    anim(is3, 1000, 3);
    anim(is4, 1000, 3);
    anim(is5, 1000, 5);
    anim(is6, 1000, 0);
    restock_obj := create_object_sid(118, 0, 0, -1);
    add_mult_objs_to_inven(is1, restock_obj, 1);
    restock_obj := create_object_sid(406, 0, 0, -1);
    add_mult_objs_to_inven(is2, restock_obj, 1);
    restock_obj := create_object_sid(406, 0, 0, -1);
    add_mult_objs_to_inven(is3, restock_obj, 1);
    restock_obj := create_object_sid(599, 0, 0, -1);
    add_mult_objs_to_inven(is4, restock_obj, 1);
    restock_obj := create_object_sid(406, 0, 0, -1);
    add_mult_objs_to_inven(is5, restock_obj, 1);
    restock_obj := create_object_sid(406, 0, 0, -1);
    add_mult_objs_to_inven(is6, restock_obj, 1);
    wield_obj_critter(is1, obj_carrying_pid_obj(is1, 118));
    wield_obj_critter(is2, obj_carrying_pid_obj(is2, 406));
    wield_obj_critter(is3, obj_carrying_pid_obj(is3, 406));
    wield_obj_critter(is3, obj_carrying_pid_obj(is4, 599));
end

