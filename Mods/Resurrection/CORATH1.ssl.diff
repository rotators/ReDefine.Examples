diff --git a/Mods/Resurrection/Original/CORATH1.ssl b/Mods/Resurrection/ReDefine/CORATH1.ssl
index fc17fc1..4ebf58b 100644
--- a/Mods/Resurrection/Original/CORATH1.ssl
+++ b/Mods/Resurrection/ReDefine/CORATH1.ssl
@@ -147,12 +147,12 @@ begin
             return 1;
         end
     end
-    if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+    if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
         if (tile_distance_objs(self_obj, party_member_obj(16777779)) <= 5) then begin
             return 1;
         end
     end
-    if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+    if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
         if (tile_distance_objs(self_obj, party_member_obj(16777811)) <= 5) then begin
             return 1;
         end
@@ -167,7 +167,7 @@ begin
             return 1;
         end
     end
-    if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+    if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
         if (tile_distance_objs(self_obj, party_member_obj(16777814)) <= 5) then begin
             return 1;
         end
@@ -225,38 +225,38 @@ end
 
 procedure map_enter_p_proc
 begin
-    if (metarule(14, 0) and ((map_var(0) bwand 2) == 0) and not(metarule(22, 0))) then begin
+    if (map_first_run and ((map_var(0) bwand 2) == 0) and not(is_loading_game)) then begin
         while ((game_time_hour > 2000) or (game_time_hour < 800)) do begin
             game_time_advance(1 * (60 * (60 * 10)));
         end
-        if (get_critter_stat(dude_obj, 34) == 0) then begin
-            display_msg(message_str(1529, 100));
+        if (dude_gender == 0) then begin
+            display_mstr(100);
         end
-        if (get_critter_stat(dude_obj, 34) == 1) then begin
-            display_msg(message_str(1529, 101));
+        if (dude_gender == 1) then begin
+            display_mstr(101);
         end
     end
-    if (not(metarule(22, 0))) then begin
-        if (global_var(849) != 0) then begin
+    if (not(is_loading_game)) then begin
+        if (global_var(GVAR_C_RING_POINTER) != 0) then begin
             while ((game_time_hour > 2000) or (game_time_hour < 800)) do begin
                 game_time_advance(1 * (60 * (60 * 10)));
             end
             game_ui_disable;
-            if (global_var(849) != 5) then begin
+            if (global_var(GVAR_C_RING_POINTER) != 5) then begin
                 add_timer_event(self_obj, game_ticks(0), 20);
             end
             else begin
                 add_timer_event(self_obj, game_ticks(0), 50);
             end
         end
-        if (((map_var(0) bwand 8) == 0) and (global_var(848) == 1) and ((global_var(830) == 4) or ((global_var(842) bwand 1024) != 0) and ((global_var(831) == 3) or (global_var(841) == 3)))) then begin
-            neszol1 := create_object_sid(16777906, 27682, 0, 1580);
-            neszol2 := create_object_sid(16777905, 27479, 0, 1580);
-            neszol3 := create_object_sid(16777904, 27471, 0, 1580);
-            neszol4 := create_object_sid(16777903, 28283, 0, 1580);
-            neszol5 := create_object_sid(16777902, 28271, 0, 1580);
-            neszol6 := create_object_sid(16777903, 27268, 0, 1580);
-            neszol7 := create_object_sid(16777905, 28080, 0, 1580);
+        if (((map_var(0) bwand 8) == 0) and (global_var(GVAR_NESTOR_LEAVED_CORATH) == 1) and ((global_var(GVAR_C_QUEST_UNCLE_Q1) == 4) or ((global_var(GVAR_C_CORATH_STATUS) bwand 1024) != 0) and ((global_var(GVAR_C_QUEST_UNCLE_Q2) == 3) or (global_var(GVAR_C_STRIKE_IN_MINE) == 3)))) then begin
+            neszol1 := create_object_sid(16777906, 27682, 0, SCRIPT_CNESPRIS);
+            neszol2 := create_object_sid(16777905, 27479, 0, SCRIPT_CNESPRIS);
+            neszol3 := create_object_sid(16777904, 27471, 0, SCRIPT_CNESPRIS);
+            neszol4 := create_object_sid(16777903, 28283, 0, SCRIPT_CNESPRIS);
+            neszol5 := create_object_sid(16777902, 28271, 0, SCRIPT_CNESPRIS);
+            neszol6 := create_object_sid(16777903, 27268, 0, SCRIPT_CNESPRIS);
+            neszol7 := create_object_sid(16777905, 28080, 0, SCRIPT_CNESPRIS);
             anim(neszol1, 1000, 1);
             anim(neszol2, 1000, 2);
             anim(neszol3, 1000, 2);
@@ -270,9 +270,9 @@ begin
         ring_cosmetics := 0;
         ring_cosmetics2 := 0;
     end
-    if (((global_var(1019) bwand 2) != 0) and ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0))) then begin
-        set_global_var(1019, global_var(1019) bwand (-1 - 2));
-        set_global_var(1019, global_var(1019) bwor 8);
+    if (((global_var(GVAR_PTR_LYSTRA_REACTIONS_1) bwand 2) != 0) and ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0))) then begin
+        set_global_var(GVAR_PTR_LYSTRA_REACTIONS_1, global_var(GVAR_PTR_LYSTRA_REACTIONS_1) bwand (-1 - 2));
+        set_global_var(GVAR_PTR_LYSTRA_REACTIONS_1, global_var(GVAR_PTR_LYSTRA_REACTIONS_1) bwor 8);
     end
     if ((get_month >= 3) and (get_month < 5)) then begin
         if ((game_time_hour >= 600) and (game_time_hour < (600 + 100))) then begin
@@ -452,8 +452,8 @@ begin
         end
         if (sequence == 3) then begin
             game_time_advance(15 * (60 * 10));
-            if (not((global_var(842) bwand 1073741824) != 0)) then begin
-                set_global_var(842, global_var(842) bwor 1073741824);
+            if (not((global_var(GVAR_C_CORATH_STATUS) bwand 1073741824) != 0)) then begin
+                set_global_var(GVAR_C_CORATH_STATUS, global_var(GVAR_C_CORATH_STATUS) bwor 1073741824);
             end
             add_timer_event(self_obj, game_ticks(1), 1);
         end
@@ -474,111 +474,111 @@ begin
         end
         if (sequence == 1) then begin
             gfade_out(600);
-            if (not((global_var(842) bwand 1073741824) != 0)) then begin
-                set_global_var(842, global_var(842) bwor 1073741824);
+            if (not((global_var(GVAR_C_CORATH_STATUS) bwand 1073741824) != 0)) then begin
+                set_global_var(GVAR_C_CORATH_STATUS, global_var(GVAR_C_CORATH_STATUS) bwor 1073741824);
             end
-            blaster := create_object_sid(16777858, 16091, 0, 1527);
+            blaster := create_object_sid(16777858, 16091, 0, SCRIPT_CBLASTER);
             anim(blaster, 1000, 3);
-            cizinec := create_object_sid(16777907, 16092, 0, -1);
+            cizinec := create_object(16777907, 16092, 0);
             anim(cizinec, 1000, 0);
             call create_obecenstvo();
             call place_vykladac_near_ring();
-            float_msg(obyv5, message_str(1529, 310), 8);
-            float_msg(obyv6, message_str(1529, 311), 8);
+            float_msg(obyv5, mstr(310), FLOAT_MSG_YELLOW);
+            float_msg(obyv6, mstr(311), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(1), 10);
         end
         if (sequence == 2) then begin
-            float_msg(obyv1, message_str(1529, 312), 8);
+            float_msg(obyv1, mstr(312), FLOAT_MSG_YELLOW);
             play_sfx("HMXXXXAQ");
             play_sfx("HMXXXXZQ");
             reg_anim_func(2, dude_obj);
-            move_to(dude_obj, 16908, elevation(dude_obj));
+            move_to(dude_obj, 16908, dude_elevation);
             if (party_member_obj(16777729) != 0) then begin
                 if (party_member_obj(16777729) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777729), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 4), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777729))) then begin
+                        critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 4), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+            if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                 if (party_member_obj(16777779) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777779), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 4), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777779))) then begin
+                        critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 4), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+            if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                 if (party_member_obj(16777811) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777811), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 4), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777811))) then begin
+                        critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 4), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777812) != 0) then begin
                 if (party_member_obj(16777812) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777812), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 4), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777812))) then begin
+                        critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 4), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+            if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                 if (party_member_obj(16777814) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777814), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 4), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777814))) then begin
+                        critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 4), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777748) != 0) then begin
                 if (party_member_obj(16777748) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777748), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 4), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777748))) then begin
+                        critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 4), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778017) != 0) then begin
                 if (party_member_obj(16778017) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778017), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 4), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778017))) then begin
+                        critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 4), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778016) != 0) then begin
                 if (party_member_obj(16778016) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778016), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 4), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778016))) then begin
+                        critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 4), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778049) != 0) then begin
                 if (party_member_obj(16778049) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778049), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 4), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778049))) then begin
+                        critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 4), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778050) != 0) then begin
                 if (party_member_obj(16778050) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778050), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 4), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778050))) then begin
+                        critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 4), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778051) != 0) then begin
                 if (party_member_obj(16778051) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778051), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 4), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778051))) then begin
+                        critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 4), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777294) != 0) then begin
                 if (party_member_obj(16777294) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777294), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 4), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777294))) then begin
+                        critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 4), dude_elevation);
                     end
                 end
             end
             animate_move_obj_to_tile(dude_obj, 16301, 0);
-            metarule3(108, 15691, 0, 0);
+            tile_set_center(15691);
             add_timer_event(self_obj, game_ticks(1), 10);
         end
         if (sequence == 3) then begin
@@ -592,13 +592,13 @@ begin
             add_timer_event(self_obj, game_ticks(0), 10);
         end
         if (sequence == 6) then begin
-            if (not(tile_num(dude_obj) == 16301)) then begin
+            if (not(dude_tile == 16301)) then begin
                 animate_move_obj_to_tile(dude_obj, 16301, 1);
             end
-            if (tile_num(dude_obj) == 16301) then begin
+            if (dude_tile == 16301) then begin
                 anim(dude_obj, 1000, 0);
             end
-            float_msg(obyv4, message_str(1529, 310), 8);
+            float_msg(obyv4, mstr(310), FLOAT_MSG_YELLOW);
             reg_anim_func(2, cizinec);
             reg_anim_func(1, 1);
             reg_anim_animate(cizinec, 16, -1);
@@ -609,7 +609,7 @@ begin
             play_sfx("HMXXXXAQ");
             play_sfx("HMXXXXZQ");
             reg_anim_func(3, 0);
-            float_msg(obyv6, message_str(1529, 316), 8);
+            float_msg(obyv6, mstr(316), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(2), 10);
         end
         if (sequence == 7) then begin
@@ -623,7 +623,7 @@ begin
             reg_anim_func(3, 0);
             play_sfx("HMXXXXAQ");
             play_sfx("HMXXXXZQ");
-            float_msg(obyv5, message_str(1529, 318), 8);
+            float_msg(obyv5, mstr(318), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(2), 10);
         end
         if (sequence == 8) then begin
@@ -638,7 +638,7 @@ begin
             play_sfx("HMXXXXAQ");
             play_sfx("HMXXXXAP");
             play_sfx("HMXXXXZQ");
-            float_msg(obyv6, message_str(1529, 320), 8);
+            float_msg(obyv6, mstr(320), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(2), 10);
         end
         if (sequence == 9) then begin
@@ -652,7 +652,7 @@ begin
             reg_anim_func(3, 0);
             play_sfx("HMXXXXAR");
             play_sfx("HMXXXXZR");
-            float_msg(obyv4, message_str(1529, 315), 8);
+            float_msg(obyv4, mstr(315), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(2), 10);
         end
         if (sequence == 10) then begin
@@ -666,7 +666,7 @@ begin
             reg_anim_func(3, 0);
             play_sfx("HMXXXXAQ");
             play_sfx("HMXXXXZQ");
-            float_msg(obyv5, message_str(1529, 322), 8);
+            float_msg(obyv5, mstr(322), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(2), 10);
         end
         if (sequence == 11) then begin
@@ -681,8 +681,8 @@ begin
             play_sfx("HMXXXXAQ");
             play_sfx("HMXXXXZQ");
             play_sfx("HMXXXXBA");
-            float_msg(adem, message_str(1529, 333), 8);
-            float_msg(cedr, message_str(1529, 330), 8);
+            float_msg(adem, mstr(333), FLOAT_MSG_YELLOW);
+            float_msg(cedr, mstr(330), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(2), 10);
         end
         if (sequence == 12) then begin
@@ -690,8 +690,8 @@ begin
             reg_anim_func(1, 1);
             reg_anim_animate(cizinec, 37, -1);
             reg_anim_func(3, 0);
-            float_msg(obyv1, message_str(1529, 310), 8);
-            float_msg(str1, message_str(1529, 331), 8);
+            float_msg(obyv1, mstr(310), FLOAT_MSG_YELLOW);
+            float_msg(str1, mstr(331), FLOAT_MSG_YELLOW);
             add_timer_event(self_obj, game_ticks(2), 10);
         end
         if (sequence == 13) then begin
@@ -720,8 +720,8 @@ begin
             play_sfx("HMXXXXAQ");
             play_sfx("HMXXXXBI");
             play_sfx("HMXXXXZQ");
-            float_msg(adem, message_str(1529, 335), 8);
-            float_msg(cedr, message_str(1529, 332), 8);
+            float_msg(adem, mstr(335), FLOAT_MSG_YELLOW);
+            float_msg(cedr, mstr(332), FLOAT_MSG_YELLOW);
             add_timer_event(Melkyr_obj, game_ticks(0), 1);
             add_timer_event(self_obj, game_ticks(1), 10);
         end
@@ -752,7 +752,7 @@ begin
             rm_timer_event(self_obj);
         end
     end
-    if ((global_var(849) != 0) and (fixed_param == 20) and not((global_var(843) bwand 262144) != 0)) then begin
+    if ((global_var(GVAR_C_RING_POINTER) != 0) and (fixed_param == 20) and not((global_var(GVAR_C_RING_VICTORIES) bwand 262144) != 0)) then begin
         if (fixed_param == 20) then begin
             ring_cosmetics := ring_cosmetics + 1;
         end
@@ -761,85 +761,85 @@ begin
             anim(dude_obj, 1000, 1);
             if (party_member_obj(16777729) != 0) then begin
                 if (party_member_obj(16777729) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777729), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777729))) then begin
+                        critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+            if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                 if (party_member_obj(16777779) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777779), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777779))) then begin
+                        critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+            if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                 if (party_member_obj(16777811) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777811), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777811))) then begin
+                        critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777812) != 0) then begin
                 if (party_member_obj(16777812) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777812), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777812))) then begin
+                        critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+            if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                 if (party_member_obj(16777814) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777814), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777814))) then begin
+                        critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777748) != 0) then begin
                 if (party_member_obj(16777748) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777748), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777748))) then begin
+                        critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778017) != 0) then begin
                 if (party_member_obj(16778017) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778017), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778017))) then begin
+                        critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778016) != 0) then begin
                 if (party_member_obj(16778016) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778016), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778016))) then begin
+                        critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778049) != 0) then begin
                 if (party_member_obj(16778049) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778049), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778049))) then begin
+                        critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778050) != 0) then begin
                 if (party_member_obj(16778050) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778050), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778050))) then begin
+                        critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778051) != 0) then begin
                 if (party_member_obj(16778051) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778051), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778051))) then begin
+                        critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777294) != 0) then begin
                 if (party_member_obj(16777294) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777294), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777294))) then begin
+                        critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
@@ -848,7 +848,7 @@ begin
             add_timer_event(self_obj, game_ticks(2), 20);
         end
         if (ring_cosmetics == 2) then begin
-            if ((global_var(849) == 2) or ((global_var(849) == 1) and (bill_done == 1))) then begin
+            if ((global_var(GVAR_C_RING_POINTER) == 2) or ((global_var(GVAR_C_RING_POINTER) == 1) and (bill_done == 1))) then begin
                 gfade_in(600);
             end
             game_ui_enable;
@@ -868,10 +868,10 @@ begin
             if (map_var(1) == 0) then begin
                 move_to(dude_obj, 16491, elevation(self_obj));
                 anim(dude_obj, 1000, 5);
-                metarule3(108, 15690, 0, 0);
-                set_map_var(2, obj_pid(critter_inven_obj(dude_obj, 2)));
-                set_map_var(3, obj_pid(critter_inven_obj(dude_obj, 1)));
-                armor := obj_pid(critter_inven_obj(dude_obj, 0));
+                tile_set_center(15690);
+                set_map_var(2, obj_pid(critter_inven_obj(dude_obj, INVEN_TYPE_LEFT_HAND)));
+                set_map_var(3, obj_pid(critter_inven_obj(dude_obj, INVEN_TYPE_RIGHT_HAND)));
+                armor := obj_pid(critter_inven_obj(dude_obj, INVEN_TYPE_WORN));
                 move_obj_inven_to_obj(dude_obj, corath_temp_box);
                 if (obj_is_carrying_obj_pid(corath_temp_box, 319)) then begin
                     removed_qty := obj_is_carrying_obj_pid(corath_temp_box, 319);
@@ -882,17 +882,17 @@ begin
                         restock_obj := obj_carrying_pid_obj(corath_temp_box, 319);
                         if (obj_type(self_obj) == 1) then begin
                             restock_obj := obj_carrying_pid_obj(corath_temp_box, 319);
-                            if (critter_inven_obj(self_obj, 0) == restock_obj) then begin
-                                if (obj_item_subtype(critter_inven_obj(corath_temp_box, 0)) == 0) then begin
-                                    restock_obj := critter_inven_obj(corath_temp_box, 0);
+                            if (critter_inven_obj(self_obj, INVEN_TYPE_WORN) == restock_obj) then begin
+                                if (obj_item_subtype(critter_inven_obj(corath_temp_box, INVEN_TYPE_WORN)) == 0) then begin
+                                    restock_obj := critter_inven_obj(corath_temp_box, INVEN_TYPE_WORN);
                                     debug_msg("armour pid == " + obj_pid(restock_obj));
                                     rm_obj_from_inven(corath_temp_box, restock_obj);
                                     add_obj_to_inven(corath_temp_box, restock_obj);
                                 end
                             end
                             else begin
-                                if ((critter_inven_obj(corath_temp_box, 2) == restock_obj) or (critter_inven_obj(corath_temp_box, 1) == restock_obj)) then begin
-                                    metarule(43, corath_temp_box);
+                                if ((critter_inven_obj(corath_temp_box, INVEN_TYPE_LEFT_HAND) == restock_obj) or (critter_inven_obj(corath_temp_box, INVEN_TYPE_RIGHT_HAND) == restock_obj)) then begin
+                                    inven_unwield(corath_temp_box);
                                 end
                             end
                         end
@@ -912,10 +912,10 @@ begin
                     end
                     restock_obj := 0;
                     restock_amt := 0;
-                    restock_obj := create_object_sid(319, 0, 0, -1);
+                    restock_obj := create_object(319, 0, 0);
                     add_mult_objs_to_inven(dude_obj, restock_obj, 1);
                 end
-                restock_obj := create_object_sid(armor, 0, 0, -1);
+                restock_obj := create_object(armor, 0, 0);
                 add_mult_objs_to_inven(dude_obj, restock_obj, 1);
                 wield_obj_critter(dude_obj, restock_obj);
                 removed_qty := obj_is_carrying_obj_pid(corath_temp_box, armor);
@@ -926,17 +926,17 @@ begin
                     restock_obj := obj_carrying_pid_obj(corath_temp_box, armor);
                     if (obj_type(self_obj) == 1) then begin
                         restock_obj := obj_carrying_pid_obj(corath_temp_box, armor);
-                        if (critter_inven_obj(self_obj, 0) == restock_obj) then begin
-                            if (obj_item_subtype(critter_inven_obj(corath_temp_box, 0)) == 0) then begin
-                                restock_obj := critter_inven_obj(corath_temp_box, 0);
+                        if (critter_inven_obj(self_obj, INVEN_TYPE_WORN) == restock_obj) then begin
+                            if (obj_item_subtype(critter_inven_obj(corath_temp_box, INVEN_TYPE_WORN)) == 0) then begin
+                                restock_obj := critter_inven_obj(corath_temp_box, INVEN_TYPE_WORN);
                                 debug_msg("armour pid == " + obj_pid(restock_obj));
                                 rm_obj_from_inven(corath_temp_box, restock_obj);
                                 add_obj_to_inven(corath_temp_box, restock_obj);
                             end
                         end
                         else begin
-                            if ((critter_inven_obj(corath_temp_box, 2) == restock_obj) or (critter_inven_obj(corath_temp_box, 1) == restock_obj)) then begin
-                                metarule(43, corath_temp_box);
+                            if ((critter_inven_obj(corath_temp_box, INVEN_TYPE_LEFT_HAND) == restock_obj) or (critter_inven_obj(corath_temp_box, INVEN_TYPE_RIGHT_HAND) == restock_obj)) then begin
+                                inven_unwield(corath_temp_box);
                             end
                         end
                     end
@@ -960,31 +960,31 @@ begin
                 call place_party();
             end
             else begin
-                if (global_var(849) == 1) then begin
-                    while ((item_pid_number < 560) and not((global_var(843) bwand 524288) != 0)) do begin
-                        if ((map_var(1) == 1) and ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) and obj_is_carrying_obj_pid(party_member_obj(16777779), item_pid_number)) then begin
-                            set_global_var(843, global_var(843) bwor 524288);
+                if (global_var(GVAR_C_RING_POINTER) == 1) then begin
+                    while ((item_pid_number < 560) and not((global_var(GVAR_C_RING_VICTORIES) bwand 524288) != 0)) do begin
+                        if ((map_var(1) == 1) and ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) and obj_is_carrying_obj_pid(party_member_obj(16777779), item_pid_number)) then begin
+                            set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwor 524288);
                         end
-                        if ((map_var(1) == 2) and ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) and obj_is_carrying_obj_pid(party_member_obj(16777811), item_pid_number)) then begin
-                            set_global_var(843, global_var(843) bwor 524288);
+                        if ((map_var(1) == 2) and ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) and obj_is_carrying_obj_pid(party_member_obj(16777811), item_pid_number)) then begin
+                            set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwor 524288);
                         end
-                        if ((map_var(1) == 3) and ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) and obj_is_carrying_obj_pid(party_member_obj(16777814), item_pid_number)) then begin
-                            set_global_var(843, global_var(843) bwor 524288);
+                        if ((map_var(1) == 3) and ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) and obj_is_carrying_obj_pid(party_member_obj(16777814), item_pid_number)) then begin
+                            set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwor 524288);
                         end
                         item_pid_number := item_pid_number + 1;
                     end
                     item_pid_number := 0;
                 end
-                if ((map_var(1) == 1) and ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0))) then begin
-                    set_map_var(4, obj_pid(critter_inven_obj(party_member_obj(16777779), 0)));
+                if ((map_var(1) == 1) and ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0))) then begin
+                    set_map_var(4, obj_pid(critter_inven_obj(party_member_obj(16777779), INVEN_TYPE_WORN)));
                     move_obj_inven_to_obj(party_member_obj(16777779), corath_temp_box);
                 end
-                if ((map_var(1) == 2) and ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0))) then begin
-                    set_map_var(4, obj_pid(critter_inven_obj(party_member_obj(16777811), 0)));
+                if ((map_var(1) == 2) and ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0))) then begin
+                    set_map_var(4, obj_pid(critter_inven_obj(party_member_obj(16777811), INVEN_TYPE_WORN)));
                     move_obj_inven_to_obj(party_member_obj(16777811), corath_temp_box);
                 end
-                if ((map_var(1) == 3) and ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0))) then begin
-                    set_map_var(4, obj_pid(critter_inven_obj(party_member_obj(16777814), 0)));
+                if ((map_var(1) == 3) and ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0))) then begin
+                    set_map_var(4, obj_pid(critter_inven_obj(party_member_obj(16777814), INVEN_TYPE_WORN)));
                     move_obj_inven_to_obj(party_member_obj(16777814), corath_temp_box);
                 end
                 call generate_party_and_oponent();
@@ -992,7 +992,7 @@ begin
             end
             call place_vykladac_near_ring();
             call create_obecenstvo();
-            if (global_var(849) == 5) then begin
+            if (global_var(GVAR_C_RING_POINTER) == 5) then begin
                 destroy_object(Cedrick_obj);
             end
             add_timer_event(self_obj, game_ticks(2), 20);
@@ -1002,41 +1002,41 @@ begin
             add_timer_event(self_obj, game_ticks(1), 20);
         end
         if (ring_cosmetics == 7) then begin
-            if (global_var(849) <= 2) then begin
-                float_msg(Vykladac_zakona, message_str(1529, 200), 8);
+            if (global_var(GVAR_C_RING_POINTER) <= 2) then begin
+                float_msg(Vykladac_zakona, mstr(200), FLOAT_MSG_YELLOW);
             end
             else begin
-                float_msg(Vykladac_zakona, message_str(1529, 400), 8);
+                float_msg(Vykladac_zakona, mstr(400), FLOAT_MSG_YELLOW);
             end
             add_timer_event(self_obj, game_ticks(5), 20);
         end
         if (ring_cosmetics == 8) then begin
-            if (((global_var(843) bwand 16384) != 0) or ((global_var(843) bwand 32768) != 0) or ((global_var(843) bwand 65536) != 0)) then begin
-                float_msg(Vykladac_zakona, message_str(1529, 202), 8);
+            if (((global_var(GVAR_C_RING_VICTORIES) bwand 16384) != 0) or ((global_var(GVAR_C_RING_VICTORIES) bwand 32768) != 0) or ((global_var(GVAR_C_RING_VICTORIES) bwand 65536) != 0)) then begin
+                float_msg(Vykladac_zakona, mstr(202), FLOAT_MSG_YELLOW);
             end
             else begin
-                float_msg(Vykladac_zakona, message_str(1529, 201), 8);
+                float_msg(Vykladac_zakona, mstr(201), FLOAT_MSG_YELLOW);
             end
             add_timer_event(self_obj, game_ticks(3), 20);
         end
         if (ring_cosmetics == 9) then begin
-            if (not((global_var(843) bwand 16384) != 0)) then begin
-                if (not((global_var(843) bwand 32768) != 0)) then begin
-                    if (not((global_var(843) bwand 65536) != 0)) then begin
-                        float_msg(obyv6, message_str(1529, 250), 2);
+            if (not((global_var(GVAR_C_RING_VICTORIES) bwand 16384) != 0)) then begin
+                if (not((global_var(GVAR_C_RING_VICTORIES) bwand 32768) != 0)) then begin
+                    if (not((global_var(GVAR_C_RING_VICTORIES) bwand 65536) != 0)) then begin
+                        float_msg(obyv6, mstr(250), FLOAT_MSG_RED);
                     end
                 end
             end
             add_timer_event(self_obj, game_ticks(3), 20);
         end
         if (ring_cosmetics == 10) then begin
-            if (((global_var(843) bwand 16384) != 0) or ((global_var(843) bwand 32768) != 0) or ((global_var(843) bwand 65536) != 0)) then begin
-                float_msg(Vykladac_zakona, message_str(1529, 301), 8);
+            if (((global_var(GVAR_C_RING_VICTORIES) bwand 16384) != 0) or ((global_var(GVAR_C_RING_VICTORIES) bwand 32768) != 0) or ((global_var(GVAR_C_RING_VICTORIES) bwand 65536) != 0)) then begin
+                float_msg(Vykladac_zakona, mstr(301), FLOAT_MSG_YELLOW);
             end
             else begin
-                float_msg(Vykladac_zakona, message_str(1529, 300), 8);
+                float_msg(Vykladac_zakona, mstr(300), FLOAT_MSG_YELLOW);
             end
-            if (((global_var(843) bwand 16384) != 0) or ((global_var(843) bwand 32768) != 0) or ((global_var(843) bwand 65536) != 0)) then begin
+            if (((global_var(GVAR_C_RING_VICTORIES) bwand 16384) != 0) or ((global_var(GVAR_C_RING_VICTORIES) bwand 32768) != 0) or ((global_var(GVAR_C_RING_VICTORIES) bwand 65536) != 0)) then begin
                 add_timer_event(self_obj, game_ticks(5), 20);
             end
             else begin
@@ -1044,13 +1044,13 @@ begin
             end
         end
         if (ring_cosmetics == 11) then begin
-            if ((global_var(843) bwand 16384) != 0) then begin
-                float_msg(Vykladac_zakona, message_str(1529, 302), 8);
+            if ((global_var(GVAR_C_RING_VICTORIES) bwand 16384) != 0) then begin
+                float_msg(Vykladac_zakona, mstr(302), FLOAT_MSG_YELLOW);
             end
             else begin
-                float_msg(Vykladac_zakona, message_str(1529, 301), 8);
+                float_msg(Vykladac_zakona, mstr(301), FLOAT_MSG_YELLOW);
             end
-            if ((global_var(843) bwand 16384) != 0) then begin
+            if ((global_var(GVAR_C_RING_VICTORIES) bwand 16384) != 0) then begin
                 ring_cosmetics := ring_cosmetics + 1;
                 add_timer_event(self_obj, game_ticks(5), 20);
             end
@@ -1059,20 +1059,20 @@ begin
             end
         end
         if (ring_cosmetics == 12) then begin
-            float_msg(Vykladac_zakona, message_str(1529, 302), 8);
-            if ((global_var(849) == 3) and (map_var(1) == 4)) then begin
+            float_msg(Vykladac_zakona, mstr(302), FLOAT_MSG_YELLOW);
+            if ((global_var(GVAR_C_RING_POINTER) == 3) and (map_var(1) == 4)) then begin
                 add_timer_event(self_obj, game_ticks(2), 997);
                 add_timer_event(self_obj, game_ticks(7), 998);
             end
-            if ((global_var(849) == 4) or (global_var(849) == 5)) then begin
+            if ((global_var(GVAR_C_RING_POINTER) == 4) or (global_var(GVAR_C_RING_POINTER) == 5)) then begin
                 if (map_var(1) == 1) then begin
-                    float_msg(party_fighter, message_str(1529, 1200) + obj_name(dude_obj) + message_str(1529, 1201 + (get_critter_stat(dude_obj, 34) == 1)), 2);
+                    float_msg(party_fighter, mstr(1200) + dude_name + mstr(1201 + (dude_gender == 1)), FLOAT_MSG_RED);
                 end
                 if (map_var(1) == 2) then begin
-                    float_msg(party_fighter, message_str(1529, 1203), 2);
+                    float_msg(party_fighter, mstr(1203), FLOAT_MSG_RED);
                 end
                 if (map_var(1) == 3) then begin
-                    float_msg(party_fighter, message_str(1529, 1204), 2);
+                    float_msg(party_fighter, mstr(1204), FLOAT_MSG_RED);
                 end
             end
             if (map_var(1) == 0) then begin
@@ -1089,10 +1089,10 @@ begin
         end
         if ((ring_cosmetics == 13) and (map_var(1) == 0)) then begin
             game_ui_enable;
-            set_global_var(843, global_var(843) bwor 262144);
+            set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwor 262144);
         end
     end
-    if ((global_var(849) != 0) and (fixed_param == 30) and (((global_var(843) bwand 262144) != 0) or (map_var(1) != 0))) then begin
+    if ((global_var(GVAR_C_RING_POINTER) != 0) and (fixed_param == 30) and (((global_var(GVAR_C_RING_VICTORIES) bwand 262144) != 0) or (map_var(1) != 0))) then begin
         if (fixed_param == 30) then begin
             ring_cosmetics2 := ring_cosmetics2 + 1;
         end
@@ -1119,35 +1119,35 @@ begin
             add_timer_event(self_obj, game_ticks(1), 30);
         end
         if (ring_cosmetics2 == 3) then begin
-            if (global_var(849) == 1) then begin
-                set_global_var(50, global_var(50) - 2);
+            if (global_var(GVAR_C_RING_POINTER) == 1) then begin
+                set_global_var(GVAR_TOWN_REP_CORATH, global_var(GVAR_TOWN_REP_CORATH) - 2);
             end
-            if (global_var(849) == 3) then begin
-                set_global_var(50, global_var(50) - 5);
+            if (global_var(GVAR_C_RING_POINTER) == 3) then begin
+                set_global_var(GVAR_TOWN_REP_CORATH, global_var(GVAR_TOWN_REP_CORATH) - 5);
             end
-            if (global_var(849) == 4) then begin
-                set_global_var(50, global_var(50) + 10);
+            if (global_var(GVAR_C_RING_POINTER) == 4) then begin
+                set_global_var(GVAR_TOWN_REP_CORATH, global_var(GVAR_TOWN_REP_CORATH) + 10);
             end
-            if (global_var(849) == 5) then begin
-                set_global_var(50, global_var(50) + 10);
+            if (global_var(GVAR_C_RING_POINTER) == 5) then begin
+                set_global_var(GVAR_TOWN_REP_CORATH, global_var(GVAR_TOWN_REP_CORATH) + 10);
             end
             if (map_var(1) == 0) then begin
                 move_obj_inven_to_obj(corath_temp_box, dude_obj);
                 move_obj_inven_to_obj(corath_temp_box2, dude_obj);
                 call dude_out_of_ring();
-                if (global_var(849) == 1) then begin
+                if (global_var(GVAR_C_RING_POINTER) == 1) then begin
                     destroy_object(Bill_obj);
                 end
-                if (global_var(849) == 2) then begin
+                if (global_var(GVAR_C_RING_POINTER) == 2) then begin
                     destroy_object(Chadwic_obj);
                 end
-                if (global_var(849) == 3) then begin
+                if (global_var(GVAR_C_RING_POINTER) == 3) then begin
                     destroy_object(Cedrick_obj);
                 end
-                if (global_var(849) == 4) then begin
+                if (global_var(GVAR_C_RING_POINTER) == 4) then begin
                     destroy_object(Blaster_obj);
                 end
-                if (global_var(849) == 5) then begin
+                if (global_var(GVAR_C_RING_POINTER) == 5) then begin
                     destroy_object(Blaster_obj);
                 end
             end
@@ -1155,19 +1155,19 @@ begin
                 destroy_object(enemy_fighter);
                 destroy_object(party_fighter);
                 if (enemy_dies == 1) then begin
-                    if (global_var(849) == 1) then begin
-                        set_global_var(843, global_var(843) bwor 1);
+                    if (global_var(GVAR_C_RING_POINTER) == 1) then begin
+                        set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwor 1);
                     end
-                    if (global_var(849) == 2) then begin
-                        set_global_var(843, global_var(843) bwor 1024);
+                    if (global_var(GVAR_C_RING_POINTER) == 2) then begin
+                        set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwor 1024);
                     end
-                    if (global_var(849) == 3) then begin
-                        set_global_var(843, global_var(843) bwor 64);
+                    if (global_var(GVAR_C_RING_POINTER) == 3) then begin
+                        set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwor 64);
                     end
-                    if (global_var(849) == 4) then begin
-                        set_global_var(843, global_var(843) bwor 4);
+                    if (global_var(GVAR_C_RING_POINTER) == 4) then begin
+                        set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwor 4);
                     end
-                    if ((map_var(1) == 1) and ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0))) then begin
+                    if ((map_var(1) == 1) and ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0))) then begin
                         move_obj_inven_to_obj(corath_temp_box, party_member_obj(16777779));
                         move_obj_inven_to_obj(corath_temp_box2, party_member_obj(16777779));
                         if (obj_is_carrying_obj_pid(party_member_obj(16777779), map_var(4))) then begin
@@ -1175,7 +1175,7 @@ begin
                         end
                         set_obj_visibility(party_member_obj(16777779), 0);
                     end
-                    if ((map_var(1) == 2) and ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0))) then begin
+                    if ((map_var(1) == 2) and ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0))) then begin
                         move_obj_inven_to_obj(corath_temp_box, party_member_obj(16777811));
                         move_obj_inven_to_obj(corath_temp_box2, party_member_obj(16777811));
                         if (obj_is_carrying_obj_pid(party_member_obj(16777811), map_var(4))) then begin
@@ -1183,7 +1183,7 @@ begin
                         end
                         set_obj_visibility(party_member_obj(16777811), 0);
                     end
-                    if ((map_var(1) == 3) and ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0))) then begin
+                    if ((map_var(1) == 3) and ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0))) then begin
                         move_obj_inven_to_obj(corath_temp_box, party_member_obj(16777814));
                         move_obj_inven_to_obj(corath_temp_box2, party_member_obj(16777814));
                         if (obj_is_carrying_obj_pid(party_member_obj(16777814), map_var(4))) then begin
@@ -1196,17 +1196,17 @@ begin
                     end
                 end
                 else begin
-                    if ((map_var(1) == 1) and ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0))) then begin
+                    if ((map_var(1) == 1) and ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0))) then begin
                         fighted_party_member := party_member_obj(16777779);
                         party_remove(party_member_obj(16777779));
                         destroy_object(fighted_party_member);
                     end
-                    if ((map_var(1) == 2) and ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0))) then begin
+                    if ((map_var(1) == 2) and ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0))) then begin
                         fighted_party_member := party_member_obj(16777811);
                         party_remove(party_member_obj(16777811));
                         destroy_object(fighted_party_member);
                     end
-                    if ((map_var(1) == 3) and ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0))) then begin
+                    if ((map_var(1) == 3) and ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0))) then begin
                         fighted_party_member := party_member_obj(16777814);
                         party_remove(party_member_obj(16777814));
                         destroy_object(fighted_party_member);
@@ -1214,20 +1214,20 @@ begin
                     if (map_var(1) == 4) then begin
                         destroy_object(Vodka_obj);
                     end
-                    if (global_var(849) == 1) then begin
-                        set_global_var(843, global_var(843) bwor 2);
+                    if (global_var(GVAR_C_RING_POINTER) == 1) then begin
+                        set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwor 2);
                     end
-                    if (global_var(849) == 2) then begin
+                    if (global_var(GVAR_C_RING_POINTER) == 2) then begin
                         if (map_var(1) == 2) then begin
-                            set_global_var(843, global_var(843) bwor 2048);
+                            set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwor 2048);
                         end
                         else begin
-                            set_global_var(843, global_var(843) bwor 4096);
+                            set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwor 4096);
                         end
-                        set_global_var(50, global_var(50) - 3);
+                        set_global_var(GVAR_TOWN_REP_CORATH, global_var(GVAR_TOWN_REP_CORATH) - 3);
                     end
-                    if (global_var(849) >= 3) then begin
-                        set_global_var(843, global_var(843) bwor 8192);
+                    if (global_var(GVAR_C_RING_POINTER) >= 3) then begin
+                        set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwor 8192);
                     end
                     if (map_var(1) != 4) then begin
                         move_obj_inven_to_obj(corath_temp_box, coffield_table_trade);
@@ -1240,8 +1240,8 @@ begin
             add_timer_event(self_obj, game_ticks(2), 30);
         end
         if (ring_cosmetics2 == 4) then begin
-            if (((global_var(843) bwand 8192) != 0) or (((global_var(843) bwand 4) != 0) and (global_var(848) == 0)) or (((global_var(843) bwand 64) != 0) and not((global_var(842) bwand 1048576) != 0))) then begin
-                set_global_var(843, global_var(843) bwor 2097152);
+            if (((global_var(GVAR_C_RING_VICTORIES) bwand 8192) != 0) or (((global_var(GVAR_C_RING_VICTORIES) bwand 4) != 0) and (global_var(GVAR_NESTOR_LEAVED_CORATH) == 0)) or (((global_var(GVAR_C_RING_VICTORIES) bwand 64) != 0) and not((global_var(GVAR_C_CORATH_STATUS) bwand 1048576) != 0))) then begin
+                set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwor 2097152);
             end
             else begin
                 gfade_in(600);
@@ -1250,64 +1250,64 @@ begin
         end
         if (ring_cosmetics2 == 5) then begin
             if (map_var(1) == 0) then begin
-                if (not((global_var(843) bwand 16384) != 0)) then begin
-                    set_global_var(843, global_var(843) bwor 16384);
+                if (not((global_var(GVAR_C_RING_VICTORIES) bwand 16384) != 0)) then begin
+                    set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwor 16384);
                 end
-                if ((global_var(849) == 4) or (global_var(849) == 5)) then begin
-                    set_global_var(843, global_var(843) bwor 8);
+                if ((global_var(GVAR_C_RING_POINTER) == 4) or (global_var(GVAR_C_RING_POINTER) == 5)) then begin
+                    set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwor 8);
                 end
-                if (global_var(849) == 3) then begin
-                    set_global_var(843, global_var(843) bwor 128);
+                if (global_var(GVAR_C_RING_POINTER) == 3) then begin
+                    set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwor 128);
                 end
-                if (global_var(849) == 3) then begin
-                    set_global_var(1027, global_var(1027) bwor 4);
+                if (global_var(GVAR_C_RING_POINTER) == 3) then begin
+                    set_global_var(GVAR_CORATH_DIALOG_BITS_NEXT, global_var(GVAR_CORATH_DIALOG_BITS_NEXT) bwor 4);
                 end
             end
-            if (not((global_var(843) bwand 8192) != 0)) then begin
+            if (not((global_var(GVAR_C_RING_VICTORIES) bwand 8192) != 0)) then begin
                 if (map_var(1) == 1) then begin
-                    if (not((global_var(843) bwand 32768) != 0)) then begin
-                        set_global_var(843, global_var(843) bwor 32768);
+                    if (not((global_var(GVAR_C_RING_VICTORIES) bwand 32768) != 0)) then begin
+                        set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwor 32768);
                     end
                     if (enemy_dies == 1) then begin
-                        if (global_var(849) == 4) then begin
-                            set_global_var(843, global_var(843) bwor 32);
+                        if (global_var(GVAR_C_RING_POINTER) == 4) then begin
+                            set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwor 32);
                         end
-                        if (global_var(849) == 3) then begin
-                            set_global_var(843, global_var(843) bwor 512);
+                        if (global_var(GVAR_C_RING_POINTER) == 3) then begin
+                            set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwor 512);
                         end
                         PartyFigher := map_var(1);
                     end
                 end
                 if (map_var(1) == 2) then begin
-                    if (not((global_var(843) bwand 65536) != 0)) then begin
-                        set_global_var(843, global_var(843) bwor 65536);
+                    if (not((global_var(GVAR_C_RING_VICTORIES) bwand 65536) != 0)) then begin
+                        set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwor 65536);
                     end
                     if (enemy_dies == 1) then begin
-                        if (global_var(849) == 4) then begin
-                            set_global_var(843, global_var(843) bwor 16);
+                        if (global_var(GVAR_C_RING_POINTER) == 4) then begin
+                            set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwor 16);
                         end
-                        if (global_var(849) == 3) then begin
-                            set_global_var(843, global_var(843) bwor 256);
+                        if (global_var(GVAR_C_RING_POINTER) == 3) then begin
+                            set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwor 256);
                         end
                         PartyFigher := map_var(1);
                     end
                 end
                 if (map_var(1) == 3) then begin
-                    if (not((global_var(843) bwand 32768) != 0)) then begin
-                        set_global_var(843, global_var(843) bwor 32768);
+                    if (not((global_var(GVAR_C_RING_VICTORIES) bwand 32768) != 0)) then begin
+                        set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwor 32768);
                     end
                     if (enemy_dies == 1) then begin
-                        if (global_var(849) == 4) then begin
-                            set_global_var(843, global_var(843) bwor 32);
+                        if (global_var(GVAR_C_RING_POINTER) == 4) then begin
+                            set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwor 32);
                         end
-                        if (global_var(849) == 3) then begin
-                            set_global_var(843, global_var(843) bwor 512);
+                        if (global_var(GVAR_C_RING_POINTER) == 3) then begin
+                            set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwor 512);
                         end
                         PartyFigher := map_var(1);
                     end
                 end
             end
-            if (global_var(849) == 2) then begin
+            if (global_var(GVAR_C_RING_POINTER) == 2) then begin
                 if (obj_is_carrying_obj_pid(dude_obj, 540)) then begin
                     removed_qty := obj_is_carrying_obj_pid(dude_obj, 540);
                     if (1 < removed_qty) then begin
@@ -1317,17 +1317,17 @@ begin
                         restock_obj := obj_carrying_pid_obj(dude_obj, 540);
                         if (obj_type(self_obj) == 1) then begin
                             restock_obj := obj_carrying_pid_obj(dude_obj, 540);
-                            if (critter_inven_obj(self_obj, 0) == restock_obj) then begin
-                                if (obj_item_subtype(critter_inven_obj(dude_obj, 0)) == 0) then begin
-                                    restock_obj := critter_inven_obj(dude_obj, 0);
+                            if (critter_inven_obj(self_obj, INVEN_TYPE_WORN) == restock_obj) then begin
+                                if (obj_item_subtype(critter_inven_obj(dude_obj, INVEN_TYPE_WORN)) == 0) then begin
+                                    restock_obj := critter_inven_obj(dude_obj, INVEN_TYPE_WORN);
                                     debug_msg("armour pid == " + obj_pid(restock_obj));
                                     rm_obj_from_inven(dude_obj, restock_obj);
                                     add_obj_to_inven(dude_obj, restock_obj);
                                 end
                             end
                             else begin
-                                if ((critter_inven_obj(dude_obj, 2) == restock_obj) or (critter_inven_obj(dude_obj, 1) == restock_obj)) then begin
-                                    metarule(43, dude_obj);
+                                if ((critter_inven_obj(dude_obj, INVEN_TYPE_LEFT_HAND) == restock_obj) or (critter_inven_obj(dude_obj, INVEN_TYPE_RIGHT_HAND) == restock_obj)) then begin
+                                    inven_unwield(dude_obj);
                                 end
                             end
                         end
@@ -1357,17 +1357,17 @@ begin
                         restock_obj := obj_carrying_pid_obj(dude_obj, 319);
                         if (obj_type(self_obj) == 1) then begin
                             restock_obj := obj_carrying_pid_obj(dude_obj, 319);
-                            if (critter_inven_obj(self_obj, 0) == restock_obj) then begin
-                                if (obj_item_subtype(critter_inven_obj(dude_obj, 0)) == 0) then begin
-                                    restock_obj := critter_inven_obj(dude_obj, 0);
+                            if (critter_inven_obj(self_obj, INVEN_TYPE_WORN) == restock_obj) then begin
+                                if (obj_item_subtype(critter_inven_obj(dude_obj, INVEN_TYPE_WORN)) == 0) then begin
+                                    restock_obj := critter_inven_obj(dude_obj, INVEN_TYPE_WORN);
                                     debug_msg("armour pid == " + obj_pid(restock_obj));
                                     rm_obj_from_inven(dude_obj, restock_obj);
                                     add_obj_to_inven(dude_obj, restock_obj);
                                 end
                             end
                             else begin
-                                if ((critter_inven_obj(dude_obj, 2) == restock_obj) or (critter_inven_obj(dude_obj, 1) == restock_obj)) then begin
-                                    metarule(43, dude_obj);
+                                if ((critter_inven_obj(dude_obj, INVEN_TYPE_LEFT_HAND) == restock_obj) or (critter_inven_obj(dude_obj, INVEN_TYPE_RIGHT_HAND) == restock_obj)) then begin
+                                    inven_unwield(dude_obj);
                                 end
                             end
                         end
@@ -1397,17 +1397,17 @@ begin
                         restock_obj := obj_carrying_pid_obj(dude_obj, 319);
                         if (obj_type(self_obj) == 1) then begin
                             restock_obj := obj_carrying_pid_obj(dude_obj, 319);
-                            if (critter_inven_obj(self_obj, 0) == restock_obj) then begin
-                                if (obj_item_subtype(critter_inven_obj(dude_obj, 0)) == 0) then begin
-                                    restock_obj := critter_inven_obj(dude_obj, 0);
+                            if (critter_inven_obj(self_obj, INVEN_TYPE_WORN) == restock_obj) then begin
+                                if (obj_item_subtype(critter_inven_obj(dude_obj, INVEN_TYPE_WORN)) == 0) then begin
+                                    restock_obj := critter_inven_obj(dude_obj, INVEN_TYPE_WORN);
                                     debug_msg("armour pid == " + obj_pid(restock_obj));
                                     rm_obj_from_inven(dude_obj, restock_obj);
                                     add_obj_to_inven(dude_obj, restock_obj);
                                 end
                             end
                             else begin
-                                if ((critter_inven_obj(dude_obj, 2) == restock_obj) or (critter_inven_obj(dude_obj, 1) == restock_obj)) then begin
-                                    metarule(43, dude_obj);
+                                if ((critter_inven_obj(dude_obj, INVEN_TYPE_LEFT_HAND) == restock_obj) or (critter_inven_obj(dude_obj, INVEN_TYPE_RIGHT_HAND) == restock_obj)) then begin
+                                    inven_unwield(dude_obj);
                                 end
                             end
                         end
@@ -1451,16 +1451,16 @@ begin
                 kick_or_hand := 0;
             end
             set_map_var(1, 0);
-            set_global_var(849, 0);
+            set_global_var(GVAR_C_RING_POINTER, 0);
             sequence := 0;
             ring_cosmetics := 0;
             ring_cosmetics2 := 0;
             idiot_cosmetics := 0;
             cadwic_move := 0;
             cadwic_done := 0;
-            set_global_var(843, global_var(843) bwand (-1 - 262144));
+            set_global_var(GVAR_C_RING_VICTORIES, global_var(GVAR_C_RING_VICTORIES) bwand (-1 - 262144));
             game_ui_enable;
-            if ((PartyFigher != 0) or ((global_var(843) bwand 8192) != 0) or (((global_var(843) bwand 4) != 0) and (global_var(848) == 0)) or (((global_var(843) bwand 64) != 0) and not((global_var(842) bwand 1048576) != 0))) then begin
+            if ((PartyFigher != 0) or ((global_var(GVAR_C_RING_VICTORIES) bwand 8192) != 0) or (((global_var(GVAR_C_RING_VICTORIES) bwand 4) != 0) and (global_var(GVAR_NESTOR_LEAVED_CORATH) == 0)) or (((global_var(GVAR_C_RING_VICTORIES) bwand 64) != 0) and not((global_var(GVAR_C_CORATH_STATUS) bwand 1048576) != 0))) then begin
                 add_timer_event(self_obj, game_ticks(0), 99);
             end
             else begin
@@ -1468,7 +1468,7 @@ begin
             end
         end
     end
-    if ((global_var(849) == 2) and (fixed_param == 40) and (cadwic_done == 0)) then begin
+    if ((global_var(GVAR_C_RING_POINTER) == 2) and (fixed_param == 40) and (cadwic_done == 0)) then begin
         if (fixed_param == 40) then begin
             cadwic_move := cadwic_move + 1;
         end
@@ -1485,25 +1485,25 @@ begin
             add_timer_event(self_obj, game_ticks(1), 20);
         end
     end
-    if (global_var(849) == 2) then begin
+    if (global_var(GVAR_C_RING_POINTER) == 2) then begin
         if (fixed_param == 45) then begin
             if (obj_on_screen(obyv5) == 1) then begin
-                float_msg(obyv5, message_str(1529, 700), 2);
+                float_msg(obyv5, mstr(700), FLOAT_MSG_RED);
             end
             else begin
                 if ((obj_on_screen(obyv6) == 1) and (obj_on_screen(obyv5) == 0)) then begin
-                    float_msg(obyv6, message_str(1529, 700), 2);
+                    float_msg(obyv6, mstr(700), FLOAT_MSG_RED);
                 end
                 else begin
-                    float_msg(obyv4, message_str(1529, 700), 2);
+                    float_msg(obyv4, mstr(700), FLOAT_MSG_RED);
                 end
             end
         end
         if (fixed_param == 46) then begin
-            float_msg(Vykladac_zakona, message_str(1529, 800), 4);
+            float_msg(Vykladac_zakona, mstr(800), FLOAT_MSG_BLUE);
         end
     end
-    if ((global_var(849) == 1) and (fixed_param == 140) and (bill_done == 0)) then begin
+    if ((global_var(GVAR_C_RING_POINTER) == 1) and (fixed_param == 140) and (bill_done == 0)) then begin
         if (fixed_param == 140) then begin
             bill_move := bill_move + 1;
         end
@@ -1520,96 +1520,96 @@ begin
             add_timer_event(self_obj, game_ticks(1), 20);
         end
     end
-    if ((global_var(849) == 5) and (fixed_param == 50) and (map_var(1) == 0)) then begin
+    if ((global_var(GVAR_C_RING_POINTER) == 5) and (fixed_param == 50) and (map_var(1) == 0)) then begin
         if (fixed_param == 50) then begin
             idiot_cosmetics := idiot_cosmetics + 1;
         end
         if (idiot_cosmetics == 1) then begin
-            Cedrick_obj := create_object_sid(16777897, 18098, 0, -1);
+            Cedrick_obj := create_object(16777897, 18098, 0);
             anim(Cedrick_obj, 1000, 1);
             move_to(dude_obj, 18300, elevation(self_obj));
             anim(dude_obj, 1000, 1);
             if (party_member_obj(16777729) != 0) then begin
                 if (party_member_obj(16777729) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777729), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777729))) then begin
+                        critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+            if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
                 if (party_member_obj(16777779) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777779), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777779))) then begin
+                        critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+            if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
                 if (party_member_obj(16777811) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777811), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777811))) then begin
+                        critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777812) != 0) then begin
                 if (party_member_obj(16777812) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777812), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777812))) then begin
+                        critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
-            if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+            if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
                 if (party_member_obj(16777814) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777814), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777814))) then begin
+                        critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777748) != 0) then begin
                 if (party_member_obj(16777748) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777748), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777748))) then begin
+                        critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778017) != 0) then begin
                 if (party_member_obj(16778017) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778017), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778017))) then begin
+                        critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778016) != 0) then begin
                 if (party_member_obj(16778016) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778016), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778016))) then begin
+                        critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778049) != 0) then begin
                 if (party_member_obj(16778049) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778049), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778049))) then begin
+                        critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778050) != 0) then begin
                 if (party_member_obj(16778050) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778050), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778050))) then begin
+                        critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16778051) != 0) then begin
                 if (party_member_obj(16778051) != 0) then begin
-                    if (has_trait(1, party_member_obj(16778051), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16778051))) then begin
+                        critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
             if (party_member_obj(16777294) != 0) then begin
                 if (party_member_obj(16777294) != 0) then begin
-                    if (has_trait(1, party_member_obj(16777294), 666)) then begin
-                        critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+                    if (obj_is_visible_flag(party_member_obj(16777294))) then begin
+                        critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
                     end
                 end
             end
@@ -1618,15 +1618,15 @@ begin
             add_timer_event(self_obj, game_ticks(2), 50);
         end
         if (idiot_cosmetics == 2) then begin
-            float_msg(Vykladac_zakona, message_str(1529, 1000), 9);
+            float_msg(Vykladac_zakona, mstr(1000), FLOAT_MSG_WHITE);
             add_timer_event(self_obj, game_ticks(6), 50);
         end
         if (idiot_cosmetics == 3) then begin
-            if (get_critter_stat(dude_obj, 34) == 0) then begin
-                float_msg(Cedrick_obj, message_str(1529, 1100), 8);
+            if (dude_gender == 0) then begin
+                float_msg(Cedrick_obj, mstr(1100), FLOAT_MSG_YELLOW);
             end
             else begin
-                float_msg(Cedrick_obj, message_str(1529, 1101), 8);
+                float_msg(Cedrick_obj, mstr(1101), FLOAT_MSG_YELLOW);
             end
             add_timer_event(self_obj, game_ticks(6), 50);
         end
@@ -1637,15 +1637,15 @@ begin
         end
     end
     if (fixed_param == 99) then begin
-        if (((global_var(843) bwand 64) != 0) and not((global_var(842) bwand 1048576) != 0)) then begin
-            if ((global_var(1027) bwand 4) != 0) then begin
+        if (((global_var(GVAR_C_RING_VICTORIES) bwand 64) != 0) and not((global_var(GVAR_C_CORATH_STATUS) bwand 1048576) != 0)) then begin
+            if ((global_var(GVAR_CORATH_DIALOG_BITS_NEXT) bwand 4) != 0) then begin
                 game_ui_disable;
                 wield_obj_critter(dude_obj, obj_carrying_pid_obj(dude_obj, map_var(2)));
                 wield_obj_critter(dude_obj, obj_carrying_pid_obj(dude_obj, map_var(3)));
             end
-            set_global_var(842, global_var(842) bwor 1048576);
-            if ((PartyFigher == 2) and ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0))) then begin
-                gfade_in(1);
+            set_global_var(GVAR_C_CORATH_STATUS, global_var(GVAR_C_CORATH_STATUS) bwor 1048576);
+            if ((PartyFigher == 2) and ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0))) then begin
+                fade_in;
                 add_timer_event(party_member_obj(16777811), 5, 18);
             end
             else begin
@@ -1655,9 +1655,9 @@ begin
             end
         end
         else begin
-            if (((global_var(843) bwand 4) != 0) and (global_var(848) == 0)) then begin
-                if ((PartyFigher == 2) and ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0))) then begin
-                    gfade_in(1);
+            if (((global_var(GVAR_C_RING_VICTORIES) bwand 4) != 0) and (global_var(GVAR_NESTOR_LEAVED_CORATH) == 0)) then begin
+                if ((PartyFigher == 2) and ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0))) then begin
+                    fade_in;
                     add_timer_event(party_member_obj(16777811), 5, 17);
                 end
                 else begin
@@ -1665,17 +1665,17 @@ begin
                 end
             end
             else begin
-                if ((PartyFigher == 1) and ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) and ((global_var(910) bwand 256) == 0)) then begin
+                if ((PartyFigher == 1) and ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 256) == 0)) then begin
                     add_timer_event(party_member_obj(16777779), 5, 13);
                 end
                 else begin
-                    if ((PartyFigher == 2) and ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0))) then begin
+                    if ((PartyFigher == 2) and ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0))) then begin
                         add_timer_event(party_member_obj(16777811), 5, 16);
                     end
                 end
             end
         end
-        if ((global_var(843) bwand 8192) != 0) then begin
+        if ((global_var(GVAR_C_RING_VICTORIES) bwand 8192) != 0) then begin
             load_map(90, 0);
         end
         PartyFigher := 0;
@@ -1687,30 +1687,30 @@ begin
         game_ui_enable;
         load_map(16, 0);
     end
-    if ((global_var(849) != 0) and (map_var(1) != 0)) then begin
+    if ((global_var(GVAR_C_RING_POINTER) != 0) and (map_var(1) != 0)) then begin
         if (fixed_param == 60) then begin
             animate_move_obj_to_tile(enemy_fighter, 16291, 0);
             add_timer_event(self_obj, game_ticks(2), 61);
         end
         if (fixed_param == 61) then begin
             if (ring_turn == 0) then begin
-                if ((global_var(849) == 2) and (chadwic_knife_out == 0)) then begin
+                if ((global_var(GVAR_C_RING_POINTER) == 2) and (chadwic_knife_out == 0)) then begin
                     call chadwic_wield_knife();
                 end
                 else begin
                     call floats_when_party_fight();
-                    random_number := random(1, enemy_difficulty) - (get_critter_stat(dude_obj, 6) / 3);
+                    random_number := random(1, enemy_difficulty) - (dude_luck / 3);
                     hit_chance := enemy_difficulty + random_number;
-                    random_number := random(1, party_difficulty) + (get_critter_stat(dude_obj, 6) / 3);
+                    random_number := random(1, party_difficulty) + (dude_luck / 3);
                     need_to_hit := (party_difficulty / 2) + random_number;
                     if (hit_chance > need_to_hit) then begin
                         if ((hb_party > 0) or (enemy_difficulty < party_difficulty)) then begin
-                            if ((global_var(849) == 2) and (chadwic_knife_out == 1)) then begin
+                            if ((global_var(GVAR_C_RING_POINTER) == 2) and (chadwic_knife_out == 1)) then begin
                                 call knife_hit_party();
                                 hb_party := hb_party - (enemy_avg_damage + random(-1, 5));
                             end
                             else begin
-                                if (global_var(849) == 3) then begin
+                                if (global_var(GVAR_C_RING_POINTER) == 3) then begin
                                     kick_or_hand := random(0, 3);
                                     if (kick_or_hand < 3) then begin
                                         can_kick := 0;
@@ -1739,11 +1739,11 @@ begin
                         end
                     end
                     else begin
-                        if ((global_var(849) == 2) and (chadwic_knife_out == 1)) then begin
+                        if ((global_var(GVAR_C_RING_POINTER) == 2) and (chadwic_knife_out == 1)) then begin
                             call knife_miss_party();
                         end
                         else begin
-                            if (global_var(849) == 3) then begin
+                            if (global_var(GVAR_C_RING_POINTER) == 3) then begin
                                 kick_or_hand := random(0, 3);
                                 if (kick_or_hand < 3) then begin
                                     can_kick := 0;
@@ -1768,9 +1768,9 @@ begin
             end
             if (ring_turn == 1) then begin
                 call floats_when_party_fight();
-                random_number := random(1, party_difficulty) + (get_critter_stat(dude_obj, 6) / 3);
+                random_number := random(1, party_difficulty) + (dude_luck / 3);
                 hit_chance := party_difficulty + random_number;
-                random_number := random(1, enemy_difficulty) - (get_critter_stat(dude_obj, 6) / 3);
+                random_number := random(1, enemy_difficulty) - (dude_luck / 3);
                 need_to_hit := (enemy_difficulty / 2) + random_number;
                 if (hit_chance > need_to_hit) then begin
                     if ((hb_enemy > 0) or (enemy_difficulty > party_difficulty)) then begin
@@ -1850,13 +1850,13 @@ begin
         game_ui_disable;
     end
     if (fixed_param == 996) then begin
-        float_msg(party_fighter, message_str(1529, 1207), 2);
+        float_msg(party_fighter, mstr(1207), FLOAT_MSG_RED);
     end
     if (fixed_param == 997) then begin
-        float_msg(party_fighter, message_str(1529, 1205), 2);
+        float_msg(party_fighter, mstr(1205), FLOAT_MSG_RED);
     end
     if (fixed_param == 998) then begin
-        float_msg(enemy_fighter, message_str(1529, 1206), 8);
+        float_msg(enemy_fighter, mstr(1206), FLOAT_MSG_YELLOW);
     end
     if ((fixed_param == 999) and combat_is_initialized) then begin
         terminate_combat;
@@ -1869,126 +1869,126 @@ begin
     anim(dude_obj, 1000, 0);
     if (party_member_obj(16777729) != 0) then begin
         if (party_member_obj(16777729) != 0) then begin
-            if (has_trait(1, party_member_obj(16777729), 666)) then begin
-                critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+            if (obj_is_visible_flag(party_member_obj(16777729))) then begin
+                critter_attempt_placement(party_member_obj(16777729), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
             end
         end
     end
-    if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
+    if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
         if (party_member_obj(16777779) != 0) then begin
-            if (has_trait(1, party_member_obj(16777779), 666)) then begin
-                critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+            if (obj_is_visible_flag(party_member_obj(16777779))) then begin
+                critter_attempt_placement(party_member_obj(16777779), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
             end
         end
     end
-    if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
+    if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
         if (party_member_obj(16777811) != 0) then begin
-            if (has_trait(1, party_member_obj(16777811), 666)) then begin
-                critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+            if (obj_is_visible_flag(party_member_obj(16777811))) then begin
+                critter_attempt_placement(party_member_obj(16777811), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
             end
         end
     end
     if (party_member_obj(16777812) != 0) then begin
         if (party_member_obj(16777812) != 0) then begin
-            if (has_trait(1, party_member_obj(16777812), 666)) then begin
-                critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+            if (obj_is_visible_flag(party_member_obj(16777812))) then begin
+                critter_attempt_placement(party_member_obj(16777812), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
             end
         end
     end
-    if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
+    if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
         if (party_member_obj(16777814) != 0) then begin
-            if (has_trait(1, party_member_obj(16777814), 666)) then begin
-                critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+            if (obj_is_visible_flag(party_member_obj(16777814))) then begin
+                critter_attempt_placement(party_member_obj(16777814), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
             end
         end
     end
     if (party_member_obj(16777748) != 0) then begin
         if (party_member_obj(16777748) != 0) then begin
-            if (has_trait(1, party_member_obj(16777748), 666)) then begin
-                critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+            if (obj_is_visible_flag(party_member_obj(16777748))) then begin
+                critter_attempt_placement(party_member_obj(16777748), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
             end
         end
     end
     if (party_member_obj(16778017) != 0) then begin
         if (party_member_obj(16778017) != 0) then begin
-            if (has_trait(1, party_member_obj(16778017), 666)) then begin
-                critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+            if (obj_is_visible_flag(party_member_obj(16778017))) then begin
+                critter_attempt_placement(party_member_obj(16778017), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
             end
         end
     end
     if (party_member_obj(16778016) != 0) then begin
         if (party_member_obj(16778016) != 0) then begin
-            if (has_trait(1, party_member_obj(16778016), 666)) then begin
-                critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+            if (obj_is_visible_flag(party_member_obj(16778016))) then begin
+                critter_attempt_placement(party_member_obj(16778016), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
             end
         end
     end
     if (party_member_obj(16778049) != 0) then begin
         if (party_member_obj(16778049) != 0) then begin
-            if (has_trait(1, party_member_obj(16778049), 666)) then begin
-                critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+            if (obj_is_visible_flag(party_member_obj(16778049))) then begin
+                critter_attempt_placement(party_member_obj(16778049), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
             end
         end
     end
     if (party_member_obj(16778050) != 0) then begin
         if (party_member_obj(16778050) != 0) then begin
-            if (has_trait(1, party_member_obj(16778050), 666)) then begin
-                critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+            if (obj_is_visible_flag(party_member_obj(16778050))) then begin
+                critter_attempt_placement(party_member_obj(16778050), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
             end
         end
     end
     if (party_member_obj(16778051) != 0) then begin
         if (party_member_obj(16778051) != 0) then begin
-            if (has_trait(1, party_member_obj(16778051), 666)) then begin
-                critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+            if (obj_is_visible_flag(party_member_obj(16778051))) then begin
+                critter_attempt_placement(party_member_obj(16778051), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
             end
         end
     end
     if (party_member_obj(16777294) != 0) then begin
         if (party_member_obj(16777294) != 0) then begin
-            if (has_trait(1, party_member_obj(16777294), 666)) then begin
-                critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(tile_num(dude_obj), (has_trait(1, dude_obj, 10) + 3) % 6, 2), elevation(dude_obj));
+            if (obj_is_visible_flag(party_member_obj(16777294))) then begin
+                critter_attempt_placement(party_member_obj(16777294), tile_num_in_direction(dude_tile, (obj_get_rot(dude_obj) + 3) % 6, 2), dude_elevation);
             end
         end
     end
-    metarule3(108, 15690, 0, 0);
+    tile_set_center(15690);
 end
 
 procedure create_obecenstvo
 begin
-    obyv4 := create_object_sid(16777885, 14900, 0, 1581);
+    obyv4 := create_object_sid(16777885, 14900, 0, SCRIPT_COBECENS);
     anim(obyv4, 1000, 1);
-    obyv5 := create_object_sid(16777887, 14484, 0, 1581);
+    obyv5 := create_object_sid(16777887, 14484, 0, SCRIPT_COBECENS);
     anim(obyv5, 1000, 3);
-    obyv6 := create_object_sid(16777886, 18099, 0, 1581);
+    obyv6 := create_object_sid(16777886, 18099, 0, SCRIPT_COBECENS);
     anim(obyv6, 1000, 0);
-    if ((global_var(849) == 1) or (global_var(849) == 2)) then begin
-        obyv1 := create_object_sid(16777890, 18096, 0, 1581);
+    if ((global_var(GVAR_C_RING_POINTER) == 1) or (global_var(GVAR_C_RING_POINTER) == 2)) then begin
+        obyv1 := create_object_sid(16777890, 18096, 0, SCRIPT_COBECENS);
         anim(obyv1, 1000, 5);
-        obyv2 := create_object_sid(16777890, 14088, 0, 1581);
+        obyv2 := create_object_sid(16777890, 14088, 0, SCRIPT_COBECENS);
         anim(obyv2, 1000, 2);
-        obyv8 := create_object_sid(16777884, 18694, 0, 1581);
+        obyv8 := create_object_sid(16777884, 18694, 0, SCRIPT_COBECENS);
         anim(obyv8, 1000, 5);
     end
     else begin
-        obyv1 := create_object_sid(16777890, 14297, 0, 1581);
+        obyv1 := create_object_sid(16777890, 14297, 0, SCRIPT_COBECENS);
         anim(obyv1, 1000, 1);
-        str1 := create_object_sid(16777900, 18492, 0, 1581);
+        str1 := create_object_sid(16777900, 18492, 0, SCRIPT_COBECENS);
         anim(str1, 1000, 5);
-        str2 := create_object_sid(16777899, 18297, 0, 1581);
+        str2 := create_object_sid(16777899, 18297, 0, SCRIPT_COBECENS);
         anim(str2, 1000, 5);
-        if (global_var(849) != 3) then begin
-            cedr := create_object_sid(16777897, 18094, 0, 1581);
+        if (global_var(GVAR_C_RING_POINTER) != 3) then begin
+            cedr := create_object_sid(16777897, 18094, 0, SCRIPT_COBECENS);
         end
         else begin
-            cedr := create_object_sid(16777898, 18094, 0, 1581);
+            cedr := create_object_sid(16777898, 18094, 0, SCRIPT_COBECENS);
         end
         anim(cedr, 1000, 5);
-        adem := create_object_sid(16777901, 14288, 0, 1581);
+        adem := create_object_sid(16777901, 14288, 0, SCRIPT_COBECENS);
         anim(adem, 1000, 2);
-        nes1 := create_object_sid(16777903, 14086, 0, 1581);
+        nes1 := create_object_sid(16777903, 14086, 0, SCRIPT_COBECENS);
         anim(nes1, 1000, 2);
-        nes2 := create_object_sid(16777905, 14090, 0, 1581);
+        nes2 := create_object_sid(16777905, 14090, 0, SCRIPT_COBECENS);
         anim(nes2, 1000, 2);
     end
 end
@@ -1999,7 +1999,7 @@ begin
     destroy_object(obyv4);
     destroy_object(obyv5);
     destroy_object(obyv6);
-    if ((global_var(849) == 1) or (global_var(849) == 2)) then begin
+    if ((global_var(GVAR_C_RING_POINTER) == 1) or (global_var(GVAR_C_RING_POINTER) == 2)) then begin
         destroy_object(obyv2);
         destroy_object(obyv8);
     end
@@ -2033,38 +2033,38 @@ end
 
 procedure generate_oponent
 begin
-    if (global_var(849) == 1) then begin
-        destroyItemsBox := create_object_sid(133, 0, 0, -1);
+    if (global_var(GVAR_C_RING_POINTER) == 1) then begin
+        destroyItemsBox := create_object(133, 0, 0);
         move_obj_inven_to_obj(Bill_obj, destroyItemsBox);
         destroy_object(destroyItemsBox);
         move_to(Bill_obj, 15691, 0);
         set_obj_visibility(Bill_obj, 0);
         anim(Bill_obj, 1000, 2);
-        critter_add_trait(Bill_obj, 1, 5, 52);
+        critter_add_trait(Bill_obj, TRAIT_OBJECT, OBJECT_AI_PACKET, AI_TOUGH_CITIZEN_NO_TALKING);
     end
     else begin
-        if (global_var(849) == 2) then begin
+        if (global_var(GVAR_C_RING_POINTER) == 2) then begin
             move_obj_inven_to_obj(Chadwic_obj, corath_temp_box2);
             move_to(Chadwic_obj, 15691, 0);
             anim(Chadwic_obj, 1000, 2);
-            critter_add_trait(Chadwic_obj, 1, 5, 52);
+            critter_add_trait(Chadwic_obj, TRAIT_OBJECT, OBJECT_AI_PACKET, AI_TOUGH_CITIZEN_NO_TALKING);
         end
         else begin
-            if (global_var(849) == 3) then begin
-                Cedrick_obj := create_object_sid(16777897, 15691, 0, 1583);
+            if (global_var(GVAR_C_RING_POINTER) == 3) then begin
+                Cedrick_obj := create_object_sid(16777897, 15691, 0, SCRIPT_CCEDRING);
                 anim(Cedrick_obj, 1000, 2);
-                critter_add_trait(Cedrick_obj, 1, 5, 3);
+                critter_add_trait(Cedrick_obj, TRAIT_OBJECT, OBJECT_AI_PACKET, AI_TOUGH_GUARD_NO_TALKING);
             end
             else begin
-                if ((global_var(849) == 4) or (global_var(849) == 5)) then begin
-                    if ((global_var(843) bwand 131072) != 0) then begin
-                        Blaster_obj := create_object_sid(16778040, 15691, 0, 1527);
+                if ((global_var(GVAR_C_RING_POINTER) == 4) or (global_var(GVAR_C_RING_POINTER) == 5)) then begin
+                    if ((global_var(GVAR_C_RING_VICTORIES) bwand 131072) != 0) then begin
+                        Blaster_obj := create_object_sid(16778040, 15691, 0, SCRIPT_CBLASTER);
                     end
                     else begin
-                        Blaster_obj := create_object_sid(16777858, 15691, 0, 1527);
+                        Blaster_obj := create_object_sid(16777858, 15691, 0, SCRIPT_CBLASTER);
                     end
                     anim(Blaster_obj, 1000, 2);
-                    critter_add_trait(self_obj, 1, 5, 1);
+                    critter_add_trait(self_obj, TRAIT_OBJECT, OBJECT_AI_PACKET, AI_BERSERKER_NO_TALKING);
                 end
             end
         end
@@ -2074,43 +2074,43 @@ end
 procedure place_party
 begin
     if (party_member_obj(16777729) != 0) then begin
-        move_to(party_member_obj(16777729), 16501, elevation(dude_obj));
+        move_to(party_member_obj(16777729), 16501, dude_elevation);
         anim(party_member_obj(16777729), 1000, 1);
     end
     if (party_member_obj(16777813) != 0) then begin
-        move_to(party_member_obj(16777813), 16703, elevation(dude_obj));
+        move_to(party_member_obj(16777813), 16703, dude_elevation);
         anim(party_member_obj(16777813), 1000, 1);
     end
     if (party_member_obj(16777748) != 0) then begin
-        move_to(party_member_obj(16777748), 16103, elevation(dude_obj));
+        move_to(party_member_obj(16777748), 16103, dude_elevation);
         anim(party_member_obj(16777748), 1000, 1);
     end
-    if ((party_member_obj(16777814) != 0) and ((global_var(910) bwand 128) == 0)) then begin
-        move_to(party_member_obj(16777814), 15902, elevation(dude_obj));
+    if ((party_member_obj(16777814) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 128) == 0)) then begin
+        move_to(party_member_obj(16777814), 15902, dude_elevation);
         anim(party_member_obj(16777814), 1000, 1);
     end
-    if ((party_member_obj(16777779) != 0) and ((global_var(910) bwand 32) == 0)) then begin
-        move_to(party_member_obj(16777779), 16500, elevation(dude_obj));
+    if ((party_member_obj(16777779) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 32) == 0)) then begin
+        move_to(party_member_obj(16777779), 16500, dude_elevation);
         anim(party_member_obj(16777779), 1000, 1);
     end
-    if ((party_member_obj(16777811) != 0) and ((global_var(910) bwand 64) == 0)) then begin
-        move_to(party_member_obj(16777811), 15901, elevation(dude_obj));
+    if ((party_member_obj(16777811) != 0) and ((global_var(GVAR_PTR_PARTY_MEMBER_ACTIONS) bwand 64) == 0)) then begin
+        move_to(party_member_obj(16777811), 15901, dude_elevation);
         anim(party_member_obj(16777811), 1000, 1);
     end
     if (party_member_obj(16777812) != 0) then begin
-        move_to(party_member_obj(16777812), 15902, elevation(dude_obj));
+        move_to(party_member_obj(16777812), 15902, dude_elevation);
         anim(party_member_obj(16777812), 1000, 1);
     end
 end
 
 procedure chadwic_wield_knife
 begin
-    if (global_var(849) == 2) then begin
+    if (global_var(GVAR_C_RING_POINTER) == 2) then begin
         if (chadwic_knife_out == 0) then begin
-            restock_obj := create_object_sid(4, 0, 0, -1);
+            restock_obj := create_object(4, 0, 0);
             add_mult_objs_to_inven(enemy_fighter, restock_obj, 1);
             wield_obj_critter(enemy_fighter, obj_carrying_pid_obj(enemy_fighter, 4));
-            float_msg(enemy_fighter, message_str(1529, 350), 2);
+            float_msg(enemy_fighter, mstr(350), FLOAT_MSG_RED);
             add_timer_event(self_obj, game_ticks(1), 45);
             add_timer_event(self_obj, game_ticks(2), 46);
             chadwic_knife_out := 1;
@@ -2266,7 +2266,7 @@ begin
     reg_anim_play_sfx(party_fighter, sfx_build_char_name(party_fighter, 20, 3), 0);
     reg_anim_animate(party_fighter, 34, -1);
     reg_anim_func(3, 0);
-    if ((global_var(849) == 2) and (chadwic_knife_out == 1)) then begin
+    if ((global_var(GVAR_C_RING_POINTER) == 2) and (chadwic_knife_out == 1)) then begin
         reg_anim_func(2, enemy_fighter);
         reg_anim_func(1, 1);
         reg_anim_animate(enemy_fighter, 42, -1);
@@ -2299,27 +2299,27 @@ end
 
 procedure generate_party_and_oponent
 begin
-    if (global_var(849) == 1) then begin
-        enemy_fighter := create_object_sid(16777859, 15691, 0, -1);
+    if (global_var(GVAR_C_RING_POINTER) == 1) then begin
+        enemy_fighter := create_object(16777859, 15691, 0);
         enemy_hit_points := 35;
         enemy_avg_damage := 4;
         enemy_difficulty := 2;
     end
-    if (global_var(849) == 2) then begin
-        enemy_fighter := create_object_sid(16777865, 15691, 0, -1);
+    if (global_var(GVAR_C_RING_POINTER) == 2) then begin
+        enemy_fighter := create_object(16777865, 15691, 0);
         enemy_hit_points := 50;
         enemy_avg_damage := 5;
         enemy_difficulty := 3;
     end
-    if (global_var(849) == 3) then begin
-        enemy_fighter := create_object_sid(16777897, 15691, 0, -1);
+    if (global_var(GVAR_C_RING_POINTER) == 3) then begin
+        enemy_fighter := create_object(16777897, 15691, 0);
         enemy_hit_points := 70;
         enemy_avg_damage := 8;
         enemy_difficulty := 7;
     end
-    if (global_var(849) == 4) then begin
-        enemy_fighter := create_object_sid(16777858, 15691, 0, -1);
-        if ((global_var(843) bwand 131072) != 0) then begin
+    if (global_var(GVAR_C_RING_POINTER) == 4) then begin
+        enemy_fighter := create_object(16777858, 15691, 0);
+        if ((global_var(GVAR_C_RING_VICTORIES) bwand 131072) != 0) then begin
             enemy_hit_points := 55;
             enemy_avg_damage := 7;
             enemy_difficulty := 4;
@@ -2331,16 +2331,16 @@ begin
         end
     end
     if (map_var(1) == 1) then begin
-        party_fighter := create_object_sid(16778054, 16491, 0, -1);
-        metarule3(107, party_fighter, obj_art_fid(party_member_obj(16777779)), 0);
+        party_fighter := create_object(16778054, 16491, 0);
+        art_change_fid_num(party_fighter, obj_art_fid(party_member_obj(16777779)));
         set_obj_visibility(party_member_obj(16777779), 1);
         party_hit_points := 60;
         party_avg_damage := 5;
         party_difficulty := 5;
     end
     if (map_var(1) == 2) then begin
-        party_fighter := create_object_sid(16778052, 16491, 0, -1);
-        metarule3(107, party_fighter, obj_art_fid(party_member_obj(16777811)), 0);
+        party_fighter := create_object(16778052, 16491, 0);
+        art_change_fid_num(party_fighter, obj_art_fid(party_member_obj(16777811)));
         set_obj_visibility(party_member_obj(16777811), 1);
         if ((map_var(4) == 17) or (map_var(4) == 3) or (map_var(4) == 2)) then begin
             party_hit_points := 90;
@@ -2354,15 +2354,15 @@ begin
         end
     end
     if (map_var(1) == 3) then begin
-        party_fighter := create_object_sid(16778053, 16491, 0, -1);
-        metarule3(107, party_fighter, obj_art_fid(party_member_obj(16777814)), 0);
+        party_fighter := create_object(16778053, 16491, 0);
+        art_change_fid_num(party_fighter, obj_art_fid(party_member_obj(16777814)));
         set_obj_visibility(party_member_obj(16777814), 1);
         party_hit_points := 20;
         party_avg_damage := 1;
         party_difficulty := 1;
     end
     if (map_var(1) == 4) then begin
-        party_fighter := create_object_sid(16778044, 16491, 0, -1);
+        party_fighter := create_object(16778044, 16491, 0);
         set_obj_visibility(Vodka_obj, 1);
         party_hit_points := 100;
         party_avg_damage := 10;
@@ -2380,41 +2380,40 @@ procedure floats_when_party_fight
 begin
     probability := random(0, 19);
     if ((probability == 2) or (probability == 3)) then begin
-        float_msg(obyv4, message_str(1529, random(310, 324)), 8);
+        float_msg(obyv4, mstr(random(310, 324)), FLOAT_MSG_YELLOW);
     end
-    if ((probability == 4) or (probability == 5) and (global_var(849) != 2)) then begin
-        float_msg(obyv5, message_str(1529, random(310, 324)), 8);
+    if ((probability == 4) or (probability == 5) and (global_var(GVAR_C_RING_POINTER) != 2)) then begin
+        float_msg(obyv5, mstr(random(310, 324)), FLOAT_MSG_YELLOW);
     end
     if ((probability == 15) or (probability == 9)) then begin
-        float_msg(obyv6, message_str(1529, random(310, 324)), 8);
+        float_msg(obyv6, mstr(random(310, 324)), FLOAT_MSG_YELLOW);
     end
-    if ((global_var(849) == 1) or (global_var(849) == 2)) then begin
+    if ((global_var(GVAR_C_RING_POINTER) == 1) or (global_var(GVAR_C_RING_POINTER) == 2)) then begin
         if ((probability == 6) or (probability == 1)) then begin
-            float_msg(obyv1, message_str(1529, random(310, 324)), 8);
+            float_msg(obyv1, mstr(random(310, 324)), FLOAT_MSG_YELLOW);
         end
         if ((probability == 7) or (probability == 11)) then begin
-            float_msg(obyv2, message_str(1529, random(310, 324)), 8);
+            float_msg(obyv2, mstr(random(310, 324)), FLOAT_MSG_YELLOW);
         end
         if ((probability == 8) or (probability == 12)) then begin
-            float_msg(obyv8, message_str(1529, random(310, 324)), 8);
+            float_msg(obyv8, mstr(random(310, 324)), FLOAT_MSG_YELLOW);
         end
     end
     else begin
         if (probability == 18) then begin
-            float_msg(obyv1, message_str(1529, random(310, 320)), 8);
+            float_msg(obyv1, mstr(random(310, 320)), FLOAT_MSG_YELLOW);
         end
         if (probability == 17) then begin
-            float_msg(str1, message_str(1529, random(310, 324)), 8);
+            float_msg(str1, mstr(random(310, 324)), FLOAT_MSG_YELLOW);
         end
         if (probability == 10) then begin
-            float_msg(str2, message_str(1529, random(310, 324)), 8);
+            float_msg(str2, mstr(random(310, 324)), FLOAT_MSG_YELLOW);
         end
         if (probability == 11) then begin
-            float_msg(nes1, message_str(1529, random(310, 324)), 8);
+            float_msg(nes1, mstr(random(310, 324)), FLOAT_MSG_YELLOW);
         end
         if (probability == 12) then begin
-            float_msg(nes2, message_str(1529, random(310, 324)), 8);
+            float_msg(nes2, mstr(random(310, 324)), FLOAT_MSG_YELLOW);
         end
     end
 end
-
