diff --git a/Mods/MegaMod/Original/EPALENNY.ssl b/Mods/MegaMod/ReDefine/EPALENNY.ssl
index 3e34882..94ad193 100644
--- a/Mods/MegaMod/Original/EPALENNY.ssl
+++ b/Mods/MegaMod/ReDefine/EPALENNY.ssl
@@ -315,51 +315,51 @@ end
 
 procedure critter_p_proc
 begin
-    if ((local_var(5) == 2) or (local_var(6) == 1) and obj_can_see_obj(self_obj, dude_obj) and (has_trait(0, dude_obj, 39) == 0)) then begin
+    if ((local_var(5) == 2) or (local_var(6) == 1) and obj_can_see_obj(self_obj, dude_obj) and (has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality) == 0)) then begin
         set_local_var(5, 1);
-        attack_complex(dude_obj, 0, 1, 0, 0, 30000, 0, 0);
+        attack(dude_obj);
     end
     else begin
         if (party_member_obj(16777801) != 0) then begin
             debug_msg("Lenny_In_Party == " + (party_member_obj(16777801) != 0) + ". local_var(LVAR_never_again) == " + local_var(14));
-            if ((global_var(0) < -100) and (has_trait(0, dude_obj, 39) == 0)) then begin
+            if ((global_var(GVAR_PLAYER_REPUTATION) < -100) and (has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality) == 0)) then begin
                 call Node070();
                 debug_msg("LENNY: Bad Karma");
             end
             else begin
-                if ((global_var(1) >= 2) and (has_trait(0, dude_obj, 39) == 0)) then begin
+                if ((global_var(GVAR_CHILDKILLER_REPUTATION) >= 2) and (has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality) == 0)) then begin
                     call Node071();
                     debug_msg("LENNY: Childkiller");
                 end
                 else begin
-                    if ((global_var(11) == 1) and (has_trait(0, dude_obj, 39) == 0)) then begin
+                    if ((global_var(GVAR_REPUTATION_SLAVER) == 1) and (has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality) == 0)) then begin
                         call Node073();
                         debug_msg("LENNY: Slaver");
                     end
                     else begin
-                        if ((global_var(82) == 8) or (global_var(395) > 0) or (global_var(583) == 1) and (has_trait(0, dude_obj, 39) == 0)) then begin
+                        if ((global_var(GVAR_VAULT_GECKO_PLANT) == 8) or (global_var(GVAR_GECKO_MELTDOWN) > 0) or (global_var(GVAR_PLANT_SCHEDULED_FOR_CHANGE) == 1) and (has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality) == 0)) then begin
                             call Node074();
                             debug_msg("LENNY: Destroyed Plant");
                         end
                         else begin
-                            if ((get_critter_stat(dude_obj, 3) <= 1) and (has_trait(0, dude_obj, 39) == 0)) then begin
+                            if ((dude_charisma <= 1) and (has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality) == 0)) then begin
                                 call Node075();
                                 debug_msg("LENNY: Player Ugly");
                             end
                             else begin
-                                if ((metarule(46, 0) == 5) and (global_var(238) == 1) and (has_trait(0, dude_obj, 39) == 0)) then begin
+                                if ((cur_town == 5) and (global_var(GVAR_ENEMY_GECKO) == 1) and (has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality) == 0)) then begin
                                     call Node076();
                                     debug_msg("LENNY: Causing trouble in Gecko");
                                 end
                                 else begin
                                     if ((local_var(10) != 0) == 0) then begin
-                                        if (((local_var(10) != 0) == 0) and ((global_var(398) != 0) == 0)) then begin
+                                        if (((local_var(10) != 0) == 0) and ((global_var(GVAR_PARTY_NO_FOLLOW) != 0) == 0)) then begin
                                             if (local_var(11) == 0) then begin
                                                 set_local_var(11, 6);
                                             end
                                             if (tile_distance_objs(self_obj, dude_obj) > (3 * local_var(11) / 2)) then begin
                                                 if (anim_busy(self_obj) == 0) then begin
-                                                    dest_tile := tile_num_in_direction(tile_num_in_direction(tile_num(dude_obj), rotation_to_tile(tile_num(dude_obj), tile_num(self_obj)), local_var(11)), random(0, 5), random(0, 2));
+                                                    dest_tile := tile_num_in_direction(tile_num_in_direction(dude_tile, rotation_to_tile(dude_tile, tile_num(self_obj)), local_var(11)), random(0, 5), random(0, 2));
                                                     if (tile_distance_objs(self_obj, dude_obj) > (3 * local_var(11) / 2 * 2)) then begin
                                                         animate_move_obj_to_tile(self_obj, dest_tile, 1);
                                                     end
@@ -368,7 +368,7 @@ begin
                                                     end
                                                 end
                                                 else begin
-                                                    if (tile_distance(tile_num(self_obj), tile_num(dude_obj)) < tile_distance(tile_num(self_obj), dest_tile)) then begin
+                                                    if (tile_distance(tile_num(self_obj), dude_tile) < tile_distance(tile_num(self_obj), dest_tile)) then begin
                                                         reg_anim_func(2, self_obj);
                                                     end
                                                 end
@@ -383,7 +383,7 @@ begin
             end
         end
         else begin
-            if ((metarule(46, 0) == 5) and (global_var(238) == 1)) then begin
+            if ((cur_town == 5) and (global_var(GVAR_ENEMY_GECKO) == 1)) then begin
                 call Node998();
             end
         end
@@ -400,7 +400,7 @@ end
 procedure push_p_proc
 begin
     k := 2300 + random(0, 7);
-    float_msg(self_obj, message_str(139, k), 8);
+    float_msg(self_obj, message_str(SCRIPT_GCLENNY, k), FLOAT_MSG_YELLOW);
 end
 
 procedure talk_p_proc
@@ -416,7 +416,7 @@ begin
     end
     if (local_var(2) == 0) then begin
         set_local_var(2, 1);
-        set_local_var(3, (get_critter_stat(dude_obj, 3) - get_critter_stat(self_obj, 3)) * 5);
+        set_local_var(3, (dude_charisma - self_charisma) * 5);
         debug_msg("Base Reaction == " + local_var(3));
     end
     Static_Reaction := 0;
@@ -428,14 +428,14 @@ begin
     else begin
         reaction_bonus_karma := -1 * (-1 * reaction_bonus_karma / 1000);
     end
-    if (global_var(51) >= 0) then begin
-        reaction_bonus_town_rep := global_var(51) / 2;
+    if (global_var(GVAR_TOWN_REP_GECKO) >= 0) then begin
+        reaction_bonus_town_rep := global_var(GVAR_TOWN_REP_GECKO) / 2;
     end
     else begin
-        reaction_bonus_town_rep := -1 * (-1 * global_var(51) / 2);
+        reaction_bonus_town_rep := -1 * (-1 * global_var(GVAR_TOWN_REP_GECKO) / 2);
     end
-    if (has_trait(2, dude_obj, 13)) then begin
-        if (get_critter_stat(dude_obj, 34) == get_critter_stat(self_obj, 34)) then begin
+    if (has_trait(TRAIT_TRAIT, dude_obj, TRAIT_sex_appeal)) then begin
+        if (dude_gender == self_gender) then begin
             Static_Reaction := Static_Reaction + -20;
         end
         else begin
@@ -447,58 +447,58 @@ begin
         debug_msg("Sex Appeal Bonus == 0");
     end
     if (Evil_Critter == 1) then begin
-        Static_Reaction := Static_Reaction - reaction_bonus_karma + (reaction_bonus_karma * has_trait(0, dude_obj, 39));
-        if ((reaction_bonus_karma < 0) and (has_trait(0, dude_obj, 39) != 0)) then begin
+        Static_Reaction := Static_Reaction - reaction_bonus_karma + (reaction_bonus_karma * has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality));
+        if ((reaction_bonus_karma < 0) and (has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality) != 0)) then begin
             Static_Reaction := Static_Reaction - reaction_bonus_karma;
         end
         debug_msg("Karma Reaction Bonus == " + Static_Reaction);
-        Static_Reaction := Static_Reaction - reaction_bonus_town_rep + (reaction_bonus_town_rep * has_trait(0, dude_obj, 39));
-        if ((reaction_bonus_town_rep < 0) and (has_trait(0, dude_obj, 39) != 0)) then begin
+        Static_Reaction := Static_Reaction - reaction_bonus_town_rep + (reaction_bonus_town_rep * has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality));
+        if ((reaction_bonus_town_rep < 0) and (has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality) != 0)) then begin
             Static_Reaction := Static_Reaction - reaction_bonus_town_rep;
         end
         debug_msg("Town Rep Bonus == " + Static_Reaction);
-        set_global_var(37, 0);
-        set_global_var(38, 0);
-        set_global_var(39, 0);
-        set_global_var(40, 0);
-        set_global_var(41, 0);
-        set_global_var(42, 0);
-        set_global_var(43, 0);
-        set_global_var(44, 0);
-        set_global_var(45, 0);
-        if (global_var(0) >= 1000) then begin
-            set_global_var(37, 1);
+        set_global_var(GVAR_KARMA_HOLY_WARRIOR, 0);
+        set_global_var(GVAR_KARMA_GUARDIAN_OF_THE_WASTES, 0);
+        set_global_var(GVAR_KARMA_SHIELD_OF_HOPE, 0);
+        set_global_var(GVAR_KARMA_DEFENDER, 0);
+        set_global_var(GVAR_KARMA_WANDERER, 0);
+        set_global_var(GVAR_KARMA_BETRAYER, 0);
+        set_global_var(GVAR_KARMA_SWORD_OF_DESPAIR, 0);
+        set_global_var(GVAR_KARMA_SCOURGE_OF_THE_WASTE, 0);
+        set_global_var(GVAR_KARMA_DEMON_SPAWN, 0);
+        if (global_var(GVAR_PLAYER_REPUTATION) >= 1000) then begin
+            set_global_var(GVAR_KARMA_HOLY_WARRIOR, 1);
         end
         else begin
-            if (global_var(0) >= 750) then begin
-                set_global_var(38, 1);
+            if (global_var(GVAR_PLAYER_REPUTATION) >= 750) then begin
+                set_global_var(GVAR_KARMA_GUARDIAN_OF_THE_WASTES, 1);
             end
             else begin
-                if (global_var(0) >= 500) then begin
-                    set_global_var(39, 1);
+                if (global_var(GVAR_PLAYER_REPUTATION) >= 500) then begin
+                    set_global_var(GVAR_KARMA_SHIELD_OF_HOPE, 1);
                 end
                 else begin
-                    if (global_var(0) >= 250) then begin
-                        set_global_var(40, 1);
+                    if (global_var(GVAR_PLAYER_REPUTATION) >= 250) then begin
+                        set_global_var(GVAR_KARMA_DEFENDER, 1);
                     end
                     else begin
-                        if (global_var(0) > -250) then begin
-                            set_global_var(41, 1);
+                        if (global_var(GVAR_PLAYER_REPUTATION) > -250) then begin
+                            set_global_var(GVAR_KARMA_WANDERER, 1);
                         end
                         else begin
-                            if (global_var(0) > -500) then begin
-                                set_global_var(42, 1);
+                            if (global_var(GVAR_PLAYER_REPUTATION) > -500) then begin
+                                set_global_var(GVAR_KARMA_BETRAYER, 1);
                             end
                             else begin
-                                if (global_var(0) > -750) then begin
-                                    set_global_var(43, 1);
+                                if (global_var(GVAR_PLAYER_REPUTATION) > -750) then begin
+                                    set_global_var(GVAR_KARMA_SWORD_OF_DESPAIR, 1);
                                 end
                                 else begin
-                                    if (global_var(0) > -1000) then begin
-                                        set_global_var(44, 1);
+                                    if (global_var(GVAR_PLAYER_REPUTATION) > -1000) then begin
+                                        set_global_var(GVAR_KARMA_SCOURGE_OF_THE_WASTE, 1);
                                     end
                                     else begin
-                                        set_global_var(45, 1);
+                                        set_global_var(GVAR_KARMA_DEMON_SPAWN, 1);
                                     end
                                 end
                             end
@@ -507,35 +507,35 @@ begin
                 end
             end
         end
-        if (global_var(37) == 1) then begin
-            Static_Reaction := Static_Reaction - 20 + (40 * has_trait(0, dude_obj, 39));
+        if (global_var(GVAR_KARMA_HOLY_WARRIOR) == 1) then begin
+            Static_Reaction := Static_Reaction - 20 + (40 * has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality));
         end
         else begin
-            if (global_var(38) == 1) then begin
-                Static_Reaction := Static_Reaction - 15 + (30 * has_trait(0, dude_obj, 39));
+            if (global_var(GVAR_KARMA_GUARDIAN_OF_THE_WASTES) == 1) then begin
+                Static_Reaction := Static_Reaction - 15 + (30 * has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality));
             end
             else begin
-                if (global_var(39) == 1) then begin
-                    Static_Reaction := Static_Reaction - 10 + (20 * has_trait(0, dude_obj, 39));
+                if (global_var(GVAR_KARMA_SHIELD_OF_HOPE) == 1) then begin
+                    Static_Reaction := Static_Reaction - 10 + (20 * has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality));
                 end
                 else begin
-                    if (global_var(40) == 1) then begin
-                        Static_Reaction := Static_Reaction - 5 + (10 * has_trait(0, dude_obj, 39));
+                    if (global_var(GVAR_KARMA_DEFENDER) == 1) then begin
+                        Static_Reaction := Static_Reaction - 5 + (10 * has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality));
                     end
                     else begin
-                        if (global_var(41) == 1) then begin
+                        if (global_var(GVAR_KARMA_WANDERER) == 1) then begin
                             Static_Reaction := Static_Reaction - 0;
                         end
                         else begin
-                            if (global_var(42) == 1) then begin
+                            if (global_var(GVAR_KARMA_BETRAYER) == 1) then begin
                                 Static_Reaction := Static_Reaction - -5;
                             end
                             else begin
-                                if (global_var(43) == 1) then begin
+                                if (global_var(GVAR_KARMA_SWORD_OF_DESPAIR) == 1) then begin
                                     Static_Reaction := Static_Reaction - -10;
                                 end
                                 else begin
-                                    if (global_var(44) == 1) then begin
+                                    if (global_var(GVAR_KARMA_SCOURGE_OF_THE_WASTE) == 1) then begin
                                         Static_Reaction := Static_Reaction - -15;
                                     end
                                     else begin
@@ -551,58 +551,58 @@ begin
         debug_msg("Bad Person Reaction Bonus == " + Static_Reaction);
     end
     else begin
-        Static_Reaction := Static_Reaction + reaction_bonus_karma - (reaction_bonus_karma * has_trait(0, dude_obj, 39));
-        if ((reaction_bonus_karma > 0) and (has_trait(0, dude_obj, 39) != 0)) then begin
+        Static_Reaction := Static_Reaction + reaction_bonus_karma - (reaction_bonus_karma * has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality));
+        if ((reaction_bonus_karma > 0) and (has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality) != 0)) then begin
             Static_Reaction := Static_Reaction + reaction_bonus_karma;
         end
         debug_msg("Karma Reaction Bonus == " + Static_Reaction);
-        Static_Reaction := Static_Reaction + reaction_bonus_town_rep - (reaction_bonus_town_rep * has_trait(0, dude_obj, 39));
-        if ((reaction_bonus_town_rep > 0) and (has_trait(0, dude_obj, 39) != 0)) then begin
+        Static_Reaction := Static_Reaction + reaction_bonus_town_rep - (reaction_bonus_town_rep * has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality));
+        if ((reaction_bonus_town_rep > 0) and (has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality) != 0)) then begin
             Static_Reaction := Static_Reaction + reaction_bonus_town_rep;
         end
         debug_msg("Town Rep Bonus == " + Static_Reaction);
-        set_global_var(37, 0);
-        set_global_var(38, 0);
-        set_global_var(39, 0);
-        set_global_var(40, 0);
-        set_global_var(41, 0);
-        set_global_var(42, 0);
-        set_global_var(43, 0);
-        set_global_var(44, 0);
-        set_global_var(45, 0);
-        if (global_var(0) >= 1000) then begin
-            set_global_var(37, 1);
+        set_global_var(GVAR_KARMA_HOLY_WARRIOR, 0);
+        set_global_var(GVAR_KARMA_GUARDIAN_OF_THE_WASTES, 0);
+        set_global_var(GVAR_KARMA_SHIELD_OF_HOPE, 0);
+        set_global_var(GVAR_KARMA_DEFENDER, 0);
+        set_global_var(GVAR_KARMA_WANDERER, 0);
+        set_global_var(GVAR_KARMA_BETRAYER, 0);
+        set_global_var(GVAR_KARMA_SWORD_OF_DESPAIR, 0);
+        set_global_var(GVAR_KARMA_SCOURGE_OF_THE_WASTE, 0);
+        set_global_var(GVAR_KARMA_DEMON_SPAWN, 0);
+        if (global_var(GVAR_PLAYER_REPUTATION) >= 1000) then begin
+            set_global_var(GVAR_KARMA_HOLY_WARRIOR, 1);
         end
         else begin
-            if (global_var(0) >= 750) then begin
-                set_global_var(38, 1);
+            if (global_var(GVAR_PLAYER_REPUTATION) >= 750) then begin
+                set_global_var(GVAR_KARMA_GUARDIAN_OF_THE_WASTES, 1);
             end
             else begin
-                if (global_var(0) >= 500) then begin
-                    set_global_var(39, 1);
+                if (global_var(GVAR_PLAYER_REPUTATION) >= 500) then begin
+                    set_global_var(GVAR_KARMA_SHIELD_OF_HOPE, 1);
                 end
                 else begin
-                    if (global_var(0) >= 250) then begin
-                        set_global_var(40, 1);
+                    if (global_var(GVAR_PLAYER_REPUTATION) >= 250) then begin
+                        set_global_var(GVAR_KARMA_DEFENDER, 1);
                     end
                     else begin
-                        if (global_var(0) > -250) then begin
-                            set_global_var(41, 1);
+                        if (global_var(GVAR_PLAYER_REPUTATION) > -250) then begin
+                            set_global_var(GVAR_KARMA_WANDERER, 1);
                         end
                         else begin
-                            if (global_var(0) > -500) then begin
-                                set_global_var(42, 1);
+                            if (global_var(GVAR_PLAYER_REPUTATION) > -500) then begin
+                                set_global_var(GVAR_KARMA_BETRAYER, 1);
                             end
                             else begin
-                                if (global_var(0) > -750) then begin
-                                    set_global_var(43, 1);
+                                if (global_var(GVAR_PLAYER_REPUTATION) > -750) then begin
+                                    set_global_var(GVAR_KARMA_SWORD_OF_DESPAIR, 1);
                                 end
                                 else begin
-                                    if (global_var(0) > -1000) then begin
-                                        set_global_var(44, 1);
+                                    if (global_var(GVAR_PLAYER_REPUTATION) > -1000) then begin
+                                        set_global_var(GVAR_KARMA_SCOURGE_OF_THE_WASTE, 1);
                                     end
                                     else begin
-                                        set_global_var(45, 1);
+                                        set_global_var(GVAR_KARMA_DEMON_SPAWN, 1);
                                     end
                                 end
                             end
@@ -611,39 +611,39 @@ begin
                 end
             end
         end
-        if (global_var(37) == 1) then begin
+        if (global_var(GVAR_KARMA_HOLY_WARRIOR) == 1) then begin
             Static_Reaction := Static_Reaction + 20;
         end
         else begin
-            if (global_var(38) == 1) then begin
+            if (global_var(GVAR_KARMA_GUARDIAN_OF_THE_WASTES) == 1) then begin
                 Static_Reaction := Static_Reaction + 15;
             end
             else begin
-                if (global_var(39) == 1) then begin
+                if (global_var(GVAR_KARMA_SHIELD_OF_HOPE) == 1) then begin
                     Static_Reaction := Static_Reaction + 10;
                 end
                 else begin
-                    if (global_var(40) == 1) then begin
+                    if (global_var(GVAR_KARMA_DEFENDER) == 1) then begin
                         Static_Reaction := Static_Reaction + 5;
                     end
                     else begin
-                        if (global_var(41) == 1) then begin
+                        if (global_var(GVAR_KARMA_WANDERER) == 1) then begin
                             Static_Reaction := Static_Reaction + 0;
                         end
                         else begin
-                            if (global_var(42) == 1) then begin
-                                Static_Reaction := Static_Reaction + -5 + (10 * has_trait(0, dude_obj, 39));
+                            if (global_var(GVAR_KARMA_BETRAYER) == 1) then begin
+                                Static_Reaction := Static_Reaction + -5 + (10 * has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality));
                             end
                             else begin
-                                if (global_var(43) == 1) then begin
-                                    Static_Reaction := Static_Reaction + -10 + (20 * has_trait(0, dude_obj, 39));
+                                if (global_var(GVAR_KARMA_SWORD_OF_DESPAIR) == 1) then begin
+                                    Static_Reaction := Static_Reaction + -10 + (20 * has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality));
                                 end
                                 else begin
-                                    if (global_var(44) == 1) then begin
-                                        Static_Reaction := Static_Reaction + -15 + (30 * has_trait(0, dude_obj, 39));
+                                    if (global_var(GVAR_KARMA_SCOURGE_OF_THE_WASTE) == 1) then begin
+                                        Static_Reaction := Static_Reaction + -15 + (30 * has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality));
                                     end
                                     else begin
-                                        Static_Reaction := Static_Reaction + -20 + (40 * has_trait(0, dude_obj, 39));
+                                        Static_Reaction := Static_Reaction + -20 + (40 * has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality));
                                     end
                                 end
                             end
@@ -655,29 +655,29 @@ begin
         debug_msg("Good Person Reaction Bonus == " + Static_Reaction);
     end
     if (Slavery_Tolerant == 0) then begin
-        if (global_var(11) == 1) then begin
-            Static_Reaction := Static_Reaction + (2 * -25) + (2 * -25 * has_trait(0, dude_obj, 39));
+        if (global_var(GVAR_REPUTATION_SLAVER) == 1) then begin
+            Static_Reaction := Static_Reaction + (2 * -25) + (2 * -25 * has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality));
         end
     end
     else begin
         if (Slavery_Tolerant == 1) then begin
-            if (global_var(11) == 1) then begin
-                Static_Reaction := Static_Reaction + -25 + (25 * has_trait(0, dude_obj, 39));
+            if (global_var(GVAR_REPUTATION_SLAVER) == 1) then begin
+                Static_Reaction := Static_Reaction + -25 + (25 * has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality));
             end
         end
         else begin
             if (Slavery_Tolerant == 3) then begin
-                if (global_var(11) == 1) then begin
+                if (global_var(GVAR_REPUTATION_SLAVER) == 1) then begin
                     Static_Reaction := Static_Reaction - -25;
                 end
             end
         end
     end
     debug_msg("Slaver + Aligned Reaction == " + Static_Reaction);
-    Static_Reaction := Static_Reaction + (10 * has_trait(0, dude_obj, 10));
+    Static_Reaction := Static_Reaction + (10 * has_trait(TRAIT_PERK, dude_obj, PERK_presence));
     debug_msg("Presence Reaction == " + Static_Reaction);
-    if (global_var(1) >= 2) then begin
-        Static_Reaction := Static_Reaction + -30 + (30 * has_trait(0, dude_obj, 39));
+    if (global_var(GVAR_CHILDKILLER_REPUTATION) >= 2) then begin
+        Static_Reaction := Static_Reaction + -30 + (30 * has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality));
     end
     debug_msg("Childkiller Reaction == " + Static_Reaction);
     set_local_var(0, local_var(3) + Static_Reaction);
@@ -688,7 +688,7 @@ begin
     end
     else begin
         if (local_var(14) > 0) then begin
-            float_msg(self_obj, message_str(139, 3005), 8);
+            float_msg(self_obj, message_str(SCRIPT_GCLENNY, 3005), FLOAT_MSG_YELLOW);
         end
         else begin
             if ((party_member_obj(16777801) != 0) or (local_var(10) != 0)) then begin
@@ -699,7 +699,7 @@ begin
                 end_dialogue;
             end
             else begin
-                if (get_critter_stat(dude_obj, 4) <= 3) then begin
+                if (dude_is_stupid) then begin
                     call Node003();
                 end
                 else begin
@@ -765,54 +765,54 @@ end
 procedure destroy_p_proc
 begin
     if (source_obj == dude_obj) then begin
-        set_global_var(5, global_var(5) + 1);
-        if (metarule(51, self_obj) == 2) then begin
+        set_global_var(GVAR_GOOD_MONSTER, global_var(GVAR_GOOD_MONSTER) + 1);
+        if (critter_kill_type(self_obj) == 2) then begin
             if (source_obj == dude_obj) then begin
-                set_global_var(2, 0);
-                set_global_var(1, global_var(1) + 1);
-                set_global_var(0, global_var(0) - -15);
-                set_global_var(37, 0);
-                set_global_var(38, 0);
-                set_global_var(39, 0);
-                set_global_var(40, 0);
-                set_global_var(41, 0);
-                set_global_var(42, 0);
-                set_global_var(43, 0);
-                set_global_var(44, 0);
-                set_global_var(45, 0);
-                if (global_var(0) >= 1000) then begin
-                    set_global_var(37, 1);
+                set_global_var(GVAR_CHAMPION_REPUTATION, 0);
+                set_global_var(GVAR_CHILDKILLER_REPUTATION, global_var(GVAR_CHILDKILLER_REPUTATION) + 1);
+                set_global_var(GVAR_PLAYER_REPUTATION, global_var(GVAR_PLAYER_REPUTATION) - -15);
+                set_global_var(GVAR_KARMA_HOLY_WARRIOR, 0);
+                set_global_var(GVAR_KARMA_GUARDIAN_OF_THE_WASTES, 0);
+                set_global_var(GVAR_KARMA_SHIELD_OF_HOPE, 0);
+                set_global_var(GVAR_KARMA_DEFENDER, 0);
+                set_global_var(GVAR_KARMA_WANDERER, 0);
+                set_global_var(GVAR_KARMA_BETRAYER, 0);
+                set_global_var(GVAR_KARMA_SWORD_OF_DESPAIR, 0);
+                set_global_var(GVAR_KARMA_SCOURGE_OF_THE_WASTE, 0);
+                set_global_var(GVAR_KARMA_DEMON_SPAWN, 0);
+                if (global_var(GVAR_PLAYER_REPUTATION) >= 1000) then begin
+                    set_global_var(GVAR_KARMA_HOLY_WARRIOR, 1);
                 end
                 else begin
-                    if (global_var(0) >= 750) then begin
-                        set_global_var(38, 1);
+                    if (global_var(GVAR_PLAYER_REPUTATION) >= 750) then begin
+                        set_global_var(GVAR_KARMA_GUARDIAN_OF_THE_WASTES, 1);
                     end
                     else begin
-                        if (global_var(0) >= 500) then begin
-                            set_global_var(39, 1);
+                        if (global_var(GVAR_PLAYER_REPUTATION) >= 500) then begin
+                            set_global_var(GVAR_KARMA_SHIELD_OF_HOPE, 1);
                         end
                         else begin
-                            if (global_var(0) >= 250) then begin
-                                set_global_var(40, 1);
+                            if (global_var(GVAR_PLAYER_REPUTATION) >= 250) then begin
+                                set_global_var(GVAR_KARMA_DEFENDER, 1);
                             end
                             else begin
-                                if (global_var(0) > -250) then begin
-                                    set_global_var(41, 1);
+                                if (global_var(GVAR_PLAYER_REPUTATION) > -250) then begin
+                                    set_global_var(GVAR_KARMA_WANDERER, 1);
                                 end
                                 else begin
-                                    if (global_var(0) > -500) then begin
-                                        set_global_var(42, 1);
+                                    if (global_var(GVAR_PLAYER_REPUTATION) > -500) then begin
+                                        set_global_var(GVAR_KARMA_BETRAYER, 1);
                                     end
                                     else begin
-                                        if (global_var(0) > -750) then begin
-                                            set_global_var(43, 1);
+                                        if (global_var(GVAR_PLAYER_REPUTATION) > -750) then begin
+                                            set_global_var(GVAR_KARMA_SWORD_OF_DESPAIR, 1);
                                         end
                                         else begin
-                                            if (global_var(0) > -1000) then begin
-                                                set_global_var(44, 1);
+                                            if (global_var(GVAR_PLAYER_REPUTATION) > -1000) then begin
+                                                set_global_var(GVAR_KARMA_SCOURGE_OF_THE_WASTE, 1);
                                             end
                                             else begin
-                                                set_global_var(45, 1);
+                                                set_global_var(GVAR_KARMA_DEMON_SPAWN, 1);
                                             end
                                         end
                                     end
@@ -823,58 +823,58 @@ begin
                 end
             end
         end
-        if (((global_var(4) + global_var(5)) >= 25) and ((global_var(4) > (3 * global_var(5))) or (global_var(2) == 1)) and (global_var(1) == 0)) then begin
-            set_global_var(2, 1);
-            set_global_var(3, 0);
+        if (((global_var(GVAR_BAD_MONSTER) + global_var(GVAR_GOOD_MONSTER)) >= 25) and ((global_var(4) > (3 * global_var(GVAR_GOOD_MONSTER))) or (global_var(GVAR_CHAMPION_REPUTATION) == 1)) and (global_var(GVAR_CHILDKILLER_REPUTATION) == 0)) then begin
+            set_global_var(GVAR_CHAMPION_REPUTATION, 1);
+            set_global_var(GVAR_BERSERKER_REPUTATION, 0);
         end
-        if (((global_var(4) + global_var(5)) >= 25) and ((global_var(5) > (2 * global_var(4))) or (global_var(3) == 1))) then begin
-            set_global_var(3, 1);
-            set_global_var(2, 0);
+        if (((global_var(GVAR_BAD_MONSTER) + global_var(GVAR_GOOD_MONSTER)) >= 25) and ((global_var(GVAR_GOOD_MONSTER) > (2 * global_var(GVAR_BAD_MONSTER))) or (global_var(GVAR_BERSERKER_REPUTATION) == 1))) then begin
+            set_global_var(GVAR_BERSERKER_REPUTATION, 1);
+            set_global_var(GVAR_CHAMPION_REPUTATION, 0);
         end
-        set_global_var(0, global_var(0) + -10);
+        set_global_var(GVAR_PLAYER_REPUTATION, global_var(GVAR_PLAYER_REPUTATION) + -10);
         debug_msg("Player gains " + -10 + " Karma Points.");
-        set_global_var(37, 0);
-        set_global_var(38, 0);
-        set_global_var(39, 0);
-        set_global_var(40, 0);
-        set_global_var(41, 0);
-        set_global_var(42, 0);
-        set_global_var(43, 0);
-        set_global_var(44, 0);
-        set_global_var(45, 0);
-        if (global_var(0) >= 1000) then begin
-            set_global_var(37, 1);
+        set_global_var(GVAR_KARMA_HOLY_WARRIOR, 0);
+        set_global_var(GVAR_KARMA_GUARDIAN_OF_THE_WASTES, 0);
+        set_global_var(GVAR_KARMA_SHIELD_OF_HOPE, 0);
+        set_global_var(GVAR_KARMA_DEFENDER, 0);
+        set_global_var(GVAR_KARMA_WANDERER, 0);
+        set_global_var(GVAR_KARMA_BETRAYER, 0);
+        set_global_var(GVAR_KARMA_SWORD_OF_DESPAIR, 0);
+        set_global_var(GVAR_KARMA_SCOURGE_OF_THE_WASTE, 0);
+        set_global_var(GVAR_KARMA_DEMON_SPAWN, 0);
+        if (global_var(GVAR_PLAYER_REPUTATION) >= 1000) then begin
+            set_global_var(GVAR_KARMA_HOLY_WARRIOR, 1);
         end
         else begin
-            if (global_var(0) >= 750) then begin
-                set_global_var(38, 1);
+            if (global_var(GVAR_PLAYER_REPUTATION) >= 750) then begin
+                set_global_var(GVAR_KARMA_GUARDIAN_OF_THE_WASTES, 1);
             end
             else begin
-                if (global_var(0) >= 500) then begin
-                    set_global_var(39, 1);
+                if (global_var(GVAR_PLAYER_REPUTATION) >= 500) then begin
+                    set_global_var(GVAR_KARMA_SHIELD_OF_HOPE, 1);
                 end
                 else begin
-                    if (global_var(0) >= 250) then begin
-                        set_global_var(40, 1);
+                    if (global_var(GVAR_PLAYER_REPUTATION) >= 250) then begin
+                        set_global_var(GVAR_KARMA_DEFENDER, 1);
                     end
                     else begin
-                        if (global_var(0) > -250) then begin
-                            set_global_var(41, 1);
+                        if (global_var(GVAR_PLAYER_REPUTATION) > -250) then begin
+                            set_global_var(GVAR_KARMA_WANDERER, 1);
                         end
                         else begin
-                            if (global_var(0) > -500) then begin
-                                set_global_var(42, 1);
+                            if (global_var(GVAR_PLAYER_REPUTATION) > -500) then begin
+                                set_global_var(GVAR_KARMA_BETRAYER, 1);
                             end
                             else begin
-                                if (global_var(0) > -750) then begin
-                                    set_global_var(43, 1);
+                                if (global_var(GVAR_PLAYER_REPUTATION) > -750) then begin
+                                    set_global_var(GVAR_KARMA_SWORD_OF_DESPAIR, 1);
                                 end
                                 else begin
-                                    if (global_var(0) > -1000) then begin
-                                        set_global_var(44, 1);
+                                    if (global_var(GVAR_PLAYER_REPUTATION) > -1000) then begin
+                                        set_global_var(GVAR_KARMA_SCOURGE_OF_THE_WASTE, 1);
                                     end
                                     else begin
-                                        set_global_var(45, 1);
+                                        set_global_var(GVAR_KARMA_DEMON_SPAWN, 1);
                                     end
                                 end
                             end
@@ -891,17 +891,17 @@ begin
     script_overrides;
     if (local_var(15) == 0) then begin
         set_local_var(15, 1);
-        display_msg(message_str(139, 100));
+        display_msg(message_str(SCRIPT_GCLENNY, 100));
     end
     else begin
-        display_msg(message_str(139, 100));
+        display_msg(message_str(SCRIPT_GCLENNY, 100));
     end
 end
 
 procedure description_p_proc
 begin
     script_overrides;
-    display_msg(message_str(139, 100));
+    display_msg(message_str(SCRIPT_GCLENNY, 100));
 end
 
 procedure use_skill_on_p_proc
@@ -912,43 +912,43 @@ procedure damage_p_proc
 begin
     if (source_obj == dude_obj) then begin
         if (party_member_obj(obj_pid(self_obj)) != 0) then begin
-            debug_msg("abandon party: " + obj_name(self_obj));
+            debug_msg("abandon party: " + self_name);
             party_remove(self_obj);
         end
         if ((obj_pid(self_obj) == 16777380) or (obj_pid(self_obj) == 16777379)) then begin
             debug_msg("start: set_dude_was_married");
-            if ((global_var(6) != 0) and ((global_var(449) != 0) == 0)) then begin
-                debug_msg("   GVAR_PLAYER_WAS_MARRIED before == " + global_var(449));
-                set_global_var(449, global_var(6));
-                debug_msg("   GVAR_PLAYER_WAS_MARRIED after == " + global_var(449));
-                set_global_var(6, 0);
+            if ((global_var(GVAR_PLAYER_MARRIED) != 0) and ((global_var(GVAR_PLAYER_WAS_MARRIED) != 0) == 0)) then begin
+                debug_msg("   GVAR_PLAYER_WAS_MARRIED before == " + global_var(GVAR_PLAYER_WAS_MARRIED));
+                set_global_var(GVAR_PLAYER_WAS_MARRIED, global_var(GVAR_PLAYER_MARRIED));
+                debug_msg("   GVAR_PLAYER_WAS_MARRIED after == " + global_var(GVAR_PLAYER_WAS_MARRIED));
+                set_global_var(GVAR_PLAYER_MARRIED, 0);
             end
             debug_msg("finished: set_dude_was_married");
         end
-        if ((local_var(12) != -1) and (has_trait(1, self_obj, 6) == 0)) then begin
-            critter_add_trait(self_obj, 1, 6, local_var(12));
+        if ((local_var(12) != -1) and (has_trait(TRAIT_OBJECT, self_obj, OBJECT_TEAM_NUM) == 0)) then begin
+            critter_add_trait(self_obj, TRAIT_OBJECT, OBJECT_TEAM_NUM, local_var(12));
             set_local_var(12, -1);
         end
-        debug_msg("" + obj_name(self_obj) + " has abandoned the party");
+        debug_msg("" + self_name + " has abandoned the party");
         set_local_var(5, 2);
-        if (cur_map_index == 31) then begin
-            set_global_var(238, 1);
+        if (CUR_MAP_GECKSETL) then begin
+            set_global_var(GVAR_ENEMY_GECKO, 1);
         end
-        if (cur_map_index == 33) then begin
-            set_global_var(238, 1);
+        if (CUR_MAP_GECKJUNK) then begin
+            set_global_var(GVAR_ENEMY_GECKO, 1);
         end
-        if (cur_map_index == 32) then begin
-            set_global_var(238, 1);
+        if (CUR_MAP_GECKPWPL) then begin
+            set_global_var(GVAR_ENEMY_GECKO, 1);
         end
-        if (cur_map_index == 34) then begin
-            set_global_var(238, 1);
+        if (CUR_MAP_GECKTUNL) then begin
+            set_global_var(GVAR_ENEMY_GECKO, 1);
         end
     end
 end
 
 procedure map_enter_p_proc
 begin
-    if ((cur_map_index == 19) or (cur_map_index == 37) or (cur_map_index == 38)) then begin
+    if ((CUR_MAP_MODINN) or (CUR_MAP_V15ENT) or (CUR_MAP_V15ENTB)) then begin
         if ((elevation(self_obj) != elevation(dude_obj)) and (local_var(10) != 0)) then begin
             move_to(self_obj, tile_num(self_obj), elevation(dude_obj));
         end
@@ -957,7 +957,7 @@ begin
     end
     else begin
         Only_Once := 0;
-        critter_add_trait(self_obj, 1, 6, 49);
+        critter_add_trait(self_obj, TRAIT_OBJECT, OBJECT_TEAM_NUM, 49);
     end
 end
 
@@ -967,7 +967,7 @@ begin
         if (anim_busy(self_obj) == 0) then begin
             if (party_member_obj(obj_pid(self_obj)) != 0) then begin
                 if (metarule3(109, self_obj, 0, 0) == 1) then begin
-                    if ((100 * get_critter_stat(self_obj, 35) / get_critter_stat(self_obj, 7)) <= 60) then begin
+                    if ((100 * get_critter_stat(self_obj, STAT_current_hp) / get_critter_stat(self_obj, STAT_max_hp)) <= 60) then begin
                         global_temp := 1;
                         if (obj_is_carrying_obj_pid(self_obj, 144)) then begin
                             if ((global_temp == 0) and (combat_is_initialized == 0)) then begin
@@ -979,7 +979,7 @@ begin
                             end
                             PartyHealingItem := obj_carrying_pid_obj(self_obj, 144);
                             use_obj_on_obj(PartyHealingItem, self_obj);
-                            debug_msg(obj_name(self_obj) + " used super stimpak.");
+                            debug_msg(self_name + " used super stimpak.");
                         end
                         else begin
                             if (obj_is_carrying_obj_pid(self_obj, 40)) then begin
@@ -991,7 +991,7 @@ begin
                                     gfade_in(600);
                                 end
                                 use_obj_on_obj(obj_carrying_pid_obj(self_obj, 40), self_obj);
-                                debug_msg(obj_name(self_obj) + " used stimpak.");
+                                debug_msg(self_name + " used stimpak.");
                             end
                             else begin
                                 if (obj_is_carrying_obj_pid(self_obj, 273)) then begin
@@ -1003,7 +1003,7 @@ begin
                                         gfade_in(600);
                                     end
                                     use_obj_on_obj(obj_carrying_pid_obj(self_obj, 273), self_obj);
-                                    debug_msg(obj_name(self_obj) + " used healing powder.");
+                                    debug_msg(self_name + " used healing powder.");
                                 end
                                 else begin
                                     if (obj_is_carrying_obj_pid(self_obj, 91)) then begin
@@ -1015,7 +1015,7 @@ begin
                                             gfade_in(600);
                                         end
                                         use_obj_on_obj(obj_carrying_pid_obj(self_obj, 91), self_obj);
-                                        debug_msg(obj_name(self_obj) + " used doctor's bag kit.");
+                                        debug_msg(self_name + " used doctor's bag kit.");
                                     end
                                     else begin
                                         if (obj_is_carrying_obj_pid(self_obj, 47)) then begin
@@ -1027,7 +1027,7 @@ begin
                                                 gfade_in(600);
                                             end
                                             use_obj_on_obj(obj_carrying_pid_obj(self_obj, 47), self_obj);
-                                            debug_msg(obj_name(self_obj) + " used First Aid kit.");
+                                            debug_msg(self_name + " used First Aid kit.");
                                         end
                                     end
                                 end
@@ -1037,7 +1037,7 @@ begin
                 end
                 else begin
                     if (metarule3(109, self_obj, 0, 0) == 2) then begin
-                        if ((100 * get_critter_stat(self_obj, 35) / get_critter_stat(self_obj, 7)) <= 30) then begin
+                        if ((100 * get_critter_stat(self_obj, STAT_current_hp) / get_critter_stat(self_obj, STAT_max_hp)) <= 30) then begin
                             global_temp := 1;
                             if (obj_is_carrying_obj_pid(self_obj, 144)) then begin
                                 if ((global_temp == 0) and (combat_is_initialized == 0)) then begin
@@ -1049,7 +1049,7 @@ begin
                                 end
                                 PartyHealingItem := obj_carrying_pid_obj(self_obj, 144);
                                 use_obj_on_obj(PartyHealingItem, self_obj);
-                                debug_msg(obj_name(self_obj) + " used super stimpak.");
+                                debug_msg(self_name + " used super stimpak.");
                             end
                             else begin
                                 if (obj_is_carrying_obj_pid(self_obj, 40)) then begin
@@ -1061,7 +1061,7 @@ begin
                                         gfade_in(600);
                                     end
                                     use_obj_on_obj(obj_carrying_pid_obj(self_obj, 40), self_obj);
-                                    debug_msg(obj_name(self_obj) + " used stimpak.");
+                                    debug_msg(self_name + " used stimpak.");
                                 end
                                 else begin
                                     if (obj_is_carrying_obj_pid(self_obj, 273)) then begin
@@ -1073,7 +1073,7 @@ begin
                                             gfade_in(600);
                                         end
                                         use_obj_on_obj(obj_carrying_pid_obj(self_obj, 273), self_obj);
-                                        debug_msg(obj_name(self_obj) + " used healing powder.");
+                                        debug_msg(self_name + " used healing powder.");
                                     end
                                     else begin
                                         if (obj_is_carrying_obj_pid(self_obj, 91)) then begin
@@ -1085,7 +1085,7 @@ begin
                                                 gfade_in(600);
                                             end
                                             use_obj_on_obj(obj_carrying_pid_obj(self_obj, 91), self_obj);
-                                            debug_msg(obj_name(self_obj) + " used doctor's bag kit.");
+                                            debug_msg(self_name + " used doctor's bag kit.");
                                         end
                                         else begin
                                             if (obj_is_carrying_obj_pid(self_obj, 47)) then begin
@@ -1097,7 +1097,7 @@ begin
                                                     gfade_in(600);
                                                 end
                                                 use_obj_on_obj(obj_carrying_pid_obj(self_obj, 47), self_obj);
-                                                debug_msg(obj_name(self_obj) + " used First Aid kit.");
+                                                debug_msg(self_name + " used First Aid kit.");
                                             end
                                         end
                                     end
@@ -1107,7 +1107,7 @@ begin
                     end
                     else begin
                         if (metarule3(109, self_obj, 0, 0) == 3) then begin
-                            if ((100 * get_critter_stat(self_obj, 35) / get_critter_stat(self_obj, 7)) <= 50) then begin
+                            if ((100 * get_critter_stat(self_obj, STAT_current_hp) / get_critter_stat(self_obj, STAT_max_hp)) <= 50) then begin
                                 global_temp := 1;
                                 if (obj_is_carrying_obj_pid(self_obj, 144)) then begin
                                     if ((global_temp == 0) and (combat_is_initialized == 0)) then begin
@@ -1119,7 +1119,7 @@ begin
                                     end
                                     PartyHealingItem := obj_carrying_pid_obj(self_obj, 144);
                                     use_obj_on_obj(PartyHealingItem, self_obj);
-                                    debug_msg(obj_name(self_obj) + " used super stimpak.");
+                                    debug_msg(self_name + " used super stimpak.");
                                 end
                                 else begin
                                     if (obj_is_carrying_obj_pid(self_obj, 40)) then begin
@@ -1131,7 +1131,7 @@ begin
                                             gfade_in(600);
                                         end
                                         use_obj_on_obj(obj_carrying_pid_obj(self_obj, 40), self_obj);
-                                        debug_msg(obj_name(self_obj) + " used stimpak.");
+                                        debug_msg(self_name + " used stimpak.");
                                     end
                                     else begin
                                         if (obj_is_carrying_obj_pid(self_obj, 273)) then begin
@@ -1143,7 +1143,7 @@ begin
                                                 gfade_in(600);
                                             end
                                             use_obj_on_obj(obj_carrying_pid_obj(self_obj, 273), self_obj);
-                                            debug_msg(obj_name(self_obj) + " used healing powder.");
+                                            debug_msg(self_name + " used healing powder.");
                                         end
                                         else begin
                                             if (obj_is_carrying_obj_pid(self_obj, 91)) then begin
@@ -1155,7 +1155,7 @@ begin
                                                     gfade_in(600);
                                                 end
                                                 use_obj_on_obj(obj_carrying_pid_obj(self_obj, 91), self_obj);
-                                                debug_msg(obj_name(self_obj) + " used doctor's bag kit.");
+                                                debug_msg(self_name + " used doctor's bag kit.");
                                             end
                                             else begin
                                                 if (obj_is_carrying_obj_pid(self_obj, 47)) then begin
@@ -1167,7 +1167,7 @@ begin
                                                         gfade_in(600);
                                                     end
                                                     use_obj_on_obj(obj_carrying_pid_obj(self_obj, 47), self_obj);
-                                                    debug_msg(obj_name(self_obj) + " used First Aid kit.");
+                                                    debug_msg(self_name + " used First Aid kit.");
                                                 end
                                             end
                                         end
@@ -1177,7 +1177,7 @@ begin
                         end
                         else begin
                             if (metarule3(109, self_obj, 0, 0) == 4) then begin
-                                if ((100 * get_critter_stat(self_obj, 35) / get_critter_stat(self_obj, 7)) <= 50) then begin
+                                if ((100 * get_critter_stat(self_obj, STAT_current_hp) / get_critter_stat(self_obj, STAT_max_hp)) <= 50) then begin
                                     global_temp := 1;
                                     if (obj_is_carrying_obj_pid(self_obj, 144)) then begin
                                         if ((global_temp == 0) and (combat_is_initialized == 0)) then begin
@@ -1189,7 +1189,7 @@ begin
                                         end
                                         PartyHealingItem := obj_carrying_pid_obj(self_obj, 144);
                                         use_obj_on_obj(PartyHealingItem, self_obj);
-                                        debug_msg(obj_name(self_obj) + " used super stimpak.");
+                                        debug_msg(self_name + " used super stimpak.");
                                     end
                                     else begin
                                         if (obj_is_carrying_obj_pid(self_obj, 40)) then begin
@@ -1201,7 +1201,7 @@ begin
                                                 gfade_in(600);
                                             end
                                             use_obj_on_obj(obj_carrying_pid_obj(self_obj, 40), self_obj);
-                                            debug_msg(obj_name(self_obj) + " used stimpak.");
+                                            debug_msg(self_name + " used stimpak.");
                                         end
                                         else begin
                                             if (obj_is_carrying_obj_pid(self_obj, 273)) then begin
@@ -1213,7 +1213,7 @@ begin
                                                     gfade_in(600);
                                                 end
                                                 use_obj_on_obj(obj_carrying_pid_obj(self_obj, 273), self_obj);
-                                                debug_msg(obj_name(self_obj) + " used healing powder.");
+                                                debug_msg(self_name + " used healing powder.");
                                             end
                                             else begin
                                                 if (obj_is_carrying_obj_pid(self_obj, 91)) then begin
@@ -1225,7 +1225,7 @@ begin
                                                         gfade_in(600);
                                                     end
                                                     use_obj_on_obj(obj_carrying_pid_obj(self_obj, 91), self_obj);
-                                                    debug_msg(obj_name(self_obj) + " used doctor's bag kit.");
+                                                    debug_msg(self_name + " used doctor's bag kit.");
                                                 end
                                                 else begin
                                                     if (obj_is_carrying_obj_pid(self_obj, 47)) then begin
@@ -1237,7 +1237,7 @@ begin
                                                             gfade_in(600);
                                                         end
                                                         use_obj_on_obj(obj_carrying_pid_obj(self_obj, 47), self_obj);
-                                                        debug_msg(obj_name(self_obj) + " used First Aid kit.");
+                                                        debug_msg(self_name + " used First Aid kit.");
                                                     end
                                                 end
                                             end
@@ -1270,7 +1270,7 @@ end
 procedure HealPlayer
 begin
     Heal_Cost := 30;
-    critter_heal(dude_obj, get_critter_stat(dude_obj, 7) - get_critter_stat(dude_obj, 35));
+    critter_heal(dude_obj, get_critter_stat(dude_obj, STAT_max_hp) - get_critter_stat(dude_obj, STAT_current_hp));
     if ((critter_state(dude_obj) bwand 4) or (critter_state(dude_obj) bwand 8) or (critter_state(dude_obj) bwand 16) or (critter_state(dude_obj) bwand 32)) then begin
         Heal_Cost := 60;
         critter_injure(dude_obj, 4 bwor 8 bwor 16 bwor 32 bwor 8388608);
@@ -1295,106 +1295,106 @@ procedure PartyFree
 begin
     k := 0;
     Heal_Cost := 30;
-    if ((get_critter_stat(dude_obj, 7) > get_critter_stat(dude_obj, 35)) or ((critter_state(dude_obj) bwand 4) or (critter_state(dude_obj) bwand 8) or (critter_state(dude_obj) bwand 16) or (critter_state(dude_obj) bwand 32))) then begin
+    if ((get_critter_stat(dude_obj, STAT_max_hp) > get_critter_stat(dude_obj, STAT_current_hp)) or ((critter_state(dude_obj) bwand 4) or (critter_state(dude_obj) bwand 8) or (critter_state(dude_obj) bwand 16) or (critter_state(dude_obj) bwand 32))) then begin
         k := k + 1;
-        critter_heal(dude_obj, get_critter_stat(dude_obj, 7) - get_critter_stat(dude_obj, 35));
+        critter_heal(dude_obj, get_critter_stat(dude_obj, STAT_max_hp) - get_critter_stat(dude_obj, STAT_current_hp));
         critter_injure(dude_obj, 4 bwor 8 bwor 16 bwor 32 bwor 8388608);
     end
     if (party_member_obj(16777278) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777278), 35) < get_critter_stat(party_member_obj(16777278), 7)) or (critter_state(party_member_obj(16777278)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777278), STAT_current_hp) < get_critter_stat(party_member_obj(16777278), STAT_max_hp)) or (critter_state(party_member_obj(16777278)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
-            critter_heal(party_member_obj(16777278), get_critter_stat(party_member_obj(16777278), 7) - get_critter_stat(party_member_obj(16777278), 35));
+            critter_heal(party_member_obj(16777278), get_critter_stat(party_member_obj(16777278), STAT_max_hp) - get_critter_stat(party_member_obj(16777278), STAT_current_hp));
             critter_injure(party_member_obj(16777278), 4 bwor 8 bwor 16 bwor 32 bwor 8388608);
         end
     end
     if (party_member_obj(16777376) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777376), 35) < get_critter_stat(party_member_obj(16777376), 7)) or (critter_state(party_member_obj(16777376)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777376), STAT_current_hp) < get_critter_stat(party_member_obj(16777376), STAT_max_hp)) or (critter_state(party_member_obj(16777376)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
-            critter_heal(party_member_obj(16777376), get_critter_stat(party_member_obj(16777376), 7) - get_critter_stat(party_member_obj(16777376), 35));
+            critter_heal(party_member_obj(16777376), get_critter_stat(party_member_obj(16777376), STAT_max_hp) - get_critter_stat(party_member_obj(16777376), STAT_current_hp));
             critter_injure(party_member_obj(16777376), 4 bwor 8 bwor 16 bwor 32 bwor 8388608);
         end
     end
     if (party_member_obj(16777377) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777377), 35) < get_critter_stat(party_member_obj(16777377), 7)) or (critter_state(party_member_obj(16777377)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777377), STAT_current_hp) < get_critter_stat(party_member_obj(16777377), STAT_max_hp)) or (critter_state(party_member_obj(16777377)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
-            critter_heal(party_member_obj(16777377), get_critter_stat(party_member_obj(16777377), 7) - get_critter_stat(party_member_obj(16777377), 35));
+            critter_heal(party_member_obj(16777377), get_critter_stat(party_member_obj(16777377), STAT_max_hp) - get_critter_stat(party_member_obj(16777377), STAT_current_hp));
             critter_injure(party_member_obj(16777377), 4 bwor 8 bwor 16 bwor 32 bwor 8388608);
         end
     end
     if (party_member_obj(16777305) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777305), 35) < get_critter_stat(party_member_obj(16777305), 7)) or (critter_state(party_member_obj(16777305)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777305), STAT_current_hp) < get_critter_stat(party_member_obj(16777305), STAT_max_hp)) or (critter_state(party_member_obj(16777305)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
-            critter_heal(party_member_obj(16777305), get_critter_stat(party_member_obj(16777305), 7) - get_critter_stat(party_member_obj(16777305), 35));
+            critter_heal(party_member_obj(16777305), get_critter_stat(party_member_obj(16777305), STAT_max_hp) - get_critter_stat(party_member_obj(16777305), STAT_current_hp));
             critter_injure(party_member_obj(16777305), 4 bwor 8 bwor 16 bwor 32 bwor 8388608);
         end
     end
     if (party_member_obj(16777313) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777313), 35) < get_critter_stat(party_member_obj(16777313), 7)) or (critter_state(party_member_obj(16777313)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777313), STAT_current_hp) < get_critter_stat(party_member_obj(16777313), STAT_max_hp)) or (critter_state(party_member_obj(16777313)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
-            critter_heal(party_member_obj(16777313), get_critter_stat(party_member_obj(16777313), 7) - get_critter_stat(party_member_obj(16777313), 35));
+            critter_heal(party_member_obj(16777313), get_critter_stat(party_member_obj(16777313), STAT_max_hp) - get_critter_stat(party_member_obj(16777313), STAT_current_hp));
             critter_injure(party_member_obj(16777313), 4 bwor 8 bwor 16 bwor 32 bwor 8388608);
         end
     end
     if (party_member_obj(16777801) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777801), 35) < get_critter_stat(party_member_obj(16777801), 7)) or (critter_state(party_member_obj(16777801)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777801), STAT_current_hp) < get_critter_stat(party_member_obj(16777801), STAT_max_hp)) or (critter_state(party_member_obj(16777801)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
-            critter_heal(party_member_obj(16777323), get_critter_stat(party_member_obj(16777801), 7) - get_critter_stat(party_member_obj(16777801), 35));
+            critter_heal(party_member_obj(16777323), get_critter_stat(party_member_obj(16777801), STAT_max_hp) - get_critter_stat(party_member_obj(16777801), STAT_current_hp));
             critter_injure(party_member_obj(16777801), 4 bwor 8 bwor 16 bwor 32 bwor 8388608);
         end
     end
     if (party_member_obj(16777352) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777352), 35) < get_critter_stat(party_member_obj(16777352), 7)) or (critter_state(party_member_obj(16777352)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777352), STAT_current_hp) < get_critter_stat(party_member_obj(16777352), STAT_max_hp)) or (critter_state(party_member_obj(16777352)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
-            critter_heal(party_member_obj(16777352), get_critter_stat(party_member_obj(16777352), 7) - get_critter_stat(party_member_obj(16777352), 35));
+            critter_heal(party_member_obj(16777352), get_critter_stat(party_member_obj(16777352), STAT_max_hp) - get_critter_stat(party_member_obj(16777352), STAT_current_hp));
             critter_injure(party_member_obj(16777352), 4 bwor 8 bwor 16 bwor 32 bwor 8388608);
         end
     end
     if (party_member_obj(16777378) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777378), 35) < get_critter_stat(party_member_obj(16777378), 7)) or (critter_state(party_member_obj(16777378)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777378), STAT_current_hp) < get_critter_stat(party_member_obj(16777378), STAT_max_hp)) or (critter_state(party_member_obj(16777378)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
-            critter_heal(party_member_obj(16777378), get_critter_stat(party_member_obj(16777378), 7) - get_critter_stat(party_member_obj(16777378), 35));
+            critter_heal(party_member_obj(16777378), get_critter_stat(party_member_obj(16777378), STAT_max_hp) - get_critter_stat(party_member_obj(16777378), STAT_current_hp));
             critter_injure(party_member_obj(16777378), 4 bwor 8 bwor 16 bwor 32 bwor 8388608);
         end
     end
     if (party_member_obj(16777368) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777368), 35) < get_critter_stat(party_member_obj(16777368), 7)) or (critter_state(party_member_obj(16777368)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777368), STAT_current_hp) < get_critter_stat(party_member_obj(16777368), STAT_max_hp)) or (critter_state(party_member_obj(16777368)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
-            critter_heal(party_member_obj(16777368), get_critter_stat(party_member_obj(16777368), 7) - get_critter_stat(party_member_obj(16777368), 35));
+            critter_heal(party_member_obj(16777368), get_critter_stat(party_member_obj(16777368), STAT_max_hp) - get_critter_stat(party_member_obj(16777368), STAT_current_hp));
             critter_injure(party_member_obj(16777368), 4 bwor 8 bwor 16 bwor 32 bwor 8388608);
         end
     end
     if (party_member_obj(16777379) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777379), 35) < get_critter_stat(party_member_obj(16777379), 7)) or (critter_state(party_member_obj(16777379)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777379), STAT_current_hp) < get_critter_stat(party_member_obj(16777379), STAT_max_hp)) or (critter_state(party_member_obj(16777379)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
-            critter_heal(party_member_obj(16777379), get_critter_stat(party_member_obj(16777379), 7) - get_critter_stat(party_member_obj(16777379), 35));
+            critter_heal(party_member_obj(16777379), get_critter_stat(party_member_obj(16777379), STAT_max_hp) - get_critter_stat(party_member_obj(16777379), STAT_current_hp));
             critter_injure(party_member_obj(16777379), 4 bwor 8 bwor 16 bwor 32 bwor 8388608);
         end
     end
     if (party_member_obj(16777380) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777380), 35) < get_critter_stat(party_member_obj(16777380), 7)) or (critter_state(party_member_obj(16777380)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777380), STAT_current_hp) < get_critter_stat(party_member_obj(16777380), STAT_max_hp)) or (critter_state(party_member_obj(16777380)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
-            critter_heal(party_member_obj(16777380), get_critter_stat(party_member_obj(16777380), 7) - get_critter_stat(party_member_obj(16777380), 35));
+            critter_heal(party_member_obj(16777380), get_critter_stat(party_member_obj(16777380), STAT_max_hp) - get_critter_stat(party_member_obj(16777380), STAT_current_hp));
             critter_injure(party_member_obj(16777380), 4 bwor 8 bwor 16 bwor 32 bwor 8388608);
         end
     end
     if (party_member_obj(16777295) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777295), 35) < get_critter_stat(party_member_obj(16777295), 7)) or (critter_state(party_member_obj(16777295)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777295), STAT_current_hp) < get_critter_stat(party_member_obj(16777295), STAT_max_hp)) or (critter_state(party_member_obj(16777295)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
-            critter_heal(party_member_obj(16777295), get_critter_stat(party_member_obj(16777295), 7) - get_critter_stat(party_member_obj(16777295), 35));
+            critter_heal(party_member_obj(16777295), get_critter_stat(party_member_obj(16777295), STAT_max_hp) - get_critter_stat(party_member_obj(16777295), STAT_current_hp));
             critter_injure(party_member_obj(16777295), 4 bwor 8 bwor 16 bwor 32 bwor 8388608);
         end
     end
     if (party_member_obj(16777558) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777558), 35) < get_critter_stat(party_member_obj(16777558), 7)) or (critter_state(party_member_obj(16777558)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777558), STAT_current_hp) < get_critter_stat(party_member_obj(16777558), STAT_max_hp)) or (critter_state(party_member_obj(16777558)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
-            critter_heal(party_member_obj(16777558), get_critter_stat(party_member_obj(16777558), 7) - get_critter_stat(party_member_obj(16777558), 35));
+            critter_heal(party_member_obj(16777558), get_critter_stat(party_member_obj(16777558), STAT_max_hp) - get_critter_stat(party_member_obj(16777558), STAT_current_hp));
             critter_injure(party_member_obj(16777558), 4 bwor 8 bwor 16 bwor 32 bwor 8388608);
         end
     end
     if (party_member_obj(16777687) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777687), 35) < get_critter_stat(party_member_obj(16777687), 7)) or (critter_state(party_member_obj(16777687)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777687), STAT_current_hp) < get_critter_stat(party_member_obj(16777687), STAT_max_hp)) or (critter_state(party_member_obj(16777687)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
-            critter_heal(party_member_obj(16777687), get_critter_stat(party_member_obj(16777687), 7) - get_critter_stat(party_member_obj(16777687), 35));
+            critter_heal(party_member_obj(16777687), get_critter_stat(party_member_obj(16777687), STAT_max_hp) - get_critter_stat(party_member_obj(16777687), STAT_current_hp));
             critter_injure(party_member_obj(16777687), 4 bwor 8 bwor 16 bwor 32 bwor 8388608);
         end
     end
@@ -1410,72 +1410,72 @@ procedure HowMany
 begin
     k := 0;
     if (party_member_obj(16777278) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777278), 35) < get_critter_stat(party_member_obj(16777278), 7)) or (critter_state(party_member_obj(16777278)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777278), STAT_current_hp) < get_critter_stat(party_member_obj(16777278), STAT_max_hp)) or (critter_state(party_member_obj(16777278)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
         end
     end
     if (party_member_obj(16777376) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777376), 35) < get_critter_stat(party_member_obj(16777376), 7)) or (critter_state(party_member_obj(16777376)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777376), STAT_current_hp) < get_critter_stat(party_member_obj(16777376), STAT_max_hp)) or (critter_state(party_member_obj(16777376)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
         end
     end
     if (party_member_obj(16777377) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777377), 35) < get_critter_stat(party_member_obj(16777377), 7)) or (critter_state(party_member_obj(16777377)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777377), STAT_current_hp) < get_critter_stat(party_member_obj(16777377), STAT_max_hp)) or (critter_state(party_member_obj(16777377)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
         end
     end
     if (party_member_obj(16777305) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777305), 35) < get_critter_stat(party_member_obj(16777305), 7)) or (critter_state(party_member_obj(16777305)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777305), STAT_current_hp) < get_critter_stat(party_member_obj(16777305), STAT_max_hp)) or (critter_state(party_member_obj(16777305)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
         end
     end
     if (party_member_obj(16777313) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777313), 35) < get_critter_stat(party_member_obj(16777313), 7)) or (critter_state(party_member_obj(16777313)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777313), STAT_current_hp) < get_critter_stat(party_member_obj(16777313), STAT_max_hp)) or (critter_state(party_member_obj(16777313)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
         end
     end
     if (party_member_obj(16777801) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777801), 35) < get_critter_stat(party_member_obj(16777801), 7)) or (critter_state(party_member_obj(16777801)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777801), STAT_current_hp) < get_critter_stat(party_member_obj(16777801), STAT_max_hp)) or (critter_state(party_member_obj(16777801)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
         end
     end
     if (party_member_obj(16777352) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777352), 35) < get_critter_stat(party_member_obj(16777352), 7)) or (critter_state(party_member_obj(16777352)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777352), STAT_current_hp) < get_critter_stat(party_member_obj(16777352), STAT_max_hp)) or (critter_state(party_member_obj(16777352)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
         end
     end
     if (party_member_obj(16777378) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777378), 35) < get_critter_stat(party_member_obj(16777378), 7)) or (critter_state(party_member_obj(16777378)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777378), STAT_current_hp) < get_critter_stat(party_member_obj(16777378), STAT_max_hp)) or (critter_state(party_member_obj(16777378)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
         end
     end
     if (party_member_obj(16777368) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777368), 35) < get_critter_stat(party_member_obj(16777368), 7)) or (critter_state(party_member_obj(16777368)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777368), STAT_current_hp) < get_critter_stat(party_member_obj(16777368), STAT_max_hp)) or (critter_state(party_member_obj(16777368)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
         end
     end
     if (party_member_obj(16777379) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777379), 35) < get_critter_stat(party_member_obj(16777379), 7)) or (critter_state(party_member_obj(16777379)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777379), STAT_current_hp) < get_critter_stat(party_member_obj(16777379), STAT_max_hp)) or (critter_state(party_member_obj(16777379)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
         end
     end
     if (party_member_obj(16777380) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777380), 35) < get_critter_stat(party_member_obj(16777380), 7)) or (critter_state(party_member_obj(16777380)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777380), STAT_current_hp) < get_critter_stat(party_member_obj(16777380), STAT_max_hp)) or (critter_state(party_member_obj(16777380)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
         end
     end
     if (party_member_obj(16777295) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777295), 35) < get_critter_stat(party_member_obj(16777295), 7)) or (critter_state(party_member_obj(16777295)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777295), STAT_current_hp) < get_critter_stat(party_member_obj(16777295), STAT_max_hp)) or (critter_state(party_member_obj(16777295)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
         end
     end
     if (party_member_obj(16777558) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777558), 35) < get_critter_stat(party_member_obj(16777558), 7)) or (critter_state(party_member_obj(16777558)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777558), STAT_current_hp) < get_critter_stat(party_member_obj(16777558), STAT_max_hp)) or (critter_state(party_member_obj(16777558)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
         end
     end
     if (party_member_obj(16777687) != 0) then begin
-        if ((get_critter_stat(party_member_obj(16777687), 35) < get_critter_stat(party_member_obj(16777687), 7)) or (critter_state(party_member_obj(16777687)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
+        if ((get_critter_stat(party_member_obj(16777687), STAT_current_hp) < get_critter_stat(party_member_obj(16777687), STAT_max_hp)) or (critter_state(party_member_obj(16777687)) bwand (4 bwor 8 bwor 16 bwor 32))) then begin
             k := k + 1;
         end
     end
@@ -1487,7 +1487,7 @@ end
 
 procedure Node910
 begin
-    if (global_var(83) == 9) then begin
+    if (global_var(GVAR_VAULT_PLANT_STATUS) == 9) then begin
         call Node008();
     end
     else begin
@@ -1498,7 +1498,7 @@ end
 procedure Node920
 begin
     call HealPlayer();
-    if (global_var(618) == 0) then begin
+    if (global_var(GVAR_GECKO_DESCENDANT_KNOWN) == 0) then begin
         call PayDude();
         call Node001();
     end
@@ -1507,7 +1507,7 @@ end
 procedure Node922
 begin
     call HealPlayer();
-    if (global_var(618) == 0) then begin
+    if (global_var(GVAR_GECKO_DESCENDANT_KNOWN) == 0) then begin
         call PayDude();
     end
 end
@@ -1515,7 +1515,7 @@ end
 procedure Node924
 begin
     call PartyFree();
-    if (global_var(618) == 0) then begin
+    if (global_var(GVAR_GECKO_DESCENDANT_KNOWN) == 0) then begin
         call PayDude();
         call Node001();
     end
@@ -1524,7 +1524,7 @@ end
 procedure Node926
 begin
     call PartyFree();
-    if (global_var(618) == 0) then begin
+    if (global_var(GVAR_GECKO_DESCENDANT_KNOWN) == 0) then begin
         call PayDude();
     end
 end
@@ -1579,7 +1579,7 @@ end
 
 procedure Node951
 begin
-    if ((global_var(0) > 0) and (local_var(0) > 30) or (has_trait(0, dude_obj, 39) == 1)) then begin
+    if ((global_var(GVAR_PLAYER_REPUTATION) > 0) and (local_var(0) > 30) or (has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality) == 1)) then begin
         call Node021();
     end
     else begin
@@ -1590,24 +1590,24 @@ end
 procedure Node953
 begin
     if (party_member_obj(obj_pid(self_obj)) != 0) then begin
-        debug_msg("abandon party: " + obj_name(self_obj));
+        debug_msg("abandon party: " + self_name);
         party_remove(self_obj);
     end
     if ((obj_pid(self_obj) == 16777380) or (obj_pid(self_obj) == 16777379)) then begin
         debug_msg("start: set_dude_was_married");
-        if ((global_var(6) != 0) and ((global_var(449) != 0) == 0)) then begin
-            debug_msg("   GVAR_PLAYER_WAS_MARRIED before == " + global_var(449));
-            set_global_var(449, global_var(6));
-            debug_msg("   GVAR_PLAYER_WAS_MARRIED after == " + global_var(449));
-            set_global_var(6, 0);
+        if ((global_var(GVAR_PLAYER_MARRIED) != 0) and ((global_var(GVAR_PLAYER_WAS_MARRIED) != 0) == 0)) then begin
+            debug_msg("   GVAR_PLAYER_WAS_MARRIED before == " + global_var(GVAR_PLAYER_WAS_MARRIED));
+            set_global_var(GVAR_PLAYER_WAS_MARRIED, global_var(GVAR_PLAYER_MARRIED));
+            debug_msg("   GVAR_PLAYER_WAS_MARRIED after == " + global_var(GVAR_PLAYER_WAS_MARRIED));
+            set_global_var(GVAR_PLAYER_MARRIED, 0);
         end
         debug_msg("finished: set_dude_was_married");
     end
-    if ((local_var(12) != -1) and (has_trait(1, self_obj, 6) == 0)) then begin
-        critter_add_trait(self_obj, 1, 6, local_var(12));
+    if ((local_var(12) != -1) and (has_trait(TRAIT_OBJECT, self_obj, OBJECT_TEAM_NUM) == 0)) then begin
+        critter_add_trait(self_obj, TRAIT_OBJECT, OBJECT_TEAM_NUM, local_var(12));
         set_local_var(12, -1);
     end
-    debug_msg("" + obj_name(self_obj) + " has abandoned the party");
+    debug_msg("" + self_name + " has abandoned the party");
 end
 
 procedure Node954
@@ -1644,7 +1644,7 @@ end
 
 procedure Node995
 begin
-    if (get_critter_stat(dude_obj, 3) >= 7) then begin
+    if (dude_charisma >= 7) then begin
         set_local_var(3, 100);
         set_local_var(1, 4);
     end
@@ -1662,7 +1662,7 @@ end
 
 procedure Node997
 begin
-    if ((get_critter_stat(dude_obj, 3) >= 8) or (has_trait(0, dude_obj, 39) == 0)) then begin
+    if ((dude_charisma >= 8) or (has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality) == 0)) then begin
         call Node004();
     end
     else begin
@@ -1731,108 +1731,108 @@ procedure Node001
 begin
     if (local_var(4) == 0) then begin
         set_local_var(4, 1);
-        if (global_var(618) == 0) then begin
-            gsay_reply(139, 110);
+        if (global_var(GVAR_GECKO_DESCENDANT_KNOWN) == 0) then begin
+            gsay_reply(SCRIPT_GCLENNY, 110);
         end
         else begin
-            gsay_reply(139, 112);
+            gsay_reply(SCRIPT_GCLENNY, 112);
         end
     end
     else begin
-        if (global_var(618) == 0) then begin
-            gsay_reply(139, 111);
+        if (global_var(GVAR_GECKO_DESCENDANT_KNOWN) == 0) then begin
+            gsay_reply(SCRIPT_GCLENNY, 111);
         end
         else begin
-            gsay_reply(139, 113);
+            gsay_reply(SCRIPT_GCLENNY, 113);
         end
     end
-    giq_option(-3, 139, 114, Node002, 50);
-    giq_option(4, 139, 115, Node005, 50);
-    giq_option(4, 139, 122, Node02a, 50);
-    if (global_var(233)) then begin
+    giq_option(-3, SCRIPT_GCLENNY, 114, Node002, NEUTRAL_REACTION);
+    giq_option(4, SCRIPT_GCLENNY, 115, Node005, NEUTRAL_REACTION);
+    giq_option(4, SCRIPT_GCLENNY, 122, Node02a, NEUTRAL_REACTION);
+    if (global_var(GVAR_VAULT13_FOUND_GECK)) then begin
     end
     else begin
-        giq_option(4, 139, 119, Node004, 50);
+        giq_option(4, SCRIPT_GCLENNY, 119, Node004, NEUTRAL_REACTION);
     end
-    if (global_var(618) > 0) then begin
-        giq_option(4, 139, 120, Node008, 50);
+    if (global_var(GVAR_GECKO_DESCENDANT_KNOWN) > 0) then begin
+        giq_option(4, SCRIPT_GCLENNY, 120, Node008, NEUTRAL_REACTION);
     end
-    giq_option(4, 139, 121, Node999, 50);
+    giq_option(4, SCRIPT_GCLENNY, 121, Node999, NEUTRAL_REACTION);
 end
 
 procedure Node002
 begin
-    gsay_reply(139, 130);
-    giq_option(1, 139, 131, Node999, 50);
+    gsay_reply(SCRIPT_GCLENNY, 130);
+    giq_option(1, SCRIPT_GCLENNY, 131, Node999, NEUTRAL_REACTION);
 end
 
 procedure Node02a
 begin
     call HowMany();
-    gsay_reply(139, 125);
-    if (get_critter_stat(dude_obj, 35) < get_critter_stat(dude_obj, 7)) then begin
-        giq_option(4, 139, 116, Node006, 50);
+    gsay_reply(SCRIPT_GCLENNY, 125);
+    if (get_critter_stat(dude_obj, STAT_current_hp) < get_critter_stat(dude_obj, STAT_max_hp)) then begin
+        giq_option(4, SCRIPT_GCLENNY, 116, Node006, NEUTRAL_REACTION);
     end
     if (k > 0) then begin
-        giq_option(4, 139, 117, Node007, 50);
+        giq_option(4, SCRIPT_GCLENNY, 117, Node007, NEUTRAL_REACTION);
     end
-    giq_option(4, 139, 126, Node999, 50);
+    giq_option(4, SCRIPT_GCLENNY, 126, Node999, NEUTRAL_REACTION);
 end
 
 procedure Node003
 begin
-    float_msg(self_obj, message_str(139, random(140, 142)), 8);
+    float_msg(self_obj, message_str(SCRIPT_GCLENNY, random(140, 142)), FLOAT_MSG_YELLOW);
 end
 
 procedure Node004
 begin
     call HowMany();
-    gsay_reply(139, 150);
-    if (get_critter_stat(dude_obj, 35) < get_critter_stat(dude_obj, 7)) then begin
-        giq_option(4, 139, 151, Node006, 50);
+    gsay_reply(SCRIPT_GCLENNY, 150);
+    if (get_critter_stat(dude_obj, STAT_current_hp) < get_critter_stat(dude_obj, STAT_max_hp)) then begin
+        giq_option(4, SCRIPT_GCLENNY, 151, Node006, NEUTRAL_REACTION);
     end
     if (k > 0) then begin
-        giq_option(4, 139, 152, Node007, 50);
+        giq_option(4, SCRIPT_GCLENNY, 152, Node007, NEUTRAL_REACTION);
     end
-    giq_option(4, 139, 153, Node04a, 50);
-    giq_option(4, 139, 154, Node999, 50);
+    giq_option(4, SCRIPT_GCLENNY, 153, Node04a, NEUTRAL_REACTION);
+    giq_option(4, SCRIPT_GCLENNY, 154, Node999, NEUTRAL_REACTION);
 end
 
 procedure Node04a
 begin
-    set_global_var(618, 1);
+    set_global_var(GVAR_GECKO_DESCENDANT_KNOWN, 1);
     call Node008();
 end
 
 procedure Node005
 begin
     call HowMany();
-    gsay_reply(139, 160);
-    giq_option(4, 139, 161, Node023, 50);
-    giq_option(4, 139, 162, Node001, 50);
-    giq_option(4, 139, 163, Node009, 50);
-    if (get_critter_stat(dude_obj, 35) < get_critter_stat(dude_obj, 7)) then begin
-        giq_option(4, 139, 164, Node006, 50);
+    gsay_reply(SCRIPT_GCLENNY, 160);
+    giq_option(4, SCRIPT_GCLENNY, 161, Node023, NEUTRAL_REACTION);
+    giq_option(4, SCRIPT_GCLENNY, 162, Node001, NEUTRAL_REACTION);
+    giq_option(4, SCRIPT_GCLENNY, 163, Node009, NEUTRAL_REACTION);
+    if (get_critter_stat(dude_obj, STAT_current_hp) < get_critter_stat(dude_obj, STAT_max_hp)) then begin
+        giq_option(4, SCRIPT_GCLENNY, 164, Node006, NEUTRAL_REACTION);
     end
     if (k > 0) then begin
-        giq_option(4, 139, 165, Node007, 50);
+        giq_option(4, SCRIPT_GCLENNY, 165, Node007, NEUTRAL_REACTION);
     end
-    giq_option(4, 139, 166, Node999, 50);
+    giq_option(4, SCRIPT_GCLENNY, 166, Node999, NEUTRAL_REACTION);
 end
 
 procedure Node006
 begin
     from6 := 1;
-    if (global_var(618) == 0) then begin
-        gsay_reply(139, 174);
+    if (global_var(GVAR_GECKO_DESCENDANT_KNOWN) == 0) then begin
+        gsay_reply(SCRIPT_GCLENNY, 174);
     end
     else begin
-        gsay_reply(139, 170);
-        giq_option(4, 139, 171, Node015, 50);
+        gsay_reply(SCRIPT_GCLENNY, 170);
+        giq_option(4, SCRIPT_GCLENNY, 171, Node015, NEUTRAL_REACTION);
     end
-    giq_option(4, 139, 172, Node920, 50);
-    giq_option(4, 139, 173, Node922, 50);
-    giq_option(4, 139, 175, Node999, 50);
+    giq_option(4, SCRIPT_GCLENNY, 172, Node920, NEUTRAL_REACTION);
+    giq_option(4, SCRIPT_GCLENNY, 173, Node922, NEUTRAL_REACTION);
+    giq_option(4, SCRIPT_GCLENNY, 175, Node999, NEUTRAL_REACTION);
 end
 
 procedure Node007
@@ -1840,44 +1840,44 @@ begin
     from6 := 0;
     call HowMany();
     if (k == 0) then begin
-        gsay_message(139, 187, 50);
+        gsay_message(SCRIPT_GCLENNY, 187, NEUTRAL_REACTION);
     end
     else begin
-        if (global_var(618) == 0) then begin
+        if (global_var(GVAR_GECKO_DESCENDANT_KNOWN) == 0) then begin
             if (k < 2) then begin
-                gsay_reply(139, 185);
+                gsay_reply(SCRIPT_GCLENNY, 185);
             end
             else begin
-                gsay_reply(139, 186);
+                gsay_reply(SCRIPT_GCLENNY, 186);
             end
         end
         else begin
             if (k < 2) then begin
-                gsay_reply(139, 180);
+                gsay_reply(SCRIPT_GCLENNY, 180);
             end
             else begin
-                gsay_reply(139, 181);
+                gsay_reply(SCRIPT_GCLENNY, 181);
             end
-            giq_option(4, 139, 182, Node015, 50);
+            giq_option(4, SCRIPT_GCLENNY, 182, Node015, NEUTRAL_REACTION);
         end
-        giq_option(4, 139, 183, Node924, 50);
-        giq_option(4, 139, 184, Node926, 50);
-        giq_option(4, 139, 175, Node999, 50);
+        giq_option(4, SCRIPT_GCLENNY, 183, Node924, NEUTRAL_REACTION);
+        giq_option(4, SCRIPT_GCLENNY, 184, Node926, NEUTRAL_REACTION);
+        giq_option(4, SCRIPT_GCLENNY, 175, Node999, NEUTRAL_REACTION);
     end
 end
 
 procedure Node008
 begin
-    gsay_reply(139, 190);
-    giq_option(4, 139, 191, Node16a, 49);
-    giq_option(4, 139, 192, Node999, 50);
+    gsay_reply(SCRIPT_GCLENNY, 190);
+    giq_option(4, SCRIPT_GCLENNY, 191, Node16a, GOOD_REACTION);
+    giq_option(4, SCRIPT_GCLENNY, 192, Node999, NEUTRAL_REACTION);
 end
 
 procedure Node009
 begin
-    gsay_reply(139, 200);
-    giq_option(4, 139, 201, Node10a, 49);
-    giq_option(4, 139, 202, Node999, 50);
+    gsay_reply(SCRIPT_GCLENNY, 200);
+    giq_option(4, SCRIPT_GCLENNY, 201, Node10a, GOOD_REACTION);
+    giq_option(4, SCRIPT_GCLENNY, 202, Node999, NEUTRAL_REACTION);
 end
 
 procedure Node10a
@@ -1930,9 +1930,9 @@ end
 
 procedure Node010
 begin
-    gsay_reply(139, 210);
-    giq_option(4, 139, 211, Node11a, 50);
-    giq_option(4, 139, 212, Node999, 50);
+    gsay_reply(SCRIPT_GCLENNY, 210);
+    giq_option(4, SCRIPT_GCLENNY, 211, Node11a, NEUTRAL_REACTION);
+    giq_option(4, SCRIPT_GCLENNY, 212, Node999, NEUTRAL_REACTION);
 end
 
 procedure Node11a
@@ -1985,9 +1985,9 @@ end
 
 procedure Node011
 begin
-    gsay_reply(139, 220);
-    giq_option(4, 139, 221, Node12a, 49);
-    giq_option(4, 139, 222, Node999, 50);
+    gsay_reply(SCRIPT_GCLENNY, 220);
+    giq_option(4, SCRIPT_GCLENNY, 221, Node12a, GOOD_REACTION);
+    giq_option(4, SCRIPT_GCLENNY, 222, Node999, NEUTRAL_REACTION);
 end
 
 procedure Node12a
@@ -2040,9 +2040,9 @@ end
 
 procedure Node012
 begin
-    gsay_reply(139, 230);
-    giq_option(4, 139, 231, Node13a, 49);
-    giq_option(4, 139, 232, Node999, 50);
+    gsay_reply(SCRIPT_GCLENNY, 230);
+    giq_option(4, SCRIPT_GCLENNY, 231, Node13a, GOOD_REACTION);
+    giq_option(4, SCRIPT_GCLENNY, 232, Node999, NEUTRAL_REACTION);
 end
 
 procedure Node13a
@@ -2095,9 +2095,9 @@ end
 
 procedure Node013
 begin
-    gsay_reply(139, 240);
-    giq_option(4, 139, 241, Node14a, 49);
-    giq_option(4, 139, 242, Node999, 50);
+    gsay_reply(SCRIPT_GCLENNY, 240);
+    giq_option(4, SCRIPT_GCLENNY, 241, Node14a, GOOD_REACTION);
+    giq_option(4, SCRIPT_GCLENNY, 242, Node999, NEUTRAL_REACTION);
 end
 
 procedure Node14a
@@ -2150,19 +2150,19 @@ end
 
 procedure Node014
 begin
-    gsay_reply(139, 250);
-    giq_option(4, 139, 251, Node1a, 49);
-    giq_option(4, 139, 252, Node999, 50);
+    gsay_reply(SCRIPT_GCLENNY, 250);
+    giq_option(4, SCRIPT_GCLENNY, 251, Node1a, GOOD_REACTION);
+    giq_option(4, SCRIPT_GCLENNY, 252, Node999, NEUTRAL_REACTION);
 end
 
 procedure Node015
 begin
-    gsay_reply(139, 260);
+    gsay_reply(SCRIPT_GCLENNY, 260);
     if (from6) then begin
-        giq_option(4, 139, 261, Node006, 50);
+        giq_option(4, SCRIPT_GCLENNY, 261, Node006, NEUTRAL_REACTION);
     end
     else begin
-        giq_option(4, 139, 261, Node007, 50);
+        giq_option(4, SCRIPT_GCLENNY, 261, Node007, NEUTRAL_REACTION);
     end
 end
 
@@ -2216,9 +2216,9 @@ end
 
 procedure Node016
 begin
-    gsay_reply(139, 270);
-    giq_option(4, 139, 271, Node17a, 50);
-    giq_option(4, 139, 272, Node999, 50);
+    gsay_reply(SCRIPT_GCLENNY, 270);
+    giq_option(4, SCRIPT_GCLENNY, 271, Node17a, NEUTRAL_REACTION);
+    giq_option(4, SCRIPT_GCLENNY, 272, Node999, NEUTRAL_REACTION);
 end
 
 procedure Node17a
@@ -2271,10 +2271,10 @@ end
 
 procedure Node017
 begin
-    gsay_reply(139, 280);
-    giq_option(4, 139, 281, Node18a, 49);
-    giq_option(4, 139, 282, Node999, 51);
-    giq_option(4, 139, 283, Node999, 50);
+    gsay_reply(SCRIPT_GCLENNY, 280);
+    giq_option(4, SCRIPT_GCLENNY, 281, Node18a, GOOD_REACTION);
+    giq_option(4, SCRIPT_GCLENNY, 282, Node999, BAD_REACTION);
+    giq_option(4, SCRIPT_GCLENNY, 283, Node999, NEUTRAL_REACTION);
 end
 
 procedure Node18a
@@ -2327,9 +2327,9 @@ end
 
 procedure Node018
 begin
-    gsay_reply(139, 290);
-    giq_option(4, 139, 291, Node019, 49);
-    giq_option(4, 139, 292, Node999, 50);
+    gsay_reply(SCRIPT_GCLENNY, 290);
+    giq_option(4, SCRIPT_GCLENNY, 291, Node019, GOOD_REACTION);
+    giq_option(4, SCRIPT_GCLENNY, 292, Node999, NEUTRAL_REACTION);
 end
 
 procedure Node19a
@@ -2382,9 +2382,9 @@ end
 
 procedure Node019
 begin
-    gsay_reply(139, 300);
-    giq_option(4, 139, 301, Node20a, 49);
-    giq_option(4, 139, 302, Node999, 50);
+    gsay_reply(SCRIPT_GCLENNY, 300);
+    giq_option(4, SCRIPT_GCLENNY, 301, Node20a, GOOD_REACTION);
+    giq_option(4, SCRIPT_GCLENNY, 302, Node999, NEUTRAL_REACTION);
 end
 
 procedure Node20a
@@ -2437,294 +2437,294 @@ end
 
 procedure Node020
 begin
-    gsay_reply(139, 310);
-    if (((((metarule(16, 0) - 1) >= (floor(get_critter_stat(dude_obj, 3) / 2) + has_trait(0, dude_obj, 98) + (20 * has_trait(0, dude_obj, 39)))) or ((metarule(16, 0) - 1) >= (5 + (20 * has_trait(0, dude_obj, 39))))) == 0) and ((party_member_obj(16777323) != 0) == 0)) then begin
-        giq_option(4, 139, 311, Node951, 49);
+    gsay_reply(SCRIPT_GCLENNY, 310);
+    if (((((party_member_count(0) - 1) >= (floor(dude_charisma / 2) + has_trait(TRAIT_PERK, dude_obj, PERK_magnetic_personality_perk) + (20 * has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality)))) or ((party_member_count(0) - 1) >= (5 + (20 * has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality))))) == 0) and ((party_member_obj(16777323) != 0) == 0)) then begin
+        giq_option(4, SCRIPT_GCLENNY, 311, Node951, GOOD_REACTION);
     end
-    giq_option(4, 139, 312, Node001, 51);
-    giq_option(4, 139, 313, Node999, 50);
-    giq_option(4, 139, 314, Node999, 50);
+    giq_option(4, SCRIPT_GCLENNY, 312, Node001, BAD_REACTION);
+    giq_option(4, SCRIPT_GCLENNY, 313, Node999, NEUTRAL_REACTION);
+    giq_option(4, SCRIPT_GCLENNY, 314, Node999, NEUTRAL_REACTION);
 end
 
 procedure Node021
 begin
-    if ((get_critter_stat(dude_obj, 3) <= 1) and (has_trait(0, dude_obj, 39) == 0)) then begin
-        gsay_message(139, 330, 50);
+    if ((dude_charisma <= 1) and (has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality) == 0)) then begin
+        gsay_message(SCRIPT_GCLENNY, 330, NEUTRAL_REACTION);
     end
     else begin
-        gsay_reply(139, 320);
-        giq_option(4, 139, 321, Node800, 49);
-        giq_option(4, 139, 322, Node001, 51);
+        gsay_reply(SCRIPT_GCLENNY, 320);
+        giq_option(4, SCRIPT_GCLENNY, 321, Node800, GOOD_REACTION);
+        giq_option(4, SCRIPT_GCLENNY, 322, Node001, BAD_REACTION);
     end
 end
 
 procedure Node022
 begin
-    gsay_reply(139, 330);
-    giq_option(4, 139, 333, Node999, 50);
-    giq_option(4, 139, 334, Node999, 51);
+    gsay_reply(SCRIPT_GCLENNY, 330);
+    giq_option(4, SCRIPT_GCLENNY, 333, Node999, NEUTRAL_REACTION);
+    giq_option(4, SCRIPT_GCLENNY, 334, Node999, BAD_REACTION);
 end
 
 procedure Node023
 begin
-    gsay_reply(139, 340);
-    giq_option(4, 139, 341, Node005, 50);
-    giq_option(4, 139, 342, Node999, 50);
+    gsay_reply(SCRIPT_GCLENNY, 340);
+    giq_option(4, SCRIPT_GCLENNY, 341, Node005, NEUTRAL_REACTION);
+    giq_option(4, SCRIPT_GCLENNY, 342, Node999, NEUTRAL_REACTION);
 end
 
 procedure Node024
 begin
-    gsay_reply(139, 350);
-    giq_option(4, 139, 351, Node001, 50);
-    giq_option(4, 139, 352, Node999, 50);
+    gsay_reply(SCRIPT_GCLENNY, 350);
+    giq_option(4, SCRIPT_GCLENNY, 351, Node001, NEUTRAL_REACTION);
+    giq_option(4, SCRIPT_GCLENNY, 352, Node999, NEUTRAL_REACTION);
 end
 
 procedure Node025
 begin
-    gsay_reply(139, 360);
-    giq_option(1, 139, 372, Node953, 50);
-    giq_option(1, 139, 373, Node953, 51);
-    giq_option(1, 139, 374, Node953, 51);
-    giq_option(1, 139, 375, Node953, 50);
+    gsay_reply(SCRIPT_GCLENNY, 360);
+    giq_option(1, SCRIPT_GCLENNY, 372, Node953, NEUTRAL_REACTION);
+    giq_option(1, SCRIPT_GCLENNY, 373, Node953, BAD_REACTION);
+    giq_option(1, SCRIPT_GCLENNY, 374, Node953, BAD_REACTION);
+    giq_option(1, SCRIPT_GCLENNY, 375, Node953, NEUTRAL_REACTION);
 end
 
 procedure Node070
 begin
-    if (has_trait(1, self_obj, 666)) then begin
-        float_msg(self_obj, message_str(139, 3000), 8);
+    if (obj_is_visible_flag(self_obj)) then begin
+        float_msg(self_obj, message_str(SCRIPT_GCLENNY, 3000), FLOAT_MSG_YELLOW);
     end
     if (party_member_obj(obj_pid(self_obj)) != 0) then begin
-        debug_msg("abandon party: " + obj_name(self_obj));
+        debug_msg("abandon party: " + self_name);
         party_remove(self_obj);
     end
     if ((obj_pid(self_obj) == 16777380) or (obj_pid(self_obj) == 16777379)) then begin
         debug_msg("start: set_dude_was_married");
-        if ((global_var(6) != 0) and ((global_var(449) != 0) == 0)) then begin
-            debug_msg("   GVAR_PLAYER_WAS_MARRIED before == " + global_var(449));
-            set_global_var(449, global_var(6));
-            debug_msg("   GVAR_PLAYER_WAS_MARRIED after == " + global_var(449));
-            set_global_var(6, 0);
+        if ((global_var(GVAR_PLAYER_MARRIED) != 0) and ((global_var(GVAR_PLAYER_WAS_MARRIED) != 0) == 0)) then begin
+            debug_msg("   GVAR_PLAYER_WAS_MARRIED before == " + global_var(GVAR_PLAYER_WAS_MARRIED));
+            set_global_var(GVAR_PLAYER_WAS_MARRIED, global_var(GVAR_PLAYER_MARRIED));
+            debug_msg("   GVAR_PLAYER_WAS_MARRIED after == " + global_var(GVAR_PLAYER_WAS_MARRIED));
+            set_global_var(GVAR_PLAYER_MARRIED, 0);
         end
         debug_msg("finished: set_dude_was_married");
     end
-    if ((local_var(12) != -1) and (has_trait(1, self_obj, 6) == 0)) then begin
-        critter_add_trait(self_obj, 1, 6, local_var(12));
+    if ((local_var(12) != -1) and (has_trait(TRAIT_OBJECT, self_obj, OBJECT_TEAM_NUM) == 0)) then begin
+        critter_add_trait(self_obj, TRAIT_OBJECT, OBJECT_TEAM_NUM, local_var(12));
         set_local_var(12, -1);
     end
-    debug_msg("" + obj_name(self_obj) + " has abandoned the party");
+    debug_msg("" + self_name + " has abandoned the party");
 end
 
 procedure Node071
 begin
     set_local_var(14, 1);
-    if (has_trait(1, self_obj, 666)) then begin
-        float_msg(self_obj, message_str(139, 370), 8);
+    if (obj_is_visible_flag(self_obj)) then begin
+        float_msg(self_obj, message_str(SCRIPT_GCLENNY, 370), FLOAT_MSG_YELLOW);
     end
     if (party_member_obj(obj_pid(self_obj)) != 0) then begin
-        debug_msg("abandon party: " + obj_name(self_obj));
+        debug_msg("abandon party: " + self_name);
         party_remove(self_obj);
     end
     if ((obj_pid(self_obj) == 16777380) or (obj_pid(self_obj) == 16777379)) then begin
         debug_msg("start: set_dude_was_married");
-        if ((global_var(6) != 0) and ((global_var(449) != 0) == 0)) then begin
-            debug_msg("   GVAR_PLAYER_WAS_MARRIED before == " + global_var(449));
-            set_global_var(449, global_var(6));
-            debug_msg("   GVAR_PLAYER_WAS_MARRIED after == " + global_var(449));
-            set_global_var(6, 0);
+        if ((global_var(GVAR_PLAYER_MARRIED) != 0) and ((global_var(GVAR_PLAYER_WAS_MARRIED) != 0) == 0)) then begin
+            debug_msg("   GVAR_PLAYER_WAS_MARRIED before == " + global_var(GVAR_PLAYER_WAS_MARRIED));
+            set_global_var(GVAR_PLAYER_WAS_MARRIED, global_var(GVAR_PLAYER_MARRIED));
+            debug_msg("   GVAR_PLAYER_WAS_MARRIED after == " + global_var(GVAR_PLAYER_WAS_MARRIED));
+            set_global_var(GVAR_PLAYER_MARRIED, 0);
         end
         debug_msg("finished: set_dude_was_married");
     end
-    if ((local_var(12) != -1) and (has_trait(1, self_obj, 6) == 0)) then begin
-        critter_add_trait(self_obj, 1, 6, local_var(12));
+    if ((local_var(12) != -1) and (has_trait(TRAIT_OBJECT, self_obj, OBJECT_TEAM_NUM) == 0)) then begin
+        critter_add_trait(self_obj, TRAIT_OBJECT, OBJECT_TEAM_NUM, local_var(12));
         set_local_var(12, -1);
     end
-    debug_msg("" + obj_name(self_obj) + " has abandoned the party");
-    critter_add_trait(self_obj, 1, 6, 49);
+    debug_msg("" + self_name + " has abandoned the party");
+    critter_add_trait(self_obj, TRAIT_OBJECT, OBJECT_TEAM_NUM, 49);
 end
 
 procedure Node072
 begin
-    if (has_trait(1, self_obj, 666)) then begin
-        float_msg(self_obj, message_str(139, 3002), 8);
+    if (obj_is_visible_flag(self_obj)) then begin
+        float_msg(self_obj, message_str(SCRIPT_GCLENNY, 3002), FLOAT_MSG_YELLOW);
     end
     if (party_member_obj(obj_pid(self_obj)) != 0) then begin
-        debug_msg("abandon party: " + obj_name(self_obj));
+        debug_msg("abandon party: " + self_name);
         party_remove(self_obj);
     end
     if ((obj_pid(self_obj) == 16777380) or (obj_pid(self_obj) == 16777379)) then begin
         debug_msg("start: set_dude_was_married");
-        if ((global_var(6) != 0) and ((global_var(449) != 0) == 0)) then begin
-            debug_msg("   GVAR_PLAYER_WAS_MARRIED before == " + global_var(449));
-            set_global_var(449, global_var(6));
-            debug_msg("   GVAR_PLAYER_WAS_MARRIED after == " + global_var(449));
-            set_global_var(6, 0);
+        if ((global_var(GVAR_PLAYER_MARRIED) != 0) and ((global_var(GVAR_PLAYER_WAS_MARRIED) != 0) == 0)) then begin
+            debug_msg("   GVAR_PLAYER_WAS_MARRIED before == " + global_var(GVAR_PLAYER_WAS_MARRIED));
+            set_global_var(GVAR_PLAYER_WAS_MARRIED, global_var(GVAR_PLAYER_MARRIED));
+            debug_msg("   GVAR_PLAYER_WAS_MARRIED after == " + global_var(GVAR_PLAYER_WAS_MARRIED));
+            set_global_var(GVAR_PLAYER_MARRIED, 0);
         end
         debug_msg("finished: set_dude_was_married");
     end
-    if ((local_var(12) != -1) and (has_trait(1, self_obj, 6) == 0)) then begin
-        critter_add_trait(self_obj, 1, 6, local_var(12));
+    if ((local_var(12) != -1) and (has_trait(TRAIT_OBJECT, self_obj, OBJECT_TEAM_NUM) == 0)) then begin
+        critter_add_trait(self_obj, TRAIT_OBJECT, OBJECT_TEAM_NUM, local_var(12));
         set_local_var(12, -1);
     end
-    debug_msg("" + obj_name(self_obj) + " has abandoned the party");
+    debug_msg("" + self_name + " has abandoned the party");
 end
 
 procedure Node073
 begin
-    if (has_trait(1, self_obj, 666)) then begin
-        float_msg(self_obj, message_str(139, 370), 8);
+    if (obj_is_visible_flag(self_obj)) then begin
+        float_msg(self_obj, message_str(SCRIPT_GCLENNY, 370), FLOAT_MSG_YELLOW);
     end
     if (party_member_obj(obj_pid(self_obj)) != 0) then begin
-        debug_msg("abandon party: " + obj_name(self_obj));
+        debug_msg("abandon party: " + self_name);
         party_remove(self_obj);
     end
     if ((obj_pid(self_obj) == 16777380) or (obj_pid(self_obj) == 16777379)) then begin
         debug_msg("start: set_dude_was_married");
-        if ((global_var(6) != 0) and ((global_var(449) != 0) == 0)) then begin
-            debug_msg("   GVAR_PLAYER_WAS_MARRIED before == " + global_var(449));
-            set_global_var(449, global_var(6));
-            debug_msg("   GVAR_PLAYER_WAS_MARRIED after == " + global_var(449));
-            set_global_var(6, 0);
+        if ((global_var(GVAR_PLAYER_MARRIED) != 0) and ((global_var(GVAR_PLAYER_WAS_MARRIED) != 0) == 0)) then begin
+            debug_msg("   GVAR_PLAYER_WAS_MARRIED before == " + global_var(GVAR_PLAYER_WAS_MARRIED));
+            set_global_var(GVAR_PLAYER_WAS_MARRIED, global_var(GVAR_PLAYER_MARRIED));
+            debug_msg("   GVAR_PLAYER_WAS_MARRIED after == " + global_var(GVAR_PLAYER_WAS_MARRIED));
+            set_global_var(GVAR_PLAYER_MARRIED, 0);
         end
         debug_msg("finished: set_dude_was_married");
     end
-    if ((local_var(12) != -1) and (has_trait(1, self_obj, 6) == 0)) then begin
-        critter_add_trait(self_obj, 1, 6, local_var(12));
+    if ((local_var(12) != -1) and (has_trait(TRAIT_OBJECT, self_obj, OBJECT_TEAM_NUM) == 0)) then begin
+        critter_add_trait(self_obj, TRAIT_OBJECT, OBJECT_TEAM_NUM, local_var(12));
         set_local_var(12, -1);
     end
-    debug_msg("" + obj_name(self_obj) + " has abandoned the party");
+    debug_msg("" + self_name + " has abandoned the party");
 end
 
 procedure Node074
 begin
     set_local_var(14, 1);
     set_local_var(6, 1);
-    if (has_trait(1, self_obj, 666)) then begin
-        float_msg(self_obj, message_str(139, 370), 8);
+    if (obj_is_visible_flag(self_obj)) then begin
+        float_msg(self_obj, message_str(SCRIPT_GCLENNY, 370), FLOAT_MSG_YELLOW);
     end
     if (party_member_obj(obj_pid(self_obj)) != 0) then begin
-        debug_msg("abandon party: " + obj_name(self_obj));
+        debug_msg("abandon party: " + self_name);
         party_remove(self_obj);
     end
     if ((obj_pid(self_obj) == 16777380) or (obj_pid(self_obj) == 16777379)) then begin
         debug_msg("start: set_dude_was_married");
-        if ((global_var(6) != 0) and ((global_var(449) != 0) == 0)) then begin
-            debug_msg("   GVAR_PLAYER_WAS_MARRIED before == " + global_var(449));
-            set_global_var(449, global_var(6));
-            debug_msg("   GVAR_PLAYER_WAS_MARRIED after == " + global_var(449));
-            set_global_var(6, 0);
+        if ((global_var(GVAR_PLAYER_MARRIED) != 0) and ((global_var(GVAR_PLAYER_WAS_MARRIED) != 0) == 0)) then begin
+            debug_msg("   GVAR_PLAYER_WAS_MARRIED before == " + global_var(GVAR_PLAYER_WAS_MARRIED));
+            set_global_var(GVAR_PLAYER_WAS_MARRIED, global_var(GVAR_PLAYER_MARRIED));
+            debug_msg("   GVAR_PLAYER_WAS_MARRIED after == " + global_var(GVAR_PLAYER_WAS_MARRIED));
+            set_global_var(GVAR_PLAYER_MARRIED, 0);
         end
         debug_msg("finished: set_dude_was_married");
     end
-    if ((local_var(12) != -1) and (has_trait(1, self_obj, 6) == 0)) then begin
-        critter_add_trait(self_obj, 1, 6, local_var(12));
+    if ((local_var(12) != -1) and (has_trait(TRAIT_OBJECT, self_obj, OBJECT_TEAM_NUM) == 0)) then begin
+        critter_add_trait(self_obj, TRAIT_OBJECT, OBJECT_TEAM_NUM, local_var(12));
         set_local_var(12, -1);
     end
-    debug_msg("" + obj_name(self_obj) + " has abandoned the party");
-    critter_add_trait(self_obj, 1, 6, 49);
+    debug_msg("" + self_name + " has abandoned the party");
+    critter_add_trait(self_obj, TRAIT_OBJECT, OBJECT_TEAM_NUM, 49);
 end
 
 procedure Node075
 begin
-    if (has_trait(1, self_obj, 666)) then begin
-        float_msg(self_obj, message_str(139, 371), 8);
+    if (obj_is_visible_flag(self_obj)) then begin
+        float_msg(self_obj, message_str(SCRIPT_GCLENNY, 371), FLOAT_MSG_YELLOW);
     end
     if (party_member_obj(obj_pid(self_obj)) != 0) then begin
-        debug_msg("abandon party: " + obj_name(self_obj));
+        debug_msg("abandon party: " + self_name);
         party_remove(self_obj);
     end
     if ((obj_pid(self_obj) == 16777380) or (obj_pid(self_obj) == 16777379)) then begin
         debug_msg("start: set_dude_was_married");
-        if ((global_var(6) != 0) and ((global_var(449) != 0) == 0)) then begin
-            debug_msg("   GVAR_PLAYER_WAS_MARRIED before == " + global_var(449));
-            set_global_var(449, global_var(6));
-            debug_msg("   GVAR_PLAYER_WAS_MARRIED after == " + global_var(449));
-            set_global_var(6, 0);
+        if ((global_var(GVAR_PLAYER_MARRIED) != 0) and ((global_var(GVAR_PLAYER_WAS_MARRIED) != 0) == 0)) then begin
+            debug_msg("   GVAR_PLAYER_WAS_MARRIED before == " + global_var(GVAR_PLAYER_WAS_MARRIED));
+            set_global_var(GVAR_PLAYER_WAS_MARRIED, global_var(GVAR_PLAYER_MARRIED));
+            debug_msg("   GVAR_PLAYER_WAS_MARRIED after == " + global_var(GVAR_PLAYER_WAS_MARRIED));
+            set_global_var(GVAR_PLAYER_MARRIED, 0);
         end
         debug_msg("finished: set_dude_was_married");
     end
-    if ((local_var(12) != -1) and (has_trait(1, self_obj, 6) == 0)) then begin
-        critter_add_trait(self_obj, 1, 6, local_var(12));
+    if ((local_var(12) != -1) and (has_trait(TRAIT_OBJECT, self_obj, OBJECT_TEAM_NUM) == 0)) then begin
+        critter_add_trait(self_obj, TRAIT_OBJECT, OBJECT_TEAM_NUM, local_var(12));
         set_local_var(12, -1);
     end
-    debug_msg("" + obj_name(self_obj) + " has abandoned the party");
+    debug_msg("" + self_name + " has abandoned the party");
 end
 
 procedure Node076
 begin
     set_local_var(14, 1);
-    if (has_trait(1, self_obj, 666)) then begin
-        float_msg(self_obj, message_str(139, 370), 8);
+    if (obj_is_visible_flag(self_obj)) then begin
+        float_msg(self_obj, message_str(SCRIPT_GCLENNY, 370), FLOAT_MSG_YELLOW);
     end
     if (party_member_obj(obj_pid(self_obj)) != 0) then begin
-        debug_msg("abandon party: " + obj_name(self_obj));
+        debug_msg("abandon party: " + self_name);
         party_remove(self_obj);
     end
     if ((obj_pid(self_obj) == 16777380) or (obj_pid(self_obj) == 16777379)) then begin
         debug_msg("start: set_dude_was_married");
-        if ((global_var(6) != 0) and ((global_var(449) != 0) == 0)) then begin
-            debug_msg("   GVAR_PLAYER_WAS_MARRIED before == " + global_var(449));
-            set_global_var(449, global_var(6));
-            debug_msg("   GVAR_PLAYER_WAS_MARRIED after == " + global_var(449));
-            set_global_var(6, 0);
+        if ((global_var(GVAR_PLAYER_MARRIED) != 0) and ((global_var(GVAR_PLAYER_WAS_MARRIED) != 0) == 0)) then begin
+            debug_msg("   GVAR_PLAYER_WAS_MARRIED before == " + global_var(GVAR_PLAYER_WAS_MARRIED));
+            set_global_var(GVAR_PLAYER_WAS_MARRIED, global_var(GVAR_PLAYER_MARRIED));
+            debug_msg("   GVAR_PLAYER_WAS_MARRIED after == " + global_var(GVAR_PLAYER_WAS_MARRIED));
+            set_global_var(GVAR_PLAYER_MARRIED, 0);
         end
         debug_msg("finished: set_dude_was_married");
     end
-    if ((local_var(12) != -1) and (has_trait(1, self_obj, 6) == 0)) then begin
-        critter_add_trait(self_obj, 1, 6, local_var(12));
+    if ((local_var(12) != -1) and (has_trait(TRAIT_OBJECT, self_obj, OBJECT_TEAM_NUM) == 0)) then begin
+        critter_add_trait(self_obj, TRAIT_OBJECT, OBJECT_TEAM_NUM, local_var(12));
         set_local_var(12, -1);
     end
-    debug_msg("" + obj_name(self_obj) + " has abandoned the party");
-    critter_add_trait(self_obj, 1, 6, 49);
+    debug_msg("" + self_name + " has abandoned the party");
+    critter_add_trait(self_obj, TRAIT_OBJECT, OBJECT_TEAM_NUM, 49);
 end
 
 procedure Node800
 begin
     if (local_var(13) == 0) then begin
         set_local_var(13, 1);
-        set_global_var(0, global_var(0) + 5);
+        set_global_var(GVAR_PLAYER_REPUTATION, global_var(GVAR_PLAYER_REPUTATION) + 5);
         debug_msg("Player gains " + 5 + " Karma Points.");
-        set_global_var(37, 0);
-        set_global_var(38, 0);
-        set_global_var(39, 0);
-        set_global_var(40, 0);
-        set_global_var(41, 0);
-        set_global_var(42, 0);
-        set_global_var(43, 0);
-        set_global_var(44, 0);
-        set_global_var(45, 0);
-        if (global_var(0) >= 1000) then begin
-            set_global_var(37, 1);
+        set_global_var(GVAR_KARMA_HOLY_WARRIOR, 0);
+        set_global_var(GVAR_KARMA_GUARDIAN_OF_THE_WASTES, 0);
+        set_global_var(GVAR_KARMA_SHIELD_OF_HOPE, 0);
+        set_global_var(GVAR_KARMA_DEFENDER, 0);
+        set_global_var(GVAR_KARMA_WANDERER, 0);
+        set_global_var(GVAR_KARMA_BETRAYER, 0);
+        set_global_var(GVAR_KARMA_SWORD_OF_DESPAIR, 0);
+        set_global_var(GVAR_KARMA_SCOURGE_OF_THE_WASTE, 0);
+        set_global_var(GVAR_KARMA_DEMON_SPAWN, 0);
+        if (global_var(GVAR_PLAYER_REPUTATION) >= 1000) then begin
+            set_global_var(GVAR_KARMA_HOLY_WARRIOR, 1);
         end
         else begin
-            if (global_var(0) >= 750) then begin
-                set_global_var(38, 1);
+            if (global_var(GVAR_PLAYER_REPUTATION) >= 750) then begin
+                set_global_var(GVAR_KARMA_GUARDIAN_OF_THE_WASTES, 1);
             end
             else begin
-                if (global_var(0) >= 500) then begin
-                    set_global_var(39, 1);
+                if (global_var(GVAR_PLAYER_REPUTATION) >= 500) then begin
+                    set_global_var(GVAR_KARMA_SHIELD_OF_HOPE, 1);
                 end
                 else begin
-                    if (global_var(0) >= 250) then begin
-                        set_global_var(40, 1);
+                    if (global_var(GVAR_PLAYER_REPUTATION) >= 250) then begin
+                        set_global_var(GVAR_KARMA_DEFENDER, 1);
                     end
                     else begin
-                        if (global_var(0) > -250) then begin
-                            set_global_var(41, 1);
+                        if (global_var(GVAR_PLAYER_REPUTATION) > -250) then begin
+                            set_global_var(GVAR_KARMA_WANDERER, 1);
                         end
                         else begin
-                            if (global_var(0) > -500) then begin
-                                set_global_var(42, 1);
+                            if (global_var(GVAR_PLAYER_REPUTATION) > -500) then begin
+                                set_global_var(GVAR_KARMA_BETRAYER, 1);
                             end
                             else begin
-                                if (global_var(0) > -750) then begin
-                                    set_global_var(43, 1);
+                                if (global_var(GVAR_PLAYER_REPUTATION) > -750) then begin
+                                    set_global_var(GVAR_KARMA_SWORD_OF_DESPAIR, 1);
                                 end
                                 else begin
-                                    if (global_var(0) > -1000) then begin
-                                        set_global_var(44, 1);
+                                    if (global_var(GVAR_PLAYER_REPUTATION) > -1000) then begin
+                                        set_global_var(GVAR_KARMA_SCOURGE_OF_THE_WASTE, 1);
                                     end
                                     else begin
-                                        set_global_var(45, 1);
+                                        set_global_var(GVAR_KARMA_DEMON_SPAWN, 1);
                                     end
                                 end
                             end
@@ -2733,45 +2733,45 @@ begin
                 end
             end
         end
-        set_global_var(51, global_var(51) + 10);
+        set_global_var(GVAR_TOWN_REP_GECKO, global_var(GVAR_TOWN_REP_GECKO) + 10);
     end
     party_add(self_obj);
     add_timer_event(self_obj, game_ticks(1), 1);
-    critter_add_trait(self_obj, 1, 6, 0);
+    critter_add_trait(self_obj, TRAIT_OBJECT, OBJECT_TEAM_NUM, 0);
 end
 
 procedure Node1000
 begin
-    gsay_reply(139, 1000);
+    gsay_reply(SCRIPT_GCLENNY, 1000);
     if ((local_var(10) != 0) == 0) then begin
         if (local_var(11) == 0) then begin
             set_local_var(11, 6);
         end
-        if (message_str(14, 10001) != 0) then begin
-            if (get_critter_stat(self_obj, 35) < get_critter_stat(self_obj, 7)) then begin
-                giq_option(4, 139, message_str(14, 10001), Node1001, 50);
+        if (g_mstr(10001) != 0) then begin
+            if (get_critter_stat(self_obj, STAT_current_hp) < get_critter_stat(self_obj, STAT_max_hp)) then begin
+                giq_option(4, SCRIPT_GCLENNY, g_mstr(10001), Node1001, NEUTRAL_REACTION);
             end
         end
-        if (message_str(14, 10008) != 0) then begin
-            giq_option(4, 139, message_str(14, 10008), Node1007, 50);
+        if (g_mstr(10008) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10008), Node1007, NEUTRAL_REACTION);
         end
-        if (message_str(14, 10009) != 0) then begin
-            giq_option(4, 139, message_str(14, 10009), Node1008, 50);
+        if (g_mstr(10009) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10009), Node1008, NEUTRAL_REACTION);
         end
-        if (message_str(14, 10002) != 0) then begin
-            giq_option(4, 139, message_str(14, 10002), Node1002, 50);
+        if (g_mstr(10002) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10002), Node1002, NEUTRAL_REACTION);
         end
     end
     else begin
-        if (message_str(14, 10100) != 0) then begin
-            giq_option(4, 139, message_str(14, 10100), Node1100, 50);
+        if (g_mstr(10100) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10100), Node1100, NEUTRAL_REACTION);
         end
     end
-    if (message_str(14, 10007) != 0) then begin
-        giq_option(4, 139, message_str(14, 10007), Node999, 50);
+    if (g_mstr(10007) != 0) then begin
+        giq_option(4, SCRIPT_GCLENNY, g_mstr(10007), Node999, NEUTRAL_REACTION);
     end
-    if (message_str(14, random(300, 303)) != 0) then begin
-        giq_option(-3, 139, message_str(14, random(300, 303)), Node999, 50);
+    if (g_mstr(random(300, 303)) != 0) then begin
+        giq_option(-3, SCRIPT_GCLENNY, g_mstr(random(300, 303)), Node999, NEUTRAL_REACTION);
     end
     debug_msg("USED PARTY MEMBER OPTIONS");
 end
@@ -2788,7 +2788,7 @@ begin
         end
         PartyHealingItem := obj_carrying_pid_obj(self_obj, 144);
         use_obj_on_obj(PartyHealingItem, self_obj);
-        debug_msg(obj_name(self_obj) + " used super stimpak.");
+        debug_msg(self_name + " used super stimpak.");
     end
     else begin
         if (obj_is_carrying_obj_pid(self_obj, 40)) then begin
@@ -2800,7 +2800,7 @@ begin
                 gfade_in(600);
             end
             use_obj_on_obj(obj_carrying_pid_obj(self_obj, 40), self_obj);
-            debug_msg(obj_name(self_obj) + " used stimpak.");
+            debug_msg(self_name + " used stimpak.");
         end
         else begin
             if (obj_is_carrying_obj_pid(self_obj, 273)) then begin
@@ -2812,7 +2812,7 @@ begin
                     gfade_in(600);
                 end
                 use_obj_on_obj(obj_carrying_pid_obj(self_obj, 273), self_obj);
-                debug_msg(obj_name(self_obj) + " used healing powder.");
+                debug_msg(self_name + " used healing powder.");
             end
             else begin
                 if (obj_is_carrying_obj_pid(self_obj, 91)) then begin
@@ -2824,7 +2824,7 @@ begin
                         gfade_in(600);
                     end
                     use_obj_on_obj(obj_carrying_pid_obj(self_obj, 91), self_obj);
-                    debug_msg(obj_name(self_obj) + " used doctor's bag kit.");
+                    debug_msg(self_name + " used doctor's bag kit.");
                 end
                 else begin
                     if (obj_is_carrying_obj_pid(self_obj, 47)) then begin
@@ -2836,10 +2836,10 @@ begin
                             gfade_in(600);
                         end
                         use_obj_on_obj(obj_carrying_pid_obj(self_obj, 47), self_obj);
-                        debug_msg(obj_name(self_obj) + " used First Aid kit.");
+                        debug_msg(self_name + " used First Aid kit.");
                     end
                     else begin
-                        if (has_skill(self_obj, 7) > has_skill(self_obj, 6)) then begin
+                        if (has_skill(self_obj, SKILL_DOCTOR) > has_skill(self_obj, SKILL_FIRST_AID)) then begin
                             if ((global_temp == 0) and (combat_is_initialized == 0)) then begin
                                 gfade_out(600);
                                 if ((60 * (60 * 10)) > 0) then begin
@@ -2849,7 +2849,7 @@ begin
                             end
                             if (is_success(roll_vs_skill(self_obj, 7, 0))) then begin
                                 critter_heal(self_obj, random(10, 25));
-                                debug_msg(obj_name(self_obj) + " healed some using doctor skill.");
+                                debug_msg(self_name + " healed some using doctor skill.");
                             end
                         end
                         else begin
@@ -2862,7 +2862,7 @@ begin
                             end
                             if (is_success(roll_vs_skill(self_obj, 6, 0))) then begin
                                 critter_heal(self_obj, random(5, 15));
-                                debug_msg(obj_name(self_obj) + " healed some using first aid skill.");
+                                debug_msg(self_name + " healed some using first aid skill.");
                             end
                         end
                     end
@@ -2871,19 +2871,19 @@ begin
         end
     end
     global_temp := 0;
-    if (get_critter_stat(self_obj, 35) == get_critter_stat(self_obj, 7)) then begin
-        gsay_reply(139, 1100);
+    if (get_critter_stat(self_obj, STAT_current_hp) == get_critter_stat(self_obj, STAT_max_hp)) then begin
+        gsay_reply(SCRIPT_GCLENNY, 1100);
     end
     else begin
-        if ((get_critter_stat(self_obj, 35) * 100 / get_critter_stat(self_obj, 7)) >= 90) then begin
-            gsay_reply(139, 1200);
+        if ((get_critter_stat(self_obj, STAT_current_hp) * 100 / get_critter_stat(self_obj, STAT_max_hp)) >= 90) then begin
+            gsay_reply(SCRIPT_GCLENNY, 1200);
         end
         else begin
-            if ((get_critter_stat(self_obj, 35) * 100 / get_critter_stat(self_obj, 7)) >= 70) then begin
-                gsay_reply(139, 1300);
+            if ((get_critter_stat(self_obj, STAT_current_hp) * 100 / get_critter_stat(self_obj, STAT_max_hp)) >= 70) then begin
+                gsay_reply(SCRIPT_GCLENNY, 1300);
             end
             else begin
-                gsay_reply(139, 1400);
+                gsay_reply(SCRIPT_GCLENNY, 1400);
             end
         end
     end
@@ -2891,31 +2891,31 @@ begin
         if (local_var(11) == 0) then begin
             set_local_var(11, 6);
         end
-        if (message_str(14, 10001) != 0) then begin
-            if (get_critter_stat(self_obj, 35) < get_critter_stat(self_obj, 7)) then begin
-                giq_option(4, 139, message_str(14, 10001), Node1001, 50);
+        if (g_mstr(10001) != 0) then begin
+            if (get_critter_stat(self_obj, STAT_current_hp) < get_critter_stat(self_obj, STAT_max_hp)) then begin
+                giq_option(4, SCRIPT_GCLENNY, g_mstr(10001), Node1001, NEUTRAL_REACTION);
             end
         end
-        if (message_str(14, 10008) != 0) then begin
-            giq_option(4, 139, message_str(14, 10008), Node1007, 50);
+        if (g_mstr(10008) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10008), Node1007, NEUTRAL_REACTION);
         end
-        if (message_str(14, 10009) != 0) then begin
-            giq_option(4, 139, message_str(14, 10009), Node1008, 50);
+        if (g_mstr(10009) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10009), Node1008, NEUTRAL_REACTION);
         end
-        if (message_str(14, 10002) != 0) then begin
-            giq_option(4, 139, message_str(14, 10002), Node1002, 50);
+        if (g_mstr(10002) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10002), Node1002, NEUTRAL_REACTION);
         end
     end
     else begin
-        if (message_str(14, 10100) != 0) then begin
-            giq_option(4, 139, message_str(14, 10100), Node1100, 50);
+        if (g_mstr(10100) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10100), Node1100, NEUTRAL_REACTION);
         end
     end
-    if (message_str(14, 10007) != 0) then begin
-        giq_option(4, 139, message_str(14, 10007), Node999, 50);
+    if (g_mstr(10007) != 0) then begin
+        giq_option(4, SCRIPT_GCLENNY, g_mstr(10007), Node999, NEUTRAL_REACTION);
     end
-    if (message_str(14, random(300, 303)) != 0) then begin
-        giq_option(-3, 139, message_str(14, random(300, 303)), Node999, 50);
+    if (g_mstr(random(300, 303)) != 0) then begin
+        giq_option(-3, SCRIPT_GCLENNY, g_mstr(random(300, 303)), Node999, NEUTRAL_REACTION);
     end
     debug_msg("USED PARTY MEMBER OPTIONS");
 end
@@ -2924,73 +2924,73 @@ procedure Node1002
 begin
     set_local_var(10, game_time);
     party_remove(self_obj);
-    gsay_reply(139, 1500);
+    gsay_reply(SCRIPT_GCLENNY, 1500);
     if ((local_var(10) != 0) == 0) then begin
         if (local_var(11) == 0) then begin
             set_local_var(11, 6);
         end
-        if (message_str(14, 10001) != 0) then begin
-            if (get_critter_stat(self_obj, 35) < get_critter_stat(self_obj, 7)) then begin
-                giq_option(4, 139, message_str(14, 10001), Node1001, 50);
+        if (g_mstr(10001) != 0) then begin
+            if (get_critter_stat(self_obj, STAT_current_hp) < get_critter_stat(self_obj, STAT_max_hp)) then begin
+                giq_option(4, SCRIPT_GCLENNY, g_mstr(10001), Node1001, NEUTRAL_REACTION);
             end
         end
-        if (message_str(14, 10008) != 0) then begin
-            giq_option(4, 139, message_str(14, 10008), Node1007, 50);
+        if (g_mstr(10008) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10008), Node1007, NEUTRAL_REACTION);
         end
-        if (message_str(14, 10009) != 0) then begin
-            giq_option(4, 139, message_str(14, 10009), Node1008, 50);
+        if (g_mstr(10009) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10009), Node1008, NEUTRAL_REACTION);
         end
-        if (message_str(14, 10002) != 0) then begin
-            giq_option(4, 139, message_str(14, 10002), Node1002, 50);
+        if (g_mstr(10002) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10002), Node1002, NEUTRAL_REACTION);
         end
     end
     else begin
-        if (message_str(14, 10100) != 0) then begin
-            giq_option(4, 139, message_str(14, 10100), Node1100, 50);
+        if (g_mstr(10100) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10100), Node1100, NEUTRAL_REACTION);
         end
     end
-    if (message_str(14, 10007) != 0) then begin
-        giq_option(4, 139, message_str(14, 10007), Node999, 50);
+    if (g_mstr(10007) != 0) then begin
+        giq_option(4, SCRIPT_GCLENNY, g_mstr(10007), Node999, NEUTRAL_REACTION);
     end
-    if (message_str(14, random(300, 303)) != 0) then begin
-        giq_option(-3, 139, message_str(14, random(300, 303)), Node999, 50);
+    if (g_mstr(random(300, 303)) != 0) then begin
+        giq_option(-3, SCRIPT_GCLENNY, g_mstr(random(300, 303)), Node999, NEUTRAL_REACTION);
     end
     debug_msg("USED PARTY MEMBER OPTIONS");
 end
 
 procedure Node1003
 begin
-    metarule(43, self_obj);
-    gsay_reply(139, 1600);
+    inven_unwield(self_obj);
+    gsay_reply(SCRIPT_GCLENNY, 1600);
     if ((local_var(10) != 0) == 0) then begin
         if (local_var(11) == 0) then begin
             set_local_var(11, 6);
         end
-        if (message_str(14, 10001) != 0) then begin
-            if (get_critter_stat(self_obj, 35) < get_critter_stat(self_obj, 7)) then begin
-                giq_option(4, 139, message_str(14, 10001), Node1001, 50);
+        if (g_mstr(10001) != 0) then begin
+            if (get_critter_stat(self_obj, STAT_current_hp) < get_critter_stat(self_obj, STAT_max_hp)) then begin
+                giq_option(4, SCRIPT_GCLENNY, g_mstr(10001), Node1001, NEUTRAL_REACTION);
             end
         end
-        if (message_str(14, 10008) != 0) then begin
-            giq_option(4, 139, message_str(14, 10008), Node1007, 50);
+        if (g_mstr(10008) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10008), Node1007, NEUTRAL_REACTION);
         end
-        if (message_str(14, 10009) != 0) then begin
-            giq_option(4, 139, message_str(14, 10009), Node1008, 50);
+        if (g_mstr(10009) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10009), Node1008, NEUTRAL_REACTION);
         end
-        if (message_str(14, 10002) != 0) then begin
-            giq_option(4, 139, message_str(14, 10002), Node1002, 50);
+        if (g_mstr(10002) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10002), Node1002, NEUTRAL_REACTION);
         end
     end
     else begin
-        if (message_str(14, 10100) != 0) then begin
-            giq_option(4, 139, message_str(14, 10100), Node1100, 50);
+        if (g_mstr(10100) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10100), Node1100, NEUTRAL_REACTION);
         end
     end
-    if (message_str(14, 10007) != 0) then begin
-        giq_option(4, 139, message_str(14, 10007), Node999, 50);
+    if (g_mstr(10007) != 0) then begin
+        giq_option(4, SCRIPT_GCLENNY, g_mstr(10007), Node999, NEUTRAL_REACTION);
     end
-    if (message_str(14, random(300, 303)) != 0) then begin
-        giq_option(-3, 139, message_str(14, random(300, 303)), Node999, 50);
+    if (g_mstr(random(300, 303)) != 0) then begin
+        giq_option(-3, SCRIPT_GCLENNY, g_mstr(random(300, 303)), Node999, NEUTRAL_REACTION);
     end
     debug_msg("USED PARTY MEMBER OPTIONS");
 end
@@ -2998,36 +2998,36 @@ end
 procedure Node1004
 begin
     set_local_var(11, 3);
-    gsay_reply(139, 1700);
+    gsay_reply(SCRIPT_GCLENNY, 1700);
     if ((local_var(10) != 0) == 0) then begin
         if (local_var(11) == 0) then begin
             set_local_var(11, 6);
         end
-        if (message_str(14, 10001) != 0) then begin
-            if (get_critter_stat(self_obj, 35) < get_critter_stat(self_obj, 7)) then begin
-                giq_option(4, 139, message_str(14, 10001), Node1001, 50);
+        if (g_mstr(10001) != 0) then begin
+            if (get_critter_stat(self_obj, STAT_current_hp) < get_critter_stat(self_obj, STAT_max_hp)) then begin
+                giq_option(4, SCRIPT_GCLENNY, g_mstr(10001), Node1001, NEUTRAL_REACTION);
             end
         end
-        if (message_str(14, 10008) != 0) then begin
-            giq_option(4, 139, message_str(14, 10008), Node1007, 50);
+        if (g_mstr(10008) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10008), Node1007, NEUTRAL_REACTION);
         end
-        if (message_str(14, 10009) != 0) then begin
-            giq_option(4, 139, message_str(14, 10009), Node1008, 50);
+        if (g_mstr(10009) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10009), Node1008, NEUTRAL_REACTION);
         end
-        if (message_str(14, 10002) != 0) then begin
-            giq_option(4, 139, message_str(14, 10002), Node1002, 50);
+        if (g_mstr(10002) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10002), Node1002, NEUTRAL_REACTION);
         end
     end
     else begin
-        if (message_str(14, 10100) != 0) then begin
-            giq_option(4, 139, message_str(14, 10100), Node1100, 50);
+        if (g_mstr(10100) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10100), Node1100, NEUTRAL_REACTION);
         end
     end
-    if (message_str(14, 10007) != 0) then begin
-        giq_option(4, 139, message_str(14, 10007), Node999, 50);
+    if (g_mstr(10007) != 0) then begin
+        giq_option(4, SCRIPT_GCLENNY, g_mstr(10007), Node999, NEUTRAL_REACTION);
     end
-    if (message_str(14, random(300, 303)) != 0) then begin
-        giq_option(-3, 139, message_str(14, random(300, 303)), Node999, 50);
+    if (g_mstr(random(300, 303)) != 0) then begin
+        giq_option(-3, SCRIPT_GCLENNY, g_mstr(random(300, 303)), Node999, NEUTRAL_REACTION);
     end
     debug_msg("USED PARTY MEMBER OPTIONS");
 end
@@ -3035,36 +3035,36 @@ end
 procedure Node1005
 begin
     set_local_var(11, 6);
-    gsay_reply(139, 1800);
+    gsay_reply(SCRIPT_GCLENNY, 1800);
     if ((local_var(10) != 0) == 0) then begin
         if (local_var(11) == 0) then begin
             set_local_var(11, 6);
         end
-        if (message_str(14, 10001) != 0) then begin
-            if (get_critter_stat(self_obj, 35) < get_critter_stat(self_obj, 7)) then begin
-                giq_option(4, 139, message_str(14, 10001), Node1001, 50);
+        if (g_mstr(10001) != 0) then begin
+            if (get_critter_stat(self_obj, STAT_current_hp) < get_critter_stat(self_obj, STAT_max_hp)) then begin
+                giq_option(4, SCRIPT_GCLENNY, g_mstr(10001), Node1001, NEUTRAL_REACTION);
             end
         end
-        if (message_str(14, 10008) != 0) then begin
-            giq_option(4, 139, message_str(14, 10008), Node1007, 50);
+        if (g_mstr(10008) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10008), Node1007, NEUTRAL_REACTION);
         end
-        if (message_str(14, 10009) != 0) then begin
-            giq_option(4, 139, message_str(14, 10009), Node1008, 50);
+        if (g_mstr(10009) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10009), Node1008, NEUTRAL_REACTION);
         end
-        if (message_str(14, 10002) != 0) then begin
-            giq_option(4, 139, message_str(14, 10002), Node1002, 50);
+        if (g_mstr(10002) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10002), Node1002, NEUTRAL_REACTION);
         end
     end
     else begin
-        if (message_str(14, 10100) != 0) then begin
-            giq_option(4, 139, message_str(14, 10100), Node1100, 50);
+        if (g_mstr(10100) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10100), Node1100, NEUTRAL_REACTION);
         end
     end
-    if (message_str(14, 10007) != 0) then begin
-        giq_option(4, 139, message_str(14, 10007), Node999, 50);
+    if (g_mstr(10007) != 0) then begin
+        giq_option(4, SCRIPT_GCLENNY, g_mstr(10007), Node999, NEUTRAL_REACTION);
     end
-    if (message_str(14, random(300, 303)) != 0) then begin
-        giq_option(-3, 139, message_str(14, random(300, 303)), Node999, 50);
+    if (g_mstr(random(300, 303)) != 0) then begin
+        giq_option(-3, SCRIPT_GCLENNY, g_mstr(random(300, 303)), Node999, NEUTRAL_REACTION);
     end
     debug_msg("USED PARTY MEMBER OPTIONS");
 end
@@ -3072,82 +3072,82 @@ end
 procedure Node1006
 begin
     set_local_var(11, 9);
-    gsay_reply(139, 1900);
+    gsay_reply(SCRIPT_GCLENNY, 1900);
     if ((local_var(10) != 0) == 0) then begin
         if (local_var(11) == 0) then begin
             set_local_var(11, 6);
         end
-        if (message_str(14, 10001) != 0) then begin
-            if (get_critter_stat(self_obj, 35) < get_critter_stat(self_obj, 7)) then begin
-                giq_option(4, 139, message_str(14, 10001), Node1001, 50);
+        if (g_mstr(10001) != 0) then begin
+            if (get_critter_stat(self_obj, STAT_current_hp) < get_critter_stat(self_obj, STAT_max_hp)) then begin
+                giq_option(4, SCRIPT_GCLENNY, g_mstr(10001), Node1001, NEUTRAL_REACTION);
             end
         end
-        if (message_str(14, 10008) != 0) then begin
-            giq_option(4, 139, message_str(14, 10008), Node1007, 50);
+        if (g_mstr(10008) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10008), Node1007, NEUTRAL_REACTION);
         end
-        if (message_str(14, 10009) != 0) then begin
-            giq_option(4, 139, message_str(14, 10009), Node1008, 50);
+        if (g_mstr(10009) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10009), Node1008, NEUTRAL_REACTION);
         end
-        if (message_str(14, 10002) != 0) then begin
-            giq_option(4, 139, message_str(14, 10002), Node1002, 50);
+        if (g_mstr(10002) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10002), Node1002, NEUTRAL_REACTION);
         end
     end
     else begin
-        if (message_str(14, 10100) != 0) then begin
-            giq_option(4, 139, message_str(14, 10100), Node1100, 50);
+        if (g_mstr(10100) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10100), Node1100, NEUTRAL_REACTION);
         end
     end
-    if (message_str(14, 10007) != 0) then begin
-        giq_option(4, 139, message_str(14, 10007), Node999, 50);
+    if (g_mstr(10007) != 0) then begin
+        giq_option(4, SCRIPT_GCLENNY, g_mstr(10007), Node999, NEUTRAL_REACTION);
     end
-    if (message_str(14, random(300, 303)) != 0) then begin
-        giq_option(-3, 139, message_str(14, random(300, 303)), Node999, 50);
+    if (g_mstr(random(300, 303)) != 0) then begin
+        giq_option(-3, SCRIPT_GCLENNY, g_mstr(random(300, 303)), Node999, NEUTRAL_REACTION);
     end
     debug_msg("USED PARTY MEMBER OPTIONS");
 end
 
 procedure Node1007
 begin
-    gsay_reply(139, 4000);
-    if (message_str(14, 10004) != 0) then begin
+    gsay_reply(SCRIPT_GCLENNY, 4000);
+    if (g_mstr(10004) != 0) then begin
         if (local_var(11) != 3) then begin
-            giq_option(4, 139, message_str(14, 10004), Node1004, 50);
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10004), Node1004, NEUTRAL_REACTION);
         end
     end
-    if (message_str(14, 10005) != 0) then begin
+    if (g_mstr(10005) != 0) then begin
         if (local_var(11) != 6) then begin
-            giq_option(4, 139, message_str(14, 10005), Node1005, 50);
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10005), Node1005, NEUTRAL_REACTION);
         end
     end
-    if (message_str(14, 10006) != 0) then begin
+    if (g_mstr(10006) != 0) then begin
         if (local_var(11) != 9) then begin
-            giq_option(4, 139, message_str(14, 10006), Node1006, 50);
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10006), Node1006, NEUTRAL_REACTION);
         end
     end
-    if (message_str(14, 10010) != 0) then begin
-        giq_option(4, 139, message_str(14, 10010), Node1000, 50);
+    if (g_mstr(10010) != 0) then begin
+        giq_option(4, SCRIPT_GCLENNY, g_mstr(10010), Node1000, NEUTRAL_REACTION);
     end
     debug_msg("USED PARTY FOLLOW OPTIONS");
 end
 
 procedure Node1008
 begin
-    gsay_reply(139, 4001);
-    if (message_str(14, 10013) != 0) then begin
-        giq_option(4, 139, message_str(14, 10013), Node1010, 50);
+    gsay_reply(SCRIPT_GCLENNY, 4001);
+    if (g_mstr(10013) != 0) then begin
+        giq_option(4, SCRIPT_GCLENNY, g_mstr(10013), Node1010, NEUTRAL_REACTION);
     end
-    if (message_str(14, 10003) != 0) then begin
+    if (g_mstr(10003) != 0) then begin
         if ((obj_item_subtype(critter_inven_obj(self_obj, 1)) == 3) or (obj_item_subtype(critter_inven_obj(self_obj, 2)) == 3)) then begin
-            giq_option(4, 139, message_str(14, 10003), Node1003, 50);
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10003), Node1003, NEUTRAL_REACTION);
         end
     end
-    if (message_str(14, 10012) != 0) then begin
+    if (g_mstr(10012) != 0) then begin
         if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin
-            giq_option(4, 139, message_str(14, 10012), Node1009, 50);
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10012), Node1009, NEUTRAL_REACTION);
         end
     end
-    if (message_str(14, 10011) != 0) then begin
-        giq_option(4, 139, message_str(14, 10011), Node1000, 50);
+    if (g_mstr(10011) != 0) then begin
+        giq_option(4, SCRIPT_GCLENNY, g_mstr(10011), Node1000, NEUTRAL_REACTION);
     end
     debug_msg("USED PARTY GEAR OPTIONS");
 end
@@ -3160,148 +3160,148 @@ begin
         rm_obj_from_inven(self_obj, restock_obj);
         add_obj_to_inven(self_obj, restock_obj);
     end
-    gsay_reply(139, 4003);
+    gsay_reply(SCRIPT_GCLENNY, 4003);
     if ((local_var(10) != 0) == 0) then begin
         if (local_var(11) == 0) then begin
             set_local_var(11, 6);
         end
-        if (message_str(14, 10001) != 0) then begin
-            if (get_critter_stat(self_obj, 35) < get_critter_stat(self_obj, 7)) then begin
-                giq_option(4, 139, message_str(14, 10001), Node1001, 50);
+        if (g_mstr(10001) != 0) then begin
+            if (get_critter_stat(self_obj, STAT_current_hp) < get_critter_stat(self_obj, STAT_max_hp)) then begin
+                giq_option(4, SCRIPT_GCLENNY, g_mstr(10001), Node1001, NEUTRAL_REACTION);
             end
         end
-        if (message_str(14, 10008) != 0) then begin
-            giq_option(4, 139, message_str(14, 10008), Node1007, 50);
+        if (g_mstr(10008) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10008), Node1007, NEUTRAL_REACTION);
         end
-        if (message_str(14, 10009) != 0) then begin
-            giq_option(4, 139, message_str(14, 10009), Node1008, 50);
+        if (g_mstr(10009) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10009), Node1008, NEUTRAL_REACTION);
         end
-        if (message_str(14, 10002) != 0) then begin
-            giq_option(4, 139, message_str(14, 10002), Node1002, 50);
+        if (g_mstr(10002) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10002), Node1002, NEUTRAL_REACTION);
         end
     end
     else begin
-        if (message_str(14, 10100) != 0) then begin
-            giq_option(4, 139, message_str(14, 10100), Node1100, 50);
+        if (g_mstr(10100) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10100), Node1100, NEUTRAL_REACTION);
         end
     end
-    if (message_str(14, 10007) != 0) then begin
-        giq_option(4, 139, message_str(14, 10007), Node999, 50);
+    if (g_mstr(10007) != 0) then begin
+        giq_option(4, SCRIPT_GCLENNY, g_mstr(10007), Node999, NEUTRAL_REACTION);
     end
-    if (message_str(14, random(300, 303)) != 0) then begin
-        giq_option(-3, 139, message_str(14, random(300, 303)), Node999, 50);
+    if (g_mstr(random(300, 303)) != 0) then begin
+        giq_option(-3, SCRIPT_GCLENNY, g_mstr(random(300, 303)), Node999, NEUTRAL_REACTION);
     end
     debug_msg("USED PARTY MEMBER OPTIONS");
 end
 
 procedure Node1010
 begin
-    gsay_reply(139, 4002);
+    gsay_reply(SCRIPT_GCLENNY, 4002);
     if ((local_var(10) != 0) == 0) then begin
         if (local_var(11) == 0) then begin
             set_local_var(11, 6);
         end
-        if (message_str(14, 10001) != 0) then begin
-            if (get_critter_stat(self_obj, 35) < get_critter_stat(self_obj, 7)) then begin
-                giq_option(4, 139, message_str(14, 10001), Node1001, 50);
+        if (g_mstr(10001) != 0) then begin
+            if (get_critter_stat(self_obj, STAT_current_hp) < get_critter_stat(self_obj, STAT_max_hp)) then begin
+                giq_option(4, SCRIPT_GCLENNY, g_mstr(10001), Node1001, NEUTRAL_REACTION);
             end
         end
-        if (message_str(14, 10008) != 0) then begin
-            giq_option(4, 139, message_str(14, 10008), Node1007, 50);
+        if (g_mstr(10008) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10008), Node1007, NEUTRAL_REACTION);
         end
-        if (message_str(14, 10009) != 0) then begin
-            giq_option(4, 139, message_str(14, 10009), Node1008, 50);
+        if (g_mstr(10009) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10009), Node1008, NEUTRAL_REACTION);
         end
-        if (message_str(14, 10002) != 0) then begin
-            giq_option(4, 139, message_str(14, 10002), Node1002, 50);
+        if (g_mstr(10002) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10002), Node1002, NEUTRAL_REACTION);
         end
     end
     else begin
-        if (message_str(14, 10100) != 0) then begin
-            giq_option(4, 139, message_str(14, 10100), Node1100, 50);
+        if (g_mstr(10100) != 0) then begin
+            giq_option(4, SCRIPT_GCLENNY, g_mstr(10100), Node1100, NEUTRAL_REACTION);
         end
     end
-    if (message_str(14, 10007) != 0) then begin
-        giq_option(4, 139, message_str(14, 10007), Node999, 50);
+    if (g_mstr(10007) != 0) then begin
+        giq_option(4, SCRIPT_GCLENNY, g_mstr(10007), Node999, NEUTRAL_REACTION);
     end
-    if (message_str(14, random(300, 303)) != 0) then begin
-        giq_option(-3, 139, message_str(14, random(300, 303)), Node999, 50);
+    if (g_mstr(random(300, 303)) != 0) then begin
+        giq_option(-3, SCRIPT_GCLENNY, g_mstr(random(300, 303)), Node999, NEUTRAL_REACTION);
     end
     debug_msg("USED PARTY MEMBER OPTIONS");
 end
 
 procedure Node1100
 begin
-    if ((get_critter_stat(dude_obj, 3) <= 1) and (has_trait(0, dude_obj, 39) == 0)) then begin
+    if ((dude_charisma <= 1) and (has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality) == 0)) then begin
         if (party_member_obj(obj_pid(self_obj)) != 0) then begin
-            debug_msg("abandon party: " + obj_name(self_obj));
+            debug_msg("abandon party: " + self_name);
             party_remove(self_obj);
         end
         if ((obj_pid(self_obj) == 16777380) or (obj_pid(self_obj) == 16777379)) then begin
             debug_msg("start: set_dude_was_married");
-            if ((global_var(6) != 0) and ((global_var(449) != 0) == 0)) then begin
-                debug_msg("   GVAR_PLAYER_WAS_MARRIED before == " + global_var(449));
-                set_global_var(449, global_var(6));
-                debug_msg("   GVAR_PLAYER_WAS_MARRIED after == " + global_var(449));
-                set_global_var(6, 0);
+            if ((global_var(GVAR_PLAYER_MARRIED) != 0) and ((global_var(GVAR_PLAYER_WAS_MARRIED) != 0) == 0)) then begin
+                debug_msg("   GVAR_PLAYER_WAS_MARRIED before == " + global_var(GVAR_PLAYER_WAS_MARRIED));
+                set_global_var(GVAR_PLAYER_WAS_MARRIED, global_var(GVAR_PLAYER_MARRIED));
+                debug_msg("   GVAR_PLAYER_WAS_MARRIED after == " + global_var(GVAR_PLAYER_WAS_MARRIED));
+                set_global_var(GVAR_PLAYER_MARRIED, 0);
             end
             debug_msg("finished: set_dude_was_married");
         end
-        if ((local_var(12) != -1) and (has_trait(1, self_obj, 6) == 0)) then begin
-            critter_add_trait(self_obj, 1, 6, local_var(12));
+        if ((local_var(12) != -1) and (has_trait(TRAIT_OBJECT, self_obj, OBJECT_TEAM_NUM) == 0)) then begin
+            critter_add_trait(self_obj, TRAIT_OBJECT, OBJECT_TEAM_NUM, local_var(12));
             set_local_var(12, -1);
         end
-        debug_msg("" + obj_name(self_obj) + " has abandoned the party");
-        gsay_reply(139, 371);
-        giq_option(1, 139, message_str(14, 10007), Node999, 50);
+        debug_msg("" + self_name + " has abandoned the party");
+        gsay_reply(SCRIPT_GCLENNY, 371);
+        giq_option(1, SCRIPT_GCLENNY, g_mstr(10007), Node999, NEUTRAL_REACTION);
     end
     else begin
-        if (((metarule(16, 0) - 1) >= (floor(get_critter_stat(dude_obj, 3) / 2) + has_trait(0, dude_obj, 98) + (20 * has_trait(0, dude_obj, 39)))) or ((metarule(16, 0) - 1) >= (5 + (20 * has_trait(0, dude_obj, 39))))) then begin
+        if (((party_member_count(0) - 1) >= (floor(dude_charisma / 2) + has_trait(TRAIT_PERK, dude_obj, PERK_magnetic_personality_perk) + (20 * has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality)))) or ((party_member_count(0) - 1) >= (5 + (20 * has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality))))) then begin
             if (party_member_obj(obj_pid(self_obj)) != 0) then begin
-                debug_msg("abandon party: " + obj_name(self_obj));
+                debug_msg("abandon party: " + self_name);
                 party_remove(self_obj);
             end
             if ((obj_pid(self_obj) == 16777380) or (obj_pid(self_obj) == 16777379)) then begin
                 debug_msg("start: set_dude_was_married");
-                if ((global_var(6) != 0) and ((global_var(449) != 0) == 0)) then begin
-                    debug_msg("   GVAR_PLAYER_WAS_MARRIED before == " + global_var(449));
-                    set_global_var(449, global_var(6));
-                    debug_msg("   GVAR_PLAYER_WAS_MARRIED after == " + global_var(449));
-                    set_global_var(6, 0);
+                if ((global_var(GVAR_PLAYER_MARRIED) != 0) and ((global_var(GVAR_PLAYER_WAS_MARRIED) != 0) == 0)) then begin
+                    debug_msg("   GVAR_PLAYER_WAS_MARRIED before == " + global_var(GVAR_PLAYER_WAS_MARRIED));
+                    set_global_var(GVAR_PLAYER_WAS_MARRIED, global_var(GVAR_PLAYER_MARRIED));
+                    debug_msg("   GVAR_PLAYER_WAS_MARRIED after == " + global_var(GVAR_PLAYER_WAS_MARRIED));
+                    set_global_var(GVAR_PLAYER_MARRIED, 0);
                 end
                 debug_msg("finished: set_dude_was_married");
             end
-            if ((local_var(12) != -1) and (has_trait(1, self_obj, 6) == 0)) then begin
-                critter_add_trait(self_obj, 1, 6, local_var(12));
+            if ((local_var(12) != -1) and (has_trait(TRAIT_OBJECT, self_obj, OBJECT_TEAM_NUM) == 0)) then begin
+                critter_add_trait(self_obj, TRAIT_OBJECT, OBJECT_TEAM_NUM, local_var(12));
                 set_local_var(12, -1);
             end
-            debug_msg("" + obj_name(self_obj) + " has abandoned the party");
-            gsay_reply(139, 2000);
-            giq_option(1, 139, message_str(14, 10007), Node999, 50);
+            debug_msg("" + self_name + " has abandoned the party");
+            gsay_reply(SCRIPT_GCLENNY, 2000);
+            giq_option(1, SCRIPT_GCLENNY, g_mstr(10007), Node999, NEUTRAL_REACTION);
         end
         else begin
-            if ((global_var(51) <= -15) and (has_trait(0, dude_obj, 39) == 0)) then begin
+            if ((global_var(GVAR_TOWN_REP_GECKO) <= -15) and (has_trait(TRAIT_PERK, dude_obj, PERK_cult_of_personality) == 0)) then begin
                 if (party_member_obj(obj_pid(self_obj)) != 0) then begin
-                    debug_msg("abandon party: " + obj_name(self_obj));
+                    debug_msg("abandon party: " + self_name);
                     party_remove(self_obj);
                 end
                 if ((obj_pid(self_obj) == 16777380) or (obj_pid(self_obj) == 16777379)) then begin
                     debug_msg("start: set_dude_was_married");
-                    if ((global_var(6) != 0) and ((global_var(449) != 0) == 0)) then begin
-                        debug_msg("   GVAR_PLAYER_WAS_MARRIED before == " + global_var(449));
-                        set_global_var(449, global_var(6));
-                        debug_msg("   GVAR_PLAYER_WAS_MARRIED after == " + global_var(449));
-                        set_global_var(6, 0);
+                    if ((global_var(GVAR_PLAYER_MARRIED) != 0) and ((global_var(GVAR_PLAYER_WAS_MARRIED) != 0) == 0)) then begin
+                        debug_msg("   GVAR_PLAYER_WAS_MARRIED before == " + global_var(GVAR_PLAYER_WAS_MARRIED));
+                        set_global_var(GVAR_PLAYER_WAS_MARRIED, global_var(GVAR_PLAYER_MARRIED));
+                        debug_msg("   GVAR_PLAYER_WAS_MARRIED after == " + global_var(GVAR_PLAYER_WAS_MARRIED));
+                        set_global_var(GVAR_PLAYER_MARRIED, 0);
                     end
                     debug_msg("finished: set_dude_was_married");
                 end
-                if ((local_var(12) != -1) and (has_trait(1, self_obj, 6) == 0)) then begin
-                    critter_add_trait(self_obj, 1, 6, local_var(12));
+                if ((local_var(12) != -1) and (has_trait(TRAIT_OBJECT, self_obj, OBJECT_TEAM_NUM) == 0)) then begin
+                    critter_add_trait(self_obj, TRAIT_OBJECT, OBJECT_TEAM_NUM, local_var(12));
                     set_local_var(12, -1);
                 end
-                debug_msg("" + obj_name(self_obj) + " has abandoned the party");
-                gsay_reply(139, 2100);
-                giq_option(1, 139, message_str(14, 10007), Node999, 50);
+                debug_msg("" + self_name + " has abandoned the party");
+                gsay_reply(SCRIPT_GCLENNY, 2100);
+                giq_option(1, SCRIPT_GCLENNY, g_mstr(10007), Node999, NEUTRAL_REACTION);
             end
             else begin
                 set_local_var(10, 0);
@@ -3310,47 +3310,46 @@ begin
                         set_local_var(11, 6);
                     end
                     set_local_var(10, 0);
-                    if (has_trait(1, self_obj, 6) != 0) then begin
-                        set_local_var(12, has_trait(1, self_obj, 6));
+                    if (has_trait(TRAIT_OBJECT, self_obj, OBJECT_TEAM_NUM) != 0) then begin
+                        set_local_var(12, has_trait(TRAIT_OBJECT, self_obj, OBJECT_TEAM_NUM));
                     end
-                    critter_add_trait(self_obj, 1, 6, 0);
+                    critter_add_trait(self_obj, TRAIT_OBJECT, OBJECT_TEAM_NUM, 0);
                     party_add(self_obj);
                 end
-                debug_msg("join party: " + obj_name(self_obj));
-                gsay_reply(139, 2200);
+                debug_msg("join party: " + self_name);
+                gsay_reply(SCRIPT_GCLENNY, 2200);
                 if ((local_var(10) != 0) == 0) then begin
                     if (local_var(11) == 0) then begin
                         set_local_var(11, 6);
                     end
-                    if (message_str(14, 10001) != 0) then begin
-                        if (get_critter_stat(self_obj, 35) < get_critter_stat(self_obj, 7)) then begin
-                            giq_option(4, 139, message_str(14, 10001), Node1001, 50);
+                    if (g_mstr(10001) != 0) then begin
+                        if (get_critter_stat(self_obj, STAT_current_hp) < get_critter_stat(self_obj, STAT_max_hp)) then begin
+                            giq_option(4, SCRIPT_GCLENNY, g_mstr(10001), Node1001, NEUTRAL_REACTION);
                         end
                     end
-                    if (message_str(14, 10008) != 0) then begin
-                        giq_option(4, 139, message_str(14, 10008), Node1007, 50);
+                    if (g_mstr(10008) != 0) then begin
+                        giq_option(4, SCRIPT_GCLENNY, g_mstr(10008), Node1007, NEUTRAL_REACTION);
                     end
-                    if (message_str(14, 10009) != 0) then begin
-                        giq_option(4, 139, message_str(14, 10009), Node1008, 50);
+                    if (g_mstr(10009) != 0) then begin
+                        giq_option(4, SCRIPT_GCLENNY, g_mstr(10009), Node1008, NEUTRAL_REACTION);
                     end
-                    if (message_str(14, 10002) != 0) then begin
-                        giq_option(4, 139, message_str(14, 10002), Node1002, 50);
+                    if (g_mstr(10002) != 0) then begin
+                        giq_option(4, SCRIPT_GCLENNY, g_mstr(10002), Node1002, NEUTRAL_REACTION);
                     end
                 end
                 else begin
-                    if (message_str(14, 10100) != 0) then begin
-                        giq_option(4, 139, message_str(14, 10100), Node1100, 50);
+                    if (g_mstr(10100) != 0) then begin
+                        giq_option(4, SCRIPT_GCLENNY, g_mstr(10100), Node1100, NEUTRAL_REACTION);
                     end
                 end
-                if (message_str(14, 10007) != 0) then begin
-                    giq_option(4, 139, message_str(14, 10007), Node999, 50);
+                if (g_mstr(10007) != 0) then begin
+                    giq_option(4, SCRIPT_GCLENNY, g_mstr(10007), Node999, NEUTRAL_REACTION);
                 end
-                if (message_str(14, random(300, 303)) != 0) then begin
-                    giq_option(-3, 139, message_str(14, random(300, 303)), Node999, 50);
+                if (g_mstr(random(300, 303)) != 0) then begin
+                    giq_option(-3, SCRIPT_GCLENNY, g_mstr(random(300, 303)), Node999, NEUTRAL_REACTION);
                 end
                 debug_msg("USED PARTY MEMBER OPTIONS");
             end
         end
     end
 end
-
