diff --git a/Mods/MegaMod/Original/NCPRZFTR.ssl b/Mods/MegaMod/ReDefine/NCPRZFTR.ssl
index c81aad9..01b1be4 100644
--- a/Mods/MegaMod/Original/NCPRZFTR.ssl
+++ b/Mods/MegaMod/ReDefine/NCPRZFTR.ssl
@@ -169,53 +169,53 @@ end
 procedure ChooseFromList
 begin
     variable LVar0 := 0;
-    gsay_reply(1088, stored_msg);
-    if (message_str(353, top_msg - 1) != "") then begin
-        giq_option(1, 1088, message_str(353, 150), CLICK_PREV, 50);
+    Reply(stored_msg);
+    if (message_str(SCRIPT_NEWR1, top_msg - 1) != "") then begin
+        giq_option(1, NAME, message_str(SCRIPT_NEWR1, 150), CLICK_PREV, NEUTRAL_REACTION);
     end
     if (LVar0 == 0) then begin
-        if (message_str(353, top_msg + 0) != "") then begin
-            giq_option(1, 1088, message_str(353, top_msg + 0), CLICK_0, 50);
+        if (message_str(SCRIPT_NEWR1, top_msg + 0) != "") then begin
+            giq_option(1, NAME, message_str(SCRIPT_NEWR1, top_msg + 0), CLICK_0, NEUTRAL_REACTION);
         end
         else begin
             LVar0 := 1;
         end
     end
     if (LVar0 == 0) then begin
-        if (message_str(353, top_msg + 1) != "") then begin
-            giq_option(1, 1088, message_str(353, top_msg + 1), CLICK_1, 50);
+        if (message_str(SCRIPT_NEWR1, top_msg + 1) != "") then begin
+            giq_option(1, NAME, message_str(SCRIPT_NEWR1, top_msg + 1), CLICK_1, NEUTRAL_REACTION);
         end
         else begin
             LVar0 := 1;
         end
     end
     if (LVar0 == 0) then begin
-        if (message_str(353, top_msg + 2) != "") then begin
-            giq_option(1, 1088, message_str(353, top_msg + 2), CLICK_2, 50);
+        if (message_str(SCRIPT_NEWR1, top_msg + 2) != "") then begin
+            giq_option(1, NAME, message_str(SCRIPT_NEWR1, top_msg + 2), CLICK_2, NEUTRAL_REACTION);
         end
         else begin
             LVar0 := 1;
         end
     end
     if (LVar0 == 0) then begin
-        if (message_str(353, top_msg + 3) != "") then begin
-            giq_option(1, 1088, message_str(353, top_msg + 3), CLICK_3, 50);
+        if (message_str(SCRIPT_NEWR1, top_msg + 3) != "") then begin
+            giq_option(1, NAME, message_str(SCRIPT_NEWR1, top_msg + 3), CLICK_3, NEUTRAL_REACTION);
         end
         else begin
             LVar0 := 1;
         end
     end
     if (LVar0 == 0) then begin
-        if (message_str(353, top_msg + 4) != "") then begin
-            giq_option(1, 1088, message_str(353, top_msg + 4), CLICK_4, 50);
+        if (message_str(SCRIPT_NEWR1, top_msg + 4) != "") then begin
+            giq_option(1, NAME, message_str(SCRIPT_NEWR1, top_msg + 4), CLICK_4, NEUTRAL_REACTION);
         end
         else begin
             LVar0 := 1;
         end
     end
     if (LVar0 == 0) then begin
-        if (message_str(353, top_msg + 5) != "") then begin
-            giq_option(1, 1088, message_str(353, 151), CLICK_MORE, 50);
+        if (message_str(SCRIPT_NEWR1, top_msg + 5) != "") then begin
+            giq_option(1, NAME, message_str(SCRIPT_NEWR1, 151), CLICK_MORE, NEUTRAL_REACTION);
         end
     end
 end
@@ -264,46 +264,46 @@ end
 
 procedure start
 begin
-    if (((global_var(495) bwand 8192) != 0) == 0) then begin
+    if (((global_var(GVAR_NEW_RENO_FLAG_3) bwand 8192) != 0) == 0) then begin
         prize_fighter_obj := self_obj;
     end
 end
 
 procedure critter_p_proc
 begin
-    if (global_var(507) != 0) then begin
+    if (global_var(GVAR_NEW_RENO_ROUND_TIME) != 0) then begin
         debug_msg("prizefighter critter_p_proc");
         if (critter_is_fleeing(self_obj)) then begin
             if (2 != 0) then begin
-                if (global_var(510) == 0) then begin
-                    set_global_var(510, 2);
+                if (global_var(GVAR_NEW_RENO_FIGHT_STATUS) == 0) then begin
+                    set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, 2);
                     last_timed_obj := announcer_obj;
                     last_timed_param := last_timed_param;
-                    metarule3(100, announcer_obj, 200, 0);
+                    rm_fixed_timer_event(announcer_obj, 200);
                     add_timer_event(announcer_obj, game_ticks(5), 200);
                 end
             end
             else begin
-                set_global_var(510, 0);
+                set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, 0);
             end
-            debug_msg("set_fight_status(" + 2 + ") == " + global_var(510));
+            debug_msg("set_fight_status(" + 2 + ") == " + global_var(GVAR_NEW_RENO_FIGHT_STATUS));
             debug_msg("call fight over: start");
             gfade_out(10);
-            set_global_var(507, 0);
-            if (cur_map_index == 55) then begin
+            set_global_var(GVAR_NEW_RENO_ROUND_TIME, 0);
+            if (CUR_MAP_NEWR2) then begin
                 if (announcer_obj != 0) then begin
                     last_timed_obj := announcer_obj;
                     last_timed_param := last_timed_param;
-                    metarule3(100, announcer_obj, 48, 0);
+                    rm_fixed_timer_event(announcer_obj, 48);
                     add_timer_event(announcer_obj, game_ticks(0), 48);
                 end
             end
-            set_global_var(694, global_var(694) bwor 2);
+            set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
             move_to(dude_obj, 25076, elevation(self_obj));
             anim(dude_obj, 1000, 3);
             if (prize_fighter_obj != 0) then begin
-                if ((global_var(495) bwand 8192) != 0) then begin
-                    if (has_trait(1, prize_fighter_obj, 666) == 1) then begin
+                if ((global_var(GVAR_NEW_RENO_FLAG_3) bwand 8192) != 0) then begin
+                    if (obj_is_visible_flag(prize_fighter_obj) == 1) then begin
                         set_obj_visibility(prize_fighter_obj, 1);
                     end
                     prize_fighter_obj := 0;
@@ -315,57 +315,57 @@ begin
                     anim(prize_fighter_obj, 1000, 3);
                 end
             end
-            if (has_trait(1, ring_girl_obj, 666) == 1) then begin
+            if (obj_is_visible_flag(ring_girl_obj) == 1) then begin
                 set_obj_visibility(ring_girl_obj, 1);
             end
-            if (has_trait(1, announcer_obj, 666) == 0) then begin
+            if (obj_is_visible_flag(announcer_obj) == 0) then begin
                 set_obj_visibility(announcer_obj, 0);
             end
-            if (cur_map_index == 55) then begin
+            if (CUR_MAP_NEWR2) then begin
                 if (announcer_obj != 0) then begin
                     last_timed_obj := announcer_obj;
                     last_timed_param := last_timed_param;
-                    metarule3(100, announcer_obj, 48, 0);
+                    rm_fixed_timer_event(announcer_obj, 48);
                     add_timer_event(announcer_obj, game_ticks(0), 48);
                 end
             end
-            set_global_var(694, global_var(694) bwor 2);
+            set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
             gfade_in(10);
             debug_msg("call fight over: end");
-            debug_msg("win boxing match: " + obj_name(self_obj));
+            debug_msg("win boxing match: " + self_name);
         end
         else begin
             if (critter_state(self_obj) bwand 2) then begin
                 if (1 != 0) then begin
-                    if (global_var(510) == 0) then begin
-                        set_global_var(510, 1);
+                    if (global_var(GVAR_NEW_RENO_FIGHT_STATUS) == 0) then begin
+                        set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, 1);
                         last_timed_obj := announcer_obj;
                         last_timed_param := last_timed_param;
-                        metarule3(100, announcer_obj, 200, 0);
+                        rm_fixed_timer_event(announcer_obj, 200);
                         add_timer_event(announcer_obj, game_ticks(5), 200);
                     end
                 end
                 else begin
-                    set_global_var(510, 0);
+                    set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, 0);
                 end
-                debug_msg("set_fight_status(" + 1 + ") == " + global_var(510));
+                debug_msg("set_fight_status(" + 1 + ") == " + global_var(GVAR_NEW_RENO_FIGHT_STATUS));
                 debug_msg("call fight over: start");
                 gfade_out(10);
-                set_global_var(507, 0);
-                if (cur_map_index == 55) then begin
+                set_global_var(GVAR_NEW_RENO_ROUND_TIME, 0);
+                if (CUR_MAP_NEWR2) then begin
                     if (announcer_obj != 0) then begin
                         last_timed_obj := announcer_obj;
                         last_timed_param := last_timed_param;
-                        metarule3(100, announcer_obj, 48, 0);
+                        rm_fixed_timer_event(announcer_obj, 48);
                         add_timer_event(announcer_obj, game_ticks(0), 48);
                     end
                 end
-                set_global_var(694, global_var(694) bwor 2);
+                set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
                 move_to(dude_obj, 25076, elevation(self_obj));
                 anim(dude_obj, 1000, 3);
                 if (prize_fighter_obj != 0) then begin
-                    if ((global_var(495) bwand 8192) != 0) then begin
-                        if (has_trait(1, prize_fighter_obj, 666) == 1) then begin
+                    if ((global_var(GVAR_NEW_RENO_FLAG_3) bwand 8192) != 0) then begin
+                        if (obj_is_visible_flag(prize_fighter_obj) == 1) then begin
                             set_obj_visibility(prize_fighter_obj, 1);
                         end
                         prize_fighter_obj := 0;
@@ -377,57 +377,57 @@ begin
                         anim(prize_fighter_obj, 1000, 3);
                     end
                 end
-                if (has_trait(1, ring_girl_obj, 666) == 1) then begin
+                if (obj_is_visible_flag(ring_girl_obj) == 1) then begin
                     set_obj_visibility(ring_girl_obj, 1);
                 end
-                if (has_trait(1, announcer_obj, 666) == 0) then begin
+                if (obj_is_visible_flag(announcer_obj) == 0) then begin
                     set_obj_visibility(announcer_obj, 0);
                 end
-                if (cur_map_index == 55) then begin
+                if (CUR_MAP_NEWR2) then begin
                     if (announcer_obj != 0) then begin
                         last_timed_obj := announcer_obj;
                         last_timed_param := last_timed_param;
-                        metarule3(100, announcer_obj, 48, 0);
+                        rm_fixed_timer_event(announcer_obj, 48);
                         add_timer_event(announcer_obj, game_ticks(0), 48);
                     end
                 end
-                set_global_var(694, global_var(694) bwor 2);
+                set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
                 gfade_in(10);
                 debug_msg("call fight over: end");
-                debug_msg("win boxing match: " + obj_name(self_obj));
+                debug_msg("win boxing match: " + self_name);
             end
             else begin
                 if (critter_state(dude_obj) bwand 2) then begin
                     if (-1 != 0) then begin
-                        if (global_var(510) == 0) then begin
-                            set_global_var(510, -1);
+                        if (global_var(GVAR_NEW_RENO_FIGHT_STATUS) == 0) then begin
+                            set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, -1);
                             last_timed_obj := announcer_obj;
                             last_timed_param := last_timed_param;
-                            metarule3(100, announcer_obj, 200, 0);
+                            rm_fixed_timer_event(announcer_obj, 200);
                             add_timer_event(announcer_obj, game_ticks(5), 200);
                         end
                     end
                     else begin
-                        set_global_var(510, 0);
+                        set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, 0);
                     end
-                    debug_msg("set_fight_status(" + -1 + ") == " + global_var(510));
+                    debug_msg("set_fight_status(" + -1 + ") == " + global_var(GVAR_NEW_RENO_FIGHT_STATUS));
                     debug_msg("call fight over: start");
                     gfade_out(10);
-                    set_global_var(507, 0);
-                    if (cur_map_index == 55) then begin
+                    set_global_var(GVAR_NEW_RENO_ROUND_TIME, 0);
+                    if (CUR_MAP_NEWR2) then begin
                         if (announcer_obj != 0) then begin
                             last_timed_obj := announcer_obj;
                             last_timed_param := last_timed_param;
-                            metarule3(100, announcer_obj, 48, 0);
+                            rm_fixed_timer_event(announcer_obj, 48);
                             add_timer_event(announcer_obj, game_ticks(0), 48);
                         end
                     end
-                    set_global_var(694, global_var(694) bwor 2);
+                    set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
                     move_to(dude_obj, 25076, elevation(self_obj));
                     anim(dude_obj, 1000, 3);
                     if (prize_fighter_obj != 0) then begin
-                        if ((global_var(495) bwand 8192) != 0) then begin
-                            if (has_trait(1, prize_fighter_obj, 666) == 1) then begin
+                        if ((global_var(GVAR_NEW_RENO_FLAG_3) bwand 8192) != 0) then begin
+                            if (obj_is_visible_flag(prize_fighter_obj) == 1) then begin
                                 set_obj_visibility(prize_fighter_obj, 1);
                             end
                             prize_fighter_obj := 0;
@@ -439,27 +439,27 @@ begin
                             anim(prize_fighter_obj, 1000, 3);
                         end
                     end
-                    if (has_trait(1, ring_girl_obj, 666) == 1) then begin
+                    if (obj_is_visible_flag(ring_girl_obj) == 1) then begin
                         set_obj_visibility(ring_girl_obj, 1);
                     end
-                    if (has_trait(1, announcer_obj, 666) == 0) then begin
+                    if (obj_is_visible_flag(announcer_obj) == 0) then begin
                         set_obj_visibility(announcer_obj, 0);
                     end
-                    if (cur_map_index == 55) then begin
+                    if (CUR_MAP_NEWR2) then begin
                         if (announcer_obj != 0) then begin
                             last_timed_obj := announcer_obj;
                             last_timed_param := last_timed_param;
-                            metarule3(100, announcer_obj, 48, 0);
+                            rm_fixed_timer_event(announcer_obj, 48);
                             add_timer_event(announcer_obj, game_ticks(0), 48);
                         end
                     end
-                    set_global_var(694, global_var(694) bwor 2);
+                    set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
                     gfade_in(10);
                     debug_msg("call fight over: end");
-                    debug_msg("lose boxing match: " + obj_name(self_obj));
+                    debug_msg("lose boxing match: " + self_name);
                 end
                 else begin
-                    attack_complex(dude_obj, 0, 1, 0, 0, 30000, 0, 0);
+                    attack(dude_obj);
                 end
             end
         end
@@ -470,49 +470,49 @@ procedure destroy_p_proc
 begin
     debug_msg("prizefighter destroy_p_proc");
     if (obj_pid(self_obj) == 16777649) then begin
-        set_global_var(495, global_var(495) bwor 512);
+        set_global_var(GVAR_NEW_RENO_FLAG_3, global_var(GVAR_NEW_RENO_FLAG_3) bwor 512);
     end
     else begin
         if (obj_pid(self_obj) == 16777648) then begin
-            set_global_var(495, global_var(495) bwor 1024);
+            set_global_var(GVAR_NEW_RENO_FLAG_3, global_var(GVAR_NEW_RENO_FLAG_3) bwor 1024);
         end
         else begin
             if (obj_pid(self_obj) == 16777647) then begin
-                set_global_var(495, global_var(495) bwor 2048);
+                set_global_var(GVAR_NEW_RENO_FLAG_3, global_var(GVAR_NEW_RENO_FLAG_3) bwor 2048);
             end
         end
     end
-    set_global_var(495, global_var(495) bwor 8192);
+    set_global_var(GVAR_NEW_RENO_FLAG_3, global_var(GVAR_NEW_RENO_FLAG_3) bwor 8192);
     if (1 != 0) then begin
-        if (global_var(510) == 0) then begin
-            set_global_var(510, 1);
+        if (global_var(GVAR_NEW_RENO_FIGHT_STATUS) == 0) then begin
+            set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, 1);
             last_timed_obj := announcer_obj;
             last_timed_param := last_timed_param;
-            metarule3(100, announcer_obj, 200, 0);
+            rm_fixed_timer_event(announcer_obj, 200);
             add_timer_event(announcer_obj, game_ticks(5), 200);
         end
     end
     else begin
-        set_global_var(510, 0);
+        set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, 0);
     end
-    debug_msg("set_fight_status(" + 1 + ") == " + global_var(510));
+    debug_msg("set_fight_status(" + 1 + ") == " + global_var(GVAR_NEW_RENO_FIGHT_STATUS));
     debug_msg("call fight over: start");
     gfade_out(10);
-    set_global_var(507, 0);
-    if (cur_map_index == 55) then begin
+    set_global_var(GVAR_NEW_RENO_ROUND_TIME, 0);
+    if (CUR_MAP_NEWR2) then begin
         if (announcer_obj != 0) then begin
             last_timed_obj := announcer_obj;
             last_timed_param := last_timed_param;
-            metarule3(100, announcer_obj, 48, 0);
+            rm_fixed_timer_event(announcer_obj, 48);
             add_timer_event(announcer_obj, game_ticks(0), 48);
         end
     end
-    set_global_var(694, global_var(694) bwor 2);
+    set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
     move_to(dude_obj, 25076, elevation(self_obj));
     anim(dude_obj, 1000, 3);
     if (prize_fighter_obj != 0) then begin
-        if ((global_var(495) bwand 8192) != 0) then begin
-            if (has_trait(1, prize_fighter_obj, 666) == 1) then begin
+        if ((global_var(GVAR_NEW_RENO_FLAG_3) bwand 8192) != 0) then begin
+            if (obj_is_visible_flag(prize_fighter_obj) == 1) then begin
                 set_obj_visibility(prize_fighter_obj, 1);
             end
             prize_fighter_obj := 0;
@@ -524,24 +524,24 @@ begin
             anim(prize_fighter_obj, 1000, 3);
         end
     end
-    if (has_trait(1, ring_girl_obj, 666) == 1) then begin
+    if (obj_is_visible_flag(ring_girl_obj) == 1) then begin
         set_obj_visibility(ring_girl_obj, 1);
     end
-    if (has_trait(1, announcer_obj, 666) == 0) then begin
+    if (obj_is_visible_flag(announcer_obj) == 0) then begin
         set_obj_visibility(announcer_obj, 0);
     end
-    if (cur_map_index == 55) then begin
+    if (CUR_MAP_NEWR2) then begin
         if (announcer_obj != 0) then begin
             last_timed_obj := announcer_obj;
             last_timed_param := last_timed_param;
-            metarule3(100, announcer_obj, 48, 0);
+            rm_fixed_timer_event(announcer_obj, 48);
             add_timer_event(announcer_obj, game_ticks(0), 48);
         end
     end
-    set_global_var(694, global_var(694) bwor 2);
+    set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
     gfade_in(10);
     debug_msg("call fight over: end");
-    debug_msg("win boxing match: " + obj_name(self_obj));
+    debug_msg("win boxing match: " + self_name);
     removed_qty := obj_is_carrying_obj_pid(self_obj, 489);
     if (1 < removed_qty) then begin
         removed_qty := 1;
@@ -550,17 +550,17 @@ begin
         restock_obj := obj_carrying_pid_obj(self_obj, 489);
         if (obj_type(self_obj) == 1) then begin
             restock_obj := obj_carrying_pid_obj(self_obj, 489);
-            if (critter_inven_obj(self_obj, 0) == restock_obj) then begin
-                if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin
-                    restock_obj := critter_inven_obj(self_obj, 0);
+            if (critter_inven_obj(self_obj, INVEN_TYPE_WORN) == restock_obj) then begin
+                if (obj_item_subtype(critter_inven_obj(self_obj, INVEN_TYPE_WORN)) == 0) then begin
+                    restock_obj := critter_inven_obj(self_obj, INVEN_TYPE_WORN);
                     debug_msg("armour pid == " + obj_pid(restock_obj));
                     rm_obj_from_inven(self_obj, restock_obj);
                     add_obj_to_inven(self_obj, restock_obj);
                 end
             end
             else begin
-                if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin
-                    metarule(43, self_obj);
+                if ((critter_inven_obj(self_obj, INVEN_TYPE_LEFT_HAND) == restock_obj) or (critter_inven_obj(self_obj, INVEN_TYPE_RIGHT_HAND) == restock_obj)) then begin
+                    inven_unwield(self_obj);
                 end
             end
         end
@@ -574,13 +574,13 @@ end
 procedure look_at_p_proc
 begin
     script_overrides;
-    display_msg(message_str(1088, 100) + message_str(353, 700 + (50 * ((global_var(495) bwand 4096) != 0)) + global_var(504)) + message_str(1088, 101));
+    display_msg(mstr(100) + message_str(SCRIPT_NEWR1, 700 + (50 * ((global_var(GVAR_NEW_RENO_FLAG_3) bwand 4096) != 0)) + global_var(GVAR_NEW_RENO_FIGHT_LEVEL)) + mstr(101));
 end
 
 procedure description_p_proc
 begin
     script_overrides;
-    display_msg(message_str(1088, random(150, 152)));
+    display_mstr(random(150, 152));
 end
 
 procedure damage_p_proc
@@ -591,35 +591,35 @@ begin
         if (target_obj != 0) then begin
             if ((obj_pid(target_obj) != 497) and (obj_pid(target_obj) != 496)) then begin
                 if (-3 != 0) then begin
-                    if (global_var(510) == 0) then begin
-                        set_global_var(510, -3);
+                    if (global_var(GVAR_NEW_RENO_FIGHT_STATUS) == 0) then begin
+                        set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, -3);
                         last_timed_obj := announcer_obj;
                         last_timed_param := last_timed_param;
-                        metarule3(100, announcer_obj, 200, 0);
+                        rm_fixed_timer_event(announcer_obj, 200);
                         add_timer_event(announcer_obj, game_ticks(5), 200);
                     end
                 end
                 else begin
-                    set_global_var(510, 0);
+                    set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, 0);
                 end
-                debug_msg("set_fight_status(" + -3 + ") == " + global_var(510));
+                debug_msg("set_fight_status(" + -3 + ") == " + global_var(GVAR_NEW_RENO_FIGHT_STATUS));
                 debug_msg("call fight over: start");
                 gfade_out(10);
-                set_global_var(507, 0);
-                if (cur_map_index == 55) then begin
+                set_global_var(GVAR_NEW_RENO_ROUND_TIME, 0);
+                if (CUR_MAP_NEWR2) then begin
                     if (announcer_obj != 0) then begin
                         last_timed_obj := announcer_obj;
                         last_timed_param := last_timed_param;
-                        metarule3(100, announcer_obj, 48, 0);
+                        rm_fixed_timer_event(announcer_obj, 48);
                         add_timer_event(announcer_obj, game_ticks(0), 48);
                     end
                 end
-                set_global_var(694, global_var(694) bwor 2);
+                set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
                 move_to(dude_obj, 25076, elevation(self_obj));
                 anim(dude_obj, 1000, 3);
                 if (prize_fighter_obj != 0) then begin
-                    if ((global_var(495) bwand 8192) != 0) then begin
-                        if (has_trait(1, prize_fighter_obj, 666) == 1) then begin
+                    if ((global_var(GVAR_NEW_RENO_FLAG_3) bwand 8192) != 0) then begin
+                        if (obj_is_visible_flag(prize_fighter_obj) == 1) then begin
                             set_obj_visibility(prize_fighter_obj, 1);
                         end
                         prize_fighter_obj := 0;
@@ -631,37 +631,37 @@ begin
                         anim(prize_fighter_obj, 1000, 3);
                     end
                 end
-                if (has_trait(1, ring_girl_obj, 666) == 1) then begin
+                if (obj_is_visible_flag(ring_girl_obj) == 1) then begin
                     set_obj_visibility(ring_girl_obj, 1);
                 end
-                if (has_trait(1, announcer_obj, 666) == 0) then begin
+                if (obj_is_visible_flag(announcer_obj) == 0) then begin
                     set_obj_visibility(announcer_obj, 0);
                 end
-                if (cur_map_index == 55) then begin
+                if (CUR_MAP_NEWR2) then begin
                     if (announcer_obj != 0) then begin
                         last_timed_obj := announcer_obj;
                         last_timed_param := last_timed_param;
-                        metarule3(100, announcer_obj, 48, 0);
+                        rm_fixed_timer_event(announcer_obj, 48);
                         add_timer_event(announcer_obj, game_ticks(0), 48);
                     end
                 end
-                set_global_var(694, global_var(694) bwor 2);
+                set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
                 gfade_in(10);
                 debug_msg("call fight over: end");
-                debug_msg("lose boxing match: " + obj_name(self_obj));
+                debug_msg("lose boxing match: " + self_name);
             end
             else begin
-                if ((global_var(495) bwand --2147483648) != 0) then begin
+                if ((global_var(GVAR_NEW_RENO_FLAG_3) bwand --2147483648) != 0) then begin
                     if (obj_pid(self_obj) == 16777647) then begin
-                        the_roll := roll_vs_skill(dude_obj, 3, -get_critter_stat(self_obj, 7));
+                        the_roll := roll_vs_skill(dude_obj, 3, -get_critter_stat(self_obj, STAT_max_hp));
                         if (is_success(the_roll)) then begin
                             if (is_critical(the_roll)) then begin
-                                if (((global_var(694) bwand 1) != 0) == 0) then begin
-                                    display_msg(message_str(353, 1700));
-                                    restock_obj := create_object_sid(485, 0, 0, -1);
+                                if (((global_var(GVAR_EMILY_SUBST_TIME) bwand 1) != 0) == 0) then begin
+                                    display_msg(message_str(SCRIPT_NEWR1, 1700));
+                                    restock_obj := create_object(485, 0, 0);
                                     add_mult_objs_to_inven(dude_obj, restock_obj, 1);
                                 end
-                                set_global_var(694, global_var(694) bwor 1);
+                                set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 1);
                             end
                         end
                     end
@@ -673,117 +673,117 @@ end
 
 procedure map_enter_p_proc
 begin
-    if (((global_var(495) bwand 8192) != 0) == 0) then begin
+    if (((global_var(GVAR_NEW_RENO_FLAG_3) bwand 8192) != 0) == 0) then begin
         prize_fighter_obj := self_obj;
     end
 end
 
 procedure map_update_p_proc
 begin
-    if (((global_var(495) bwand 8192) != 0) == 0) then begin
+    if (((global_var(GVAR_NEW_RENO_FLAG_3) bwand 8192) != 0) == 0) then begin
         prize_fighter_obj := self_obj;
     end
 end
 
 procedure combat_p_proc
 begin
-    debug_msg("seconds til round is over == " + ((global_var(507) - game_time) / 10));
+    debug_msg("seconds til round is over == " + ((global_var(GVAR_NEW_RENO_ROUND_TIME) - game_time) / 10));
     debug_msg("   critter_state(self_obj) == " + critter_state(self_obj));
     debug_msg("   critter_state(dude_obj) == " + critter_state(dude_obj));
-    if ((((global_var(507) - game_time) / 10) <= 0) and (global_var(507) != 0)) then begin
+    if ((((global_var(GVAR_NEW_RENO_ROUND_TIME) - game_time) / 10) <= 0) and (global_var(GVAR_NEW_RENO_ROUND_TIME) != 0)) then begin
         play_sfx("boxbel2");
         terminate_combat;
         gfade_out(10);
-        if (has_trait(1, announcer_obj, 666) == 1) then begin
+        if (obj_is_visible_flag(announcer_obj) == 1) then begin
             set_obj_visibility(announcer_obj, 1);
         end
-        if (has_trait(1, ring_girl_obj, 666) == 1) then begin
+        if (obj_is_visible_flag(ring_girl_obj) == 1) then begin
             set_obj_visibility(ring_girl_obj, 1);
         end
         debug_msg("end boxing round start");
-        if (cur_map_index == 55) then begin
+        if (CUR_MAP_NEWR2) then begin
             if (announcer_obj != 0) then begin
                 last_timed_obj := announcer_obj;
                 last_timed_param := last_timed_param;
-                metarule3(100, announcer_obj, 48, 0);
+                rm_fixed_timer_event(announcer_obj, 48);
                 add_timer_event(announcer_obj, game_ticks(0), 48);
             end
         end
-        set_global_var(694, global_var(694) bwor 2);
+        set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
         debug_msg("combat terminated");
-        set_global_var(507, 0);
-        set_global_var(506, global_var(506) + 1);
+        set_global_var(GVAR_NEW_RENO_ROUND_TIME, 0);
+        set_global_var(GVAR_NEW_RENO_ROUND_NUMBER, global_var(GVAR_NEW_RENO_ROUND_NUMBER) + 1);
         animate_stand_obj(dude_obj);
-        if ((prize_fighter_obj != 0) and (((global_var(495) bwand 8192) != 0) == 0)) then begin
+        if ((prize_fighter_obj != 0) and (((global_var(GVAR_NEW_RENO_FLAG_3) bwand 8192) != 0) == 0)) then begin
             animate_stand_obj(prize_fighter_obj);
         end
-        if (global_var(510) == 0) then begin
+        if (global_var(GVAR_NEW_RENO_FIGHT_STATUS) == 0) then begin
             debug_msg("check_fight_status(fight_status_fighting)");
             debug_msg("move_boxers_to_corners: start");
             move_to(dude_obj, 24479, elevation(self_obj));
             critter_injure(dude_obj, 2 bwor 8388608);
-            if ((prize_fighter_obj != 0) and (((global_var(495) bwand 8192) != 0) == 0)) then begin
+            if ((prize_fighter_obj != 0) and (((global_var(GVAR_NEW_RENO_FLAG_3) bwand 8192) != 0) == 0)) then begin
                 move_to(prize_fighter_obj, 26471, elevation(self_obj));
                 animate_stand_obj(prize_fighter_obj);
                 critter_injure(prize_fighter_obj, 2 bwor 8388608);
-                anim(dude_obj, 1000, rotation_to_tile(tile_num(dude_obj), tile_num(prize_fighter_obj)));
-                anim(prize_fighter_obj, 1000, rotation_to_tile(tile_num(prize_fighter_obj), tile_num(dude_obj)));
+                anim(dude_obj, 1000, rotation_to_tile(dude_tile, tile_num(prize_fighter_obj)));
+                anim(prize_fighter_obj, 1000, rotation_to_tile(tile_num(prize_fighter_obj), dude_tile));
             end
             animate_stand_obj(dude_obj);
             debug_msg("move_boxers_to_corners: end");
-            set_global_var(508, global_var(508) + 9);
-            set_global_var(509, global_var(509) + 9);
+            set_global_var(GVAR_NEW_RENO_DUDE_SCORE, global_var(GVAR_NEW_RENO_DUDE_SCORE) + 9);
+            set_global_var(GVAR_NEW_RENO_BOXER_SCORE, global_var(GVAR_NEW_RENO_BOXER_SCORE) + 9);
             if ((local_var(1) > local_var(2)) or ((local_var(1) == local_var(2)) and random(0, 1))) then begin
-                set_global_var(508, global_var(508) + 1);
+                set_global_var(GVAR_NEW_RENO_DUDE_SCORE, global_var(GVAR_NEW_RENO_DUDE_SCORE) + 1);
             end
             else begin
-                set_global_var(509, global_var(509) + 1);
+                set_global_var(GVAR_NEW_RENO_BOXER_SCORE, global_var(GVAR_NEW_RENO_BOXER_SCORE) + 1);
             end
-            if (global_var(506) <= 12) then begin
-                critter_heal(dude_obj, get_critter_stat(dude_obj, 2));
-                critter_heal(prize_fighter_obj, get_critter_stat(prize_fighter_obj, 2));
+            if (global_var(GVAR_NEW_RENO_ROUND_NUMBER) <= 12) then begin
+                critter_heal(dude_obj, dude_endurance);
+                critter_heal(prize_fighter_obj, get_critter_stat(prize_fighter_obj, STAT_en));
                 set_local_var(1, 0);
                 set_local_var(2, 0);
-                if (has_trait(1, ring_girl_obj, 666) == 0) then begin
+                if (obj_is_visible_flag(ring_girl_obj) == 0) then begin
                     set_obj_visibility(ring_girl_obj, 0);
                 end
                 last_timed_obj := announcer_obj;
                 last_timed_param := last_timed_param;
-                metarule3(100, announcer_obj, 110, 0);
+                rm_fixed_timer_event(announcer_obj, 110);
                 add_timer_event(announcer_obj, game_ticks(5), 110);
             end
             else begin
-                if (global_var(509) > global_var(508)) then begin
+                if (global_var(GVAR_NEW_RENO_BOXER_SCORE) > global_var(GVAR_NEW_RENO_DUDE_SCORE)) then begin
                     if (-4 != 0) then begin
-                        if (global_var(510) == 0) then begin
-                            set_global_var(510, -4);
+                        if (global_var(GVAR_NEW_RENO_FIGHT_STATUS) == 0) then begin
+                            set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, -4);
                             last_timed_obj := announcer_obj;
                             last_timed_param := last_timed_param;
-                            metarule3(100, announcer_obj, 200, 0);
+                            rm_fixed_timer_event(announcer_obj, 200);
                             add_timer_event(announcer_obj, game_ticks(5), 200);
                         end
                     end
                     else begin
-                        set_global_var(510, 0);
+                        set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, 0);
                     end
-                    debug_msg("set_fight_status(" + -4 + ") == " + global_var(510));
+                    debug_msg("set_fight_status(" + -4 + ") == " + global_var(GVAR_NEW_RENO_FIGHT_STATUS));
                     debug_msg("call fight over: start");
                     gfade_out(10);
-                    set_global_var(507, 0);
-                    if (cur_map_index == 55) then begin
+                    set_global_var(GVAR_NEW_RENO_ROUND_TIME, 0);
+                    if (CUR_MAP_NEWR2) then begin
                         if (announcer_obj != 0) then begin
                             last_timed_obj := announcer_obj;
                             last_timed_param := last_timed_param;
-                            metarule3(100, announcer_obj, 48, 0);
+                            rm_fixed_timer_event(announcer_obj, 48);
                             add_timer_event(announcer_obj, game_ticks(0), 48);
                         end
                     end
-                    set_global_var(694, global_var(694) bwor 2);
+                    set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
                     move_to(dude_obj, 25076, elevation(self_obj));
                     anim(dude_obj, 1000, 3);
                     if (prize_fighter_obj != 0) then begin
-                        if ((global_var(495) bwand 8192) != 0) then begin
-                            if (has_trait(1, prize_fighter_obj, 666) == 1) then begin
+                        if ((global_var(GVAR_NEW_RENO_FLAG_3) bwand 8192) != 0) then begin
+                            if (obj_is_visible_flag(prize_fighter_obj) == 1) then begin
                                 set_obj_visibility(prize_fighter_obj, 1);
                             end
                             prize_fighter_obj := 0;
@@ -795,56 +795,56 @@ begin
                             anim(prize_fighter_obj, 1000, 3);
                         end
                     end
-                    if (has_trait(1, ring_girl_obj, 666) == 1) then begin
+                    if (obj_is_visible_flag(ring_girl_obj) == 1) then begin
                         set_obj_visibility(ring_girl_obj, 1);
                     end
-                    if (has_trait(1, announcer_obj, 666) == 0) then begin
+                    if (obj_is_visible_flag(announcer_obj) == 0) then begin
                         set_obj_visibility(announcer_obj, 0);
                     end
-                    if (cur_map_index == 55) then begin
+                    if (CUR_MAP_NEWR2) then begin
                         if (announcer_obj != 0) then begin
                             last_timed_obj := announcer_obj;
                             last_timed_param := last_timed_param;
-                            metarule3(100, announcer_obj, 48, 0);
+                            rm_fixed_timer_event(announcer_obj, 48);
                             add_timer_event(announcer_obj, game_ticks(0), 48);
                         end
                     end
-                    set_global_var(694, global_var(694) bwor 2);
+                    set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
                     gfade_in(10);
                     debug_msg("call fight over: end");
-                    debug_msg("lose boxing match: " + obj_name(self_obj));
+                    debug_msg("lose boxing match: " + self_name);
                 end
                 else begin
                     if (4 != 0) then begin
-                        if (global_var(510) == 0) then begin
-                            set_global_var(510, 4);
+                        if (global_var(GVAR_NEW_RENO_FIGHT_STATUS) == 0) then begin
+                            set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, 4);
                             last_timed_obj := announcer_obj;
                             last_timed_param := last_timed_param;
-                            metarule3(100, announcer_obj, 200, 0);
+                            rm_fixed_timer_event(announcer_obj, 200);
                             add_timer_event(announcer_obj, game_ticks(5), 200);
                         end
                     end
                     else begin
-                        set_global_var(510, 0);
+                        set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, 0);
                     end
-                    debug_msg("set_fight_status(" + 4 + ") == " + global_var(510));
+                    debug_msg("set_fight_status(" + 4 + ") == " + global_var(GVAR_NEW_RENO_FIGHT_STATUS));
                     debug_msg("call fight over: start");
                     gfade_out(10);
-                    set_global_var(507, 0);
-                    if (cur_map_index == 55) then begin
+                    set_global_var(GVAR_NEW_RENO_ROUND_TIME, 0);
+                    if (CUR_MAP_NEWR2) then begin
                         if (announcer_obj != 0) then begin
                             last_timed_obj := announcer_obj;
                             last_timed_param := last_timed_param;
-                            metarule3(100, announcer_obj, 48, 0);
+                            rm_fixed_timer_event(announcer_obj, 48);
                             add_timer_event(announcer_obj, game_ticks(0), 48);
                         end
                     end
-                    set_global_var(694, global_var(694) bwor 2);
+                    set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
                     move_to(dude_obj, 25076, elevation(self_obj));
                     anim(dude_obj, 1000, 3);
                     if (prize_fighter_obj != 0) then begin
-                        if ((global_var(495) bwand 8192) != 0) then begin
-                            if (has_trait(1, prize_fighter_obj, 666) == 1) then begin
+                        if ((global_var(GVAR_NEW_RENO_FLAG_3) bwand 8192) != 0) then begin
+                            if (obj_is_visible_flag(prize_fighter_obj) == 1) then begin
                                 set_obj_visibility(prize_fighter_obj, 1);
                             end
                             prize_fighter_obj := 0;
@@ -856,54 +856,54 @@ begin
                             anim(prize_fighter_obj, 1000, 3);
                         end
                     end
-                    if (has_trait(1, ring_girl_obj, 666) == 1) then begin
+                    if (obj_is_visible_flag(ring_girl_obj) == 1) then begin
                         set_obj_visibility(ring_girl_obj, 1);
                     end
-                    if (has_trait(1, announcer_obj, 666) == 0) then begin
+                    if (obj_is_visible_flag(announcer_obj) == 0) then begin
                         set_obj_visibility(announcer_obj, 0);
                     end
-                    if (cur_map_index == 55) then begin
+                    if (CUR_MAP_NEWR2) then begin
                         if (announcer_obj != 0) then begin
                             last_timed_obj := announcer_obj;
                             last_timed_param := last_timed_param;
-                            metarule3(100, announcer_obj, 48, 0);
+                            rm_fixed_timer_event(announcer_obj, 48);
                             add_timer_event(announcer_obj, game_ticks(0), 48);
                         end
                     end
-                    set_global_var(694, global_var(694) bwor 2);
+                    set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
                     gfade_in(10);
                     debug_msg("call fight over: end");
-                    debug_msg("win boxing match: " + obj_name(self_obj));
+                    debug_msg("win boxing match: " + self_name);
                 end
             end
         end
-        if (cur_map_index == 55) then begin
+        if (CUR_MAP_NEWR2) then begin
             if (announcer_obj != 0) then begin
                 last_timed_obj := announcer_obj;
                 last_timed_param := last_timed_param;
-                metarule3(100, announcer_obj, 48, 0);
+                rm_fixed_timer_event(announcer_obj, 48);
                 add_timer_event(announcer_obj, game_ticks(0), 48);
             end
         end
-        set_global_var(694, global_var(694) bwor 2);
+        set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
         gfade_in(10);
         debug_msg("end boxing round end");
     end
-    if (global_var(507) != 0) then begin
+    if (global_var(GVAR_NEW_RENO_ROUND_TIME) != 0) then begin
         if (fixed_param == 2) then begin
             set_local_var(2, local_var(2) + 1);
             debug_msg("total punches boxer thrown == " + local_var(2));
             if (obj_pid(self_obj) == 16777647) then begin
-                the_roll := roll_vs_skill(self_obj, 3, -get_critter_stat(dude_obj, 7));
+                the_roll := roll_vs_skill(self_obj, 3, -get_critter_stat(dude_obj, STAT_max_hp));
                 if (is_success(the_roll)) then begin
                     if (is_critical(the_roll)) then begin
-                        if (((global_var(495) bwand --2147483648) != 0) == 0) then begin
-                            set_critter_stat(dude_obj, 3, -1);
-                            display_msg(message_str(353, 1600));
-                            restock_obj := create_object_sid(484, 0, 0, -1);
+                        if (((global_var(GVAR_NEW_RENO_FLAG_3) bwand --2147483648) != 0) == 0) then begin
+                            set_critter_stat(dude_obj, STAT_ch, -1);
+                            display_msg(message_str(SCRIPT_NEWR1, 1600));
+                            restock_obj := create_object(484, 0, 0);
                             add_mult_objs_to_inven(dude_obj, restock_obj, 1);
                         end
-                        set_global_var(495, global_var(495) bwor --2147483648);
+                        set_global_var(GVAR_NEW_RENO_FLAG_3, global_var(GVAR_NEW_RENO_FLAG_3) bwor --2147483648);
                     end
                 end
             end
@@ -913,35 +913,35 @@ begin
                 debug_msg("boxer: COMBAT_SUBTYPE_TURN");
                 if (critter_is_fleeing(self_obj)) then begin
                     if (2 != 0) then begin
-                        if (global_var(510) == 0) then begin
-                            set_global_var(510, 2);
+                        if (global_var(GVAR_NEW_RENO_FIGHT_STATUS) == 0) then begin
+                            set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, 2);
                             last_timed_obj := announcer_obj;
                             last_timed_param := last_timed_param;
-                            metarule3(100, announcer_obj, 200, 0);
+                            rm_fixed_timer_event(announcer_obj, 200);
                             add_timer_event(announcer_obj, game_ticks(5), 200);
                         end
                     end
                     else begin
-                        set_global_var(510, 0);
+                        set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, 0);
                     end
-                    debug_msg("set_fight_status(" + 2 + ") == " + global_var(510));
+                    debug_msg("set_fight_status(" + 2 + ") == " + global_var(GVAR_NEW_RENO_FIGHT_STATUS));
                     debug_msg("call fight over: start");
                     gfade_out(10);
-                    set_global_var(507, 0);
-                    if (cur_map_index == 55) then begin
+                    set_global_var(GVAR_NEW_RENO_ROUND_TIME, 0);
+                    if (CUR_MAP_NEWR2) then begin
                         if (announcer_obj != 0) then begin
                             last_timed_obj := announcer_obj;
                             last_timed_param := last_timed_param;
-                            metarule3(100, announcer_obj, 48, 0);
+                            rm_fixed_timer_event(announcer_obj, 48);
                             add_timer_event(announcer_obj, game_ticks(0), 48);
                         end
                     end
-                    set_global_var(694, global_var(694) bwor 2);
+                    set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
                     move_to(dude_obj, 25076, elevation(self_obj));
                     anim(dude_obj, 1000, 3);
                     if (prize_fighter_obj != 0) then begin
-                        if ((global_var(495) bwand 8192) != 0) then begin
-                            if (has_trait(1, prize_fighter_obj, 666) == 1) then begin
+                        if ((global_var(GVAR_NEW_RENO_FLAG_3) bwand 8192) != 0) then begin
+                            if (obj_is_visible_flag(prize_fighter_obj) == 1) then begin
                                 set_obj_visibility(prize_fighter_obj, 1);
                             end
                             prize_fighter_obj := 0;
@@ -953,57 +953,57 @@ begin
                             anim(prize_fighter_obj, 1000, 3);
                         end
                     end
-                    if (has_trait(1, ring_girl_obj, 666) == 1) then begin
+                    if (obj_is_visible_flag(ring_girl_obj) == 1) then begin
                         set_obj_visibility(ring_girl_obj, 1);
                     end
-                    if (has_trait(1, announcer_obj, 666) == 0) then begin
+                    if (obj_is_visible_flag(announcer_obj) == 0) then begin
                         set_obj_visibility(announcer_obj, 0);
                     end
-                    if (cur_map_index == 55) then begin
+                    if (CUR_MAP_NEWR2) then begin
                         if (announcer_obj != 0) then begin
                             last_timed_obj := announcer_obj;
                             last_timed_param := last_timed_param;
-                            metarule3(100, announcer_obj, 48, 0);
+                            rm_fixed_timer_event(announcer_obj, 48);
                             add_timer_event(announcer_obj, game_ticks(0), 48);
                         end
                     end
-                    set_global_var(694, global_var(694) bwor 2);
+                    set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
                     gfade_in(10);
                     debug_msg("call fight over: end");
-                    debug_msg("win boxing match: " + obj_name(self_obj));
+                    debug_msg("win boxing match: " + self_name);
                 end
                 else begin
                     if (critter_state(self_obj) bwand 2) then begin
                         if (1 != 0) then begin
-                            if (global_var(510) == 0) then begin
-                                set_global_var(510, 1);
+                            if (global_var(GVAR_NEW_RENO_FIGHT_STATUS) == 0) then begin
+                                set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, 1);
                                 last_timed_obj := announcer_obj;
                                 last_timed_param := last_timed_param;
-                                metarule3(100, announcer_obj, 200, 0);
+                                rm_fixed_timer_event(announcer_obj, 200);
                                 add_timer_event(announcer_obj, game_ticks(5), 200);
                             end
                         end
                         else begin
-                            set_global_var(510, 0);
+                            set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, 0);
                         end
-                        debug_msg("set_fight_status(" + 1 + ") == " + global_var(510));
+                        debug_msg("set_fight_status(" + 1 + ") == " + global_var(GVAR_NEW_RENO_FIGHT_STATUS));
                         debug_msg("call fight over: start");
                         gfade_out(10);
-                        set_global_var(507, 0);
-                        if (cur_map_index == 55) then begin
+                        set_global_var(GVAR_NEW_RENO_ROUND_TIME, 0);
+                        if (CUR_MAP_NEWR2) then begin
                             if (announcer_obj != 0) then begin
                                 last_timed_obj := announcer_obj;
                                 last_timed_param := last_timed_param;
-                                metarule3(100, announcer_obj, 48, 0);
+                                rm_fixed_timer_event(announcer_obj, 48);
                                 add_timer_event(announcer_obj, game_ticks(0), 48);
                             end
                         end
-                        set_global_var(694, global_var(694) bwor 2);
+                        set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
                         move_to(dude_obj, 25076, elevation(self_obj));
                         anim(dude_obj, 1000, 3);
                         if (prize_fighter_obj != 0) then begin
-                            if ((global_var(495) bwand 8192) != 0) then begin
-                                if (has_trait(1, prize_fighter_obj, 666) == 1) then begin
+                            if ((global_var(GVAR_NEW_RENO_FLAG_3) bwand 8192) != 0) then begin
+                                if (obj_is_visible_flag(prize_fighter_obj) == 1) then begin
                                     set_obj_visibility(prize_fighter_obj, 1);
                                 end
                                 prize_fighter_obj := 0;
@@ -1015,57 +1015,57 @@ begin
                                 anim(prize_fighter_obj, 1000, 3);
                             end
                         end
-                        if (has_trait(1, ring_girl_obj, 666) == 1) then begin
+                        if (obj_is_visible_flag(ring_girl_obj) == 1) then begin
                             set_obj_visibility(ring_girl_obj, 1);
                         end
-                        if (has_trait(1, announcer_obj, 666) == 0) then begin
+                        if (obj_is_visible_flag(announcer_obj) == 0) then begin
                             set_obj_visibility(announcer_obj, 0);
                         end
-                        if (cur_map_index == 55) then begin
+                        if (CUR_MAP_NEWR2) then begin
                             if (announcer_obj != 0) then begin
                                 last_timed_obj := announcer_obj;
                                 last_timed_param := last_timed_param;
-                                metarule3(100, announcer_obj, 48, 0);
+                                rm_fixed_timer_event(announcer_obj, 48);
                                 add_timer_event(announcer_obj, game_ticks(0), 48);
                             end
                         end
-                        set_global_var(694, global_var(694) bwor 2);
+                        set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
                         gfade_in(10);
                         debug_msg("call fight over: end");
-                        debug_msg("win boxing match: " + obj_name(self_obj));
+                        debug_msg("win boxing match: " + self_name);
                     end
                     else begin
                         if (critter_state(dude_obj) bwand 2) then begin
                             if (-1 != 0) then begin
-                                if (global_var(510) == 0) then begin
-                                    set_global_var(510, -1);
+                                if (global_var(GVAR_NEW_RENO_FIGHT_STATUS) == 0) then begin
+                                    set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, -1);
                                     last_timed_obj := announcer_obj;
                                     last_timed_param := last_timed_param;
-                                    metarule3(100, announcer_obj, 200, 0);
+                                    rm_fixed_timer_event(announcer_obj, 200);
                                     add_timer_event(announcer_obj, game_ticks(5), 200);
                                 end
                             end
                             else begin
-                                set_global_var(510, 0);
+                                set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, 0);
                             end
-                            debug_msg("set_fight_status(" + -1 + ") == " + global_var(510));
+                            debug_msg("set_fight_status(" + -1 + ") == " + global_var(GVAR_NEW_RENO_FIGHT_STATUS));
                             debug_msg("call fight over: start");
                             gfade_out(10);
-                            set_global_var(507, 0);
-                            if (cur_map_index == 55) then begin
+                            set_global_var(GVAR_NEW_RENO_ROUND_TIME, 0);
+                            if (CUR_MAP_NEWR2) then begin
                                 if (announcer_obj != 0) then begin
                                     last_timed_obj := announcer_obj;
                                     last_timed_param := last_timed_param;
-                                    metarule3(100, announcer_obj, 48, 0);
+                                    rm_fixed_timer_event(announcer_obj, 48);
                                     add_timer_event(announcer_obj, game_ticks(0), 48);
                                 end
                             end
-                            set_global_var(694, global_var(694) bwor 2);
+                            set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
                             move_to(dude_obj, 25076, elevation(self_obj));
                             anim(dude_obj, 1000, 3);
                             if (prize_fighter_obj != 0) then begin
-                                if ((global_var(495) bwand 8192) != 0) then begin
-                                    if (has_trait(1, prize_fighter_obj, 666) == 1) then begin
+                                if ((global_var(GVAR_NEW_RENO_FLAG_3) bwand 8192) != 0) then begin
+                                    if (obj_is_visible_flag(prize_fighter_obj) == 1) then begin
                                         set_obj_visibility(prize_fighter_obj, 1);
                                     end
                                     prize_fighter_obj := 0;
@@ -1077,47 +1077,47 @@ begin
                                     anim(prize_fighter_obj, 1000, 3);
                                 end
                             end
-                            if (has_trait(1, ring_girl_obj, 666) == 1) then begin
+                            if (obj_is_visible_flag(ring_girl_obj) == 1) then begin
                                 set_obj_visibility(ring_girl_obj, 1);
                             end
-                            if (has_trait(1, announcer_obj, 666) == 0) then begin
+                            if (obj_is_visible_flag(announcer_obj) == 0) then begin
                                 set_obj_visibility(announcer_obj, 0);
                             end
-                            if (cur_map_index == 55) then begin
+                            if (CUR_MAP_NEWR2) then begin
                                 if (announcer_obj != 0) then begin
                                     last_timed_obj := announcer_obj;
                                     last_timed_param := last_timed_param;
-                                    metarule3(100, announcer_obj, 48, 0);
+                                    rm_fixed_timer_event(announcer_obj, 48);
                                     add_timer_event(announcer_obj, game_ticks(0), 48);
                                 end
                             end
-                            set_global_var(694, global_var(694) bwor 2);
+                            set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
                             gfade_in(10);
                             debug_msg("call fight over: end");
-                            debug_msg("lose boxing match: " + obj_name(self_obj));
+                            debug_msg("lose boxing match: " + self_name);
                         end
                         else begin
-                            if ((global_var(507) != 0) and (((global_var(495) bwand 8192) != 0) == 0)) then begin
+                            if ((global_var(GVAR_NEW_RENO_ROUND_TIME) != 0) and (((global_var(GVAR_NEW_RENO_FLAG_3) bwand 8192) != 0) == 0)) then begin
                                 if (anim_busy(self_obj) == 0) then begin
                                     if (critter_state(self_obj) bwand 1) then begin
                                     end
                                     else begin
                                         if (tile_distance_objs(self_obj, dude_obj) > 2) then begin
                                             if (random(1, 3) != 2) then begin
-                                                if ((obj_item_subtype(critter_inven_obj(self_obj, 1)) == 3) or (obj_item_subtype(critter_inven_obj(self_obj, 2)) == 3)) then begin
+                                                if ((obj_item_subtype(critter_inven_obj(self_obj, INVEN_TYPE_RIGHT_HAND)) == 3) or (obj_item_subtype(critter_inven_obj(self_obj, INVEN_TYPE_LEFT_HAND)) == 3)) then begin
                                                     debug_msg("unweilding boxer weapon");
-                                                    metarule(43, self_obj);
+                                                    inven_unwield(self_obj);
                                                 end
                                                 else begin
                                                     if (obj_art_fid(self_obj) == 16777312) then begin
                                                         if (obj_is_carrying_obj_pid(self_obj, 489) > 0) then begin
                                                             debug_msg("weilding boxer weapon");
-                                                            wield_obj_critter(self_obj, obj_carrying_pid_obj(self_obj, 489));
+                                                            wield_obj(obj_carrying_pid_obj(self_obj, 489));
                                                         end
                                                     end
                                                 end
                                             end
-                                            attack_complex(dude_obj, 0, 1, 0, 0, 30000, 0, 0);
+                                            attack(dude_obj);
                                         end
                                     end
                                 end
@@ -1141,35 +1141,35 @@ begin
         debug_msg("prizefighter got timed event: knockout_param");
         if (critter_state(dude_obj) bwand 2) then begin
             if (-1 != 0) then begin
-                if (global_var(510) == 0) then begin
-                    set_global_var(510, -1);
+                if (global_var(GVAR_NEW_RENO_FIGHT_STATUS) == 0) then begin
+                    set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, -1);
                     last_timed_obj := announcer_obj;
                     last_timed_param := last_timed_param;
-                    metarule3(100, announcer_obj, 200, 0);
+                    rm_fixed_timer_event(announcer_obj, 200);
                     add_timer_event(announcer_obj, game_ticks(5), 200);
                 end
             end
             else begin
-                set_global_var(510, 0);
+                set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, 0);
             end
-            debug_msg("set_fight_status(" + -1 + ") == " + global_var(510));
+            debug_msg("set_fight_status(" + -1 + ") == " + global_var(GVAR_NEW_RENO_FIGHT_STATUS));
             debug_msg("call fight over: start");
             gfade_out(10);
-            set_global_var(507, 0);
-            if (cur_map_index == 55) then begin
+            set_global_var(GVAR_NEW_RENO_ROUND_TIME, 0);
+            if (CUR_MAP_NEWR2) then begin
                 if (announcer_obj != 0) then begin
                     last_timed_obj := announcer_obj;
                     last_timed_param := last_timed_param;
-                    metarule3(100, announcer_obj, 48, 0);
+                    rm_fixed_timer_event(announcer_obj, 48);
                     add_timer_event(announcer_obj, game_ticks(0), 48);
                 end
             end
-            set_global_var(694, global_var(694) bwor 2);
+            set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
             move_to(dude_obj, 25076, elevation(self_obj));
             anim(dude_obj, 1000, 3);
             if (prize_fighter_obj != 0) then begin
-                if ((global_var(495) bwand 8192) != 0) then begin
-                    if (has_trait(1, prize_fighter_obj, 666) == 1) then begin
+                if ((global_var(GVAR_NEW_RENO_FLAG_3) bwand 8192) != 0) then begin
+                    if (obj_is_visible_flag(prize_fighter_obj) == 1) then begin
                         set_obj_visibility(prize_fighter_obj, 1);
                     end
                     prize_fighter_obj := 0;
@@ -1181,56 +1181,56 @@ begin
                     anim(prize_fighter_obj, 1000, 3);
                 end
             end
-            if (has_trait(1, ring_girl_obj, 666) == 1) then begin
+            if (obj_is_visible_flag(ring_girl_obj) == 1) then begin
                 set_obj_visibility(ring_girl_obj, 1);
             end
-            if (has_trait(1, announcer_obj, 666) == 0) then begin
+            if (obj_is_visible_flag(announcer_obj) == 0) then begin
                 set_obj_visibility(announcer_obj, 0);
             end
-            if (cur_map_index == 55) then begin
+            if (CUR_MAP_NEWR2) then begin
                 if (announcer_obj != 0) then begin
                     last_timed_obj := announcer_obj;
                     last_timed_param := last_timed_param;
-                    metarule3(100, announcer_obj, 48, 0);
+                    rm_fixed_timer_event(announcer_obj, 48);
                     add_timer_event(announcer_obj, game_ticks(0), 48);
                 end
             end
-            set_global_var(694, global_var(694) bwor 2);
+            set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
             gfade_in(10);
             debug_msg("call fight over: end");
-            debug_msg("lose boxing match: " + obj_name(self_obj));
+            debug_msg("lose boxing match: " + self_name);
         end
         else begin
             if (1 != 0) then begin
-                if (global_var(510) == 0) then begin
-                    set_global_var(510, 1);
+                if (global_var(GVAR_NEW_RENO_FIGHT_STATUS) == 0) then begin
+                    set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, 1);
                     last_timed_obj := announcer_obj;
                     last_timed_param := last_timed_param;
-                    metarule3(100, announcer_obj, 200, 0);
+                    rm_fixed_timer_event(announcer_obj, 200);
                     add_timer_event(announcer_obj, game_ticks(5), 200);
                 end
             end
             else begin
-                set_global_var(510, 0);
+                set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, 0);
             end
-            debug_msg("set_fight_status(" + 1 + ") == " + global_var(510));
+            debug_msg("set_fight_status(" + 1 + ") == " + global_var(GVAR_NEW_RENO_FIGHT_STATUS));
             debug_msg("call fight over: start");
             gfade_out(10);
-            set_global_var(507, 0);
-            if (cur_map_index == 55) then begin
+            set_global_var(GVAR_NEW_RENO_ROUND_TIME, 0);
+            if (CUR_MAP_NEWR2) then begin
                 if (announcer_obj != 0) then begin
                     last_timed_obj := announcer_obj;
                     last_timed_param := last_timed_param;
-                    metarule3(100, announcer_obj, 48, 0);
+                    rm_fixed_timer_event(announcer_obj, 48);
                     add_timer_event(announcer_obj, game_ticks(0), 48);
                 end
             end
-            set_global_var(694, global_var(694) bwor 2);
+            set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
             move_to(dude_obj, 25076, elevation(self_obj));
             anim(dude_obj, 1000, 3);
             if (prize_fighter_obj != 0) then begin
-                if ((global_var(495) bwand 8192) != 0) then begin
-                    if (has_trait(1, prize_fighter_obj, 666) == 1) then begin
+                if ((global_var(GVAR_NEW_RENO_FLAG_3) bwand 8192) != 0) then begin
+                    if (obj_is_visible_flag(prize_fighter_obj) == 1) then begin
                         set_obj_visibility(prize_fighter_obj, 1);
                     end
                     prize_fighter_obj := 0;
@@ -1242,24 +1242,24 @@ begin
                     anim(prize_fighter_obj, 1000, 3);
                 end
             end
-            if (has_trait(1, ring_girl_obj, 666) == 1) then begin
+            if (obj_is_visible_flag(ring_girl_obj) == 1) then begin
                 set_obj_visibility(ring_girl_obj, 1);
             end
-            if (has_trait(1, announcer_obj, 666) == 0) then begin
+            if (obj_is_visible_flag(announcer_obj) == 0) then begin
                 set_obj_visibility(announcer_obj, 0);
             end
-            if (cur_map_index == 55) then begin
+            if (CUR_MAP_NEWR2) then begin
                 if (announcer_obj != 0) then begin
                     last_timed_obj := announcer_obj;
                     last_timed_param := last_timed_param;
-                    metarule3(100, announcer_obj, 48, 0);
+                    rm_fixed_timer_event(announcer_obj, 48);
                     add_timer_event(announcer_obj, game_ticks(0), 48);
                 end
             end
-            set_global_var(694, global_var(694) bwor 2);
+            set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
             gfade_in(10);
             debug_msg("call fight over: end");
-            debug_msg("win boxing match: " + obj_name(self_obj));
+            debug_msg("win boxing match: " + self_name);
         end
     end
     else begin
@@ -1268,96 +1268,96 @@ begin
             play_sfx("boxbel2");
             terminate_combat;
             gfade_out(10);
-            if (has_trait(1, announcer_obj, 666) == 1) then begin
+            if (obj_is_visible_flag(announcer_obj) == 1) then begin
                 set_obj_visibility(announcer_obj, 1);
             end
-            if (has_trait(1, ring_girl_obj, 666) == 1) then begin
+            if (obj_is_visible_flag(ring_girl_obj) == 1) then begin
                 set_obj_visibility(ring_girl_obj, 1);
             end
             debug_msg("end boxing round start");
-            if (cur_map_index == 55) then begin
+            if (CUR_MAP_NEWR2) then begin
                 if (announcer_obj != 0) then begin
                     last_timed_obj := announcer_obj;
                     last_timed_param := last_timed_param;
-                    metarule3(100, announcer_obj, 48, 0);
+                    rm_fixed_timer_event(announcer_obj, 48);
                     add_timer_event(announcer_obj, game_ticks(0), 48);
                 end
             end
-            set_global_var(694, global_var(694) bwor 2);
+            set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
             debug_msg("combat terminated");
-            set_global_var(507, 0);
-            set_global_var(506, global_var(506) + 1);
+            set_global_var(GVAR_NEW_RENO_ROUND_TIME, 0);
+            set_global_var(GVAR_NEW_RENO_ROUND_NUMBER, global_var(GVAR_NEW_RENO_ROUND_NUMBER) + 1);
             animate_stand_obj(dude_obj);
-            if ((prize_fighter_obj != 0) and (((global_var(495) bwand 8192) != 0) == 0)) then begin
+            if ((prize_fighter_obj != 0) and (((global_var(GVAR_NEW_RENO_FLAG_3) bwand 8192) != 0) == 0)) then begin
                 animate_stand_obj(prize_fighter_obj);
             end
-            if (global_var(510) == 0) then begin
+            if (global_var(GVAR_NEW_RENO_FIGHT_STATUS) == 0) then begin
                 debug_msg("check_fight_status(fight_status_fighting)");
                 debug_msg("move_boxers_to_corners: start");
                 move_to(dude_obj, 24479, elevation(self_obj));
                 critter_injure(dude_obj, 2 bwor 8388608);
-                if ((prize_fighter_obj != 0) and (((global_var(495) bwand 8192) != 0) == 0)) then begin
+                if ((prize_fighter_obj != 0) and (((global_var(GVAR_NEW_RENO_FLAG_3) bwand 8192) != 0) == 0)) then begin
                     move_to(prize_fighter_obj, 26471, elevation(self_obj));
                     animate_stand_obj(prize_fighter_obj);
                     critter_injure(prize_fighter_obj, 2 bwor 8388608);
-                    anim(dude_obj, 1000, rotation_to_tile(tile_num(dude_obj), tile_num(prize_fighter_obj)));
-                    anim(prize_fighter_obj, 1000, rotation_to_tile(tile_num(prize_fighter_obj), tile_num(dude_obj)));
+                    anim(dude_obj, 1000, rotation_to_tile(dude_tile, tile_num(prize_fighter_obj)));
+                    anim(prize_fighter_obj, 1000, rotation_to_tile(tile_num(prize_fighter_obj), dude_tile));
                 end
                 animate_stand_obj(dude_obj);
                 debug_msg("move_boxers_to_corners: end");
-                set_global_var(508, global_var(508) + 9);
-                set_global_var(509, global_var(509) + 9);
+                set_global_var(GVAR_NEW_RENO_DUDE_SCORE, global_var(GVAR_NEW_RENO_DUDE_SCORE) + 9);
+                set_global_var(GVAR_NEW_RENO_BOXER_SCORE, global_var(GVAR_NEW_RENO_BOXER_SCORE) + 9);
                 if ((local_var(1) > local_var(2)) or ((local_var(1) == local_var(2)) and random(0, 1))) then begin
-                    set_global_var(508, global_var(508) + 1);
+                    set_global_var(GVAR_NEW_RENO_DUDE_SCORE, global_var(GVAR_NEW_RENO_DUDE_SCORE) + 1);
                 end
                 else begin
-                    set_global_var(509, global_var(509) + 1);
+                    set_global_var(GVAR_NEW_RENO_BOXER_SCORE, global_var(GVAR_NEW_RENO_BOXER_SCORE) + 1);
                 end
-                if (global_var(506) <= 12) then begin
-                    critter_heal(dude_obj, get_critter_stat(dude_obj, 2));
-                    critter_heal(prize_fighter_obj, get_critter_stat(prize_fighter_obj, 2));
+                if (global_var(GVAR_NEW_RENO_ROUND_NUMBER) <= 12) then begin
+                    critter_heal(dude_obj, dude_endurance);
+                    critter_heal(prize_fighter_obj, get_critter_stat(prize_fighter_obj, STAT_en));
                     set_local_var(1, 0);
                     set_local_var(2, 0);
-                    if (has_trait(1, ring_girl_obj, 666) == 0) then begin
+                    if (obj_is_visible_flag(ring_girl_obj) == 0) then begin
                         set_obj_visibility(ring_girl_obj, 0);
                     end
                     last_timed_obj := announcer_obj;
                     last_timed_param := last_timed_param;
-                    metarule3(100, announcer_obj, 110, 0);
+                    rm_fixed_timer_event(announcer_obj, 110);
                     add_timer_event(announcer_obj, game_ticks(5), 110);
                 end
                 else begin
-                    if (global_var(509) > global_var(508)) then begin
+                    if (global_var(GVAR_NEW_RENO_BOXER_SCORE) > global_var(GVAR_NEW_RENO_DUDE_SCORE)) then begin
                         if (-4 != 0) then begin
-                            if (global_var(510) == 0) then begin
-                                set_global_var(510, -4);
+                            if (global_var(GVAR_NEW_RENO_FIGHT_STATUS) == 0) then begin
+                                set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, -4);
                                 last_timed_obj := announcer_obj;
                                 last_timed_param := last_timed_param;
-                                metarule3(100, announcer_obj, 200, 0);
+                                rm_fixed_timer_event(announcer_obj, 200);
                                 add_timer_event(announcer_obj, game_ticks(5), 200);
                             end
                         end
                         else begin
-                            set_global_var(510, 0);
+                            set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, 0);
                         end
-                        debug_msg("set_fight_status(" + -4 + ") == " + global_var(510));
+                        debug_msg("set_fight_status(" + -4 + ") == " + global_var(GVAR_NEW_RENO_FIGHT_STATUS));
                         debug_msg("call fight over: start");
                         gfade_out(10);
-                        set_global_var(507, 0);
-                        if (cur_map_index == 55) then begin
+                        set_global_var(GVAR_NEW_RENO_ROUND_TIME, 0);
+                        if (CUR_MAP_NEWR2) then begin
                             if (announcer_obj != 0) then begin
                                 last_timed_obj := announcer_obj;
                                 last_timed_param := last_timed_param;
-                                metarule3(100, announcer_obj, 48, 0);
+                                rm_fixed_timer_event(announcer_obj, 48);
                                 add_timer_event(announcer_obj, game_ticks(0), 48);
                             end
                         end
-                        set_global_var(694, global_var(694) bwor 2);
+                        set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
                         move_to(dude_obj, 25076, elevation(self_obj));
                         anim(dude_obj, 1000, 3);
                         if (prize_fighter_obj != 0) then begin
-                            if ((global_var(495) bwand 8192) != 0) then begin
-                                if (has_trait(1, prize_fighter_obj, 666) == 1) then begin
+                            if ((global_var(GVAR_NEW_RENO_FLAG_3) bwand 8192) != 0) then begin
+                                if (obj_is_visible_flag(prize_fighter_obj) == 1) then begin
                                     set_obj_visibility(prize_fighter_obj, 1);
                                 end
                                 prize_fighter_obj := 0;
@@ -1369,56 +1369,56 @@ begin
                                 anim(prize_fighter_obj, 1000, 3);
                             end
                         end
-                        if (has_trait(1, ring_girl_obj, 666) == 1) then begin
+                        if (obj_is_visible_flag(ring_girl_obj) == 1) then begin
                             set_obj_visibility(ring_girl_obj, 1);
                         end
-                        if (has_trait(1, announcer_obj, 666) == 0) then begin
+                        if (obj_is_visible_flag(announcer_obj) == 0) then begin
                             set_obj_visibility(announcer_obj, 0);
                         end
-                        if (cur_map_index == 55) then begin
+                        if (CUR_MAP_NEWR2) then begin
                             if (announcer_obj != 0) then begin
                                 last_timed_obj := announcer_obj;
                                 last_timed_param := last_timed_param;
-                                metarule3(100, announcer_obj, 48, 0);
+                                rm_fixed_timer_event(announcer_obj, 48);
                                 add_timer_event(announcer_obj, game_ticks(0), 48);
                             end
                         end
-                        set_global_var(694, global_var(694) bwor 2);
+                        set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
                         gfade_in(10);
                         debug_msg("call fight over: end");
-                        debug_msg("lose boxing match: " + obj_name(self_obj));
+                        debug_msg("lose boxing match: " + self_name);
                     end
                     else begin
                         if (4 != 0) then begin
-                            if (global_var(510) == 0) then begin
-                                set_global_var(510, 4);
+                            if (global_var(GVAR_NEW_RENO_FIGHT_STATUS) == 0) then begin
+                                set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, 4);
                                 last_timed_obj := announcer_obj;
                                 last_timed_param := last_timed_param;
-                                metarule3(100, announcer_obj, 200, 0);
+                                rm_fixed_timer_event(announcer_obj, 200);
                                 add_timer_event(announcer_obj, game_ticks(5), 200);
                             end
                         end
                         else begin
-                            set_global_var(510, 0);
+                            set_global_var(GVAR_NEW_RENO_FIGHT_STATUS, 0);
                         end
-                        debug_msg("set_fight_status(" + 4 + ") == " + global_var(510));
+                        debug_msg("set_fight_status(" + 4 + ") == " + global_var(GVAR_NEW_RENO_FIGHT_STATUS));
                         debug_msg("call fight over: start");
                         gfade_out(10);
-                        set_global_var(507, 0);
-                        if (cur_map_index == 55) then begin
+                        set_global_var(GVAR_NEW_RENO_ROUND_TIME, 0);
+                        if (CUR_MAP_NEWR2) then begin
                             if (announcer_obj != 0) then begin
                                 last_timed_obj := announcer_obj;
                                 last_timed_param := last_timed_param;
-                                metarule3(100, announcer_obj, 48, 0);
+                                rm_fixed_timer_event(announcer_obj, 48);
                                 add_timer_event(announcer_obj, game_ticks(0), 48);
                             end
                         end
-                        set_global_var(694, global_var(694) bwor 2);
+                        set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
                         move_to(dude_obj, 25076, elevation(self_obj));
                         anim(dude_obj, 1000, 3);
                         if (prize_fighter_obj != 0) then begin
-                            if ((global_var(495) bwand 8192) != 0) then begin
-                                if (has_trait(1, prize_fighter_obj, 666) == 1) then begin
+                            if ((global_var(GVAR_NEW_RENO_FLAG_3) bwand 8192) != 0) then begin
+                                if (obj_is_visible_flag(prize_fighter_obj) == 1) then begin
                                     set_obj_visibility(prize_fighter_obj, 1);
                                 end
                                 prize_fighter_obj := 0;
@@ -1430,36 +1430,36 @@ begin
                                 anim(prize_fighter_obj, 1000, 3);
                             end
                         end
-                        if (has_trait(1, ring_girl_obj, 666) == 1) then begin
+                        if (obj_is_visible_flag(ring_girl_obj) == 1) then begin
                             set_obj_visibility(ring_girl_obj, 1);
                         end
-                        if (has_trait(1, announcer_obj, 666) == 0) then begin
+                        if (obj_is_visible_flag(announcer_obj) == 0) then begin
                             set_obj_visibility(announcer_obj, 0);
                         end
-                        if (cur_map_index == 55) then begin
+                        if (CUR_MAP_NEWR2) then begin
                             if (announcer_obj != 0) then begin
                                 last_timed_obj := announcer_obj;
                                 last_timed_param := last_timed_param;
-                                metarule3(100, announcer_obj, 48, 0);
+                                rm_fixed_timer_event(announcer_obj, 48);
                                 add_timer_event(announcer_obj, game_ticks(0), 48);
                             end
                         end
-                        set_global_var(694, global_var(694) bwor 2);
+                        set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
                         gfade_in(10);
                         debug_msg("call fight over: end");
-                        debug_msg("win boxing match: " + obj_name(self_obj));
+                        debug_msg("win boxing match: " + self_name);
                     end
                 end
             end
-            if (cur_map_index == 55) then begin
+            if (CUR_MAP_NEWR2) then begin
                 if (announcer_obj != 0) then begin
                     last_timed_obj := announcer_obj;
                     last_timed_param := last_timed_param;
-                    metarule3(100, announcer_obj, 48, 0);
+                    rm_fixed_timer_event(announcer_obj, 48);
                     add_timer_event(announcer_obj, game_ticks(0), 48);
                 end
             end
-            set_global_var(694, global_var(694) bwor 2);
+            set_global_var(GVAR_EMILY_SUBST_TIME, global_var(GVAR_EMILY_SUBST_TIME) bwor 2);
             gfade_in(10);
             debug_msg("end boxing round end");
         end
@@ -1473,4 +1473,3 @@ end
 procedure Node999
 begin
 end
-
