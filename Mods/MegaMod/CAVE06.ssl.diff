diff --git a/Mods/MegaMod/Original/CAVE06.ssl b/Mods/MegaMod/ReDefine/CAVE06.ssl
index a91dcd1..7514be6 100644
--- a/Mods/MegaMod/Original/CAVE06.ssl
+++ b/Mods/MegaMod/ReDefine/CAVE06.ssl
@@ -26,71 +26,71 @@ procedure map_update_p_proc;
 
 procedure place_car(variable arg0)
 begin
-    set_global_var(633, arg0);
-    set_global_var(1646, elevation(dude_obj));
-    while (global_var(1645) != cur_map_index) do begin
-        set_global_var(1645, cur_map_index);
+    set_global_var(GVAR_CAR_PLACED_TILE, arg0);
+    set_global_var(GVAR_CAR_HAS_BEEN_DRIVEN, dude_elevation);
+    while (global_var(GVAR_CAR_CURRENT_TOWN) != cur_map_index) do begin
+        set_global_var(GVAR_CAR_CURRENT_TOWN, cur_map_index);
     end
-    if (not(tile_contains_pid_obj(arg0, elevation(dude_obj), 33556384) != 0) or not(tile_contains_pid_obj(arg0, elevation(dude_obj), 33555441) != 0) or not(tile_contains_pid_obj(arg0, elevation(dude_obj), 33556385) != 0) or not(tile_contains_pid_obj(arg0, elevation(dude_obj), 33556386) != 0) or not(tile_contains_pid_obj(arg0, elevation(dude_obj), 33556387) != 0) or not(tile_contains_pid_obj(arg0, elevation(dude_obj), 33556388) != 0) or not(tile_contains_pid_obj(arg0, elevation(dude_obj), 33556389) != 0)) then begin
-        if (global_var(1644) == 0) then begin
-            Scenery_Creation := create_object_sid(33556384, arg0, elevation(dude_obj), 304);
+    if (not(tile_contains_pid_obj(arg0, dude_elevation, 33556384) != 0) or not(tile_contains_pid_obj(arg0, dude_elevation, 33555441) != 0) or not(tile_contains_pid_obj(arg0, dude_elevation, 33556385) != 0) or not(tile_contains_pid_obj(arg0, dude_elevation, 33556386) != 0) or not(tile_contains_pid_obj(arg0, dude_elevation, 33556387) != 0) or not(tile_contains_pid_obj(arg0, dude_elevation, 33556388) != 0) or not(tile_contains_pid_obj(arg0, dude_elevation, 33556389) != 0)) then begin
+        if (global_var(GVAR_CAR_CURRENT_ELEVATION) == 0) then begin
+            Scenery_Creation := create_object_sid(33556384, arg0, dude_elevation, SCRIPT_ZSDRVCAR);
         end
         else begin
-            Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, elevation(dude_obj), 33556384);
+            Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, dude_elevation, 33556384);
             if (Scenery_Creation_Ptr != 0) then begin
                 destroy_object(Scenery_Creation_Ptr);
             end
         end
-        if (global_var(1644) == 1) then begin
-            Scenery_Creation := create_object_sid(33555441, arg0, elevation(dude_obj), 304);
+        if (global_var(GVAR_CAR_CURRENT_ELEVATION) == 1) then begin
+            Scenery_Creation := create_object_sid(33555441, arg0, dude_elevation, SCRIPT_ZSDRVCAR);
         end
         else begin
-            Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, elevation(dude_obj), 33555441);
+            Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, dude_elevation, 33555441);
             if (Scenery_Creation_Ptr != 0) then begin
                 destroy_object(Scenery_Creation_Ptr);
             end
         end
-        if (global_var(1644) == 2) then begin
-            Scenery_Creation := create_object_sid(33556385, arg0, elevation(dude_obj), 304);
+        if (global_var(GVAR_CAR_CURRENT_ELEVATION) == 2) then begin
+            Scenery_Creation := create_object_sid(33556385, arg0, dude_elevation, SCRIPT_ZSDRVCAR);
         end
         else begin
-            Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, elevation(dude_obj), 33556385);
+            Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, dude_elevation, 33556385);
             if (Scenery_Creation_Ptr != 0) then begin
                 destroy_object(Scenery_Creation_Ptr);
             end
         end
-        if (global_var(1644) == 3) then begin
-            Scenery_Creation := create_object_sid(33556386, arg0, elevation(dude_obj), 304);
+        if (global_var(GVAR_CAR_CURRENT_ELEVATION) == 3) then begin
+            Scenery_Creation := create_object_sid(33556386, arg0, dude_elevation, SCRIPT_ZSDRVCAR);
         end
         else begin
-            Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, elevation(dude_obj), 33556386);
+            Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, dude_elevation, 33556386);
             if (Scenery_Creation_Ptr != 0) then begin
                 destroy_object(Scenery_Creation_Ptr);
             end
         end
-        if (global_var(1644) == 4) then begin
-            Scenery_Creation := create_object_sid(33556387, arg0, elevation(dude_obj), 304);
+        if (global_var(GVAR_CAR_CURRENT_ELEVATION) == 4) then begin
+            Scenery_Creation := create_object_sid(33556387, arg0, dude_elevation, SCRIPT_ZSDRVCAR);
         end
         else begin
-            Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, elevation(dude_obj), 33556387);
+            Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, dude_elevation, 33556387);
             if (Scenery_Creation_Ptr != 0) then begin
                 destroy_object(Scenery_Creation_Ptr);
             end
         end
-        if (global_var(1644) == 5) then begin
-            Scenery_Creation := create_object_sid(33556388, arg0, elevation(dude_obj), 304);
+        if (global_var(GVAR_CAR_CURRENT_ELEVATION) == 5) then begin
+            Scenery_Creation := create_object_sid(33556388, arg0, dude_elevation, SCRIPT_ZSDRVCAR);
         end
         else begin
-            Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, elevation(dude_obj), 33556388);
+            Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, dude_elevation, 33556388);
             if (Scenery_Creation_Ptr != 0) then begin
                 destroy_object(Scenery_Creation_Ptr);
             end
         end
-        if (global_var(1644) == 6) then begin
-            Scenery_Creation := create_object_sid(33556389, arg0, elevation(dude_obj), 304);
+        if (global_var(GVAR_CAR_CURRENT_ELEVATION) == 6) then begin
+            Scenery_Creation := create_object_sid(33556389, arg0, dude_elevation, SCRIPT_ZSDRVCAR);
         end
         else begin
-            Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, elevation(dude_obj), 33556389);
+            Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, dude_elevation, 33556389);
             if (Scenery_Creation_Ptr != 0) then begin
                 destroy_object(Scenery_Creation_Ptr);
             end
@@ -99,7 +99,7 @@ begin
         Scenery_Creation_Count := 0;
         while (Scenery_Creation_Count < 2) do begin
             Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 1, 1);
-            Scenery_Creation := create_object_sid(33554499, Scenery_Creation_Hex, elevation(dude_obj), -1);
+            Scenery_Creation := create_object(33554499, Scenery_Creation_Hex, dude_elevation);
             if (tile_num(Scenery_Creation) != Scenery_Creation_Hex) then begin
                 destroy_object(Scenery_Creation);
             end
@@ -108,7 +108,7 @@ begin
         Scenery_Creation_Count := 0;
         while (Scenery_Creation_Count < 2) do begin
             Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 2, 1);
-            Scenery_Creation := create_object_sid(33554499, Scenery_Creation_Hex, elevation(dude_obj), -1);
+            Scenery_Creation := create_object(33554499, Scenery_Creation_Hex, dude_elevation);
             if (tile_num(Scenery_Creation) != Scenery_Creation_Hex) then begin
                 destroy_object(Scenery_Creation);
             end
@@ -117,7 +117,7 @@ begin
         Scenery_Creation_Count := 0;
         while (Scenery_Creation_Count < 2) do begin
             Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 3, 1);
-            Scenery_Creation := create_object_sid(33554499, Scenery_Creation_Hex, elevation(dude_obj), -1);
+            Scenery_Creation := create_object(33554499, Scenery_Creation_Hex, dude_elevation);
             if (tile_num(Scenery_Creation) != Scenery_Creation_Hex) then begin
                 destroy_object(Scenery_Creation);
             end
@@ -126,7 +126,7 @@ begin
         Scenery_Creation_Count := 0;
         while (Scenery_Creation_Count < 2) do begin
             Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 4, 1);
-            Scenery_Creation := create_object_sid(33554499, Scenery_Creation_Hex, elevation(dude_obj), -1);
+            Scenery_Creation := create_object(33554499, Scenery_Creation_Hex, dude_elevation);
             if (tile_num(Scenery_Creation) != Scenery_Creation_Hex) then begin
                 destroy_object(Scenery_Creation);
             end
@@ -135,7 +135,7 @@ begin
         Scenery_Creation_Count := 0;
         while (Scenery_Creation_Count < 1) do begin
             Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 5, 1);
-            Scenery_Creation := create_object_sid(33554499, Scenery_Creation_Hex, elevation(dude_obj), -1);
+            Scenery_Creation := create_object(33554499, Scenery_Creation_Hex, dude_elevation);
             if (tile_num(Scenery_Creation) != Scenery_Creation_Hex) then begin
                 destroy_object(Scenery_Creation);
             end
@@ -144,7 +144,7 @@ begin
         Scenery_Creation_Count := 0;
         while (Scenery_Creation_Count < 1) do begin
             Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 4, 1);
-            Scenery_Creation := create_object_sid(33554499, Scenery_Creation_Hex, elevation(dude_obj), -1);
+            Scenery_Creation := create_object(33554499, Scenery_Creation_Hex, dude_elevation);
             if (tile_num(Scenery_Creation) != Scenery_Creation_Hex) then begin
                 destroy_object(Scenery_Creation);
             end
@@ -153,7 +153,7 @@ begin
         Scenery_Creation_Count := 0;
         while (Scenery_Creation_Count < 1) do begin
             Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 5, 1);
-            Scenery_Creation := create_object_sid(33554499, Scenery_Creation_Hex, elevation(dude_obj), -1);
+            Scenery_Creation := create_object(33554499, Scenery_Creation_Hex, dude_elevation);
             if (tile_num(Scenery_Creation) != Scenery_Creation_Hex) then begin
                 destroy_object(Scenery_Creation);
             end
@@ -162,7 +162,7 @@ begin
         Scenery_Creation_Count := 0;
         while (Scenery_Creation_Count < 1) do begin
             Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 4, 1);
-            Scenery_Creation := create_object_sid(33554499, Scenery_Creation_Hex, elevation(dude_obj), -1);
+            Scenery_Creation := create_object(33554499, Scenery_Creation_Hex, dude_elevation);
             if (tile_num(Scenery_Creation) != Scenery_Creation_Hex) then begin
                 destroy_object(Scenery_Creation);
             end
@@ -171,7 +171,7 @@ begin
         Scenery_Creation_Count := 0;
         while (Scenery_Creation_Count < 1) do begin
             Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 5, 1);
-            Scenery_Creation := create_object_sid(33554499, Scenery_Creation_Hex, elevation(dude_obj), -1);
+            Scenery_Creation := create_object(33554499, Scenery_Creation_Hex, dude_elevation);
             if (tile_num(Scenery_Creation) != Scenery_Creation_Hex) then begin
                 destroy_object(Scenery_Creation);
             end
@@ -180,7 +180,7 @@ begin
         Scenery_Creation_Count := 0;
         while (Scenery_Creation_Count < 1) do begin
             Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 4, 1);
-            Scenery_Creation := create_object_sid(33554499, Scenery_Creation_Hex, elevation(dude_obj), -1);
+            Scenery_Creation := create_object(33554499, Scenery_Creation_Hex, dude_elevation);
             if (tile_num(Scenery_Creation) != Scenery_Creation_Hex) then begin
                 destroy_object(Scenery_Creation);
             end
@@ -189,7 +189,7 @@ begin
         Scenery_Creation_Count := 0;
         while (Scenery_Creation_Count < 1) do begin
             Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 0, 1);
-            Scenery_Creation := create_object_sid(33554499, Scenery_Creation_Hex, elevation(dude_obj), -1);
+            Scenery_Creation := create_object(33554499, Scenery_Creation_Hex, dude_elevation);
             if (tile_num(Scenery_Creation) != Scenery_Creation_Hex) then begin
                 destroy_object(Scenery_Creation);
             end
@@ -198,7 +198,7 @@ begin
         Scenery_Creation_Count := 0;
         while (Scenery_Creation_Count < 1) do begin
             Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 5, 1);
-            Scenery_Creation := create_object_sid(33554499, Scenery_Creation_Hex, elevation(dude_obj), -1);
+            Scenery_Creation := create_object(33554499, Scenery_Creation_Hex, dude_elevation);
             if (tile_num(Scenery_Creation) != Scenery_Creation_Hex) then begin
                 destroy_object(Scenery_Creation);
             end
@@ -207,7 +207,7 @@ begin
         Scenery_Creation_Count := 0;
         while (Scenery_Creation_Count < 2) do begin
             Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 0, 1);
-            Scenery_Creation := create_object_sid(33554499, Scenery_Creation_Hex, elevation(dude_obj), -1);
+            Scenery_Creation := create_object(33554499, Scenery_Creation_Hex, dude_elevation);
             if (tile_num(Scenery_Creation) != Scenery_Creation_Hex) then begin
                 destroy_object(Scenery_Creation);
             end
@@ -216,7 +216,7 @@ begin
         Scenery_Creation_Count := 0;
         while (Scenery_Creation_Count < 1) do begin
             Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 1, 1);
-            Scenery_Creation := create_object_sid(33554499, Scenery_Creation_Hex, elevation(dude_obj), -1);
+            Scenery_Creation := create_object(33554499, Scenery_Creation_Hex, dude_elevation);
             if (tile_num(Scenery_Creation) != Scenery_Creation_Hex) then begin
                 destroy_object(Scenery_Creation);
             end
@@ -225,7 +225,7 @@ begin
         Scenery_Creation_Count := 0;
         while (Scenery_Creation_Count < 1) do begin
             Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 2, 1);
-            Scenery_Creation := create_object_sid(33554499, Scenery_Creation_Hex, elevation(dude_obj), -1);
+            Scenery_Creation := create_object(33554499, Scenery_Creation_Hex, dude_elevation);
             if (tile_num(Scenery_Creation) != Scenery_Creation_Hex) then begin
                 destroy_object(Scenery_Creation);
             end
@@ -233,103 +233,103 @@ begin
         end
     end
     trunk_tile := tile_num_in_direction(tile_num_in_direction(arg0, 5, 2), 4, 1);
-    if (tile_contains_pid_obj(arg0, elevation(dude_obj), 33556384) != 0) then begin
+    if (tile_contains_pid_obj(arg0, dude_elevation, 33556384) != 0) then begin
         Scenery_Creation_Ptr := 0;
-        if (global_var(1644) == 0) then begin
+        if (global_var(GVAR_CAR_CURRENT_ELEVATION) == 0) then begin
             if (party_member_obj(831) != 0) then begin
                 Scenery_Creation_Ptr := party_member_obj(831);
             end
             else begin
-                Scenery_Creation_Ptr := create_object_sid(831, 0, 0, 920);
+                Scenery_Creation_Ptr := create_object_sid(831, 0, 0, SCRIPT_ZICRTRNK);
                 party_add(Scenery_Creation_Ptr);
             end
         end
         else begin
-            set_obj_visibility(tile_contains_pid_obj(trunk_tile, elevation(dude_obj), 831), 1);
+            set_obj_visibility(tile_contains_pid_obj(trunk_tile, dude_elevation, 831), 1);
         end
     end
-    if (tile_contains_pid_obj(arg0, elevation(dude_obj), 33555441) != 0) then begin
-        if (global_var(1644) == 1) then begin
+    if (tile_contains_pid_obj(arg0, dude_elevation, 33555441) != 0) then begin
+        if (global_var(GVAR_CAR_CURRENT_ELEVATION) == 1) then begin
             if (party_member_obj(455) != 0) then begin
                 Scenery_Creation_Ptr := party_member_obj(455);
             end
             else begin
-                Scenery_Creation_Ptr := create_object_sid(455, 0, 0, 920);
+                Scenery_Creation_Ptr := create_object_sid(455, 0, 0, SCRIPT_ZICRTRNK);
                 party_add(Scenery_Creation_Ptr);
             end
         end
         else begin
-            set_obj_visibility(tile_contains_pid_obj(trunk_tile, elevation(dude_obj), 455), 1);
+            set_obj_visibility(tile_contains_pid_obj(trunk_tile, dude_elevation, 455), 1);
         end
     end
-    if (tile_contains_pid_obj(arg0, elevation(dude_obj), 33556385) != 0) then begin
-        if (global_var(1644) == 2) then begin
+    if (tile_contains_pid_obj(arg0, dude_elevation, 33556385) != 0) then begin
+        if (global_var(GVAR_CAR_CURRENT_ELEVATION) == 2) then begin
             if (party_member_obj(832) != 0) then begin
                 Scenery_Creation_Ptr := party_member_obj(832);
             end
             else begin
-                Scenery_Creation_Ptr := create_object_sid(832, 0, 0, 920);
+                Scenery_Creation_Ptr := create_object_sid(832, 0, 0, SCRIPT_ZICRTRNK);
                 party_add(Scenery_Creation_Ptr);
             end
         end
         else begin
-            set_obj_visibility(tile_contains_pid_obj(trunk_tile, elevation(dude_obj), 832), 1);
+            set_obj_visibility(tile_contains_pid_obj(trunk_tile, dude_elevation, 832), 1);
         end
     end
-    if (tile_contains_pid_obj(arg0, elevation(dude_obj), 33556386) != 0) then begin
-        if (global_var(1644) == 3) then begin
+    if (tile_contains_pid_obj(arg0, dude_elevation, 33556386) != 0) then begin
+        if (global_var(GVAR_CAR_CURRENT_ELEVATION) == 3) then begin
             if (party_member_obj(833) != 0) then begin
                 Scenery_Creation_Ptr := party_member_obj(833);
             end
             else begin
-                Scenery_Creation_Ptr := create_object_sid(833, 0, 0, 920);
+                Scenery_Creation_Ptr := create_object_sid(833, 0, 0, SCRIPT_ZICRTRNK);
                 party_add(Scenery_Creation_Ptr);
             end
         end
         else begin
-            set_obj_visibility(tile_contains_pid_obj(trunk_tile, elevation(dude_obj), 833), 1);
+            set_obj_visibility(tile_contains_pid_obj(trunk_tile, dude_elevation, 833), 1);
         end
     end
-    if (tile_contains_pid_obj(arg0, elevation(dude_obj), 33556387) != 0) then begin
-        if (global_var(1644) == 4) then begin
+    if (tile_contains_pid_obj(arg0, dude_elevation, 33556387) != 0) then begin
+        if (global_var(GVAR_CAR_CURRENT_ELEVATION) == 4) then begin
             if (party_member_obj(834) != 0) then begin
                 Scenery_Creation_Ptr := party_member_obj(834);
             end
             else begin
-                Scenery_Creation_Ptr := create_object_sid(834, 0, 0, 920);
+                Scenery_Creation_Ptr := create_object_sid(834, 0, 0, SCRIPT_ZICRTRNK);
                 party_add(Scenery_Creation_Ptr);
             end
         end
         else begin
-            set_obj_visibility(tile_contains_pid_obj(trunk_tile, elevation(dude_obj), 834), 1);
+            set_obj_visibility(tile_contains_pid_obj(trunk_tile, dude_elevation, 834), 1);
         end
     end
-    if (tile_contains_pid_obj(arg0, elevation(dude_obj), 33556388) != 0) then begin
-        if (global_var(1644) == 5) then begin
+    if (tile_contains_pid_obj(arg0, dude_elevation, 33556388) != 0) then begin
+        if (global_var(GVAR_CAR_CURRENT_ELEVATION) == 5) then begin
             if (party_member_obj(835) != 0) then begin
                 Scenery_Creation_Ptr := party_member_obj(835);
             end
             else begin
-                Scenery_Creation_Ptr := create_object_sid(835, 0, 0, 920);
+                Scenery_Creation_Ptr := create_object_sid(835, 0, 0, SCRIPT_ZICRTRNK);
                 party_add(Scenery_Creation_Ptr);
             end
         end
         else begin
-            set_obj_visibility(tile_contains_pid_obj(trunk_tile, elevation(dude_obj), 835), 1);
+            set_obj_visibility(tile_contains_pid_obj(trunk_tile, dude_elevation, 835), 1);
         end
     end
-    if (tile_contains_pid_obj(arg0, elevation(dude_obj), 33556389) != 0) then begin
-        if (global_var(1644) == 6) then begin
+    if (tile_contains_pid_obj(arg0, dude_elevation, 33556389) != 0) then begin
+        if (global_var(GVAR_CAR_CURRENT_ELEVATION) == 6) then begin
             if (party_member_obj(836) != 0) then begin
                 Scenery_Creation_Ptr := party_member_obj(836);
             end
             else begin
-                Scenery_Creation_Ptr := create_object_sid(836, 0, 0, 920);
+                Scenery_Creation_Ptr := create_object_sid(836, 0, 0, SCRIPT_ZICRTRNK);
                 party_add(Scenery_Creation_Ptr);
             end
         end
         else begin
-            set_obj_visibility(tile_contains_pid_obj(trunk_tile, elevation(dude_obj), 836), 1);
+            set_obj_visibility(tile_contains_pid_obj(trunk_tile, dude_elevation, 836), 1);
         end
     end
     if (Scenery_Creation_Ptr != 0) then begin
@@ -338,7 +338,7 @@ begin
         Scenery_Creation_Count := 0;
         while (Scenery_Creation_Count < 1) do begin
             Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 1, 1);
-            Scenery_Creation := create_object_sid(33554499, Scenery_Creation_Hex, elevation(dude_obj), -1);
+            Scenery_Creation := create_object(33554499, Scenery_Creation_Hex, dude_elevation);
             if (tile_num(Scenery_Creation) != Scenery_Creation_Hex) then begin
                 destroy_object(Scenery_Creation);
             end
@@ -347,47 +347,47 @@ begin
         Scenery_Creation_Count := 0;
         while (Scenery_Creation_Count < 1) do begin
             Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 2, 1);
-            Scenery_Creation := create_object_sid(33554499, Scenery_Creation_Hex, elevation(dude_obj), -1);
+            Scenery_Creation := create_object(33554499, Scenery_Creation_Hex, dude_elevation);
             if (tile_num(Scenery_Creation) != Scenery_Creation_Hex) then begin
                 destroy_object(Scenery_Creation);
             end
             Scenery_Creation_Count := Scenery_Creation_Count + 1;
         end
     end
-    set_global_var(633, arg0);
-    set_global_var(1646, elevation(dude_obj));
-    while (global_var(1645) != cur_map_index) do begin
-        set_global_var(1645, cur_map_index);
+    set_global_var(GVAR_CAR_PLACED_TILE, arg0);
+    set_global_var(GVAR_CAR_HAS_BEEN_DRIVEN, dude_elevation);
+    while (global_var(GVAR_CAR_CURRENT_TOWN) != cur_map_index) do begin
+        set_global_var(GVAR_CAR_CURRENT_TOWN, cur_map_index);
     end
 end
 
 procedure delete_car(variable arg0)
 begin
-    Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, elevation(dude_obj), 33556384);
+    Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, dude_elevation, 33556384);
     if (Scenery_Creation_Ptr != 0) then begin
         destroy_object(Scenery_Creation_Ptr);
     end
-    Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, elevation(dude_obj), 33555441);
+    Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, dude_elevation, 33555441);
     if (Scenery_Creation_Ptr != 0) then begin
         destroy_object(Scenery_Creation_Ptr);
     end
-    Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, elevation(dude_obj), 33556385);
+    Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, dude_elevation, 33556385);
     if (Scenery_Creation_Ptr != 0) then begin
         destroy_object(Scenery_Creation_Ptr);
     end
-    Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, elevation(dude_obj), 33556386);
+    Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, dude_elevation, 33556386);
     if (Scenery_Creation_Ptr != 0) then begin
         destroy_object(Scenery_Creation_Ptr);
     end
-    Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, elevation(dude_obj), 33556387);
+    Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, dude_elevation, 33556387);
     if (Scenery_Creation_Ptr != 0) then begin
         destroy_object(Scenery_Creation_Ptr);
     end
-    Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, elevation(dude_obj), 33556388);
+    Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, dude_elevation, 33556388);
     if (Scenery_Creation_Ptr != 0) then begin
         destroy_object(Scenery_Creation_Ptr);
     end
-    Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, elevation(dude_obj), 33556389);
+    Scenery_Creation_Ptr := tile_contains_pid_obj(arg0, dude_elevation, 33556389);
     if (Scenery_Creation_Ptr != 0) then begin
         destroy_object(Scenery_Creation_Ptr);
     end
@@ -395,8 +395,8 @@ begin
     Scenery_Creation_Count := 0;
     while (Scenery_Creation_Count < 2) do begin
         Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 1, 1);
-        while (tile_contains_obj_pid(Scenery_Creation_Hex, elevation(dude_obj), 33554499)) do begin
-            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, elevation(dude_obj), 33554499);
+        while (tile_contains_obj_pid(Scenery_Creation_Hex, dude_elevation, 33554499)) do begin
+            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, dude_elevation, 33554499);
             destroy_object(Scenery_Creation_Ptr);
         end
         Scenery_Creation_Count := Scenery_Creation_Count + 1;
@@ -404,8 +404,8 @@ begin
     Scenery_Creation_Count := 0;
     while (Scenery_Creation_Count < 2) do begin
         Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 2, 1);
-        while (tile_contains_obj_pid(Scenery_Creation_Hex, elevation(dude_obj), 33554499)) do begin
-            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, elevation(dude_obj), 33554499);
+        while (tile_contains_obj_pid(Scenery_Creation_Hex, dude_elevation, 33554499)) do begin
+            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, dude_elevation, 33554499);
             destroy_object(Scenery_Creation_Ptr);
         end
         Scenery_Creation_Count := Scenery_Creation_Count + 1;
@@ -413,8 +413,8 @@ begin
     Scenery_Creation_Count := 0;
     while (Scenery_Creation_Count < 2) do begin
         Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 3, 1);
-        while (tile_contains_obj_pid(Scenery_Creation_Hex, elevation(dude_obj), 33554499)) do begin
-            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, elevation(dude_obj), 33554499);
+        while (tile_contains_obj_pid(Scenery_Creation_Hex, dude_elevation, 33554499)) do begin
+            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, dude_elevation, 33554499);
             destroy_object(Scenery_Creation_Ptr);
         end
         Scenery_Creation_Count := Scenery_Creation_Count + 1;
@@ -422,8 +422,8 @@ begin
     Scenery_Creation_Count := 0;
     while (Scenery_Creation_Count < 2) do begin
         Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 4, 1);
-        while (tile_contains_obj_pid(Scenery_Creation_Hex, elevation(dude_obj), 33554499)) do begin
-            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, elevation(dude_obj), 33554499);
+        while (tile_contains_obj_pid(Scenery_Creation_Hex, dude_elevation, 33554499)) do begin
+            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, dude_elevation, 33554499);
             destroy_object(Scenery_Creation_Ptr);
         end
         Scenery_Creation_Count := Scenery_Creation_Count + 1;
@@ -431,8 +431,8 @@ begin
     Scenery_Creation_Count := 0;
     while (Scenery_Creation_Count < 1) do begin
         Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 5, 1);
-        while (tile_contains_obj_pid(Scenery_Creation_Hex, elevation(dude_obj), 33554499)) do begin
-            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, elevation(dude_obj), 33554499);
+        while (tile_contains_obj_pid(Scenery_Creation_Hex, dude_elevation, 33554499)) do begin
+            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, dude_elevation, 33554499);
             destroy_object(Scenery_Creation_Ptr);
         end
         Scenery_Creation_Count := Scenery_Creation_Count + 1;
@@ -440,8 +440,8 @@ begin
     Scenery_Creation_Count := 0;
     while (Scenery_Creation_Count < 1) do begin
         Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 4, 1);
-        while (tile_contains_obj_pid(Scenery_Creation_Hex, elevation(dude_obj), 33554499)) do begin
-            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, elevation(dude_obj), 33554499);
+        while (tile_contains_obj_pid(Scenery_Creation_Hex, dude_elevation, 33554499)) do begin
+            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, dude_elevation, 33554499);
             destroy_object(Scenery_Creation_Ptr);
         end
         Scenery_Creation_Count := Scenery_Creation_Count + 1;
@@ -449,8 +449,8 @@ begin
     Scenery_Creation_Count := 0;
     while (Scenery_Creation_Count < 1) do begin
         Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 5, 1);
-        while (tile_contains_obj_pid(Scenery_Creation_Hex, elevation(dude_obj), 33554499)) do begin
-            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, elevation(dude_obj), 33554499);
+        while (tile_contains_obj_pid(Scenery_Creation_Hex, dude_elevation, 33554499)) do begin
+            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, dude_elevation, 33554499);
             destroy_object(Scenery_Creation_Ptr);
         end
         Scenery_Creation_Count := Scenery_Creation_Count + 1;
@@ -458,8 +458,8 @@ begin
     Scenery_Creation_Count := 0;
     while (Scenery_Creation_Count < 1) do begin
         Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 4, 1);
-        while (tile_contains_obj_pid(Scenery_Creation_Hex, elevation(dude_obj), 33554499)) do begin
-            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, elevation(dude_obj), 33554499);
+        while (tile_contains_obj_pid(Scenery_Creation_Hex, dude_elevation, 33554499)) do begin
+            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, dude_elevation, 33554499);
             destroy_object(Scenery_Creation_Ptr);
         end
         Scenery_Creation_Count := Scenery_Creation_Count + 1;
@@ -467,8 +467,8 @@ begin
     Scenery_Creation_Count := 0;
     while (Scenery_Creation_Count < 1) do begin
         Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 5, 1);
-        while (tile_contains_obj_pid(Scenery_Creation_Hex, elevation(dude_obj), 33554499)) do begin
-            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, elevation(dude_obj), 33554499);
+        while (tile_contains_obj_pid(Scenery_Creation_Hex, dude_elevation, 33554499)) do begin
+            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, dude_elevation, 33554499);
             destroy_object(Scenery_Creation_Ptr);
         end
         Scenery_Creation_Count := Scenery_Creation_Count + 1;
@@ -476,8 +476,8 @@ begin
     Scenery_Creation_Count := 0;
     while (Scenery_Creation_Count < 1) do begin
         Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 4, 1);
-        while (tile_contains_obj_pid(Scenery_Creation_Hex, elevation(dude_obj), 33554499)) do begin
-            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, elevation(dude_obj), 33554499);
+        while (tile_contains_obj_pid(Scenery_Creation_Hex, dude_elevation, 33554499)) do begin
+            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, dude_elevation, 33554499);
             destroy_object(Scenery_Creation_Ptr);
         end
         Scenery_Creation_Count := Scenery_Creation_Count + 1;
@@ -485,8 +485,8 @@ begin
     Scenery_Creation_Count := 0;
     while (Scenery_Creation_Count < 1) do begin
         Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 0, 1);
-        while (tile_contains_obj_pid(Scenery_Creation_Hex, elevation(dude_obj), 33554499)) do begin
-            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, elevation(dude_obj), 33554499);
+        while (tile_contains_obj_pid(Scenery_Creation_Hex, dude_elevation, 33554499)) do begin
+            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, dude_elevation, 33554499);
             destroy_object(Scenery_Creation_Ptr);
         end
         Scenery_Creation_Count := Scenery_Creation_Count + 1;
@@ -494,8 +494,8 @@ begin
     Scenery_Creation_Count := 0;
     while (Scenery_Creation_Count < 1) do begin
         Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 5, 1);
-        while (tile_contains_obj_pid(Scenery_Creation_Hex, elevation(dude_obj), 33554499)) do begin
-            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, elevation(dude_obj), 33554499);
+        while (tile_contains_obj_pid(Scenery_Creation_Hex, dude_elevation, 33554499)) do begin
+            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, dude_elevation, 33554499);
             destroy_object(Scenery_Creation_Ptr);
         end
         Scenery_Creation_Count := Scenery_Creation_Count + 1;
@@ -503,8 +503,8 @@ begin
     Scenery_Creation_Count := 0;
     while (Scenery_Creation_Count < 2) do begin
         Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 0, 1);
-        while (tile_contains_obj_pid(Scenery_Creation_Hex, elevation(dude_obj), 33554499)) do begin
-            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, elevation(dude_obj), 33554499);
+        while (tile_contains_obj_pid(Scenery_Creation_Hex, dude_elevation, 33554499)) do begin
+            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, dude_elevation, 33554499);
             destroy_object(Scenery_Creation_Ptr);
         end
         Scenery_Creation_Count := Scenery_Creation_Count + 1;
@@ -512,8 +512,8 @@ begin
     Scenery_Creation_Count := 0;
     while (Scenery_Creation_Count < 1) do begin
         Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 1, 1);
-        while (tile_contains_obj_pid(Scenery_Creation_Hex, elevation(dude_obj), 33554499)) do begin
-            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, elevation(dude_obj), 33554499);
+        while (tile_contains_obj_pid(Scenery_Creation_Hex, dude_elevation, 33554499)) do begin
+            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, dude_elevation, 33554499);
             destroy_object(Scenery_Creation_Ptr);
         end
         Scenery_Creation_Count := Scenery_Creation_Count + 1;
@@ -521,8 +521,8 @@ begin
     Scenery_Creation_Count := 0;
     while (Scenery_Creation_Count < 1) do begin
         Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 2, 1);
-        while (tile_contains_obj_pid(Scenery_Creation_Hex, elevation(dude_obj), 33554499)) do begin
-            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, elevation(dude_obj), 33554499);
+        while (tile_contains_obj_pid(Scenery_Creation_Hex, dude_elevation, 33554499)) do begin
+            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, dude_elevation, 33554499);
             destroy_object(Scenery_Creation_Ptr);
         end
         Scenery_Creation_Count := Scenery_Creation_Count + 1;
@@ -531,8 +531,8 @@ begin
     Scenery_Creation_Count := 0;
     while (Scenery_Creation_Count < 1) do begin
         Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 1, 1);
-        while (tile_contains_obj_pid(Scenery_Creation_Hex, elevation(dude_obj), 33554499)) do begin
-            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, elevation(dude_obj), 33554499);
+        while (tile_contains_obj_pid(Scenery_Creation_Hex, dude_elevation, 33554499)) do begin
+            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, dude_elevation, 33554499);
             destroy_object(Scenery_Creation_Ptr);
         end
         Scenery_Creation_Count := Scenery_Creation_Count + 1;
@@ -540,14 +540,14 @@ begin
     Scenery_Creation_Count := 0;
     while (Scenery_Creation_Count < 1) do begin
         Scenery_Creation_Hex := tile_num_in_direction(Scenery_Creation_Hex, 2, 1);
-        while (tile_contains_obj_pid(Scenery_Creation_Hex, elevation(dude_obj), 33554499)) do begin
-            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, elevation(dude_obj), 33554499);
+        while (tile_contains_obj_pid(Scenery_Creation_Hex, dude_elevation, 33554499)) do begin
+            Scenery_Creation_Ptr := tile_contains_pid_obj(Scenery_Creation_Hex, dude_elevation, 33554499);
             destroy_object(Scenery_Creation_Ptr);
         end
         Scenery_Creation_Count := Scenery_Creation_Count + 1;
     end
     trunk_tile := tile_num_in_direction(tile_num_in_direction(arg0, 5, 2), 4, 1);
-    Scenery_Creation_Ptr := tile_contains_pid_obj(trunk_tile, elevation(dude_obj), 831);
+    Scenery_Creation_Ptr := tile_contains_pid_obj(trunk_tile, dude_elevation, 831);
     if (Scenery_Creation_Ptr != 0) then begin
         if (Scenery_Creation_Ptr == party_member_obj(831)) then begin
             set_obj_visibility(Scenery_Creation_Ptr, 1);
@@ -556,7 +556,7 @@ begin
             destroy_object(Scenery_Creation_Ptr);
         end
     end
-    Scenery_Creation_Ptr := tile_contains_pid_obj(trunk_tile, elevation(dude_obj), 455);
+    Scenery_Creation_Ptr := tile_contains_pid_obj(trunk_tile, dude_elevation, 455);
     if (Scenery_Creation_Ptr != 0) then begin
         if (Scenery_Creation_Ptr == party_member_obj(455)) then begin
             set_obj_visibility(Scenery_Creation_Ptr, 1);
@@ -565,7 +565,7 @@ begin
             destroy_object(Scenery_Creation_Ptr);
         end
     end
-    Scenery_Creation_Ptr := tile_contains_pid_obj(trunk_tile, elevation(dude_obj), 832);
+    Scenery_Creation_Ptr := tile_contains_pid_obj(trunk_tile, dude_elevation, 832);
     if (Scenery_Creation_Ptr != 0) then begin
         if (Scenery_Creation_Ptr == party_member_obj(832)) then begin
             set_obj_visibility(Scenery_Creation_Ptr, 1);
@@ -574,7 +574,7 @@ begin
             destroy_object(Scenery_Creation_Ptr);
         end
     end
-    Scenery_Creation_Ptr := tile_contains_pid_obj(trunk_tile, elevation(dude_obj), 833);
+    Scenery_Creation_Ptr := tile_contains_pid_obj(trunk_tile, dude_elevation, 833);
     if (Scenery_Creation_Ptr != 0) then begin
         if (Scenery_Creation_Ptr == party_member_obj(833)) then begin
             set_obj_visibility(Scenery_Creation_Ptr, 1);
@@ -583,7 +583,7 @@ begin
             destroy_object(Scenery_Creation_Ptr);
         end
     end
-    Scenery_Creation_Ptr := tile_contains_pid_obj(trunk_tile, elevation(dude_obj), 834);
+    Scenery_Creation_Ptr := tile_contains_pid_obj(trunk_tile, dude_elevation, 834);
     if (Scenery_Creation_Ptr != 0) then begin
         if (Scenery_Creation_Ptr == party_member_obj(834)) then begin
             set_obj_visibility(Scenery_Creation_Ptr, 1);
@@ -592,7 +592,7 @@ begin
             destroy_object(Scenery_Creation_Ptr);
         end
     end
-    Scenery_Creation_Ptr := tile_contains_pid_obj(trunk_tile, elevation(dude_obj), 835);
+    Scenery_Creation_Ptr := tile_contains_pid_obj(trunk_tile, dude_elevation, 835);
     if (Scenery_Creation_Ptr != 0) then begin
         if (Scenery_Creation_Ptr == party_member_obj(835)) then begin
             set_obj_visibility(Scenery_Creation_Ptr, 1);
@@ -601,7 +601,7 @@ begin
             destroy_object(Scenery_Creation_Ptr);
         end
     end
-    Scenery_Creation_Ptr := tile_contains_pid_obj(trunk_tile, elevation(dude_obj), 836);
+    Scenery_Creation_Ptr := tile_contains_pid_obj(trunk_tile, dude_elevation, 836);
     if (Scenery_Creation_Ptr != 0) then begin
         if (Scenery_Creation_Ptr == party_member_obj(836)) then begin
             set_obj_visibility(Scenery_Creation_Ptr, 1);
@@ -610,8 +610,8 @@ begin
             destroy_object(Scenery_Creation_Ptr);
         end
     end
-    set_global_var(633, -1);
-    set_global_var(1645, -1);
+    set_global_var(GVAR_CAR_PLACED_TILE, -1);
+    set_global_var(GVAR_CAR_CURRENT_TOWN, -1);
 end
 
 procedure checkPartyMembersNearDoor
@@ -726,33 +726,33 @@ end
 procedure map_enter_p_proc
 begin
     set_light_level(50);
-    if ((map_var(0) == 0) and (global_var(8) != 0) and (metarule(30, 0) == 11)) then begin
+    if ((map_var(0) == 0) and (global_var(GVAR_KNOWLEDGE_HEALING_POWDER) != 0) and (car_current_town == 11)) then begin
         set_map_var(0, 1);
-        if (not(metarule(22, 0))) then begin
+        if (not(is_loading_game)) then begin
             call place_car(19500);
         end
     end
     else begin
-        if ((map_var(0) == 0) and (metarule(30, 0) != 11)) then begin
+        if ((map_var(0) == 0) and (car_current_town != 11)) then begin
             set_map_var(0, 1);
-            if (not(metarule(22, 0))) then begin
+            if (not(is_loading_game)) then begin
                 call place_car(19500);
             end
         end
     end
-    if (global_var(633) != 19500) then begin
+    if (global_var(GVAR_CAR_PLACED_TILE) != 19500) then begin
         call delete_car(19500);
     end
-    if (not(metarule(22, 0))) then begin
-        if (global_var(213) == 1) then begin
-            set_global_var(213, 2);
-            if (metarule(17, 45) != 0) then begin
+    if (not(is_loading_game)) then begin
+        if (global_var(GVAR_NCR_FAKE_VAULT13_MAP) == 1) then begin
+            set_global_var(GVAR_NCR_FAKE_VAULT13_MAP, 2);
+            if (town_known(45) != MARK_STATE_UNKNOWN) then begin
                 debug_msg(" unmark_on_map(" + 45 + ")");
-                mark_area_known(0, 45, 0);
+                mark_area_known(MARK_TYPE_TOWN, 45, MARK_STATE_UNKNOWN);
             end
-            if (metarule(17, 46) == 0) then begin
+            if (town_known(46) == MARK_STATE_UNKNOWN) then begin
                 debug_msg("  mark_on_map(" + 46 + ")");
-                mark_area_known(0, 46, 1);
+                mark_area_known(MARK_TYPE_TOWN, 46, MARK_STATE_KNOWN);
             end
         end
     end
@@ -762,4 +762,3 @@ procedure map_update_p_proc
 begin
     set_light_level(50);
 end
-
