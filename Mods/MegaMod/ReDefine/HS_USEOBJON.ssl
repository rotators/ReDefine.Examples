variable range_perks;
variable math;
variable float_math := 0.00000;

procedure start;
procedure Delete_Removed_Items(variable arg0);
procedure Validate(variable arg0);


procedure start
begin
    variable LVar0 := 0;
    variable LVar1 := 0;
    variable LVar2 := 0;
    variable LVar3 := 0;
    variable LVar4 := 0;
    variable LVar5 := 0;
    variable LVar6 := 0;
    if (init_hook) then begin
    end
    else begin
        LVar2 := get_sfall_arg;
        LVar3 := get_sfall_arg;
        LVar4 := get_sfall_arg;
        if ((LVar3 == dude_obj) and (LVar2 == dude_obj)) then begin
            if (obj_pid(LVar4) == 778) then begin
                if (dude_skill(SKILL_SMALL_GUNS) < 300) then begin
                    LVar0 := random(3, 6);
                    LVar1 := random(2, 4);
                    gfade_out(10);
                    if (has_trait(TRAIT_PERK, dude_obj, PERK_comprehension_perk)) then begin
                        critter_mod_skill(dude_obj, SKILL_SMALL_GUNS, LVar0);
                        display_msg(message_str(SCRIPT_OBJ_DUDE, 160) + LVar0 + message_str(SCRIPT_OBJ_DUDE, 178));
                    end
                    else begin
                        critter_mod_skill(dude_obj, SKILL_SMALL_GUNS, LVar1);
                        display_msg(message_str(SCRIPT_OBJ_DUDE, 160) + LVar1 + message_str(SCRIPT_OBJ_DUDE, 178));
                    end
                    game_time_advance(60 * (60 * 10));
                    gfade_in(10);
                end
                else begin
                    display_msg(message_str(SCRIPT_OBJ_DUDE, 203) + message_str(SCRIPT_OBJ_DUDE, 205) + message_str(SCRIPT_OBJ_DUDE, 204));
                    gfade_out(10);
                    game_time_advance(60 * (60 * 10));
                    gfade_in(10);
                end
            end
            else begin
                if (obj_pid(LVar4) == 779) then begin
                    if (dude_skill(SKILL_BIG_GUNS) < 300) then begin
                        LVar0 := random(3, 6);
                        LVar1 := random(2, 4);
                        gfade_out(10);
                        if (has_trait(TRAIT_PERK, dude_obj, PERK_comprehension_perk)) then begin
                            critter_mod_skill(dude_obj, SKILL_BIG_GUNS, LVar0);
                            display_msg(message_str(SCRIPT_OBJ_DUDE, 161) + LVar0 + message_str(SCRIPT_OBJ_DUDE, 178));
                        end
                        else begin
                            critter_mod_skill(dude_obj, SKILL_BIG_GUNS, LVar1);
                            display_msg(message_str(SCRIPT_OBJ_DUDE, 161) + LVar1 + message_str(SCRIPT_OBJ_DUDE, 178));
                        end
                        game_time_advance(60 * (60 * 10));
                        gfade_in(10);
                    end
                    else begin
                        display_msg(message_str(SCRIPT_OBJ_DUDE, 203) + message_str(SCRIPT_OBJ_DUDE, 206) + message_str(SCRIPT_OBJ_DUDE, 204));
                        gfade_out(10);
                        game_time_advance(60 * (60 * 10));
                        gfade_in(10);
                    end
                end
                else begin
                    if (obj_pid(LVar4) == 780) then begin
                        if (dude_skill(SKILL_ENERGY_WEAPONS) < 300) then begin
                            LVar0 := random(3, 6);
                            LVar1 := random(2, 4);
                            gfade_out(10);
                            if (has_trait(TRAIT_PERK, dude_obj, PERK_comprehension_perk)) then begin
                                critter_mod_skill(dude_obj, SKILL_ENERGY_WEAPONS, LVar0);
                                display_msg(message_str(SCRIPT_OBJ_DUDE, 162) + LVar0 + message_str(SCRIPT_OBJ_DUDE, 178));
                            end
                            else begin
                                critter_mod_skill(dude_obj, SKILL_ENERGY_WEAPONS, LVar1);
                                display_msg(message_str(SCRIPT_OBJ_DUDE, 162) + LVar1 + message_str(SCRIPT_OBJ_DUDE, 178));
                            end
                            game_time_advance(60 * (60 * 10));
                            gfade_in(10);
                        end
                        else begin
                            display_msg(message_str(SCRIPT_OBJ_DUDE, 203) + message_str(SCRIPT_OBJ_DUDE, 207) + message_str(SCRIPT_OBJ_DUDE, 204));
                            gfade_out(10);
                            game_time_advance(60 * (60 * 10));
                            gfade_in(10);
                        end
                    end
                    else begin
                        if (obj_pid(LVar4) == 781) then begin
                            if (dude_skill(SKILL_UNARMED_COMBAT) < 300) then begin
                                LVar0 := random(3, 6);
                                LVar1 := random(2, 4);
                                gfade_out(10);
                                if (has_trait(TRAIT_PERK, dude_obj, PERK_comprehension_perk)) then begin
                                    critter_mod_skill(dude_obj, SKILL_UNARMED_COMBAT, LVar0);
                                    display_msg(message_str(SCRIPT_OBJ_DUDE, 163) + LVar0 + message_str(SCRIPT_OBJ_DUDE, 178));
                                end
                                else begin
                                    critter_mod_skill(dude_obj, SKILL_UNARMED_COMBAT, LVar1);
                                    display_msg(message_str(SCRIPT_OBJ_DUDE, 163) + LVar1 + message_str(SCRIPT_OBJ_DUDE, 178));
                                end
                                game_time_advance(60 * (60 * 10));
                                gfade_in(10);
                            end
                            else begin
                                display_msg(message_str(SCRIPT_OBJ_DUDE, 203) + message_str(SCRIPT_OBJ_DUDE, 208) + message_str(SCRIPT_OBJ_DUDE, 204));
                                gfade_out(10);
                                game_time_advance(60 * (60 * 10));
                                gfade_in(10);
                            end
                        end
                        else begin
                            if (obj_pid(LVar4) == 782) then begin
                                if (dude_skill(SKILL_MELEE) < 300) then begin
                                    LVar0 := random(3, 6);
                                    LVar1 := random(2, 4);
                                    gfade_out(10);
                                    if (has_trait(TRAIT_PERK, dude_obj, PERK_comprehension_perk)) then begin
                                        critter_mod_skill(dude_obj, SKILL_MELEE, LVar0);
                                        display_msg(message_str(SCRIPT_OBJ_DUDE, 164) + LVar0 + message_str(SCRIPT_OBJ_DUDE, 178));
                                    end
                                    else begin
                                        critter_mod_skill(dude_obj, SKILL_MELEE, LVar1);
                                        display_msg(message_str(SCRIPT_OBJ_DUDE, 164) + LVar1 + message_str(SCRIPT_OBJ_DUDE, 178));
                                    end
                                    game_time_advance(60 * (60 * 10));
                                    gfade_in(10);
                                end
                                else begin
                                    display_msg(message_str(SCRIPT_OBJ_DUDE, 203) + message_str(SCRIPT_OBJ_DUDE, 209) + message_str(SCRIPT_OBJ_DUDE, 204));
                                    gfade_out(10);
                                    game_time_advance(60 * (60 * 10));
                                    gfade_in(10);
                                end
                            end
                            else begin
                                if (obj_pid(LVar4) == 783) then begin
                                    if (dude_skill(SKILL_THROWING) < 300) then begin
                                        LVar0 := random(3, 6);
                                        LVar1 := random(2, 4);
                                        gfade_out(10);
                                        if (has_trait(TRAIT_PERK, dude_obj, PERK_comprehension_perk)) then begin
                                            critter_mod_skill(dude_obj, SKILL_THROWING, LVar0);
                                            display_msg(message_str(SCRIPT_OBJ_DUDE, 165) + LVar0 + message_str(SCRIPT_OBJ_DUDE, 178));
                                        end
                                        else begin
                                            critter_mod_skill(dude_obj, SKILL_THROWING, LVar1);
                                            display_msg(message_str(SCRIPT_OBJ_DUDE, 165) + LVar1 + message_str(SCRIPT_OBJ_DUDE, 178));
                                        end
                                        game_time_advance(60 * (60 * 10));
                                        gfade_in(10);
                                    end
                                    else begin
                                        display_msg(message_str(SCRIPT_OBJ_DUDE, 203) + message_str(SCRIPT_OBJ_DUDE, 210) + message_str(SCRIPT_OBJ_DUDE, 204));
                                        gfade_out(10);
                                        game_time_advance(60 * (60 * 10));
                                        gfade_in(10);
                                    end
                                end
                                else begin
                                    if (obj_pid(LVar4) == 784) then begin
                                        if (dude_skill(SKILL_FIRST_AID) < 300) then begin
                                            LVar0 := random(3, 6);
                                            LVar1 := random(2, 4);
                                            gfade_out(10);
                                            if (has_trait(TRAIT_PERK, dude_obj, PERK_comprehension_perk)) then begin
                                                critter_mod_skill(dude_obj, SKILL_FIRST_AID, LVar0);
                                                display_msg(message_str(SCRIPT_OBJ_DUDE, 166) + LVar0 + message_str(SCRIPT_OBJ_DUDE, 178));
                                            end
                                            else begin
                                                critter_mod_skill(dude_obj, SKILL_FIRST_AID, LVar1);
                                                display_msg(message_str(SCRIPT_OBJ_DUDE, 166) + LVar1 + message_str(SCRIPT_OBJ_DUDE, 178));
                                            end
                                            game_time_advance(60 * (60 * 10));
                                            gfade_in(10);
                                        end
                                        else begin
                                            display_msg(message_str(SCRIPT_OBJ_DUDE, 203) + message_str(SCRIPT_OBJ_DUDE, 211) + message_str(SCRIPT_OBJ_DUDE, 204));
                                            gfade_out(10);
                                            game_time_advance(60 * (60 * 10));
                                            gfade_in(10);
                                        end
                                    end
                                    else begin
                                        if (obj_pid(LVar4) == 785) then begin
                                            if (dude_skill(SKILL_DOCTOR) < 300) then begin
                                                LVar0 := random(3, 6);
                                                LVar1 := random(2, 4);
                                                gfade_out(10);
                                                if (has_trait(TRAIT_PERK, dude_obj, PERK_comprehension_perk)) then begin
                                                    critter_mod_skill(dude_obj, SKILL_DOCTOR, LVar0);
                                                    display_msg(message_str(SCRIPT_OBJ_DUDE, 167) + LVar0 + message_str(SCRIPT_OBJ_DUDE, 178));
                                                end
                                                else begin
                                                    critter_mod_skill(dude_obj, SKILL_DOCTOR, LVar1);
                                                    display_msg(message_str(SCRIPT_OBJ_DUDE, 167) + LVar1 + message_str(SCRIPT_OBJ_DUDE, 178));
                                                end
                                                game_time_advance(60 * (60 * 10));
                                                gfade_in(10);
                                            end
                                            else begin
                                                display_msg(message_str(SCRIPT_OBJ_DUDE, 203) + message_str(SCRIPT_OBJ_DUDE, 212) + message_str(SCRIPT_OBJ_DUDE, 204));
                                                gfade_out(10);
                                                game_time_advance(60 * (60 * 10));
                                                gfade_in(10);
                                            end
                                        end
                                        else begin
                                            if (obj_pid(LVar4) == 786) then begin
                                                if (dude_skill(SKILL_SNEAK) < 300) then begin
                                                    LVar0 := random(3, 6);
                                                    LVar1 := random(2, 4);
                                                    gfade_out(10);
                                                    if (has_trait(TRAIT_PERK, dude_obj, PERK_comprehension_perk)) then begin
                                                        critter_mod_skill(dude_obj, SKILL_SNEAK, LVar0);
                                                        display_msg(message_str(SCRIPT_OBJ_DUDE, 168) + LVar0 + message_str(SCRIPT_OBJ_DUDE, 178));
                                                    end
                                                    else begin
                                                        critter_mod_skill(dude_obj, SKILL_SNEAK, LVar1);
                                                        display_msg(message_str(SCRIPT_OBJ_DUDE, 168) + LVar1 + message_str(SCRIPT_OBJ_DUDE, 178));
                                                    end
                                                    game_time_advance(60 * (60 * 10));
                                                    gfade_in(10);
                                                end
                                                else begin
                                                    display_msg(message_str(SCRIPT_OBJ_DUDE, 203) + message_str(SCRIPT_OBJ_DUDE, 213) + message_str(SCRIPT_OBJ_DUDE, 204));
                                                    gfade_out(10);
                                                    game_time_advance(60 * (60 * 10));
                                                    gfade_in(10);
                                                end
                                            end
                                            else begin
                                                if (obj_pid(LVar4) == 787) then begin
                                                    if (dude_skill(SKILL_LOCKPICK) < 300) then begin
                                                        LVar0 := random(3, 6);
                                                        LVar1 := random(2, 4);
                                                        gfade_out(10);
                                                        if (has_trait(TRAIT_PERK, dude_obj, PERK_comprehension_perk)) then begin
                                                            critter_mod_skill(dude_obj, SKILL_LOCKPICK, LVar0);
                                                            display_msg(message_str(SCRIPT_OBJ_DUDE, 169) + LVar0 + message_str(SCRIPT_OBJ_DUDE, 178));
                                                        end
                                                        else begin
                                                            critter_mod_skill(dude_obj, SKILL_LOCKPICK, LVar1);
                                                            display_msg(message_str(SCRIPT_OBJ_DUDE, 169) + LVar1 + message_str(SCRIPT_OBJ_DUDE, 178));
                                                        end
                                                        game_time_advance(60 * (60 * 10));
                                                        gfade_in(10);
                                                    end
                                                    else begin
                                                        display_msg(message_str(SCRIPT_OBJ_DUDE, 203) + message_str(SCRIPT_OBJ_DUDE, 214) + message_str(SCRIPT_OBJ_DUDE, 204));
                                                        gfade_out(10);
                                                        game_time_advance(60 * (60 * 10));
                                                        gfade_in(10);
                                                    end
                                                end
                                                else begin
                                                    if (obj_pid(LVar4) == 788) then begin
                                                        if (dude_skill(SKILL_STEAL) < 300) then begin
                                                            LVar0 := random(3, 6);
                                                            LVar1 := random(2, 4);
                                                            gfade_out(10);
                                                            if (has_trait(TRAIT_PERK, dude_obj, PERK_comprehension_perk)) then begin
                                                                critter_mod_skill(dude_obj, SKILL_STEAL, LVar0);
                                                                display_msg(message_str(SCRIPT_OBJ_DUDE, 170) + LVar0 + message_str(SCRIPT_OBJ_DUDE, 178));
                                                            end
                                                            else begin
                                                                critter_mod_skill(dude_obj, SKILL_STEAL, LVar1);
                                                                display_msg(message_str(SCRIPT_OBJ_DUDE, 170) + LVar1 + message_str(SCRIPT_OBJ_DUDE, 178));
                                                            end
                                                            game_time_advance(60 * (60 * 10));
                                                            gfade_in(10);
                                                        end
                                                        else begin
                                                            display_msg(message_str(SCRIPT_OBJ_DUDE, 203) + message_str(SCRIPT_OBJ_DUDE, 215) + message_str(SCRIPT_OBJ_DUDE, 204));
                                                            gfade_out(10);
                                                            game_time_advance(60 * (60 * 10));
                                                            gfade_in(10);
                                                        end
                                                    end
                                                    else begin
                                                        if (obj_pid(LVar4) == 789) then begin
                                                            if (dude_skill(SKILL_TRAPS) < 300) then begin
                                                                LVar0 := random(3, 6);
                                                                LVar1 := random(2, 4);
                                                                gfade_out(10);
                                                                if (has_trait(TRAIT_PERK, dude_obj, PERK_comprehension_perk)) then begin
                                                                    critter_mod_skill(dude_obj, SKILL_TRAPS, LVar0);
                                                                    display_msg(message_str(SCRIPT_OBJ_DUDE, 171) + LVar0 + message_str(SCRIPT_OBJ_DUDE, 178));
                                                                end
                                                                else begin
                                                                    critter_mod_skill(dude_obj, SKILL_TRAPS, LVar1);
                                                                    display_msg(message_str(SCRIPT_OBJ_DUDE, 171) + LVar1 + message_str(SCRIPT_OBJ_DUDE, 178));
                                                                end
                                                                game_time_advance(60 * (60 * 10));
                                                                gfade_in(10);
                                                            end
                                                            else begin
                                                                display_msg(message_str(SCRIPT_OBJ_DUDE, 203) + message_str(SCRIPT_OBJ_DUDE, 216) + message_str(SCRIPT_OBJ_DUDE, 204));
                                                                gfade_out(10);
                                                                game_time_advance(60 * (60 * 10));
                                                                gfade_in(10);
                                                            end
                                                        end
                                                        else begin
                                                            if (obj_pid(LVar4) == 790) then begin
                                                                if (dude_skill(SKILL_SCIENCE) < 300) then begin
                                                                    LVar0 := random(3, 6);
                                                                    LVar1 := random(2, 4);
                                                                    gfade_out(10);
                                                                    if (has_trait(TRAIT_PERK, dude_obj, PERK_comprehension_perk)) then begin
                                                                        critter_mod_skill(dude_obj, SKILL_SCIENCE, LVar0);
                                                                        display_msg(message_str(SCRIPT_OBJ_DUDE, 172) + LVar0 + message_str(SCRIPT_OBJ_DUDE, 178));
                                                                    end
                                                                    else begin
                                                                        critter_mod_skill(dude_obj, SKILL_SCIENCE, LVar1);
                                                                        display_msg(message_str(SCRIPT_OBJ_DUDE, 172) + LVar1 + message_str(SCRIPT_OBJ_DUDE, 178));
                                                                    end
                                                                    game_time_advance(60 * (60 * 10));
                                                                    gfade_in(10);
                                                                end
                                                                else begin
                                                                    display_msg(message_str(SCRIPT_OBJ_DUDE, 203) + message_str(SCRIPT_OBJ_DUDE, 217) + message_str(SCRIPT_OBJ_DUDE, 204));
                                                                    gfade_out(10);
                                                                    game_time_advance(60 * (60 * 10));
                                                                    gfade_in(10);
                                                                end
                                                            end
                                                            else begin
                                                                if (obj_pid(LVar4) == 791) then begin
                                                                    if (dude_skill(SKILL_REPAIR) < 300) then begin
                                                                        LVar0 := random(3, 6);
                                                                        LVar1 := random(2, 4);
                                                                        gfade_out(10);
                                                                        if (has_trait(TRAIT_PERK, dude_obj, PERK_comprehension_perk)) then begin
                                                                            critter_mod_skill(dude_obj, SKILL_REPAIR, LVar0);
                                                                            display_msg(message_str(SCRIPT_OBJ_DUDE, 173) + LVar0 + message_str(SCRIPT_OBJ_DUDE, 178));
                                                                        end
                                                                        else begin
                                                                            critter_mod_skill(dude_obj, SKILL_REPAIR, LVar1);
                                                                            display_msg(message_str(SCRIPT_OBJ_DUDE, 173) + LVar1 + message_str(SCRIPT_OBJ_DUDE, 178));
                                                                        end
                                                                        game_time_advance(60 * (60 * 10));
                                                                        gfade_in(10);
                                                                    end
                                                                    else begin
                                                                        display_msg(message_str(SCRIPT_OBJ_DUDE, 203) + message_str(SCRIPT_OBJ_DUDE, 218) + message_str(SCRIPT_OBJ_DUDE, 204));
                                                                        gfade_out(10);
                                                                        game_time_advance(60 * (60 * 10));
                                                                        gfade_in(10);
                                                                    end
                                                                end
                                                                else begin
                                                                    if (obj_pid(LVar4) == 792) then begin
                                                                        if (dude_skill(SKILL_SPEECH) < 300) then begin
                                                                            LVar0 := random(3, 6);
                                                                            LVar1 := random(2, 4);
                                                                            gfade_out(10);
                                                                            if (has_trait(TRAIT_PERK, dude_obj, PERK_comprehension_perk)) then begin
                                                                                critter_mod_skill(dude_obj, SKILL_SPEECH, LVar0);
                                                                                display_msg(message_str(SCRIPT_OBJ_DUDE, 174) + LVar0 + message_str(SCRIPT_OBJ_DUDE, 178));
                                                                            end
                                                                            else begin
                                                                                critter_mod_skill(dude_obj, SKILL_SPEECH, LVar1);
                                                                                display_msg(message_str(SCRIPT_OBJ_DUDE, 174) + LVar1 + message_str(SCRIPT_OBJ_DUDE, 178));
                                                                            end
                                                                            game_time_advance(60 * (60 * 10));
                                                                            gfade_in(10);
                                                                        end
                                                                        else begin
                                                                            display_msg(message_str(SCRIPT_OBJ_DUDE, 203) + message_str(SCRIPT_OBJ_DUDE, 219) + message_str(SCRIPT_OBJ_DUDE, 204));
                                                                            gfade_out(10);
                                                                            game_time_advance(60 * (60 * 10));
                                                                            gfade_in(10);
                                                                        end
                                                                    end
                                                                    else begin
                                                                        if (obj_pid(LVar4) == 793) then begin
                                                                            if (dude_skill(SKILL_BARTER) < 300) then begin
                                                                                LVar0 := random(3, 6);
                                                                                LVar1 := random(2, 4);
                                                                                gfade_out(10);
                                                                                if (has_trait(TRAIT_PERK, dude_obj, PERK_comprehension_perk)) then begin
                                                                                    critter_mod_skill(dude_obj, SKILL_BARTER, LVar0);
                                                                                    display_msg(message_str(SCRIPT_OBJ_DUDE, 175) + LVar0 + message_str(SCRIPT_OBJ_DUDE, 178));
                                                                                end
                                                                                else begin
                                                                                    critter_mod_skill(dude_obj, SKILL_BARTER, LVar1);
                                                                                    display_msg(message_str(SCRIPT_OBJ_DUDE, 175) + LVar1 + message_str(SCRIPT_OBJ_DUDE, 178));
                                                                                end
                                                                                game_time_advance(60 * (60 * 10));
                                                                                gfade_in(10);
                                                                            end
                                                                            else begin
                                                                                display_msg(message_str(SCRIPT_OBJ_DUDE, 203) + message_str(SCRIPT_OBJ_DUDE, 220) + message_str(SCRIPT_OBJ_DUDE, 204));
                                                                                gfade_out(10);
                                                                                game_time_advance(60 * (60 * 10));
                                                                                gfade_in(10);
                                                                            end
                                                                        end
                                                                        else begin
                                                                            if (obj_pid(LVar4) == 794) then begin
                                                                                if (dude_skill(SKILL_GAMBLING) < 300) then begin
                                                                                    LVar0 := random(3, 6);
                                                                                    LVar1 := random(2, 4);
                                                                                    gfade_out(10);
                                                                                    if (has_trait(TRAIT_PERK, dude_obj, PERK_comprehension_perk)) then begin
                                                                                        critter_mod_skill(dude_obj, SKILL_GAMBLING, LVar0);
                                                                                        display_msg(message_str(SCRIPT_OBJ_DUDE, 176) + LVar0 + message_str(SCRIPT_OBJ_DUDE, 178));
                                                                                    end
                                                                                    else begin
                                                                                        critter_mod_skill(dude_obj, SKILL_GAMBLING, LVar1);
                                                                                        display_msg(message_str(SCRIPT_OBJ_DUDE, 176) + LVar1 + message_str(SCRIPT_OBJ_DUDE, 178));
                                                                                    end
                                                                                    game_time_advance(60 * (60 * 10));
                                                                                    gfade_in(10);
                                                                                end
                                                                                else begin
                                                                                    display_msg(message_str(SCRIPT_OBJ_DUDE, 203) + message_str(SCRIPT_OBJ_DUDE, 221) + message_str(SCRIPT_OBJ_DUDE, 204));
                                                                                    gfade_out(10);
                                                                                    game_time_advance(60 * (60 * 10));
                                                                                    gfade_in(10);
                                                                                end
                                                                            end
                                                                            else begin
                                                                                if (obj_pid(LVar4) == 795) then begin
                                                                                    if (dude_skill(SKILL_OUTDOORSMAN) < 300) then begin
                                                                                        LVar0 := random(3, 6);
                                                                                        LVar1 := random(2, 4);
                                                                                        gfade_out(10);
                                                                                        if (has_trait(TRAIT_PERK, dude_obj, PERK_comprehension_perk)) then begin
                                                                                            critter_mod_skill(dude_obj, SKILL_OUTDOORSMAN, LVar0);
                                                                                            display_msg(message_str(SCRIPT_OBJ_DUDE, 177) + LVar0 + message_str(SCRIPT_OBJ_DUDE, 178));
                                                                                        end
                                                                                        else begin
                                                                                            critter_mod_skill(dude_obj, SKILL_OUTDOORSMAN, LVar1);
                                                                                            display_msg(message_str(SCRIPT_OBJ_DUDE, 177) + LVar1 + message_str(SCRIPT_OBJ_DUDE, 178));
                                                                                        end
                                                                                        game_time_advance(60 * (60 * 10));
                                                                                        gfade_in(10);
                                                                                    end
                                                                                    else begin
                                                                                        display_msg(message_str(SCRIPT_OBJ_DUDE, 203) + message_str(SCRIPT_OBJ_DUDE, 222) + message_str(SCRIPT_OBJ_DUDE, 204));
                                                                                        gfade_out(10);
                                                                                        game_time_advance(60 * (60 * 10));
                                                                                        gfade_in(10);
                                                                                    end
                                                                                end
                                                                            end
                                                                        end
                                                                    end
                                                                end
                                                            end
                                                        end
                                                    end
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
            end
        end
        if ((LVar3 == dude_obj) and has_fake_perk("Slaver") and get_sfall_global_int("MM_00001")) then begin
            if (obj_pid(LVar4) == 127) then begin
                if (Validate(LVar2)) then begin
                    if ((critter_state(LVar2) bwand 1) or (critter_state(LVar2) bwand 2) or (critter_state(LVar2) bwand 4) or (critter_state(LVar2) bwand 8)) then begin
                        if (get_critter_stat(LVar2, STAT_gender) == 0) then begin
                            rm_obj_from_inven(LVar3, LVar4);
                            call Delete_Removed_Items(127);
                            set_global_var(GVAR_PLAYER_REPUTATION, global_var(GVAR_PLAYER_REPUTATION) + -45);
                            set_global_var(GVAR_ELDRIDGE_TASK, global_var(GVAR_ELDRIDGE_TASK) + 1);
                            add_obj_to_inven(dude_obj, create_object(557, 0, 0));
                            if ((global_var(GVAR_ELDRIDGE_TASK) == 2) or (global_var(GVAR_ELDRIDGE_TASK) == 3)) then begin
                                critter_add_trait(dude_obj, TRAIT_PERK, PERK_pack_rat_perk, 1);
                            end
                            if ((global_var(GVAR_ELDRIDGE_TASK) == 4) or (global_var(GVAR_ELDRIDGE_TASK) == 5)) then begin
                                critter_add_trait(dude_obj, TRAIT_PERK, PERK_strong_back, 1);
                                critter_rm_trait(dude_obj, TRAIT_PERK, PERK_pack_rat_perk, 1);
                            end
                            if ((global_var(GVAR_ELDRIDGE_TASK) == 6) or (global_var(GVAR_ELDRIDGE_TASK) == 7)) then begin
                                critter_add_trait(dude_obj, TRAIT_PERK, PERK_strong_back, 1);
                                critter_rm_trait(dude_obj, TRAIT_PERK, PERK_pack_rat_perk, 1);
                            end
                            if (global_var(GVAR_ELDRIDGE_TASK) > 7) then begin
                                critter_add_trait(dude_obj, TRAIT_PERK, PERK_pack_rat_perk, 1);
                                critter_add_trait(dude_obj, TRAIT_PERK, PERK_strong_back, 1);
                            end
                            destroy_object(LVar2);
                        end
                        else begin
                            if (get_critter_stat(LVar2, STAT_gender) == 1) then begin
                                rm_obj_from_inven(LVar3, LVar4);
                                call Delete_Removed_Items(127);
                                set_global_var(GVAR_PLAYER_REPUTATION, global_var(GVAR_PLAYER_REPUTATION) + -45);
                                set_global_var(GVAR_ELDRIDGE_TASK, global_var(GVAR_ELDRIDGE_TASK) + 1);
                                add_obj_to_inven(dude_obj, create_object(556, 0, 0));
                                if ((global_var(GVAR_ELDRIDGE_TASK) == 2) or (global_var(GVAR_ELDRIDGE_TASK) == 3)) then begin
                                    critter_add_trait(dude_obj, TRAIT_PERK, PERK_pack_rat_perk, 1);
                                end
                                if ((global_var(GVAR_ELDRIDGE_TASK) == 4) or (global_var(GVAR_ELDRIDGE_TASK) == 5)) then begin
                                    critter_add_trait(dude_obj, TRAIT_PERK, PERK_strong_back, 1);
                                    critter_rm_trait(dude_obj, TRAIT_PERK, PERK_pack_rat_perk, 1);
                                end
                                if ((global_var(GVAR_ELDRIDGE_TASK) == 6) or (global_var(GVAR_ELDRIDGE_TASK) == 7)) then begin
                                    critter_add_trait(dude_obj, TRAIT_PERK, PERK_strong_back, 1);
                                    critter_rm_trait(dude_obj, TRAIT_PERK, PERK_pack_rat_perk, 1);
                                end
                                if (global_var(GVAR_ELDRIDGE_TASK) > 7) then begin
                                    critter_add_trait(dude_obj, TRAIT_PERK, PERK_pack_rat_perk, 1);
                                    critter_add_trait(dude_obj, TRAIT_PERK, PERK_strong_back, 1);
                                end
                                destroy_object(LVar2);
                            end
                        end
                        display_msg("You captured a slave!");
                    end
                end
            end
        end
        if ((LVar3 == dude_obj) and get_sfall_global_int("MM_00001")) then begin
            if (obj_pid(LVar4) == 144) then begin
                if ((obj_pid(LVar2) != 16777376) and (obj_pid(LVar2) != 16777377) and (obj_pid(LVar2) != 16777305) and (obj_pid(LVar2) != 16777313) and (obj_pid(LVar2) != 16777323) and (obj_pid(LVar2) != 16777352) and (obj_pid(LVar2) != 16777368) and (obj_pid(LVar2) != 16777291) and (obj_pid(LVar2) != 16777278) and (obj_pid(LVar2) != 16777379) and (obj_pid(LVar2) != 16777380) and (obj_pid(LVar2) != 16777859) and (obj_pid(LVar2) != 16777558) and (obj_pid(LVar2) != 16777687) and (obj_pid(LVar2) != 16777766) and (obj_pid(LVar2) != 16777762) and (obj_pid(LVar2) != 16777785) and (LVar2 != dude_obj)) then begin
                    if (((obj_pid(LVar2) - 16777216) >= 0) and ((obj_pid(LVar2) - 33554431) < 0)) then begin
                        if ((get_critter_stat(LVar2, STAT_current_hp) < get_critter_stat(LVar2, STAT_max_hp)) <= 0) then begin
                            if (obj_is_carrying_obj_pid(dude_obj, 144) > 0) then begin
                                while (obj_is_carrying_obj_pid(dude_obj, 144) > 0) do begin
                                    LVar5 := obj_carrying_pid_obj(dude_obj, 144);
                                    rm_obj_from_inven(dude_obj, LVar5);
                                    if (tile_contains_obj_pid(0, 1, 144)) then begin
                                        LVar5 := tile_contains_pid_obj(0, 1, 144);
                                        destroy_object(LVar5);
                                    end
                                    LVar6 := LVar6 + 1;
                                end
                                if (LVar6 == 1) then begin
                                    display_msg("CHEATER! SINCE YOU TRIED TO USE AN EXPLOIT, WE HAVE DELETED YOUR SUPER STIMPACK. BET YOU DONT TRY THAT AGAIN! LOL");
                                end
                                else begin
                                    if (LVar6 > 1) then begin
                                        display_msg("CHEATER! SINCE YOU TRIED TO USE AN EXPLOIT, WE HAVE DELETED ALL " + LVar6 + " OF YOUR SUPER STIMPACKS. BET YOU DONT TRY THAT AGAIN! LOL");
                                    end
                                end
                            end
                        end
                    end
                end
            end
        end
    end
    return 0;
    LVar0 := 0;
    LVar1 := 0;
    LVar2 := 0;
    LVar3 := 0;
    LVar4 := 0;
    LVar5 := 0;
    LVar6 := 0;
end

procedure Delete_Removed_Items(variable arg0)
begin
    if (tile_contains_obj_pid(1, 0, arg0)) then begin
        arg0 := tile_contains_pid_obj(1, 0, arg0);
        destroy_object(arg0);
    end
    return 0;
    arg0 := 0;
end

procedure Validate(variable arg0)
begin
    if (((obj_art_fid(arg0) % 512) >= 1) and ((obj_art_fid(arg0) % 512) <= 14) or ((obj_art_fid(arg0) % 512) == 26) or ((obj_art_fid(arg0) % 512) == 30) or ((obj_art_fid(arg0) % 512) == 31) or (((obj_art_fid(arg0) % 512) >= 33) and ((obj_art_fid(arg0) % 512) <= 45)) or ((obj_art_fid(arg0) % 512) == 48) or ((obj_art_fid(arg0) % 512) == 57) or (((obj_art_fid(arg0) % 512) >= 61) and ((obj_art_fid(arg0) % 512) <= 64)) or ((obj_art_fid(arg0) % 512) == 69) or (((obj_art_fid(arg0) % 512) >= 71) and ((obj_art_fid(arg0) % 512) <= 74)) or ((obj_art_fid(arg0) % 512) == 56) or ((obj_art_fid(arg0) % 512) == 77) or ((obj_art_fid(arg0) % 512) == 78) or (((obj_art_fid(arg0) % 512) >= 82) and ((obj_art_fid(arg0) % 512) <= 84)) or ((obj_art_fid(arg0) % 512) == 98) or (((obj_art_fid(arg0) % 512) >= 87) and ((obj_art_fid(arg0) % 512) <= 89)) or (((obj_art_fid(arg0) % 512) >= 91) and ((obj_art_fid(arg0) % 512) <= 96)) or ((obj_art_fid(arg0) % 512) == 112) or ((obj_art_fid(arg0) % 512) == 113) or (((obj_art_fid(arg0) % 512) >= 116) and ((obj_art_fid(arg0) % 512) <= 126)) or ((obj_art_fid(arg0) % 512) == 128) or ((obj_art_fid(arg0) % 512) == 132) or ((obj_art_fid(arg0) % 512) == 133) or ((obj_art_fid(arg0) % 512) == 136) or ((obj_art_fid(arg0) % 512) == 137)) then begin
        return 1;
    end
    return 0;
    return 0;
    arg0 := 0;
end
