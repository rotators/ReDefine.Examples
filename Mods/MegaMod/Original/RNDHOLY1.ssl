variable ProtoOfItemGiven;
variable ValueOfRollCheck := 1;
variable Scenery_Creation;
variable Scenery_Creation_Hex;
variable Scenery_Creation_Count;
variable Temp_Scenery_Creation_Hex;
variable Scenery_Creation_Ptr;
variable How_Many_Party_Members_Are_Injured;
variable How_Many_Party_Members_Armed;
variable PartyHealingItem;
variable trunk_tile;

procedure checkPartyMembersNearDoor;

variable global_temp;
variable dest_tile;
variable step_tile;
variable in_dialog;
variable forced_node;
variable restock_amt;
variable restock_obj;
variable restock_trash;
variable removed_qty;

procedure start;
procedure map_enter_p_proc;
procedure map_update_p_proc;
procedure map_exit_p_proc;
procedure Initial_Inven;
procedure Exit_Grid_Give_Car;
procedure Get_Car_Hex;
procedure Get_Current_Town;

export variable i_arthur_obj;
export variable i_robin_obj;
export variable i_launcelot_obj;
export variable i_galahad_obj;
export variable i_bedemir_obj;
export variable i_vorpal_obj;


procedure checkPartyMembersNearDoor
begin
    if (party_member_obj(16777278) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777278)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16777376) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777376)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16777377) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777377)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16777305) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777305)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16777313) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777313)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16777323) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777323)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16777352) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777352)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16777378) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777378)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16777368) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777368)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16777379) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777379)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16777380) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777380)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16777295) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777295)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16777381) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777381)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16777407) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777407)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16777411) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777411)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16777412) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777412)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16777413) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777413)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16777481) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777481)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16777558) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777558)) <= 5) then begin
            return 1;
        end
    end
    if (party_member_obj(16777600) != 0) then begin
        if (tile_distance_objs(self_obj, party_member_obj(16777600)) <= 5) then begin
            return 1;
        end
    end
    return 0;
end

procedure start
begin
    i_arthur_obj := -1;
    i_robin_obj := -1;
    i_launcelot_obj := -1;
    i_galahad_obj := -1;
    i_bedemir_obj := -1;
    i_vorpal_obj := -1;
end

procedure map_enter_p_proc
begin
    set_global_var(614, 1);
    if ((get_month >= 3) and (get_month < 5)) then begin
        if ((game_time_hour >= 600) and (game_time_hour < (600 + 100))) then begin
            set_light_level(game_time_hour - 600 + 40);
        end
        else begin
            if ((game_time_hour >= (600 + 100)) and (game_time_hour < 1800)) then begin
                set_light_level(100);
            end
            else begin
                if ((game_time_hour >= 1800) and (game_time_hour < (1800 + 100))) then begin
                    set_light_level(100 - (game_time_hour - 1800));
                end
                else begin
                    set_light_level(40);
                end
            end
        end
    end
    else begin
        if ((get_month >= 5) and (get_month < 9)) then begin
            if ((game_time_hour >= 500) and (game_time_hour < (500 + 100))) then begin
                set_light_level(game_time_hour - 500 + 40);
            end
            else begin
                if ((game_time_hour >= (500 + 100)) and (game_time_hour < 1900)) then begin
                    set_light_level(100);
                end
                else begin
                    if ((game_time_hour >= 1900) and (game_time_hour < (1900 + 100))) then begin
                        set_light_level(100 - (game_time_hour - 1900));
                    end
                    else begin
                        set_light_level(40);
                    end
                end
            end
        end
        else begin
            if ((get_month >= 9) and (get_month < 11)) then begin
                if ((game_time_hour >= 600) and (game_time_hour < (600 + 100))) then begin
                    set_light_level(game_time_hour - 600 + 40);
                end
                else begin
                    if ((game_time_hour >= (600 + 100)) and (game_time_hour < 1800)) then begin
                        set_light_level(100);
                    end
                    else begin
                        if ((game_time_hour >= 1800) and (game_time_hour < (1800 + 100))) then begin
                            set_light_level(100 - (game_time_hour - 1800));
                        end
                        else begin
                            set_light_level(40);
                        end
                    end
                end
            end
            else begin
                if ((game_time_hour >= 700) and (game_time_hour < (700 + 100))) then begin
                    set_light_level(game_time_hour - 700 + 40);
                end
                else begin
                    if ((game_time_hour >= (700 + 100)) and (game_time_hour < 1700)) then begin
                        set_light_level(100);
                    end
                    else begin
                        if ((game_time_hour >= 1700) and (game_time_hour < (1700 + 100))) then begin
                            set_light_level(100 - (game_time_hour - 1700));
                        end
                        else begin
                            set_light_level(40);
                        end
                    end
                end
            end
        end
    end
end

procedure map_update_p_proc
begin
    if ((get_month >= 3) and (get_month < 5)) then begin
        if ((game_time_hour >= 600) and (game_time_hour < (600 + 100))) then begin
            set_light_level(game_time_hour - 600 + 40);
        end
        else begin
            if ((game_time_hour >= (600 + 100)) and (game_time_hour < 1800)) then begin
                set_light_level(100);
            end
            else begin
                if ((game_time_hour >= 1800) and (game_time_hour < (1800 + 100))) then begin
                    set_light_level(100 - (game_time_hour - 1800));
                end
                else begin
                    set_light_level(40);
                end
            end
        end
    end
    else begin
        if ((get_month >= 5) and (get_month < 9)) then begin
            if ((game_time_hour >= 500) and (game_time_hour < (500 + 100))) then begin
                set_light_level(game_time_hour - 500 + 40);
            end
            else begin
                if ((game_time_hour >= (500 + 100)) and (game_time_hour < 1900)) then begin
                    set_light_level(100);
                end
                else begin
                    if ((game_time_hour >= 1900) and (game_time_hour < (1900 + 100))) then begin
                        set_light_level(100 - (game_time_hour - 1900));
                    end
                    else begin
                        set_light_level(40);
                    end
                end
            end
        end
        else begin
            if ((get_month >= 9) and (get_month < 11)) then begin
                if ((game_time_hour >= 600) and (game_time_hour < (600 + 100))) then begin
                    set_light_level(game_time_hour - 600 + 40);
                end
                else begin
                    if ((game_time_hour >= (600 + 100)) and (game_time_hour < 1800)) then begin
                        set_light_level(100);
                    end
                    else begin
                        if ((game_time_hour >= 1800) and (game_time_hour < (1800 + 100))) then begin
                            set_light_level(100 - (game_time_hour - 1800));
                        end
                        else begin
                            set_light_level(40);
                        end
                    end
                end
            end
            else begin
                if ((game_time_hour >= 700) and (game_time_hour < (700 + 100))) then begin
                    set_light_level(game_time_hour - 700 + 40);
                end
                else begin
                    if ((game_time_hour >= (700 + 100)) and (game_time_hour < 1700)) then begin
                        set_light_level(100);
                    end
                    else begin
                        if ((game_time_hour >= 1700) and (game_time_hour < (1700 + 100))) then begin
                            set_light_level(100 - (game_time_hour - 1700));
                        end
                        else begin
                            set_light_level(40);
                        end
                    end
                end
            end
        end
    end
end

procedure map_exit_p_proc
begin
    call Exit_Grid_Give_Car();
end

procedure Initial_Inven
begin
end

procedure Exit_Grid_Give_Car
begin
    if ((global_var(633) == Get_Car_Hex()) and (global_var(18) != 0) and (metarule(30, 0) == Get_Current_Town()) and (global_var(1176) == 0) and (global_var(1645) == cur_map_index)) then begin
        if ((Get_Current_Town() >= 26) and (Get_Current_Town() <= 29) or (Get_Current_Town() == 47) or ((Get_Current_Town() >= 31) and (Get_Current_Town() <= 43)) or (Get_Current_Town() == 55)) then begin
            while (global_var(633) != -1) do begin
                set_global_var(633, -1);
            end
            while (global_var(1645) != -1) do begin
                set_global_var(1645, -1);
            end
            while (global_var(1646) != -1) do begin
                set_global_var(1646, -1);
            end
            while (global_var(1647) != -1) do begin
                set_global_var(1647, -1);
            end
            while (global_var(1648) != 1) do begin
                set_global_var(1648, 1);
            end
            metarule(31, 0);
        end
    end
end

procedure Get_Car_Hex
begin
    if (cur_map_index == 0) then begin
        return 19094;
    end
    else begin
        if (cur_map_index == 242) then begin
            return 22713;
        end
        else begin
            if (cur_map_index == 127) then begin
                return 27312;
            end
            else begin
                if (cur_map_index == 232) then begin
                    return 19144;
                end
                else begin
                    if (cur_map_index == 6) then begin
                        if ((global_var(1648) == 1) and (global_var(18) != 0)) then begin
                            return 11687;
                        end
                        else begin
                            if ((global_var(18) == 0) or ((global_var(1648) == 0) and (global_var(18) != 0))) then begin
                                return 24548;
                            end
                        end
                    end
                    else begin
                        if (cur_map_index == 7) then begin
                            return 29103;
                        end
                        else begin
                            if (cur_map_index == 155) then begin
                                return 22321;
                            end
                            else begin
                                if (cur_map_index == 5) then begin
                                    return 27312;
                                end
                                else begin
                                    if (cur_map_index == 127) then begin
                                        return 27313;
                                    end
                                    else begin
                                        if (cur_map_index == 157) then begin
                                            return 24916;
                                        end
                                        else begin
                                            if (cur_map_index == 78) then begin
                                                return 17752;
                                            end
                                            else begin
                                                if (cur_map_index == 220) then begin
                                                    return 26097;
                                                end
                                                else begin
                                                    if (cur_map_index == 27) then begin
                                                        return 28699;
                                                    end
                                                    else begin
                                                        if (cur_map_index == 151) then begin
                                                            return 18242;
                                                        end
                                                        else begin
                                                            if (cur_map_index == 31) then begin
                                                                return 25709;
                                                            end
                                                            else begin
                                                                if (cur_map_index == 24) then begin
                                                                    return 23951;
                                                                end
                                                                else begin
                                                                    if (cur_map_index == 160) then begin
                                                                        return 9483;
                                                                    end
                                                                    else begin
                                                                        if (cur_map_index == 9) then begin
                                                                            return 25669;
                                                                        end
                                                                        else begin
                                                                            if (cur_map_index == 12) then begin
                                                                                return 19943;
                                                                            end
                                                                            else begin
                                                                                if (cur_map_index == 195) then begin
                                                                                    return 22677;
                                                                                end
                                                                                else begin
                                                                                    if (cur_map_index == 197) then begin
                                                                                        return 30696;
                                                                                    end
                                                                                    else begin
                                                                                        if (cur_map_index == 51) then begin
                                                                                            return 22146;
                                                                                        end
                                                                                        else begin
                                                                                            if (cur_map_index == 18) then begin
                                                                                                return 24531;
                                                                                            end
                                                                                            else begin
                                                                                                if (cur_map_index == 109) then begin
                                                                                                    return 28888;
                                                                                                end
                                                                                                else begin
                                                                                                    if (cur_map_index == 46) then begin
                                                                                                        return 23078;
                                                                                                    end
                                                                                                    else begin
                                                                                                        if (cur_map_index == 54) then begin
                                                                                                            return 25321;
                                                                                                        end
                                                                                                        else begin
                                                                                                            if (cur_map_index == 55) then begin
                                                                                                                return 9509;
                                                                                                            end
                                                                                                            else begin
                                                                                                                if (cur_map_index == 56) then begin
                                                                                                                    return 30894;
                                                                                                                end
                                                                                                                else begin
                                                                                                                    if (cur_map_index == 57) then begin
                                                                                                                        return 16068;
                                                                                                                    end
                                                                                                                    else begin
                                                                                                                        if (cur_map_index == 58) then begin
                                                                                                                            return 18699;
                                                                                                                        end
                                                                                                                        else begin
                                                                                                                            if (cur_map_index == 59) then begin
                                                                                                                                return 22500;
                                                                                                                            end
                                                                                                                            else begin
                                                                                                                                if (cur_map_index == 60) then begin
                                                                                                                                    return 26506;
                                                                                                                                end
                                                                                                                                else begin
                                                                                                                                    if (cur_map_index == 92) then begin
                                                                                                                                        if (elevation(dude_obj) == 0) then begin
                                                                                                                                            return 25304;
                                                                                                                                        end
                                                                                                                                        else begin
                                                                                                                                            if (elevation(dude_obj) == 1) then begin
                                                                                                                                                return 21298;
                                                                                                                                            end
                                                                                                                                        end
                                                                                                                                    end
                                                                                                                                    else begin
                                                                                                                                        if (cur_map_index == 64) then begin
                                                                                                                                            return 18650;
                                                                                                                                        end
                                                                                                                                        else begin
                                                                                                                                            if (cur_map_index == 158) then begin
                                                                                                                                                return 19506;
                                                                                                                                            end
                                                                                                                                            else begin
                                                                                                                                                if (cur_map_index == 162) then begin
                                                                                                                                                    return 26515;
                                                                                                                                                end
                                                                                                                                                else begin
                                                                                                                                                    if (cur_map_index == 137) then begin
                                                                                                                                                        return 31699;
                                                                                                                                                    end
                                                                                                                                                    else begin
                                                                                                                                                        if (cur_map_index == 254) then begin
                                                                                                                                                            return 21895;
                                                                                                                                                        end
                                                                                                                                                        else begin
                                                                                                                                                            if (cur_map_index == 167) then begin
                                                                                                                                                                return 22737;
                                                                                                                                                            end
                                                                                                                                                            else begin
                                                                                                                                                                if (cur_map_index == 163) then begin
                                                                                                                                                                    return 29487;
                                                                                                                                                                end
                                                                                                                                                                else begin
                                                                                                                                                                    if (cur_map_index == 156) then begin
                                                                                                                                                                        return 23132;
                                                                                                                                                                    end
                                                                                                                                                                    else begin
                                                                                                                                                                        if (cur_map_index == 41) then begin
                                                                                                                                                                            return 26354;
                                                                                                                                                                        end
                                                                                                                                                                        else begin
                                                                                                                                                                            if (cur_map_index == 218) then begin
                                                                                                                                                                                return 19105;
                                                                                                                                                                            end
                                                                                                                                                                            else begin
                                                                                                                                                                                if (cur_map_index == 37) then begin
                                                                                                                                                                                    if ((global_var(475) == 2) and global_var(172)) then begin
                                                                                                                                                                                        return 29718;
                                                                                                                                                                                    end
                                                                                                                                                                                    else begin
                                                                                                                                                                                        return 26932;
                                                                                                                                                                                    end
                                                                                                                                                                                end
                                                                                                                                                                                else begin
                                                                                                                                                                                    if (cur_map_index == 15) then begin
                                                                                                                                                                                        return 28899;
                                                                                                                                                                                    end
                                                                                                                                                                                    else begin
                                                                                                                                                                                        if (cur_map_index == 202) then begin
                                                                                                                                                                                            return 18697;
                                                                                                                                                                                        end
                                                                                                                                                                                        else begin
                                                                                                                                                                                            if (cur_map_index == 224) then begin
                                                                                                                                                                                                return 26298;
                                                                                                                                                                                            end
                                                                                                                                                                                            else begin
                                                                                                                                                                                                if (cur_map_index == 238) then begin
                                                                                                                                                                                                    return 28313;
                                                                                                                                                                                                end
                                                                                                                                                                                                else begin
                                                                                                                                                                                                    if (cur_map_index == 249) then begin
                                                                                                                                                                                                        return 18518;
                                                                                                                                                                                                    end
                                                                                                                                                                                                    else begin
                                                                                                                                                                                                        if (cur_map_index == 252) then begin
                                                                                                                                                                                                            return 23754;
                                                                                                                                                                                                        end
                                                                                                                                                                                                        else begin
                                                                                                                                                                                                            if (cur_map_index == 94) then begin
                                                                                                                                                                                                                return 18909;
                                                                                                                                                                                                            end
                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                if (cur_map_index == 95) then begin
                                                                                                                                                                                                                    return 18909;
                                                                                                                                                                                                                end
                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                    if (cur_map_index == 241) then begin
                                                                                                                                                                                                                        return 25104;
                                                                                                                                                                                                                    end
                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                        if (cur_map_index == 164) then begin
                                                                                                                                                                                                                            return 17890;
                                                                                                                                                                                                                        end
                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                            if (cur_map_index == 159) then begin
                                                                                                                                                                                                                                return 26503;
                                                                                                                                                                                                                            end
                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                if (cur_map_index == 98) then begin
                                                                                                                                                                                                                                    return 22726;
                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                    if (cur_map_index == 101) then begin
                                                                                                                                                                                                                                        return 18095;
                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                        if (cur_map_index == 102) then begin
                                                                                                                                                                                                                                            return 23903;
                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                            if (cur_map_index == 108) then begin
                                                                                                                                                                                                                                                return 18889;
                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                if (cur_map_index == 105) then begin
                                                                                                                                                                                                                                                    return 18904;
                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                    if (cur_map_index == 103) then begin
                                                                                                                                                                                                                                                        return 21936;
                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                        if (cur_map_index == 104) then begin
                                                                                                                                                                                                                                                            return 20880;
                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                            if (cur_map_index == 216) then begin
                                                                                                                                                                                                                                                                return 19898;
                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                if (cur_map_index == 107) then begin
                                                                                                                                                                                                                                                                    return 23125;
                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                    if (cur_map_index == 99) then begin
                                                                                                                                                                                                                                                                        return 20702;
                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                        if (cur_map_index == 97) then begin
                                                                                                                                                                                                                                                                            return 18724;
                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                            if (cur_map_index == 106) then begin
                                                                                                                                                                                                                                                                                return 22101;
                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                if (cur_map_index == 100) then begin
                                                                                                                                                                                                                                                                                    return 19095;
                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                    if (cur_map_index == 96) then begin
                                                                                                                                                                                                                                                                                        return 23109;
                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                        if (cur_map_index == 69) then begin
                                                                                                                                                                                                                                                                                            return 18909;
                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                            if (cur_map_index == 70) then begin
                                                                                                                                                                                                                                                                                                return 26508;
                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                                if (cur_map_index == 71) then begin
                                                                                                                                                                                                                                                                                                    return 24706;
                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                                    if (cur_map_index == 72) then begin
                                                                                                                                                                                                                                                                                                        return 24915;
                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                                        if (cur_map_index == 73) then begin
                                                                                                                                                                                                                                                                                                            return 27512;
                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                                            if (cur_map_index == 80) then begin
                                                                                                                                                                                                                                                                                                                return 26292;
                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                                                if (cur_map_index == 149) then begin
                                                                                                                                                                                                                                                                                                                    return 25523;
                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                                                    if (cur_map_index == 150) then begin
                                                                                                                                                                                                                                                                                                                        return 27318;
                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                                                        if (cur_map_index == 76) then begin
                                                                                                                                                                                                                                                                                                                            return 18086;
                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                                                            if (cur_map_index == 77) then begin
                                                                                                                                                                                                                                                                                                                                return 19089;
                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                                                                if (cur_map_index == 85) then begin
                                                                                                                                                                                                                                                                                                                                    return 19279;
                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                                                                    if (cur_map_index == 86) then begin
                                                                                                                                                                                                                                                                                                                                        return 19278;
                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                                                                        if (cur_map_index == 87) then begin
                                                                                                                                                                                                                                                                                                                                            return 23500;
                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                                                                            if (cur_map_index == 88) then begin
                                                                                                                                                                                                                                                                                                                                                return 22291;
                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                                                                                if (cur_map_index == 89) then begin
                                                                                                                                                                                                                                                                                                                                                    return 16518;
                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                                                                                    if (cur_map_index == 90) then begin
                                                                                                                                                                                                                                                                                                                                                        return 23718;
                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                                                                                        if (cur_map_index == 91) then begin
                                                                                                                                                                                                                                                                                                                                                            return 21107;
                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                                                                                            if (cur_map_index == 110) then begin
                                                                                                                                                                                                                                                                                                                                                                return 17919;
                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                                                                                                if (cur_map_index == 111) then begin
                                                                                                                                                                                                                                                                                                                                                                    return 20079;
                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                                                                                                    if (cur_map_index == 112) then begin
                                                                                                                                                                                                                                                                                                                                                                        return 25515;
                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                                                                                                        if (cur_map_index == 149) then begin
                                                                                                                                                                                                                                                                                                                                                                            return 19096;
                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                                                                                                            if (cur_map_index == 1) then begin
                                                                                                                                                                                                                                                                                                                                                                                return 19094;
                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                                                                                                                if (cur_map_index == 2) then begin
                                                                                                                                                                                                                                                                                                                                                                                    return 18894;
                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                                                                                                                    if (cur_map_index == 81) then begin
                                                                                                                                                                                                                                                                                                                                                                                        return 19718;
                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                                                                                                                        if (cur_map_index == 82) then begin
                                                                                                                                                                                                                                                                                                                                                                                            return 24112;
                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                                                                                                                            if (cur_map_index == 83) then begin
                                                                                                                                                                                                                                                                                                                                                                                                return 18914;
                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                                                                                                                                if (cur_map_index == 84) then begin
                                                                                                                                                                                                                                                                                                                                                                                                    return 24525;
                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                                                                                                                                    if (cur_map_index == 113) then begin
                                                                                                                                                                                                                                                                                                                                                                                                        return 17890;
                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                                                                                                                                        if (cur_map_index == 114) then begin
                                                                                                                                                                                                                                                                                                                                                                                                            return 22880;
                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                                                                                                                                            if (cur_map_index == 115) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                return 22880;
                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                                                                                                                                                if (cur_map_index == 116) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                    return 20692;
                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                                                                                                                                                    if (cur_map_index == 117) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                        return 21308;
                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                                                                                                                                                        if (cur_map_index == 68) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                            return 12693;
                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                                                                                                                                                            if (cur_map_index == 125) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                return 9898;
                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                if (cur_map_index == 141) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                    return 23542;
                                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                    if (cur_map_index == 142) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                        return 28089;
                                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                        if (cur_map_index == 143) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                            return 20464;
                                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                            if (cur_map_index == 144) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                return 29496;
                                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                if (cur_map_index == 145) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                    return 19535;
                                                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                    if (cur_map_index == 146) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                        return 21702;
                                                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                        if (cur_map_index == 119) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                            return 21681;
                                                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                            if (cur_map_index == 120) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                return 19078;
                                                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                if (cur_map_index == 74) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    return 17875;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if (cur_map_index == 75) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        return 17876;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if (cur_map_index == 121) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            return 19478;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            if (cur_map_index == 122) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                return 19099;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                if (cur_map_index == 123) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    return 20678;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if (cur_map_index == 124) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        return 20073;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if (cur_map_index == 53) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            return 19100;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            return -1;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                end
                                                                                                                                                                                                                            end
                                                                                                                                                                                                                        end
                                                                                                                                                                                                                    end
                                                                                                                                                                                                                end
                                                                                                                                                                                                            end
                                                                                                                                                                                                        end
                                                                                                                                                                                                    end
                                                                                                                                                                                                end
                                                                                                                                                                                            end
                                                                                                                                                                                        end
                                                                                                                                                                                    end
                                                                                                                                                                                end
                                                                                                                                                                            end
                                                                                                                                                                        end
                                                                                                                                                                    end
                                                                                                                                                                end
                                                                                                                                                            end
                                                                                                                                                        end
                                                                                                                                                    end
                                                                                                                                                end
                                                                                                                                            end
                                                                                                                                        end
                                                                                                                                    end
                                                                                                                                end
                                                                                                                            end
                                                                                                                        end
                                                                                                                    end
                                                                                                                end
                                                                                                            end
                                                                                                        end
                                                                                                    end
                                                                                                end
                                                                                            end
                                                                                        end
                                                                                    end
                                                                                end
                                                                            end
                                                                        end
                                                                    end
                                                                end
                                                            end
                                                        end
                                                    end
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
            end
        end
    end
end

procedure Get_Current_Town
begin
    if (cur_map_index == 127) then begin
        return 22;
    end
    else begin
        if (cur_map_index == 232) then begin
            return 78;
        end
        else begin
            if (cur_map_index == 6) then begin
                return 1;
            end
            else begin
                if (cur_map_index == 7) then begin
                    return 1;
                end
                else begin
                    if (cur_map_index == 155) then begin
                        return 52;
                    end
                    else begin
                        if (cur_map_index == 5) then begin
                            return 0;
                        end
                        else begin
                            if (cur_map_index == 127) then begin
                                return 0;
                            end
                            else begin
                                if (cur_map_index == 157) then begin
                                    return 51;
                                end
                                else begin
                                    if (cur_map_index == 78) then begin
                                        return 6;
                                    end
                                    else begin
                                        if (cur_map_index == 220) then begin
                                            return 73;
                                        end
                                        else begin
                                            if (cur_map_index == 27) then begin
                                                return 8;
                                            end
                                            else begin
                                                if (cur_map_index == 151) then begin
                                                    return 49;
                                                end
                                                else begin
                                                    if (cur_map_index == 31) then begin
                                                        return 5;
                                                    end
                                                    else begin
                                                        if (cur_map_index == 24) then begin
                                                            return 20;
                                                        end
                                                        else begin
                                                            if (cur_map_index == 160) then begin
                                                                return 17;
                                                            end
                                                            else begin
                                                                if (cur_map_index == 9) then begin
                                                                    return 2;
                                                                end
                                                                else begin
                                                                    if (cur_map_index == 12) then begin
                                                                        return 23;
                                                                    end
                                                                    else begin
                                                                        if (cur_map_index == 195) then begin
                                                                            return 67;
                                                                        end
                                                                        else begin
                                                                            if (cur_map_index == 197) then begin
                                                                                return 68;
                                                                            end
                                                                            else begin
                                                                                if (cur_map_index == 51) then begin
                                                                                    return 12;
                                                                                end
                                                                                else begin
                                                                                    if (cur_map_index == 18) then begin
                                                                                        return 3;
                                                                                    end
                                                                                    else begin
                                                                                        if (cur_map_index == 46) then begin
                                                                                            return 10;
                                                                                        end
                                                                                        else begin
                                                                                            if (cur_map_index == 54) then begin
                                                                                                return 7;
                                                                                            end
                                                                                            else begin
                                                                                                if (cur_map_index == 55) then begin
                                                                                                    return 7;
                                                                                                end
                                                                                                else begin
                                                                                                    if (cur_map_index == 56) then begin
                                                                                                        return 7;
                                                                                                    end
                                                                                                    else begin
                                                                                                        if (cur_map_index == 57) then begin
                                                                                                            return 7;
                                                                                                        end
                                                                                                        else begin
                                                                                                            if (cur_map_index == 58) then begin
                                                                                                                return 7;
                                                                                                            end
                                                                                                            else begin
                                                                                                                if (cur_map_index == 59) then begin
                                                                                                                    return 30;
                                                                                                                end
                                                                                                                else begin
                                                                                                                    if (cur_map_index == 60) then begin
                                                                                                                        return 48;
                                                                                                                    end
                                                                                                                    else begin
                                                                                                                        if (cur_map_index == 92) then begin
                                                                                                                            return 25;
                                                                                                                        end
                                                                                                                        else begin
                                                                                                                            if (cur_map_index == 64) then begin
                                                                                                                                return 13;
                                                                                                                            end
                                                                                                                            else begin
                                                                                                                                if (cur_map_index == 158) then begin
                                                                                                                                    return 18;
                                                                                                                                end
                                                                                                                                else begin
                                                                                                                                    if (cur_map_index == 162) then begin
                                                                                                                                        return 53;
                                                                                                                                    end
                                                                                                                                    else begin
                                                                                                                                        if (cur_map_index == 137) then begin
                                                                                                                                            return 14;
                                                                                                                                        end
                                                                                                                                        else begin
                                                                                                                                            if (cur_map_index == 254) then begin
                                                                                                                                                return 87;
                                                                                                                                            end
                                                                                                                                            else begin
                                                                                                                                                if (cur_map_index == 167) then begin
                                                                                                                                                    return 58;
                                                                                                                                                end
                                                                                                                                                else begin
                                                                                                                                                    if (cur_map_index == 163) then begin
                                                                                                                                                        return 54;
                                                                                                                                                    end
                                                                                                                                                    else begin
                                                                                                                                                        if (cur_map_index == 156) then begin
                                                                                                                                                            return 50;
                                                                                                                                                        end
                                                                                                                                                        else begin
                                                                                                                                                            if (cur_map_index == 41) then begin
                                                                                                                                                                return 11;
                                                                                                                                                            end
                                                                                                                                                            else begin
                                                                                                                                                                if (cur_map_index == 218) then begin
                                                                                                                                                                    return 72;
                                                                                                                                                                end
                                                                                                                                                                else begin
                                                                                                                                                                    if (cur_map_index == 37) then begin
                                                                                                                                                                        return 9;
                                                                                                                                                                    end
                                                                                                                                                                    else begin
                                                                                                                                                                        if (cur_map_index == 15) then begin
                                                                                                                                                                            return 4;
                                                                                                                                                                        end
                                                                                                                                                                        else begin
                                                                                                                                                                            if (cur_map_index == 202) then begin
                                                                                                                                                                                return 56;
                                                                                                                                                                            end
                                                                                                                                                                            else begin
                                                                                                                                                                                if (cur_map_index == 224) then begin
                                                                                                                                                                                    return 75;
                                                                                                                                                                                end
                                                                                                                                                                                else begin
                                                                                                                                                                                    if (cur_map_index == 238) then begin
                                                                                                                                                                                        return 81;
                                                                                                                                                                                    end
                                                                                                                                                                                    else begin
                                                                                                                                                                                        if (cur_map_index == 242) then begin
                                                                                                                                                                                            return 83;
                                                                                                                                                                                        end
                                                                                                                                                                                        else begin
                                                                                                                                                                                            if (cur_map_index == 109) then begin
                                                                                                                                                                                                return 15;
                                                                                                                                                                                            end
                                                                                                                                                                                            else begin
                                                                                                                                                                                                if (cur_map_index == 249) then begin
                                                                                                                                                                                                    return 89;
                                                                                                                                                                                                end
                                                                                                                                                                                                else begin
                                                                                                                                                                                                    if (cur_map_index == 252) then begin
                                                                                                                                                                                                        return 88;
                                                                                                                                                                                                    end
                                                                                                                                                                                                    else begin
                                                                                                                                                                                                        if (cur_map_index == 94) then begin
                                                                                                                                                                                                            return 44;
                                                                                                                                                                                                        end
                                                                                                                                                                                                        else begin
                                                                                                                                                                                                            if (cur_map_index == 95) then begin
                                                                                                                                                                                                                return 44;
                                                                                                                                                                                                            end
                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                if (cur_map_index == 241) then begin
                                                                                                                                                                                                                    return 82;
                                                                                                                                                                                                                end
                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                    if (cur_map_index == 53) then begin
                                                                                                                                                                                                                        return 21;
                                                                                                                                                                                                                    end
                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                        if (cur_map_index == 164) then begin
                                                                                                                                                                                                                            return 55;
                                                                                                                                                                                                                        end
                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                            if (cur_map_index == 159) then begin
                                                                                                                                                                                                                                return 19;
                                                                                                                                                                                                                            end
                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                if (cur_map_index == 98) then begin
                                                                                                                                                                                                                                    return 33;
                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                    if (cur_map_index == 101) then begin
                                                                                                                                                                                                                                        return 36;
                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                        if (cur_map_index == 102) then begin
                                                                                                                                                                                                                                            return 37;
                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                            if (cur_map_index == 108) then begin
                                                                                                                                                                                                                                                return 43;
                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                if (cur_map_index == 105) then begin
                                                                                                                                                                                                                                                    return 40;
                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                    if (cur_map_index == 103) then begin
                                                                                                                                                                                                                                                        return 38;
                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                        if (cur_map_index == 104) then begin
                                                                                                                                                                                                                                                            return 39;
                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                            if (cur_map_index == 216) then begin
                                                                                                                                                                                                                                                                return 71;
                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                if (cur_map_index == 107) then begin
                                                                                                                                                                                                                                                                    return 42;
                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                    if (cur_map_index == 99) then begin
                                                                                                                                                                                                                                                                        return 34;
                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                        if (cur_map_index == 97) then begin
                                                                                                                                                                                                                                                                            return 32;
                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                            if (cur_map_index == 106) then begin
                                                                                                                                                                                                                                                                                return 41;
                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                if (cur_map_index == 100) then begin
                                                                                                                                                                                                                                                                                    return 35;
                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                    if (cur_map_index == 96) then begin
                                                                                                                                                                                                                                                                                        return 31;
                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                        if (cur_map_index == 69) then begin
                                                                                                                                                                                                                                                                                            return 27;
                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                            if (cur_map_index == 70) then begin
                                                                                                                                                                                                                                                                                                return 27;
                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                                if (cur_map_index == 71) then begin
                                                                                                                                                                                                                                                                                                    return 27;
                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                                    if (cur_map_index == 72) then begin
                                                                                                                                                                                                                                                                                                        return 27;
                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                                        if (cur_map_index == 73) then begin
                                                                                                                                                                                                                                                                                                            return 27;
                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                                            if (cur_map_index == 80) then begin
                                                                                                                                                                                                                                                                                                                return 27;
                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                                                if (cur_map_index == 149) then begin
                                                                                                                                                                                                                                                                                                                    return 47;
                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                                                    if (cur_map_index == 150) then begin
                                                                                                                                                                                                                                                                                                                        return 47;
                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                                                        if (cur_map_index == 76) then begin
                                                                                                                                                                                                                                                                                                                            return 29;
                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                                                            if (cur_map_index == 77) then begin
                                                                                                                                                                                                                                                                                                                                return 29;
                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                                                                if (cur_map_index == 85) then begin
                                                                                                                                                                                                                                                                                                                                    return 29;
                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                                                                    if (cur_map_index == 86) then begin
                                                                                                                                                                                                                                                                                                                                        return 29;
                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                                                                        if (cur_map_index == 87) then begin
                                                                                                                                                                                                                                                                                                                                            return 29;
                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                                                                            if (cur_map_index == 88) then begin
                                                                                                                                                                                                                                                                                                                                                return 29;
                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                                                                                if (cur_map_index == 89) then begin
                                                                                                                                                                                                                                                                                                                                                    return 29;
                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                                                                                    if (cur_map_index == 90) then begin
                                                                                                                                                                                                                                                                                                                                                        return 29;
                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                                                                                        if (cur_map_index == 91) then begin
                                                                                                                                                                                                                                                                                                                                                            return 29;
                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                                                                                            if (cur_map_index == 110) then begin
                                                                                                                                                                                                                                                                                                                                                                return 29;
                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                                                                                                if (cur_map_index == 111) then begin
                                                                                                                                                                                                                                                                                                                                                                    return 47;
                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                                                                                                    if (cur_map_index == 112) then begin
                                                                                                                                                                                                                                                                                                                                                                        return 47;
                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                                                                                                        if (cur_map_index == 149) then begin
                                                                                                                                                                                                                                                                                                                                                                            return 47;
                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                                                                                                            if (cur_map_index == 1) then begin
                                                                                                                                                                                                                                                                                                                                                                                return 26;
                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                                                                                                                if (cur_map_index == 2) then begin
                                                                                                                                                                                                                                                                                                                                                                                    return 26;
                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                                                                                                                    if (cur_map_index == 81) then begin
                                                                                                                                                                                                                                                                                                                                                                                        return 26;
                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                                                                                                                        if (cur_map_index == 82) then begin
                                                                                                                                                                                                                                                                                                                                                                                            return 26;
                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                                                                                                                            if (cur_map_index == 83) then begin
                                                                                                                                                                                                                                                                                                                                                                                                return 26;
                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                                                                                                                                if (cur_map_index == 84) then begin
                                                                                                                                                                                                                                                                                                                                                                                                    return 26;
                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                                                                                                                                    if (cur_map_index == 113) then begin
                                                                                                                                                                                                                                                                                                                                                                                                        return 26;
                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                                                                                                                                        if (cur_map_index == 114) then begin
                                                                                                                                                                                                                                                                                                                                                                                                            return 26;
                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                                                                                                                                            if (cur_map_index == 115) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                return 26;
                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                                                                                                                                                if (cur_map_index == 116) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                    return 47;
                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                                                                                                                                                    if (cur_map_index == 117) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                        return 47;
                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                                                                                                                                                        if (cur_map_index == 68) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                            return 28;
                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                                                                                                                                                            if (cur_map_index == 125) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                return 28;
                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                if (cur_map_index == 141) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                    return 28;
                                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                    if (cur_map_index == 142) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                        return 28;
                                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                        if (cur_map_index == 143) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                            return 28;
                                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                            if (cur_map_index == 144) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                return 28;
                                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                if (cur_map_index == 145) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                    return 28;
                                                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                    if (cur_map_index == 146) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                        return 28;
                                                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                        if (cur_map_index == 119) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                            return 45;
                                                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                            if (cur_map_index == 120) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                return 46;
                                                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                if (cur_map_index == 74) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    return 27;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if (cur_map_index == 75) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        return 27;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if (cur_map_index == 121) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            return 27;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            if (cur_map_index == 122) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                return 27;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                if (cur_map_index == 123) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    return 47;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if (cur_map_index == 124) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        return 47;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if (cur_map_index == 53) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            return 21;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            if (cur_map_index == 0) then begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                return 26;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            else begin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                return -1;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                end
                                                                                                                                                                                                                            end
                                                                                                                                                                                                                        end
                                                                                                                                                                                                                    end
                                                                                                                                                                                                                end
                                                                                                                                                                                                            end
                                                                                                                                                                                                        end
                                                                                                                                                                                                    end
                                                                                                                                                                                                end
                                                                                                                                                                                            end
                                                                                                                                                                                        end
                                                                                                                                                                                    end
                                                                                                                                                                                end
                                                                                                                                                                            end
                                                                                                                                                                        end
                                                                                                                                                                    end
                                                                                                                                                                end
                                                                                                                                                            end
                                                                                                                                                        end
                                                                                                                                                    end
                                                                                                                                                end
                                                                                                                                            end
                                                                                                                                        end
                                                                                                                                    end
                                                                                                                                end
                                                                                                                            end
                                                                                                                        end
                                                                                                                    end
                                                                                                                end
                                                                                                            end
                                                                                                        end
                                                                                                    end
                                                                                                end
                                                                                            end
                                                                                        end
                                                                                    end
                                                                                end
                                                                            end
                                                                        end
                                                                    end
                                                                end
                                                            end
                                                        end
                                                    end
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
            end
        end
    end
end

